/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={1075:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,s),!0;case 6:return u.fn.call(u.context,t,n,i,s,o),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,i);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&l.push(a[c]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},1658:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.map=t.array=t.rustEnum=t.str=t.vecU8=t.tagged=t.vec=t.bool=t.option=t.publicKey=t.i256=t.u256=t.i128=t.u128=t.i64=t.u64=t.struct=t.f64=t.f32=t.i32=t.u32=t.i16=t.u16=t.i8=t.u8=void 0;const i=r(2828),s=r(591),o=n(r(9404));var a=r(2828);Object.defineProperty(t,"u8",{enumerable:!0,get:function(){return a.u8}}),Object.defineProperty(t,"i8",{enumerable:!0,get:function(){return a.s8}}),Object.defineProperty(t,"u16",{enumerable:!0,get:function(){return a.u16}}),Object.defineProperty(t,"i16",{enumerable:!0,get:function(){return a.s16}}),Object.defineProperty(t,"u32",{enumerable:!0,get:function(){return a.u32}}),Object.defineProperty(t,"i32",{enumerable:!0,get:function(){return a.s32}}),Object.defineProperty(t,"f32",{enumerable:!0,get:function(){return a.f32}}),Object.defineProperty(t,"f64",{enumerable:!0,get:function(){return a.f64}}),Object.defineProperty(t,"struct",{enumerable:!0,get:function(){return a.struct}});class c extends i.Layout{constructor(e,t,r){super(e,r),this.blob=(0,i.blob)(e),this.signed=t}decode(e,t=0){const r=new o.default(this.blob.decode(e,t),10,"le");return this.signed?r.fromTwos(8*this.span).clone():r}encode(e,t,r=0){return this.signed&&(e=e.toTwos(8*this.span)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),t,r)}}function l(e){return new c(8,!1,e)}t.u64=l,t.i64=function(e){return new c(8,!0,e)},t.u128=function(e){return new c(16,!1,e)},t.i128=function(e){return new c(16,!0,e)},t.u256=function(e){return new c(32,!1,e)},t.i256=function(e){return new c(32,!0,e)};class u extends i.Layout{constructor(e,t,r,n){super(e.span,n),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}}t.publicKey=function(e){return new u((0,i.blob)(32),(e=>new s.PublicKey(e)),(e=>e.toBuffer()),e)};class h extends i.Layout{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(0,i.u8)()}encode(e,t,r=0){return null==e?this.discriminator.encode(0,t,r):(this.discriminator.encode(1,t,r),this.layout.encode(e,t,r+1)+1)}decode(e,t=0){const r=this.discriminator.decode(e,t);if(0===r)return null;if(1===r)return this.layout.decode(e,t+1);throw new Error("Invalid option "+this.property)}getSpan(e,t=0){const r=this.discriminator.decode(e,t);if(0===r)return 1;if(1===r)return this.layout.getSpan(e,t+1)+1;throw new Error("Invalid option "+this.property)}}function d(e){if(0===e)return!1;if(1===e)return!0;throw new Error("Invalid bool: "+e)}function f(e){return e?1:0}function p(e){const t=(0,i.u32)("length"),r=(0,i.struct)([t,(0,i.blob)((0,i.offset)(t,-t.span),"data")]);return new u(r,(({data:e})=>e),(e=>({data:e})),e)}t.option=function(e,t){return new h(e,t)},t.bool=function(e){return new u((0,i.u8)(),d,f,e)},t.vec=function(e,t){const r=(0,i.u32)("length"),n=(0,i.struct)([r,(0,i.seq)(e,(0,i.offset)(r,-r.span),"values")]);return new u(n,(({values:e})=>e),(e=>({values:e})),t)},t.tagged=function(e,t,r){const n=(0,i.struct)([l("tag"),t.replicate("data")]);return new u(n,(function({tag:t,data:r}){if(!t.eq(e))throw new Error("Invalid tag, expected: "+e.toString("hex")+", got: "+t.toString("hex"));return r}),(t=>({tag:e,data:t})),r)},t.vecU8=p,t.str=function(e){return new u(p(),(e=>e.toString("utf-8")),(e=>Buffer.from(e,"utf-8")),e)},t.rustEnum=function(e,t,r){const n=(0,i.union)(null!=r?r:(0,i.u8)(),t);return e.forEach(((e,t)=>n.addVariant(t,e,e.property))),n},t.array=function(e,t,r){const n=(0,i.struct)([(0,i.seq)(e,t,"values")]);return new u(n,(({values:e})=>e),(e=>({values:e})),r)};class g extends i.Layout{constructor(e,t,r){super(e.span+t.span,r),this.keyLayout=e,this.valueLayout=t}decode(e,t){return t=t||0,[this.keyLayout.decode(e,t),this.valueLayout.decode(e,t+this.keyLayout.getSpan(e,t))]}encode(e,t,r){r=r||0;const n=this.keyLayout.encode(e[0],t,r);return n+this.valueLayout.encode(e[1],t,r+n)}getSpan(e,t){return this.keyLayout.getSpan(e,t)+this.valueLayout.getSpan(e,t)}}t.map=function(e,t,r){const n=(0,i.u32)("length"),s=(0,i.struct)([n,(0,i.seq)(new g(e,t),(0,i.offset)(n,-n.span),"values")]);return new u(s,(({values:e})=>new Map(e)),(e=>({values:Array.from(e.entries())})),r)}},2673:e=>{"use strict";e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),s=i.charCodeAt(0);if(255!==t[s])throw new TypeError(i+" is ambiguous");t[s]=n}var o=e.length,a=e.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,n=0,i=0;e[r]===a;)n++,r++;for(var s=(e.length-r)*c+1>>>0,l=new Uint8Array(s);e[r];){var u=t[e.charCodeAt(r)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<i)&&-1!==d;d--,h++)u+=o*l[d]>>>0,l[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=h,r++}for(var f=s-i;f!==s&&0===l[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=l[f++];return p}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var c=(s-i)*l+1>>>0,u=new Uint8Array(c);i!==s;){for(var h=t[i],d=0,f=c-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%o>>>0,h=h/o>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var p=c-n;p!==c&&0===u[p];)p++;for(var g=a.repeat(r);p<c;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:u,decode:function(e){var t=u(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}},3686:(e,t,r)=>{const n=r(2673);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},1975:e=>{"use strict";e.exports=function({mustBeMetaMask:e=!1,silent:t=!1,timeout:r=3e3}={}){!function(){if("boolean"!=typeof e)throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if("boolean"!=typeof t)throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if("number"!=typeof r)throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}();let n=!1;return new Promise((i=>{function s(){if(n)return;n=!0,window.removeEventListener("ethereum#initialized",s);const{ethereum:r}=window;if(!r||e&&!r.isMetaMask){const n=e&&r?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum.";!t&&console.error("@metamask/detect-provider:",n),i(null)}else i(r)}window.ethereum?s():(window.addEventListener("ethereum#initialized",s,{once:!0}),setTimeout((()=>{s()}),r))}))}},7557:(e,t)=>{"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function n(e,...t){if(!((r=e)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function i(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function s(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function o(e,t){n(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}Object.defineProperty(t,"__esModule",{value:!0}),t.anumber=r,t.number=r,t.abytes=n,t.bytes=n,t.ahash=i,t.aexists=s,t.aoutput=o;const a={number:r,bytes:n,hash:i,exists:s,output:o};t.default=a},2318:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add5L=t.add5H=t.add4H=t.add4L=t.add3H=t.add3L=t.rotlBL=t.rotlBH=t.rotlSL=t.rotlSH=t.rotr32L=t.rotr32H=t.rotrBL=t.rotrBH=t.rotrSL=t.rotrSH=t.shrSL=t.shrSH=t.toBig=void 0,t.fromBig=i,t.split=s,t.add=w;const r=BigInt(2**32-1),n=BigInt(32);function i(e,t=!1){return t?{h:Number(e&r),l:Number(e>>n&r)}:{h:0|Number(e>>n&r),l:0|Number(e&r)}}function s(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:o,l:a}=i(e[s],t);[r[s],n[s]]=[o,a]}return[r,n]}const o=(e,t)=>BigInt(e>>>0)<<n|BigInt(t>>>0);t.toBig=o;const a=(e,t,r)=>e>>>r;t.shrSH=a;const c=(e,t,r)=>e<<32-r|t>>>r;t.shrSL=c;const l=(e,t,r)=>e>>>r|t<<32-r;t.rotrSH=l;const u=(e,t,r)=>e<<32-r|t>>>r;t.rotrSL=u;const h=(e,t,r)=>e<<64-r|t>>>r-32;t.rotrBH=h;const d=(e,t,r)=>e>>>r-32|t<<64-r;t.rotrBL=d;const f=(e,t)=>t;t.rotr32H=f;const p=(e,t)=>e;t.rotr32L=p;const g=(e,t,r)=>e<<r|t>>>32-r;t.rotlSH=g;const m=(e,t,r)=>t<<r|e>>>32-r;t.rotlSL=m;const y=(e,t,r)=>t<<r-32|e>>>64-r;t.rotlBH=y;const b=(e,t,r)=>e<<r-32|t>>>64-r;function w(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}t.rotlBL=b;const v=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);t.add3L=v;const _=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;t.add3H=_;const E=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);t.add4L=E;const x=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0;t.add4H=x;const S=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);t.add5L=S;const A=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0;t.add5H=A;const I={fromBig:i,split:s,toBig:o,shrSH:a,shrSL:c,rotrSH:l,rotrSL:u,rotrBH:h,rotrBL:d,rotr32H:f,rotr32L:p,rotlSH:g,rotlSL:m,rotlBH:y,rotlBL:b,add:w,add3L:v,add3H:_,add4L:E,add4H:x,add5H:A,add5L:S};t.default=I},5145:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},2955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shake256=t.shake128=t.keccak_512=t.keccak_384=t.keccak_256=t.keccak_224=t.sha3_512=t.sha3_384=t.sha3_256=t.sha3_224=t.Keccak=void 0,t.keccakP=w;const n=r(7557),i=r(2318),s=r(9175),o=[],a=[],c=[],l=BigInt(0),u=BigInt(1),h=BigInt(2),d=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=u,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],o.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let i=l;for(let e=0;e<7;e++)t=(t<<u^(t>>d)*p)%f,t&h&&(i^=u<<(u<<BigInt(e))-u);c.push(i)}const[g,m]=(0,i.split)(c,!0),y=(e,t,r)=>r>32?(0,i.rotlBH)(e,t,r):(0,i.rotlSH)(e,t,r),b=(e,t,r)=>r>32?(0,i.rotlBL)(e,t,r):(0,i.rotlSL)(e,t,r);function w(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=y(s,o,1)^r[n],c=b(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=a[r],s=y(t,i,n),c=b(t,i,n),l=o[r];t=e[l],i=e[l+1],e[l]=s,e[l+1]=c}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=g[n],e[1]^=m[n]}r.fill(0)}class v extends s.Hash{constructor(e,t,r,i=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.anumber)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){s.isLE||(0,s.byteSwap32)(this.state32),w(this.state32,this.rounds),s.isLE||(0,s.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(e){(0,n.aexists)(this);const{blockLen:t,state:r}=this,i=(e=(0,s.toBytes)(e)).length;for(let n=0;n<i;){const s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,n.aexists)(this,!1),(0,n.abytes)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.aoutput)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new v(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}t.Keccak=v;const _=(e,t,r)=>(0,s.wrapConstructor)((()=>new v(t,e,r)));t.sha3_224=_(6,144,28),t.sha3_256=_(6,136,32),t.sha3_384=_(6,104,48),t.sha3_512=_(6,72,64),t.keccak_224=_(1,144,28),t.keccak_256=_(1,136,32),t.keccak_384=_(1,104,48),t.keccak_512=_(1,72,64);const E=(e,t,r)=>(0,s.wrapXOFConstructorWithOpts)(((n={})=>new v(t,e,void 0===n.dkLen?r:n.dkLen,!0)));t.shake128=E(31,168,16),t.shake256=E(31,136,32)},9175:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=void 0,t.isBytes=function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name},t.byteSwap32=function(e){for(let r=0;r<e.length;r++)e[r]=(0,t.byteSwap)(e[r])},t.bytesToHex=function(e){(0,i.abytes)(e);let t="";for(let r=0;r<e.length;r++)t+=s[e[r]];return t},t.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=a(e.charCodeAt(i)),s=a(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n},t.asyncLoop=async function(e,r,n){let i=Date.now();for(let s=0;s<e;s++){n(s);const e=Date.now()-i;e>=0&&e<r||(await(0,t.nextTick)(),i+=e)}},t.utf8ToBytes=c,t.toBytes=l,t.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];(0,i.abytes)(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r},t.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!=={}.toString.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},t.wrapConstructor=function(e){const t=t=>e().update(l(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(l(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},t.wrapXOFConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(l(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},t.randomBytes=function(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return n.crypto.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")};const n=r(5145),i=r(7557);t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),t.rotr=(e,t)=>e<<32-t|e>>>t,t.rotl=(e,t)=>e<<t|e>>>32-t>>>0,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],t.byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,t.byteSwapIfBE=t.isLE?e=>e:e=>(0,t.byteSwap)(e);const s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0"))),o={_0:48,_9:57,A:65,F:70,a:97,f:102};function a(e){return e>=o._0&&e<=o._9?e-o._0:e>=o.A&&e<=o.F?e-(o.A-10):e>=o.a&&e<=o.f?e-(o.a-10):void 0}function c(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function l(e){return"string"==typeof e&&(e=c(e)),(0,i.abytes)(e),e}t.nextTick=async()=>{},t.Hash=class{clone(){return this._cloneInto()}}},591:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Account:()=>xr,AddressLookupTableAccount:()=>Bn,AddressLookupTableInstruction:()=>Ms,AddressLookupTableProgram:()=>Rs,Authorized:()=>Ws,BLOCKHASH_CACHE_TIMEOUT_MS:()=>$n,BPF_LOADER_DEPRECATED_PROGRAM_ID:()=>Sr,BPF_LOADER_PROGRAM_ID:()=>An,BpfLoader:()=>In,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:()=>Ns,ComputeBudgetInstruction:()=>Ls,ComputeBudgetProgram:()=>Bs,Connection:()=>Ps,Ed25519Program:()=>Us,Enum:()=>mr,EpochSchedule:()=>Rn,FeeCalculatorLayout:()=>gn,Keypair:()=>Cs,LAMPORTS_PER_SOL:()=>po,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:()=>Os,Loader:()=>Sn,Lockup:()=>Hs,MAX_SEED_LENGTH:()=>wr,Message:()=>qr,MessageAccountKeys:()=>Or,MessageV0:()=>Wr,NONCE_ACCOUNT_LENGTH:()=>yn,NonceAccount:()=>bn,PACKET_DATA_SIZE:()=>Ar,PUBLIC_KEY_LENGTH:()=>vr,PublicKey:()=>Er,SIGNATURE_LENGTH_IN_BYTES:()=>kr,SOLANA_SCHEMA:()=>yr,STAKE_CONFIG_ID:()=>qs,STAKE_INSTRUCTION_LAYOUTS:()=>Ks,SYSTEM_INSTRUCTION_LAYOUTS:()=>_n,SYSVAR_CLOCK_PUBKEY:()=>Xr,SYSVAR_EPOCH_SCHEDULE_PUBKEY:()=>Qr,SYSVAR_INSTRUCTIONS_PUBKEY:()=>en,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:()=>tn,SYSVAR_RENT_PUBKEY:()=>rn,SYSVAR_REWARDS_PUBKEY:()=>nn,SYSVAR_SLOT_HASHES_PUBKEY:()=>sn,SYSVAR_SLOT_HISTORY_PUBKEY:()=>on,SYSVAR_STAKE_HISTORY_PUBKEY:()=>an,Secp256k1Program:()=>Fs,SendTransactionError:()=>cn,SolanaJSONRPCError:()=>un,SolanaJSONRPCErrorCode:()=>ln,StakeAuthorizationLayout:()=>Gs,StakeInstruction:()=>Vs,StakeProgram:()=>Zs,Struct:()=>gr,SystemInstruction:()=>vn,SystemProgram:()=>En,Transaction:()=>Zr,TransactionExpiredBlockheightExceededError:()=>Tr,TransactionExpiredNonceInvalidError:()=>Cr,TransactionExpiredTimeoutError:()=>Pr,TransactionInstruction:()=>Gr,TransactionMessage:()=>Yr,TransactionStatus:()=>Vr,VALIDATOR_INFO_KEY:()=>to,VERSION_PREFIX_MASK:()=>Ir,VOTE_PROGRAM_ID:()=>io,ValidatorInfo:()=>no,VersionedMessage:()=>Hr,VersionedTransaction:()=>Jr,VoteAccount:()=>oo,VoteAuthorizationLayout:()=>Qs,VoteInit:()=>Ys,VoteInstruction:()=>Js,VoteProgram:()=>eo,clusterApiUrl:()=>ho,sendAndConfirmRawTransaction:()=>fo,sendAndConfirmTransaction:()=>hn});var n={};r.r(n),r.d(n,{aK:()=>q,e8:()=>k,DO:()=>I,dJ:()=>W,OG:()=>H,My:()=>P,Ph:()=>N,lX:()=>B,Id:()=>j,fg:()=>G,qj:()=>z,aT:()=>L,r4:()=>$,aY:()=>A,x:()=>J,lq:()=>D,z:()=>U,zW:()=>C,Q5:()=>Y});var i=r(8287),s=r(6013);const o=BigInt(2**32-1),a=BigInt(32);function c(e,t=!1){return t?{h:Number(e&o),l:Number(e>>a&o)}:{h:0|Number(e>>a&o),l:0|Number(e&o)}}function l(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=c(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}const u=(e,t,r)=>e<<r|t>>>32-r,h=(e,t,r)=>t<<r|e>>>32-r,d=(e,t,r)=>t<<r-32|e>>>64-r,f=(e,t,r)=>e<<r-32|t>>>64-r,p={fromBig:c,split:l,toBig:(e,t)=>BigInt(e>>>0)<<a|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:u,rotlSL:h,rotlBH:d,rotlBL:f,add:function(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5H:(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)};var g=r(2531);const[m,y]=(()=>p.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),b=new Uint32Array(80),w=new Uint32Array(80);class v extends s.ol{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:l,Fh:u,Fl:h,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,n,i,s,o,a,c,l,u,h,d,f,p,g]}set(e,t,r,n,i,s,o,a,c,l,u,h,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)b[r]=e.getUint32(t),w[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|b[e-15],r=0|w[e-15],n=p.rotrSH(t,r,1)^p.rotrSH(t,r,8)^p.shrSH(t,r,7),i=p.rotrSL(t,r,1)^p.rotrSL(t,r,8)^p.shrSL(t,r,7),s=0|b[e-2],o=0|w[e-2],a=p.rotrSH(s,o,19)^p.rotrBH(s,o,61)^p.shrSH(s,o,6),c=p.rotrSL(s,o,19)^p.rotrBL(s,o,61)^p.shrSL(s,o,6),l=p.add4L(i,c,w[e-7],w[e-16]),u=p.add4H(l,n,a,b[e-7],b[e-16]);b[e]=0|u,w[e]=0|l}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:l,Eh:u,El:h,Fh:d,Fl:f,Gh:g,Gl:v,Hh:_,Hl:E}=this;for(let e=0;e<80;e++){const t=p.rotrSH(u,h,14)^p.rotrSH(u,h,18)^p.rotrBH(u,h,41),x=p.rotrSL(u,h,14)^p.rotrSL(u,h,18)^p.rotrBL(u,h,41),S=u&d^~u&g,A=h&f^~h&v,I=p.add5L(E,x,A,y[e],w[e]),k=p.add5H(I,_,t,S,m[e],b[e]),T=0|I,P=p.rotrSH(r,n,28)^p.rotrBH(r,n,34)^p.rotrBH(r,n,39),C=p.rotrSL(r,n,28)^p.rotrBL(r,n,34)^p.rotrBL(r,n,39),O=r&i^r&o^i&o,M=n&s^n&a^s&a;_=0|g,E=0|v,g=0|d,v=0|f,d=0|u,f=0|h,({h:u,l:h}=p.add(0|c,0|l,0|k,0|T)),c=0|o,l=0|a,o=0|i,a=0|s,i=0|r,s=0|n;const R=p.add3L(T,C,M);r=p.add3H(R,k,P,O),n=0|R}({h:r,l:n}=p.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=p.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=p.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l}=p.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=p.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:f}=p.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:g,l:v}=p.add(0|this.Gh,0|this.Gl,0|g,0|v)),({h:_,l:E}=p.add(0|this.Hh,0|this.Hl,0|_,0|E)),this.set(r,n,i,s,o,a,c,l,u,h,d,f,g,v,_,E)}roundClean(){b.fill(0),w.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const _=(0,g.ld)((()=>new v)),E=BigInt(0),x=BigInt(1),S=BigInt(2);function A(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function I(e){if(!A(e))throw new Error("Uint8Array expected")}function k(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const T=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function P(e){I(e);let t="";for(let r=0;r<e.length;r++)t+=T[e[r]];return t}function C(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function O(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?E:BigInt("0x"+e)}const M={_0:48,_9:57,A:65,F:70,a:97,f:102};function R(e){return e>=M._0&&e<=M._9?e-M._0:e>=M.A&&e<=M.F?e-(M.A-10):e>=M.a&&e<=M.f?e-(M.a-10):void 0}function L(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=R(e.charCodeAt(i)),s=R(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function N(e){return O(P(e))}function B(e){return I(e),O(P(Uint8Array.from(e).reverse()))}function D(e,t){return L(e.toString(16).padStart(2*t,"0"))}function U(e,t){return D(e,t).reverse()}function z(e,t,r){let n;if("string"==typeof t)try{n=L(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!A(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function j(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];I(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const F=e=>"bigint"==typeof e&&E<=e;function $(e,t,r){return F(e)&&F(t)&&F(r)&&t<=e&&e<r}function q(e,t,r,n){if(!$(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function W(e){let t;for(t=0;e>E;e>>=x,t+=1);return t}const H=e=>(S<<BigInt(e-1))-x,V=e=>new Uint8Array(e),K=e=>Uint8Array.from(e);function G(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=V(e),i=V(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...e)=>r(i,n,...e),c=(e=V())=>{i=a(K([0]),e),n=a(),0!==e.length&&(i=a(K([1]),e),n=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return j(...r)};return(e,t)=>{let r;for(o(),c(e);!(r=t(l()));)c();return o(),r}}const Z={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||A(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function Y(e,t,r={}){const n=(t,r,n)=>{const i=Z[r];if("function"!=typeof i)throw new Error("invalid validator function");const s=e[t];if(!(n&&void 0===s||i(s,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}function J(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const s=e(r,...n);return t.set(r,s),s}}const X=BigInt(0),Q=BigInt(1),ee=BigInt(2),te=BigInt(3),re=BigInt(4),ne=BigInt(5),ie=BigInt(8);function se(e,t){const r=e%t;return r>=X?r:t+r}function oe(e,t,r){if(t<X)throw new Error("invalid exponent, negatives unsupported");if(r<=X)throw new Error("invalid modulus");if(r===Q)return X;let n=Q;for(;t>X;)t&Q&&(n=n*e%r),e=e*e%r,t>>=Q;return n}function ae(e,t,r){let n=e;for(;t-- >X;)n*=n,n%=r;return n}function ce(e,t){if(e===X)throw new Error("invert: expected non-zero number");if(t<=X)throw new Error("invert: expected positive modulus, got "+t);let r=se(e,t),n=t,i=X,s=Q,o=Q,a=X;for(;r!==X;){const e=n/r,t=n%r,c=i-o*e,l=s-a*e;n=r,r=t,i=o,s=a,o=c,a=l}if(n!==Q)throw new Error("invert: does not exist");return se(i,t)}const le=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ue(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function he(e,t,r=!1,n={}){if(e<=X)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=ue(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:H(i),ZERO:X,ONE:Q,create:t=>se(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return X<=t&&t<e},is0:e=>e===X,isOdd:e=>(e&Q)===Q,neg:t=>se(-t,e),eql:(e,t)=>e===t,sqr:t=>se(t*t,e),add:(t,r)=>se(t+r,e),sub:(t,r)=>se(t-r,e),mul:(t,r)=>se(t*r,e),pow:(e,t)=>function(e,t,r){if(r<X)throw new Error("invalid exponent, negatives unsupported");if(r===X)return e.ONE;if(r===Q)return t;let n=e.ONE,i=t;for(;r>X;)r&Q&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Q;return n}(a,e,t),div:(t,r)=>se(t*ce(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ce(t,e),sqrt:n.sqrt||(t=>(o||(o=function(e){if(e%re===te){const t=(e+Q)/re;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%ie===ne){const t=(e-ne)/ie;return function(e,r){const n=e.mul(r,ee),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,ee),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-Q)/ee;let r,n,i;for(r=e-Q,n=0;r%ee===X;r/=ee,n++);for(i=ee;i<e&&oe(i,t,e)!==e-Q;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+Q)/re;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const s=(r+Q)/ee;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),l=e.pow(o,s),u=e.pow(o,r);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,Q<<BigInt(a-t-1));c=e.sqr(r),l=e.mul(l,r),u=e.mul(u,c),a=t}return l}}(e)}(e)),o(a,t))),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?U(e,s):D(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?B(e):N(e)}});return Object.freeze(a)}function de(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function fe(e){const t=de(e);return t+Math.ceil(t/2)}const pe=BigInt(0),ge=BigInt(1);function me(e,t){const r=t.negate();return e?r:t}function ye(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function be(e,t){return ye(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const we=new WeakMap,ve=new WeakMap;function _e(e){return ve.get(e)||1}function Ee(e,t){return{constTimeNegate:me,hasPrecomputes:e=>1!==_e(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>pe;)r&ge&&(n=n.add(i)),i=i.double(),r>>=ge;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=be(r,t),s=[];let o=e,a=o;for(let e=0;e<n;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(r,n,i){const{windows:s,windowSize:o}=be(r,t);let a=e.ZERO,c=e.BASE;const l=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let e=0;e<s;e++){const t=e*o;let r=Number(i&l);i>>=h,r>o&&(r-=u,i+=ge);const s=t,d=t+Math.abs(r)-1,f=e%2!=0,p=r<0;0===r?c=c.add(me(f,n[s])):a=a.add(me(p,n[d]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=e.ZERO){const{windows:o,windowSize:a}=be(r,t),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let e=0;e<o;e++){const t=e*a;if(i===pe)break;let r=Number(i&c);if(i>>=u,r>a&&(r-=l,i+=ge),0===r)continue;let o=n[t+Math.abs(r)-1];r<0&&(o=o.negate()),s=s.add(o)}return s},getPrecomputes(e,t,r){let n=we.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&we.set(t,r(n))),n},wNAFCached(e,t,r){const n=_e(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=_e(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){ye(r,t),ve.set(e,r),we.delete(e)}}}function xe(e,t,r,n){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}(r,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=W(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i);let l=i;for(let e=Math.floor((t.BITS-1)/o)*o;e>=0;e-=o){c.fill(i);for(let t=0;t<n.length;t++){const i=n[t],s=Number(i>>BigInt(e)&BigInt(a));c[s]=c[s].add(r[t])}let t=i;for(let e=c.length-1,r=i;e>0;e--)r=r.add(c[e]),t=t.add(r);if(l=l.add(t),0!==e)for(let e=0;e<o;e++)l=l.double()}return l}function Se(e){return Y(e.Fp,le.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),Y(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ue(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const Ae=BigInt(0),Ie=BigInt(1),ke=BigInt(2),Te=BigInt(8),Pe={zip215:!0};const Ce=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Oe=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Me=(BigInt(0),BigInt(1)),Re=BigInt(2),Le=(BigInt(3),BigInt(5)),Ne=BigInt(8);function Be(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function De(e,t){const r=Ce,n=se(t*t*t,r),i=se(n*n*t,r);let s=se(e*n*function(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=Ce,o=e*e%s*e%s,a=ae(o,Re,s)*o%s,c=ae(a,Me,s)*e%s,l=ae(c,Le,s)*c%s,u=ae(l,t,s)*l%s,h=ae(u,r,s)*u%s,d=ae(h,n,s)*h%s,f=ae(d,i,s)*d%s,p=ae(f,i,s)*d%s,g=ae(p,t,s)*l%s;return{pow_p_5_8:ae(g,Re,s)*e%s,b2:o}}(e*i).pow_p_5_8,r);const o=se(t*s*s,r),a=s,c=se(s*Oe,r),l=o===e,u=o===se(-e,r),h=o===se(-e*Oe,r);return l&&(s=a),(u||h)&&(s=c),(se(s,r)&Q)===Q&&(s=se(-s,r)),{isValid:l||u,value:s}}const Ue=(()=>he(Ce,void 0,!0))(),ze=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ue,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Ne,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:_,randomBytes:g.po,adjustScalarBytes:Be,uvRatio:De}))(),je=(()=>function(e){const t=function(e){const t=Se(e);return Y(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=t,l=ke<<BigInt(8*a)-Ie,u=r.create,h=he(t.n,t.nBitLength),d=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(e){return{isValid:!1,value:Ae}}}),f=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,r)=>{if(k("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function g(e,t){q("coordinate "+e,t,Ae,l)}function m(e){if(!(e instanceof w))throw new Error("ExtendedPoint expected")}const y=J(((e,t)=>{const{ex:n,ey:i,ez:s}=e,o=e.is0();null==t&&(t=o?Te:r.inv(s));const a=u(n*t),c=u(i*t),l=u(s*t);if(o)return{x:Ae,y:Ie};if(l!==Ie)throw new Error("invZ was invalid");return{x:a,y:c}})),b=J((e=>{const{a:r,d:n}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:i,ey:s,ez:o,et:a}=e,c=u(i*i),l=u(s*s),h=u(o*o),d=u(h*h),f=u(c*r);if(u(h*u(f+l))!==u(d+u(n*u(c*l))))throw new Error("bad point: equation left != right (1)");if(u(i*s)!==u(o*a))throw new Error("bad point: equation left != right (2)");return!0}));class w{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,g("x",e),g("y",t),g("z",r),g("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof w)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return g("x",t),g("y",r),new w(t,r,Ie,u(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(w.fromAffine)}static msm(e,t){return xe(w,h,e,t)}_setWindowSize(e){E.setWindowSize(this,e)}assertValidity(){b(this)}equals(e){m(e);const{ex:t,ey:r,ez:n}=this,{ex:i,ey:s,ez:o}=e,a=u(t*o),c=u(i*n),l=u(r*o),h=u(s*n);return a===c&&l===h}is0(){return this.equals(w.ZERO)}negate(){return new w(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:i}=this,s=u(r*r),o=u(n*n),a=u(ke*u(i*i)),c=u(e*s),l=r+n,h=u(u(l*l)-s-o),d=c+o,f=d-a,p=c-o,g=u(h*f),m=u(d*p),y=u(h*p),b=u(f*d);return new w(g,m,b,y)}add(e){m(e);const{a:r,d:n}=t,{ex:i,ey:s,ez:o,et:a}=this,{ex:c,ey:l,ez:h,et:d}=e;if(r===BigInt(-1)){const e=u((s-i)*(l+c)),t=u((s+i)*(l-c)),r=u(t-e);if(r===Ae)return this.double();const n=u(o*ke*d),f=u(a*ke*h),p=f+n,g=t+e,m=f-n,y=u(p*r),b=u(g*m),v=u(p*m),_=u(r*g);return new w(y,b,_,v)}const f=u(i*c),p=u(s*l),g=u(a*n*d),y=u(o*h),b=u((i+s)*(c+l)-f-p),v=y-g,_=y+g,E=u(p-r*f),x=u(b*v),S=u(_*E),A=u(b*E),I=u(v*_);return new w(x,S,I,A)}subtract(e){return this.add(e.negate())}wNAF(e){return E.wNAFCached(this,e,w.normalizeZ)}multiply(e){const t=e;q("scalar",t,Ie,n);const{p:r,f:i}=this.wNAF(t);return w.normalizeZ([r,i])[0]}multiplyUnsafe(e,t=w.ZERO){const r=e;return q("scalar",r,Ae,n),r===Ae?_:this.is0()||r===Ie?this:E.wNAFCachedUnsafe(this,r,w.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return E.unsafeLadder(this,n).is0()}toAffine(e){return y(this,e)}clearCofactor(){const{h:e}=t;return e===Ie?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){const{d:i,a:s}=t,o=r.BYTES;e=z("pointHex",e,o),k("zip215",n);const a=e.slice(),c=e[o-1];a[o-1]=-129&c;const h=B(a),f=n?l:r.ORDER;q("pointHex.y",h,Ae,f);const p=u(h*h),g=u(p-Ie),m=u(i*p-s);let{isValid:y,value:b}=d(g,m);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const v=(b&Ie)===Ie,_=!!(128&c);if(!n&&b===Ae&&_)throw new Error("Point.fromHex: x=0 and x_0=1");return _!==v&&(b=u(-b)),w.fromAffine({x:b,y:h})}static fromPrivateKey(e){return A(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=U(t,r.BYTES);return n[n.length-1]|=e&Ie?128:0,n}toHex(){return P(this.toRawBytes())}}w.BASE=new w(t.Gx,t.Gy,Ie,u(t.Gx*t.Gy)),w.ZERO=new w(Ae,Ie,Ie,Ae);const{BASE:v,ZERO:_}=w,E=Ee(w,8*a);function x(e){return se(e,n)}function S(e){return x(B(e))}function A(e){const t=r.BYTES;e=z("private key",e,t);const n=z("hashed private key",s(e),2*t),i=f(n.slice(0,t)),o=n.slice(t,2*t),a=S(i),c=v.multiply(a),l=c.toRawBytes();return{head:i,prefix:o,scalar:a,point:c,pointBytes:l}}function I(e=new Uint8Array,...t){const r=j(...t);return S(s(p(r,z("context",e),!!i)))}const T=Pe;return v._setWindowSize(8),{CURVE:t,getPublicKey:function(e){return A(e).pointBytes},sign:function(e,t,s={}){e=z("message",e),i&&(e=i(e));const{prefix:o,scalar:a,pointBytes:c}=A(t),l=I(s.context,o,e),u=v.multiply(l).toRawBytes(),h=x(l+I(s.context,u,c,e)*a);return q("signature.s",h,Ae,n),z("result",j(u,U(h,r.BYTES)),2*r.BYTES)},verify:function(e,t,n,s=T){const{context:o,zip215:a}=s,c=r.BYTES;e=z("signature",e,2*c),t=z("message",t),n=z("publicKey",n,c),void 0!==a&&k("zip215",a),i&&(t=i(t));const l=B(e.slice(c,2*c));let u,h,d;try{u=w.fromHex(n,a),h=w.fromHex(e.slice(0,c),a),d=v.multiplyUnsafe(l)}catch(e){return!1}if(!a&&u.isSmallOrder())return!1;const f=I(o,h.toRawBytes(),u.toRawBytes(),t);return h.add(u.multiplyUnsafe(f)).subtract(d).clearCofactor().equals(w.ZERO)},ExtendedPoint:w,utils:{getExtendedPublicKey:A,randomPrivateKey:()=>o(r.BYTES),precompute:(e=8,t=w.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}(ze))();var Fe=r(9404),$e=r.n(Fe),qe=r(6763),We=r.n(qe),He=r(8226),Ve=r(2755),Ke=r(2900),Ge=r(184);class Ze extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...s}=e,{path:o}=e,a=0===o.length?n:`At path: ${o.join(".")} -- ${n}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function Ye(e){return"object"==typeof e&&null!=e}function Je(e){return Ye(e)&&!Array.isArray(e)}function Xe(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function Qe(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:s}=t,{type:o}=r,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Xe(n)}\``}=e;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...e,message:c}}function*et(e,t,r,n){var i;Ye(i=e)&&"function"==typeof i[Symbol.iterator]||(e=[e]);for(const i of e){const e=Qe(i,t,r,n);e&&(yield e)}}function*tt(e,t,r={}){const{path:n=[],branch:i=[e],coerce:s=!1,mask:o=!1}=r,a={path:n,branch:i,mask:o};s&&(e=t.coercer(e,a));let c="valid";for(const n of t.validator(e,a))n.explanation=r.message,c="not_valid",yield[n,void 0];for(let[l,u,h]of t.entries(e,a)){const t=tt(u,h,{path:void 0===l?n:[...n,l],branch:void 0===l?i:[...i,u],coerce:s,mask:o,message:r.message});for(const r of t)r[0]?(c=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):s&&(u=r[1],void 0===l?e=u:e instanceof Map?e.set(l,u):e instanceof Set?e.add(u):Ye(e)&&(void 0!==u||l in e)&&(e[l]=u))}if("not_valid"!==c)for(const n of t.refiner(e,a))n.explanation=r.message,c="not_refined",yield[n,void 0];"valid"===c&&(yield[void 0,e])}class rt{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:s=e=>e,entries:o=function*(){}}=e;this.type=t,this.schema=r,this.entries=o,this.coercer=s,this.validator=n?(e,t)=>et(n(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>et(i(e,t),t,this,e):()=>[]}assert(e,t){return nt(e,this,t)}create(e,t){return it(e,this,t)}is(e){return st(e,this)}mask(e,t){return function(e,t,r){const n=ot(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}(e,this,t)}validate(e,t={}){return ot(e,this,t)}}function nt(e,t,r){const n=ot(e,t,{message:r});if(n[0])throw n[0]}function it(e,t,r){const n=ot(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function st(e,t){return!ot(e,t)[0]}function ot(e,t,r={}){const n=tt(e,t,r),i=function(e){const{done:t,value:r}=e.next();return t?void 0:r}(n);return i[0]?[new Ze(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])})),void 0]:[void 0,i[1]]}function at(e,t){return new rt({type:e,schema:null,validator:t})}function ct(e){return new rt({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${Xe(e)}`})}function lt(){return at("boolean",(e=>"boolean"==typeof e))}function ut(e){return at("instance",(t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${Xe(t)}`))}function ht(e){const t=Xe(e),r=typeof e;return new rt({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${Xe(r)}`})}function dt(e){return new rt({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function ft(){return at("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${Xe(e)}`))}function pt(e){return new rt({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function gt(e,t){return new rt({type:"record",schema:null,*entries(r){if(Ye(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>Je(e)||`Expected an object, but received: ${Xe(e)}`,coercer:e=>Je(e)?{...e}:e})}function mt(){return at("string",(e=>"string"==typeof e||`Expected a string, but received: ${Xe(e)}`))}function yt(e){const t=at("never",(()=>!1));return new rt({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${Xe(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function bt(e){const t=Object.keys(e);return new rt({type:"type",schema:e,*entries(r){if(Ye(r))for(const n of t)yield[n,r[n],e[n]]},validator:e=>Je(e)||`Expected an object, but received: ${Xe(e)}`,coercer:e=>Je(e)?{...e}:e})}function wt(e){const t=e.map((e=>e.type)).join(" | ");return new rt({type:"union",schema:null,coercer(t,r){for(const n of e){const[e,i]=n.validate(t,{coerce:!0,mask:r.mask});if(!e)return i}return t},validator(r,n){const i=[];for(const t of e){const[...e]=tt(r,t,n),[s]=e;if(!s[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Xe(r)}`,...i]}})}function vt(){return at("unknown",(()=>!0))}function _t(e,t,r){return new rt({...e,coercer:(n,i)=>st(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}var Et=r(22),xt=r.n(Et),St=r(3678),At=class extends St{socket;constructor(e,t,r){super(),this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,t,r){const n=r||t;try{this.socket.send(e),n()}catch(e){n(e)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};var It=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},kt=class extends St{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:s=5,...o}={},a,c){super(),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=s,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>++this.rpc_id),this.dataPack=c||new It,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,n){return n||"object"!=typeof r||(n=r,r=null),new Promise(((i,s)=>{if(!this.ready)return s(new Error("socket not ready"));const o=this.generate_request_id(e,t),a={jsonrpc:"2.0",method:e,params:t||void 0,id:o};this.socket.send(this.dataPack.encode(a),n,(e=>{if(e)return s(e);this.queue[o]={promise:[i,s]},r&&(this.queue[o].timeout=setTimeout((()=>{delete this.queue[o],s(new Error("reply timeout"))}),r))}))}))}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise(((r,n)=>{if(!this.ready)return n(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(i),(e=>{if(e)return n(e);r()}))}))}async subscribe(e){"string"==typeof e&&(e=[e]);const t=await this.call("rpc.on",e);if("string"==typeof e&&"ok"!==t[e])throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){"string"==typeof e&&(e=[e]);const t=await this.call("rpc.off",e);if("string"==typeof e&&"ok"!==t[e])throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",(()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0})),this.socket.addEventListener("message",(({data:e})=>{e instanceof ArrayBuffer&&(e=i.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch(e){return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const t=[e.notification];if(e.params.constructor===Object)t.push(e.params);else for(let r=0;r<e.params.length;r++)t.push(e.params[r]);return Promise.resolve().then((()=>{this.emit.apply(this,t)}))}if(!this.queue[e.id])return e.method?Promise.resolve().then((()=>{this.emit(e.method,e?.params)})):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]})),this.socket.addEventListener("error",(e=>this.emit("error",e))),this.socket.addEventListener("close",(({code:r,reason:n})=>{this.ready&&setTimeout((()=>this.emit("close",r,n)),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)&&(this.reconnect_timer_id=setTimeout((()=>this._connect(e,t)),this.reconnect_interval)))}))}},Tt=r(9190);const Pt=[],Ct=[],Ot=[],Mt=BigInt(0),Rt=BigInt(1),Lt=BigInt(2),Nt=BigInt(7),Bt=BigInt(256),Dt=BigInt(113);for(let e=0,t=Rt,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],Pt.push(2*(5*n+r)),Ct.push((e+1)*(e+2)/2%64);let i=Mt;for(let e=0;e<7;e++)t=(t<<Rt^(t>>Nt)*Dt)%Bt,t&Lt&&(i^=Rt<<(Rt<<BigInt(e))-Rt);Ot.push(i)}const[Ut,zt]=l(Ot,!0),jt=(e,t,r)=>r>32?d(e,t,r):u(e,t,r),Ft=(e,t,r)=>r>32?f(e,t,r):h(e,t,r);class $t extends g.Vw{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,Tt.Fe)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,g.DH)(this.state)}keccak(){g.qv||(0,g.Fc)(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=jt(s,o,1)^r[n],c=Ft(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=Ct[r],s=jt(t,i,n),o=Ft(t,i,n),a=Pt[r];t=e[a],i=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=Ut[n],e[1]^=zt[n]}r.fill(0)}(this.state32,this.rounds),g.qv||(0,g.Fc)(this.state32),this.posOut=0,this.pos=0}update(e){(0,Tt.CC)(this);const{blockLen:t,state:r}=this,n=(e=(0,g.ZJ)(e)).length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,Tt.CC)(this,!1),(0,Tt.DO)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,Tt.Fe)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,Tt.Ht)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new $t(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}const qt=((e,t,r)=>(0,g.ld)((()=>new $t(t,e,r))))(1,136,32);class Wt extends g.Vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,Tt.sd)(e);const r=(0,g.ZJ)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return(0,Tt.CC)(this),this.iHash.update(e),this}digestInto(e){(0,Tt.CC)(this),(0,Tt.DO)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ht=(e,t,r)=>new Wt(e,t).update(r).digest();function Vt(e){void 0!==e.lowS&&k("lowS",e.lowS),void 0!==e.prehash&&k("prehash",e.prehash)}Ht.create=(e,t)=>new Wt(e,t);const{Ph:Kt,aT:Gt}=n,Zt={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{const{Err:r}=Zt;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=C(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?C(i.length/2|128):"";return C(e)+s+i+t},decode(e,t){const{Err:r}=Zt;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++];let s=0;if(128&i){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const o=t.subarray(n,n+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of o)s=s<<8|e;if(n+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=i;const o=t.subarray(n,n+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(n+s)}}},_int:{encode(e){const{Err:t}=Zt;if(e<Yt)throw new t("integer: negative integers are not allowed");let r=C(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=Zt;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return Kt(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=Zt,i="string"==typeof e?Gt(e):e;I(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(e){const{_tlv:t,_int:r}=Zt,n=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,n)}},Yt=BigInt(0),Jt=BigInt(1),Xt=(BigInt(2),BigInt(3));function Qt(e){const t=function(e){const t=Se(e);return Y(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function o(e){return se(e,n)}function a(e){return ce(e,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=function(e){const t=function(e){const t=Se(e);Y(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=he(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{const i=t.toAffine();return j(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),s=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){const{a:n,b:i}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:s}=t;if(r&&"bigint"!=typeof e){if(A(e)&&(e=P(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*n,"0")}let o;try{o="bigint"==typeof e?e:N(z("private key",e,n))}catch(t){throw new Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return i&&(o=se(o,s)),q("private key",o,Jt,s),o}function c(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}const l=J(((e,t)=>{const{px:n,py:i,pz:s}=e;if(r.eql(s,r.ONE))return{x:n,y:i};const o=e.is0();null==t&&(t=o?r.ONE:r.inv(s));const a=r.mul(n,t),c=r.mul(i,t),l=r.mul(s,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),u=J((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const s=r.sqr(i),a=o(n);if(!r.eql(s,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class h{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?h.ZERO:new h(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(s(z("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(a(e))}static msm(e,t){return xe(h,n,e,t)}_setWindowSize(e){f.setWindowSize(this,e)}assertValidity(){u(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=e,l=r.eql(r.mul(t,a),r.mul(s,i)),u=r.eql(r.mul(n,a),r.mul(o,i));return l&&u}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,Xt),{px:s,py:o,pz:a}=this;let c=r.ZERO,l=r.ZERO,u=r.ZERO,d=r.mul(s,s),f=r.mul(o,o),p=r.mul(a,a),g=r.mul(s,o);return g=r.add(g,g),u=r.mul(s,a),u=r.add(u,u),c=r.mul(e,u),l=r.mul(i,p),l=r.add(c,l),c=r.sub(f,l),l=r.add(f,l),l=r.mul(c,l),c=r.mul(g,c),u=r.mul(i,u),p=r.mul(e,p),g=r.sub(d,p),g=r.mul(e,g),g=r.add(g,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,p),d=r.mul(d,g),l=r.add(l,d),p=r.mul(o,a),p=r.add(p,p),d=r.mul(p,g),c=r.sub(c,d),u=r.mul(p,f),u=r.add(u,u),u=r.add(u,u),new h(c,l,u)}add(e){c(e);const{px:n,py:i,pz:s}=this,{px:o,py:a,pz:l}=e;let u=r.ZERO,d=r.ZERO,f=r.ZERO;const p=t.a,g=r.mul(t.b,Xt);let m=r.mul(n,o),y=r.mul(i,a),b=r.mul(s,l),w=r.add(n,i),v=r.add(o,a);w=r.mul(w,v),v=r.add(m,y),w=r.sub(w,v),v=r.add(n,s);let _=r.add(o,l);return v=r.mul(v,_),_=r.add(m,b),v=r.sub(v,_),_=r.add(i,s),u=r.add(a,l),_=r.mul(_,u),u=r.add(y,b),_=r.sub(_,u),f=r.mul(p,v),u=r.mul(g,b),f=r.add(u,f),u=r.sub(y,f),f=r.add(y,f),d=r.mul(u,f),y=r.add(m,m),y=r.add(y,m),b=r.mul(p,b),v=r.mul(g,v),y=r.add(y,b),b=r.sub(m,b),b=r.mul(p,b),v=r.add(v,b),m=r.mul(y,v),d=r.add(d,m),m=r.mul(_,v),u=r.mul(w,u),u=r.sub(u,m),m=r.mul(w,y),f=r.mul(_,f),f=r.add(f,m),new h(u,d,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return f.wNAFCached(this,e,h.normalizeZ)}multiplyUnsafe(e){const{endo:n,n:i}=t;q("scalar",e,Yt,i);const s=h.ZERO;if(e===Yt)return s;if(this.is0()||e===Jt)return this;if(!n||f.hasPrecomputes(this))return f.wNAFCachedUnsafe(this,e,h.normalizeZ);let{k1neg:o,k1:a,k2neg:c,k2:l}=n.splitScalar(e),u=s,d=s,p=this;for(;a>Yt||l>Yt;)a&Jt&&(u=u.add(p)),l&Jt&&(d=d.add(p)),p=p.double(),a>>=Jt,l>>=Jt;return o&&(u=u.negate()),c&&(d=d.negate()),d=new h(r.mul(d.px,n.beta),d.py,d.pz),u.add(d)}multiply(e){const{endo:n,n:i}=t;let s,o;if(q("scalar",e,Jt,i),n){const{k1neg:t,k1:i,k2neg:a,k2:c}=n.splitScalar(e);let{p:l,f:u}=this.wNAF(i),{p:d,f:p}=this.wNAF(c);l=f.constTimeNegate(t,l),d=f.constTimeNegate(a,d),d=new h(r.mul(d.px,n.beta),d.py,d.pz),s=l.add(d),o=u.add(p)}else{const{p:t,f:r}=this.wNAF(e);s=t,o=r}return h.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(e,t,r){const n=h.BASE,i=(e,t)=>t!==Yt&&t!==Jt&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){return l(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===Jt)return!0;if(r)return r(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===Jt?this:r?r(h,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return k("isCompressed",e),this.assertValidity(),i(h,this,e)}toHex(e=!0){return k("isCompressed",e),P(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const d=t.nBitLength,f=Ee(h,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:function(e){return $(e,Jt,t.n)}}}({...t,toBytes(e,t,n){const i=t.toAffine(),s=r.toBytes(i.x),o=j;return k("isCompressed",n),n?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],o=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===s&&4===n)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw new Error("invalid Point, expected length of "+i+", or uncompressed "+s+", got "+t)}{const e=N(o);if(!$(e,Jt,r.ORDER))throw new Error("Point is not on curve");const t=u(e);let i;try{i=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!=((i&Jt)===Jt)&&(i=r.neg(i)),{x:e,y:i}}}}),d=e=>P(D(e,t.nByteLength));function f(e){return e>n>>Jt}const p=(e,t,r)=>N(e.slice(t,r));class g{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=z("compactSignature",e,2*r),new g(p(e,0,r),p(e,r,2*r))}static fromDER(e){const{r:t,s:r}=Zt.toSig(z("DER",e));return new g(t,r)}assertValidity(){q("r",this.r,Jt,n),q("s",this.s,Jt,n)}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:s}=this,l=w(z("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const u=2===s||3===s?n+t.n:n;if(u>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&s?"03":"02",f=c.fromHex(h+d(u)),p=a(u),g=o(-l*p),m=o(i*p),y=c.BASE.multiplyAndAddUnsafe(f,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return L(this.toDERHex())}toDERHex(){return Zt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return L(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const m={isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const e=fe(t.n);return function(e,t,r=!1){const n=e.length,i=de(t),s=fe(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=se(r?N(e):B(e),t-Q)+Q;return r?U(o,i):D(o,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=A(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===s:r?n===2*i||n===2*s:e instanceof c}const b=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const r=N(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},w=t.bits2int_modN||function(e){return o(b(e))},v=H(t.nBitLength);function _(e){return q("num < 2^"+t.nBitLength,e,Yt,v),D(e,t.nByteLength)}const E={lowS:t.lowS,prehash:!1},x={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,n,i=E){const{seed:s,k2sig:u}=function(e,n,i=E){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:u}=t;let{lowS:d,prehash:p,extraEntropy:m}=i;null==d&&(d=!0),e=z("msgHash",e),Vt(i),p&&(e=z("prehashed msgHash",s(e)));const y=w(e),v=l(n),x=[_(v),_(y)];if(null!=m&&!1!==m){const e=!0===m?u(r.BYTES):m;x.push(z("extraEntropy",e))}const S=j(...x),A=y;return{seed:S,k2sig:function(e){const t=b(e);if(!h(t))return;const r=a(t),n=c.BASE.multiply(t).toAffine(),i=o(n.x);if(i===Yt)return;const s=o(r*o(A+i*v));if(s===Yt)return;let l=(n.x===i?0:2)|Number(n.y&Jt),u=s;return d&&f(s)&&(u=function(e){return f(e)?o(-e):e}(s),l^=1),new g(i,u,l)}}}(e,n,i),d=t;return G(d.hash.outputLen,d.nByteLength,d.hmac)(s,u)},verify:function(e,r,n,i=x){const s=e;r=z("msgHash",r),n=z("publicKey",n);const{lowS:l,prehash:u,format:h}=i;if(Vt(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw new Error("format must be compact or der");const d="string"==typeof s||A(s),f=!d&&!h&&"object"==typeof s&&null!==s&&"bigint"==typeof s.r&&"bigint"==typeof s.s;if(!d&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,m;try{if(f&&(p=new g(s.r,s.s)),d){try{"compact"!==h&&(p=g.fromDER(s))}catch(e){if(!(e instanceof Zt.Err))throw e}p||"der"===h||(p=g.fromCompact(s))}m=c.fromHex(n)}catch(e){return!1}if(!p)return!1;if(l&&p.hasHighS())return!1;u&&(r=t.hash(r));const{r:y,s:b}=p,v=w(r),_=a(b),E=o(v*_),S=o(y*_),I=c.BASE.multiplyAndAddUnsafe(m,E,S)?.toAffine();return!!I&&o(I.x)===y},ProjectivePoint:c,Signature:g,utils:m}}function er(e){return{hash:e,hmac:(t,...r)=>Ht(e,t,(0,g.Id)(...r)),randomBytes:g.po}}BigInt(4);const tr=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),rr=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),nr=BigInt(1),ir=BigInt(2),sr=(e,t)=>(e+t/ir)/t;const or=he(tr,void 0,void 0,{sqrt:function(e){const t=tr,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,u=l*l*e%t,h=ae(u,r,t)*u%t,d=ae(h,r,t)*u%t,f=ae(d,ir,t)*l%t,p=ae(f,i,t)*f%t,g=ae(p,s,t)*p%t,m=ae(g,a,t)*g%t,y=ae(m,c,t)*m%t,b=ae(y,a,t)*g%t,w=ae(b,r,t)*u%t,v=ae(w,o,t)*p%t,_=ae(v,n,t)*l%t,E=ae(_,ir,t);if(!or.eql(or.sqr(E),e))throw new Error("Cannot find square root");return E}}),ar=function(e,t){const r=t=>Qt({...e,...er(t)});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:or,n:rr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=rr,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-nr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=sr(s*e,t),c=sr(-n*e,t);let l=se(e-a*r-c*i,t),u=se(-a*n-c*s,t);const h=l>o,d=u>o;if(h&&(l=t-l),d&&(u=t-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:d,k2:u}}}},He.sc);BigInt(0),ar.ProjectivePoint;const cr=je.utils.randomPrivateKey,lr=()=>{const e=je.utils.randomPrivateKey(),t=ur(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},ur=je.getPublicKey;function hr(e){try{return je.ExtendedPoint.fromHex(e),!0}catch{return!1}}const dr=(e,t)=>je.sign(e,t.slice(0,32)),fr=je.verify,pr=e=>i.Buffer.isBuffer(e)?e:e instanceof Uint8Array?i.Buffer.from(e.buffer,e.byteOffset,e.byteLength):i.Buffer.from(e);class gr{constructor(e){Object.assign(this,e)}encode(){return i.Buffer.from((0,Ve.serialize)(yr,this))}static decode(e){return(0,Ve.deserialize)(yr,this,e)}static decodeUnchecked(e){return(0,Ve.deserializeUnchecked)(yr,this,e)}}class mr extends gr{constructor(e){if(super(e),this.enum="",1!==Object.keys(e).length)throw new Error("Enum can only take single value");Object.keys(e).map((e=>{this.enum=e}))}}const yr=new Map;var br;const wr=32,vr=32;let _r=1;class Er extends gr{constructor(e){if(super({}),this._bn=void 0,function(e){return void 0!==e._bn}(e))this._bn=e._bn;else{if("string"==typeof e){const t=We().decode(e);if(t.length!=vr)throw new Error("Invalid public key input");this._bn=new($e())(t)}else this._bn=new($e())(e);if(this._bn.byteLength()>vr)throw new Error("Invalid public key input")}}static unique(){const e=new Er(_r);return _r+=1,new Er(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return We().encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(i.Buffer);if(e.length===vr)return e;const t=i.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const n=i.Buffer.concat([e.toBuffer(),i.Buffer.from(t),r.toBuffer()]),s=(0,He.sc)(n);return new Er(s)}static createProgramAddressSync(e,t){let r=i.Buffer.alloc(0);e.forEach((function(e){if(e.length>wr)throw new TypeError("Max seed length exceeded");r=i.Buffer.concat([r,pr(e)])})),r=i.Buffer.concat([r,t.toBuffer(),i.Buffer.from("ProgramDerivedAddress")]);const n=(0,He.sc)(r);if(hr(n))throw new Error("Invalid seeds, address must fall off the curve");return new Er(n)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,n=255;for(;0!=n;){try{const s=e.concat(i.Buffer.from([n]));r=this.createProgramAddressSync(s,t)}catch(e){if(e instanceof TypeError)throw e;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){return hr(new Er(e).toBytes())}}br=Er,Er.default=new br("11111111111111111111111111111111"),yr.set(Er,{kind:"struct",fields:[["_bn","u256"]]});class xr{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=pr(e);if(64!==e.length)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=pr(cr()),this._publicKey=pr(ur(this._secretKey))}get publicKey(){return new Er(this._publicKey)}get secretKey(){return i.Buffer.concat([this._secretKey,this._publicKey],64)}}const Sr=new Er("BPFLoader1111111111111111111111111111111111"),Ar=1232,Ir=127,kr=64;class Tr extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Tr.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Pr extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Pr.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Cr extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Cr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Or{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const t=new Map;this.keySegments().flat().forEach(((e,r)=>{t.set(e.toBase58(),r)}));const r=e=>{const r=t.get(e.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return e.map((e=>({programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map((e=>r(e.pubkey))),data:e.data})))}}const Mr=(e="publicKey")=>Ke.av(32,e),Rr=(e="signature")=>Ke.av(64,e),Lr=(e="string")=>{const t=Ke.w3([Ke.DH("length"),Ke.DH("lengthPadding"),Ke.av(Ke.cY(Ke.DH(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(e,t)=>r(e,t).chars.toString(),s.encode=(e,t,r)=>{const s={chars:i.Buffer.from(e,"utf8")};return n(s,t,r)},s.alloc=e=>Ke.DH().span+Ke.DH().span+i.Buffer.from(e,"utf8").length,s};function Nr(e,t){const r=e=>{if(e.span>=0)return e.span;if("function"==typeof e.alloc)return e.alloc(t[e.property]);if("count"in e&&"elementLayout"in e){const n=t[e.property];if(Array.isArray(n))return n.length*r(e.elementLayout)}else if("fields"in e)return Nr({layout:e},t[e.property]);return 0};let n=0;return e.layout.fields.forEach((e=>{n+=r(e)})),n}function Br(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,!(128&n))break}return t}function Dr(e,t){let r=t;for(;;){let t=127&r;if(r>>=7,0==r){e.push(t);break}t|=128,e.push(t)}}function Ur(e,t){if(!e)throw new Error(t||"Assertion failed")}class zr{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,n=e=>{const t=e.toBase58();let n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},i=n(t);i.isSigner=!0,i.isWritable=!0;for(const t of e){n(t.programId).isInvoked=!0;for(const e of t.keys){const t=n(e.pubkey);t.isSigner||=e.isSigner,t.isWritable||=e.isWritable}}return new zr(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Ur(e.length<=256,"Max static account keys length exceeded");const t=e.filter((([,e])=>e.isSigner&&e.isWritable)),r=e.filter((([,e])=>e.isSigner&&!e.isWritable)),n=e.filter((([,e])=>!e.isSigner&&e.isWritable)),i=e.filter((([,e])=>!e.isSigner&&!e.isWritable)),s={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Ur(t.length>0,"Expected at least one writable signer key");const[e]=t[0];Ur(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[s,[...t.map((([e])=>new Er(e))),...r.map((([e])=>new Er(e))),...n.map((([e])=>new Er(e))),...i.map((([e])=>new Er(e)))]]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&e.isWritable)),[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&!e.isWritable));if(0!==t.length||0!==n.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,t){const r=new Array,n=new Array;for(const[i,s]of this.keyMetaMap.entries())if(t(s)){const t=new Er(i),s=e.findIndex((e=>e.equals(t)));s>=0&&(Ur(s<256,"Max lookup table index exceeded"),r.push(s),n.push(t),this.keyMetaMap.delete(i))}return[r,n]}}const jr="Reached end of buffer unexpectedly";function Fr(e){if(0===e.length)throw new Error(jr);return e.shift()}function $r(e,...t){const[r]=t;if(2===t.length?r+(t[1]??0)>e.length:r>=e.length)throw new Error(jr);return e.splice(...t)}class qr{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map((e=>new Er(e))),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach((e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex])))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:We().decode(e.data)})))}get addressTableLookups(){return[]}getAccountKeys(){return new Or(this.staticAccountKeys)}static compile(e){const t=zr.compile(e.instructions,e.payerKey),[r,n]=t.getMessageComponents(),i=new Or(n).compileInstructions(e.instructions).map((e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:We().encode(e.data)})));return new qr({header:r,accountKeys:n,recentBlockhash:e.recentBlockhash,instructions:i})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;return e>=this.header.numRequiredSignatures?e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((e,t)=>!this.isProgramId(t)))}serialize(){const e=this.accountKeys.length;let t=[];Dr(t,e);const r=this.instructions.map((e=>{const{accounts:t,programIdIndex:r}=e,n=Array.from(We().decode(e.data));let s=[];Dr(s,t.length);let o=[];return Dr(o,n.length),{programIdIndex:r,keyIndicesCount:i.Buffer.from(s),keyIndices:t,dataLength:i.Buffer.from(o),data:n}}));let n=[];Dr(n,r.length);let s=i.Buffer.alloc(Ar);i.Buffer.from(n).copy(s);let o=n.length;r.forEach((e=>{const t=Ke.w3([Ke.u8("programIdIndex"),Ke.av(e.keyIndicesCount.length,"keyIndicesCount"),Ke.O6(Ke.u8("keyIndex"),e.keyIndices.length,"keyIndices"),Ke.av(e.dataLength.length,"dataLength"),Ke.O6(Ke.u8("userdatum"),e.data.length,"data")]).encode(e,s,o);o+=t})),s=s.slice(0,o);const a=Ke.w3([Ke.av(1,"numRequiredSignatures"),Ke.av(1,"numReadonlySignedAccounts"),Ke.av(1,"numReadonlyUnsignedAccounts"),Ke.av(t.length,"keyCount"),Ke.O6(Mr("key"),e,"keys"),Mr("recentBlockhash")]),c={numRequiredSignatures:i.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:i.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:i.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:i.Buffer.from(t),keys:this.accountKeys.map((e=>pr(e.toBytes()))),recentBlockhash:We().decode(this.recentBlockhash)};let l=i.Buffer.alloc(2048);const u=a.encode(c,l);return s.copy(l,u),l.slice(0,u+s.length)}static from(e){let t=[...e];const r=Fr(t);if(r!==(r&Ir))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const n=Fr(t),s=Fr(t),o=Br(t);let a=[];for(let e=0;e<o;e++){const e=$r(t,0,vr);a.push(new Er(i.Buffer.from(e)))}const c=$r(t,0,vr),l=Br(t);let u=[];for(let e=0;e<l;e++){const e=Fr(t),r=$r(t,0,Br(t)),n=$r(t,0,Br(t)),s=We().encode(i.Buffer.from(n));u.push({programIdIndex:e,accounts:r,data:s})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:s},recentBlockhash:We().encode(i.Buffer.from(c)),accountKeys:a,instructions:u};return new qr(h)}}class Wr{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Or(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;return e>=r?e-r<this.addressTableLookups.reduce(((e,t)=>e+t.writableIndexes.length),0):e>=this.header.numRequiredSignatures?e-t<r-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=e.find((e=>e.key.equals(r.accountKey)));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const e of r.writableIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.writable.push(n.state.addresses[e])}for(const e of r.readonlyIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.readonly.push(n.state.addresses[e])}}return t}static compile(e){const t=zr.compile(e.instructions,e.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const e of i){const i=t.extractTableLookup(e);if(void 0!==i){const[e,{writable:t,readonly:s}]=i;r.push(e),n.writable.push(...t),n.readonly.push(...s)}}const[s,o]=t.getMessageComponents(),a=new Or(o,n).compileInstructions(e.instructions);return new Wr({header:s,staticAccountKeys:o,recentBlockhash:e.recentBlockhash,compiledInstructions:a,addressTableLookups:r})}serialize(){const e=Array();Dr(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();Dr(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();Dr(i,this.addressTableLookups.length);const s=Ke.w3([Ke.u8("prefix"),Ke.w3([Ke.u8("numRequiredSignatures"),Ke.u8("numReadonlySignedAccounts"),Ke.u8("numReadonlyUnsignedAccounts")],"header"),Ke.av(e.length,"staticAccountKeysLength"),Ke.O6(Mr(),this.staticAccountKeys.length,"staticAccountKeys"),Mr("recentBlockhash"),Ke.av(r.length,"instructionsLength"),Ke.av(t.length,"serializedInstructions"),Ke.av(i.length,"addressTableLookupsLength"),Ke.av(n.length,"serializedAddressTableLookups")]),o=new Uint8Array(Ar),a=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((e=>e.toBytes())),recentBlockhash:We().decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,a)}serializeInstructions(){let e=0;const t=new Uint8Array(Ar);for(const r of this.compiledInstructions){const n=Array();Dr(n,r.accountKeyIndexes.length);const i=Array();Dr(i,r.data.length),e+=Ke.w3([Ke.u8("programIdIndex"),Ke.av(n.length,"encodedAccountKeyIndexesLength"),Ke.O6(Ke.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),Ke.av(i.length,"encodedDataLength"),Ke.av(r.data.length,"data")]).encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Ar);for(const r of this.addressTableLookups){const n=Array();Dr(n,r.writableIndexes.length);const i=Array();Dr(i,r.readonlyIndexes.length),e+=Ke.w3([Mr("accountKey"),Ke.av(n.length,"encodedWritableIndexesLength"),Ke.O6(Ke.u8(),r.writableIndexes.length,"writableIndexes"),Ke.av(i.length,"encodedReadonlyIndexesLength"),Ke.O6(Ke.u8(),r.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=Fr(t),n=r&Ir;Ur(r!==n,"Expected versioned message but received legacy message"),Ur(0===n,`Expected versioned message with version 0 but found version ${n}`);const i={numRequiredSignatures:Fr(t),numReadonlySignedAccounts:Fr(t),numReadonlyUnsignedAccounts:Fr(t)},s=[],o=Br(t);for(let e=0;e<o;e++)s.push(new Er($r(t,0,vr)));const a=We().encode($r(t,0,vr)),c=Br(t),l=[];for(let e=0;e<c;e++){const e=Fr(t),r=$r(t,0,Br(t)),n=Br(t),i=new Uint8Array($r(t,0,n));l.push({programIdIndex:e,accountKeyIndexes:r,data:i})}const u=Br(t),h=[];for(let e=0;e<u;e++){const e=new Er($r(t,0,vr)),r=$r(t,0,Br(t)),n=$r(t,0,Br(t));h.push({accountKey:e,writableIndexes:r,readonlyIndexes:n})}return new Wr({header:i,staticAccountKeys:s,recentBlockhash:a,compiledInstructions:l,addressTableLookups:h})}}const Hr={deserializeMessageVersion(e){const t=e[0],r=t&Ir;return r===t?"legacy":r},deserialize:e=>{const t=Hr.deserializeMessageVersion(e);if("legacy"===t)return qr.from(e);if(0===t)return Wr.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let Vr=function(e){return e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID",e}({});const Kr=i.Buffer.alloc(kr).fill(0);class Gr{constructor(e){this.keys=void 0,this.programId=void 0,this.data=i.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map((({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r}))),programId:this.programId.toJSON(),data:[...this.data]}}}class Zr{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((e=>e.toJSON())),signers:this.signatures.map((({publicKey:e})=>e.toJSON()))}}add(...e){if(0===e.length)throw new Error("No instructions");return e.forEach((e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Gr(e))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let e=0;e<t.length;e++)if(void 0===t[e].programId)throw new Error(`Transaction instruction index ${e} has undefined program id`);const n=[],i=[];t.forEach((e=>{e.keys.forEach((e=>{i.push({...e})}));const t=e.programId.toString();n.includes(t)||n.push(t)})),n.forEach((e=>{i.push({pubkey:new Er(e),isSigner:!1,isWritable:!1})}));const s=[];i.forEach((e=>{const t=e.pubkey.toString(),r=s.findIndex((e=>e.pubkey.toString()===t));r>-1?(s[r].isWritable=s[r].isWritable||e.isWritable,s[r].isSigner=s[r].isSigner||e.isSigner):s.push(e)})),s.sort((function(e,t){return e.isSigner!==t.isSigner?e.isSigner?-1:1:e.isWritable!==t.isWritable?e.isWritable?-1:1:e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));const o=s.findIndex((e=>e.pubkey.equals(r)));if(o>-1){const[e]=s.splice(o,1);e.isSigner=!0,e.isWritable=!0,s.unshift(e)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const e of this.signatures){const t=s.findIndex((t=>t.pubkey.equals(e.publicKey)));if(!(t>-1))throw new Error(`unknown signer: ${e.publicKey.toString()}`);s[t].isSigner||(s[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,c=0,l=0;const u=[],h=[];s.forEach((({pubkey:e,isSigner:t,isWritable:r})=>{t?(u.push(e.toString()),a+=1,r||(c+=1)):(h.push(e.toString()),r||(l+=1))}));const d=u.concat(h),f=t.map((e=>{const{data:t,programId:r}=e;return{programIdIndex:d.indexOf(r.toString()),accounts:e.keys.map((e=>d.indexOf(e.pubkey.toString()))),data:We().encode(t)}}));return f.forEach((e=>{Ur(e.programIdIndex>=0),e.accounts.forEach((e=>Ur(e>=0)))})),new qr({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:l},accountKeys:d,recentBlockhash:e,instructions:f})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every(((e,r)=>t[r].equals(e.publicKey)))||(this.signatures=t.map((e=>({signature:null,publicKey:e})))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw new Error("No signers");const t=new Set;this.signatures=e.filter((e=>{const r=e.toString();return!t.has(r)&&(t.add(r),!0)})).map((e=>({signature:null,publicKey:e})))}sign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}this.signatures=r.map((e=>({signature:null,publicKey:e.publicKey})));const n=this._compile();this._partialSign(n,...r)}partialSign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}const n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach((e=>{const t=dr(r,e.secretKey);this._addSignature(e.publicKey,pr(t))}))}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Ur(64===t.length);const r=this.signatures.findIndex((t=>e.equals(t.publicKey)));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=i.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?t&&(r.missing||=[]).push(i):fr(n,e,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){const e=this._getMessageSignednessErrors(n,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`\nInvalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map((e=>e.toBase58())).join("`, `")}\`].`),e.missing&&(t+=`\nMissing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map((e=>e.toBase58())).join("`, `")}\`].`),new Error(t)}}return this._serialize(n)}_serialize(e){const{signatures:t}=this,r=[];Dr(r,t.length);const n=r.length+64*t.length+e.length,s=i.Buffer.alloc(n);return Ur(t.length<256),i.Buffer.from(r).copy(s,0),t.forEach((({signature:e},t)=>{null!==e&&(Ur(64===e.length,"signature has invalid length"),i.Buffer.from(e).copy(s,r.length+64*t))})),e.copy(s,r.length+64*t.length),Ur(s.length<=Ar,`Transaction too large: ${s.length} > ${Ar}`),s}get keys(){return Ur(1===this.instructions.length),this.instructions[0].keys.map((e=>e.pubkey))}get programId(){return Ur(1===this.instructions.length),this.instructions[0].programId}get data(){return Ur(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const r=Br(t);let n=[];for(let e=0;e<r;e++){const e=$r(t,0,kr);n.push(We().encode(i.Buffer.from(e)))}return Zr.populate(qr.from(t),n)}static populate(e,t=[]){const r=new Zr;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach(((t,n)=>{const i={signature:t==We().encode(Kr)?null:We().decode(t),publicKey:e.accountKeys[n]};r.signatures.push(i)})),e.instructions.forEach((t=>{const n=t.accounts.map((t=>{const n=e.accountKeys[t];return{pubkey:n,isSigner:r.signatures.some((e=>e.publicKey.toString()===n.toString()))||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}}));r.instructions.push(new Gr({keys:n,programId:e.accountKeys[t.programIdIndex],data:We().decode(t.data)}))})),r._message=e,r._json=r.toJSON(),r}}class Yr{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:r,compiledInstructions:n,recentBlockhash:i}=e,{numRequiredSignatures:s,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:a}=r,c=s-o;Ur(c>0,"Message header is invalid");const l=e.staticAccountKeys.length-s-a;Ur(l>=0,"Message header is invalid");const u=e.getAccountKeys(t),h=u.get(0);if(void 0===h)throw new Error("Failed to decompile message because no account keys were found");const d=[];for(const e of n){const t=[];for(const n of e.accountKeyIndexes){const e=u.get(n);if(void 0===e)throw new Error(`Failed to find key for account key index ${n}`);let i;i=n<s?n<c:n<u.staticAccountKeys.length?n-s<l:n-u.staticAccountKeys.length<u.accountKeysFromLookups.writable.length,t.push({pubkey:e,isSigner:n<r.numRequiredSignatures,isWritable:i})}const n=u.get(e.programIdIndex);if(void 0===n)throw new Error(`Failed to find program id for program id index ${e.programIdIndex}`);d.push(new Gr({programId:n,data:pr(e.data),keys:t}))}return new Yr({payerKey:h,instructions:d,recentBlockhash:i})}compileToLegacyMessage(){return qr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Wr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class Jr{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)Ur(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const t=[];for(let r=0;r<e.header.numRequiredSignatures;r++)t.push(new Uint8Array(kr));this.signatures=t}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Dr(t,this.signatures.length);const r=Ke.w3([Ke.av(t.length,"encodedSignaturesLength"),Ke.O6(Rr(),this.signatures.length,"signatures"),Ke.av(e.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,i)}static deserialize(e){let t=[...e];const r=[],n=Br(t);for(let e=0;e<n;e++)r.push(new Uint8Array($r(t,0,kr)));const i=Hr.deserialize(new Uint8Array(t));return new Jr(i,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of e){const e=r.findIndex((e=>e.equals(n.publicKey)));Ur(e>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[e]=dr(t,n.secretKey)}}addSignature(e,t){Ur(64===t.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((t=>t.equals(e)));Ur(r>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=t}}const Xr=new Er("SysvarC1ock11111111111111111111111111111111"),Qr=new Er("SysvarEpochSchedu1e111111111111111111111111"),en=new Er("Sysvar1nstructions1111111111111111111111111"),tn=new Er("SysvarRecentB1ockHashes11111111111111111111"),rn=new Er("SysvarRent111111111111111111111111111111111"),nn=new Er("SysvarRewards111111111111111111111111111111"),sn=new Er("SysvarS1otHashes111111111111111111111111111"),on=new Er("SysvarS1otHistory11111111111111111111111111"),an=new Er("SysvarStakeHistory1111111111111111111111111");class cn extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:n}){const i=n?`Logs: \n${JSON.stringify(n.slice(-10),null,2)}. `:"",s="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let o;switch(e){case"send":o=`Transaction ${t} resulted in an error. \n${r}. `+i+s;break;case"simulate":o=`Simulation failed. \nMessage: ${r}. \n`+i+s;break;default:o=`Unknown action '${e}'`}super(o),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise(((t,r)=>{e.getTransaction(this.signature).then((e=>{if(e&&e.meta&&e.meta.logMessages){const r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(new Error("Log messages not found"))})).catch(r)}))),await this.transactionLogs}}const ln={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class un extends Error{constructor({code:e,message:t,data:r},n){super(null!=n?`${n}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}async function hn(e,t,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await e.sendTransaction(t,r,i);let o;if(null!=t.recentBlockhash&&null!=t.lastValidBlockHeight)o=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:s,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=t.minNonceContextSlot&&null!=t.nonceInfo){const{nonceInstruction:r}=t.nonceInfo,i=r.keys[0].pubkey;o=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:t.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else null!=n?.abortSignal&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await e.confirmTransaction(s,n&&n.commitment)).value;if(o.err){if(null!=s)throw new cn({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`});throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`)}return s}function dn(e){return new Promise((t=>setTimeout(t,e)))}function fn(e,t){const r=e.layout.span>=0?e.layout.span:Nr(e,t),n=i.Buffer.alloc(r),s=Object.assign({instruction:e.index},t);return e.layout.encode(s,n),n}function pn(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw new Error("invalid instruction; "+e)}if(r.instruction!==e.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${e.index}`);return r}const gn=Ke.I0("lamportsPerSignature"),mn=Ke.w3([Ke.DH("version"),Ke.DH("state"),Mr("authorizedPubkey"),Mr("nonce"),Ke.w3([gn],"feeCalculator")]),yn=mn.span;class bn{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=mn.decode(pr(e),0);return new bn({authorizedPubkey:new Er(t.authorizedPubkey),nonce:new Er(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const wn=e=>{const t=(0,Ke.av)(8,e),{encode:r,decode:n}=(e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)}))(t),s=t;return s.decode=(e,t)=>{const r=n(e,t);return(0,Ge.k5)(i.Buffer.from(r))},s.encode=(e,t,n)=>{const i=(0,Ge.Bq)(e,8);return r(i,t,n)},s};class vn{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=Ke.DH("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(_n))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a SystemInstruction");return r}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:r,programId:n}=pn(_n.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:r,programId:new Er(n)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=pn(_n.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:r,programId:n}=pn(_n.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:r,programId:new Er(n)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=pn(_n.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,space:n,programId:i}=pn(_n.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Er(t),seed:r,space:n,programId:new Er(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=pn(_n.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new Er(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,programId:n}=pn(_n.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Er(t),seed:r,programId:new Er(n)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:r,lamports:n,space:i,programId:s}=pn(_n.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new Er(t),seed:r,lamports:n,space:i,programId:new Er(s)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=pn(_n.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new Er(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),pn(_n.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=pn(_n.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=pn(_n.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new Er(t)}}static checkProgramId(e){if(!e.equals(En.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const _n=Object.freeze({Create:{index:0,layout:Ke.w3([Ke.DH("instruction"),Ke.Wg("lamports"),Ke.Wg("space"),Mr("programId")])},Assign:{index:1,layout:Ke.w3([Ke.DH("instruction"),Mr("programId")])},Transfer:{index:2,layout:Ke.w3([Ke.DH("instruction"),wn("lamports")])},CreateWithSeed:{index:3,layout:Ke.w3([Ke.DH("instruction"),Mr("base"),Lr("seed"),Ke.Wg("lamports"),Ke.Wg("space"),Mr("programId")])},AdvanceNonceAccount:{index:4,layout:Ke.w3([Ke.DH("instruction")])},WithdrawNonceAccount:{index:5,layout:Ke.w3([Ke.DH("instruction"),Ke.Wg("lamports")])},InitializeNonceAccount:{index:6,layout:Ke.w3([Ke.DH("instruction"),Mr("authorized")])},AuthorizeNonceAccount:{index:7,layout:Ke.w3([Ke.DH("instruction"),Mr("authorized")])},Allocate:{index:8,layout:Ke.w3([Ke.DH("instruction"),Ke.Wg("space")])},AllocateWithSeed:{index:9,layout:Ke.w3([Ke.DH("instruction"),Mr("base"),Lr("seed"),Ke.Wg("space"),Mr("programId")])},AssignWithSeed:{index:10,layout:Ke.w3([Ke.DH("instruction"),Mr("base"),Lr("seed"),Mr("programId")])},TransferWithSeed:{index:11,layout:Ke.w3([Ke.DH("instruction"),wn("lamports"),Lr("seed"),Mr("programId")])},UpgradeNonceAccount:{index:12,layout:Ke.w3([Ke.DH("instruction")])}});class En{constructor(){}static createAccount(e){const t=fn(_n.Create,{lamports:e.lamports,space:e.space,programId:pr(e.programId.toBuffer())});return new Gr({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,r;return"basePubkey"in e?(t=fn(_n.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:pr(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=fn(_n.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]),new Gr({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;return"basePubkey"in e?(t=fn(_n.AssignWithSeed,{base:pr(e.basePubkey.toBuffer()),seed:e.seed,programId:pr(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=fn(_n.Assign,{programId:pr(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new Gr({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=fn(_n.CreateWithSeed,{base:pr(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:pr(e.programId.toBuffer())});let r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Gr({keys:r,programId:this.programId,data:t})}static createNonceAccount(e){const t=new Zr;"basePubkey"in e&&"seed"in e?t.add(En.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:yn,programId:this.programId})):t.add(En.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:yn,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=fn(_n.InitializeNonceAccount,{authorized:pr(e.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:tn,isSigner:!1,isWritable:!1},{pubkey:rn,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new Gr(r)}static nonceAdvance(e){const t=fn(_n.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:tn,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new Gr(r)}static nonceWithdraw(e){const t=fn(_n.WithdrawNonceAccount,{lamports:e.lamports});return new Gr({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:tn,isSigner:!1,isWritable:!1},{pubkey:rn,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){const t=fn(_n.AuthorizeNonceAccount,{authorized:pr(e.newAuthorizedPubkey.toBuffer())});return new Gr({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,r;return"basePubkey"in e?(t=fn(_n.AllocateWithSeed,{base:pr(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:pr(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=fn(_n.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new Gr({keys:r,programId:this.programId,data:t})}}En.programId=new Er("11111111111111111111111111111111");const xn=Ar-300;class Sn{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Sn.chunkSize)+1+1)}static async load(e,t,r,n,s){{const i=await e.getMinimumBalanceForRentExemption(s.length),o=await e.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return console.error("Program load failed, account is already executable"),!1;o.data.length!==s.length&&(a=a||new Zr,a.add(En.allocate({accountPubkey:r.publicKey,space:s.length}))),o.owner.equals(n)||(a=a||new Zr,a.add(En.assign({accountPubkey:r.publicKey,programId:n}))),o.lamports<i&&(a=a||new Zr,a.add(En.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:i-o.lamports})))}else a=(new Zr).add(En.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:i>0?i:1,space:s.length,programId:n}));null!==a&&await hn(e,a,[t,r],{commitment:"confirmed"})}const o=Ke.w3([Ke.DH("instruction"),Ke.DH("offset"),Ke.DH("bytesLength"),Ke.DH("bytesLengthPadding"),Ke.O6(Ke.u8("byte"),Ke.cY(Ke.DH(),-8),"bytes")]),a=Sn.chunkSize;let c=0,l=s,u=[];for(;l.length>0;){const s=l.slice(0,a),h=i.Buffer.alloc(a+16);o.encode({instruction:0,offset:c,bytes:s,bytesLength:0,bytesLengthPadding:0},h);const d=(new Zr).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:h});if(u.push(hn(e,d,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")){const e=4;await dn(1e3/e)}c+=a,l=l.slice(a)}await Promise.all(u);{const s=Ke.w3([Ke.DH("instruction")]),o=i.Buffer.alloc(s.span);s.encode({instruction:1},o);const a=(new Zr).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:rn,isSigner:!1,isWritable:!1}],programId:n,data:o}),c="processed",l=await e.sendTransaction(a,[t,r],{preflightCommitment:c}),{context:u,value:h}=await e.confirmTransaction({signature:l,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},c);if(h.err)throw new Error(`Transaction ${l} failed (${JSON.stringify(h)})`);for(;;){try{if(await e.getSlot({commitment:c})>u.slot)break}catch{}await new Promise((e=>setTimeout(e,Math.round(200))))}}return!0}}Sn.chunkSize=xn;const An=new Er("BPFLoader2111111111111111111111111111111111");class In{static getMinNumSignatures(e){return Sn.getMinNumSignatures(e)}static load(e,t,r,n,i){return Sn.load(e,t,r,i,n)}}function kn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tn,Pn;function Cn(){if(Pn)return Tn;Pn=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function r(n,i){var s,o,a,c,l,u,h;if(!0===n)return"true";if(!1===n)return"false";switch(typeof n){case"object":if(null===n)return null;if(n.toJSON&&"function"==typeof n.toJSON)return r(n.toJSON(),i);if("[object Array]"===(h=e.call(n))){for(a="[",o=n.length-1,s=0;s<o;s++)a+=r(n[s],!0)+",";return o>-1&&(a+=r(n[s],!0)),a+"]"}if("[object Object]"===h){for(o=(c=t(n).sort()).length,a="",s=0;s<o;)void 0!==(u=r(n[l=c[s]],!1))&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u),s++;return"{"+a+"}"}return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Tn=function(e){var t=r(e,!1);if(void 0!==t)return""+t}}var On=kn(Cn());function Mn(e){let t=0;for(;e>1;)e/=2,t++;return t}class Rn{constructor(e,t,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const r=Mn(0===(t=e+32+1)?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,1+(t|=t>>32)))-Mn(32)-1;return[r,e-(this.getSlotsInEpoch(r)-32)]}{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch);return[this.firstNormalEpoch+r,t%this.slotsPerEpoch]}var t}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?32*(Math.pow(2,e)-1):(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Mn(32)):this.slotsPerEpoch}}var Ln=globalThis.fetch;class Nn extends kt{constructor(e,t,r){super((e=>{const r=function(e,t){return new At(e,t)}(e,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return this.underlyingSocket="socket"in r?r.socket:r,r}),e,t,r),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}class Bn{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=function(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw new Error("invalid instruction; "+e)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}(Dn,e),r=e.length-56;Ur(r>=0,"lookup table is invalid"),Ur(r%32==0,"lookup table is invalid");const n=r/32,{addresses:i}=Ke.w3([Ke.O6(Mr(),n,"addresses")]).decode(e.slice(56));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new Er(t.authority[0]):void 0,addresses:i.map((e=>new Er(e)))}}}const Dn={index:1,layout:Ke.w3([Ke.DH("typeIndex"),wn("deactivationSlot"),Ke.I0("lastExtendedSlot"),Ke.u8("lastExtendedStartIndex"),Ke.u8(),Ke.O6(Mr(),Ke.cY(Ke.u8(),-1),"authority")])},Un=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,zn=_t(ut(Er),mt(),(e=>new Er(e))),jn=yt([mt(),ht("base64")]),Fn=_t(ut(i.Buffer),jn,(e=>i.Buffer.from(e[0],"base64"))),$n=3e4;function qn(e){let t,r;if("string"==typeof e)t=e;else if(e){const{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function Wn(e){return e.map((e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e))}function Hn(e){return wt([bt({jsonrpc:ht("2.0"),id:mt(),result:e}),bt({jsonrpc:ht("2.0"),id:mt(),error:bt({code:vt(),message:mt(),data:pt(at("any",(()=>!0)))})})])}const Vn=Hn(vt());function Kn(e){return _t(Hn(e),Vn,(t=>"error"in t?t:{...t,result:it(t.result,e)}))}function Gn(e){return Kn(bt({context:bt({slot:ft()}),value:e}))}function Zn(e){return bt({context:bt({slot:ft()}),value:e})}function Yn(e,t){return 0===e?new Wr({header:t.header,staticAccountKeys:t.accountKeys.map((e=>new Er(e))),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:We().decode(e.data)}))),addressTableLookups:t.addressTableLookups}):new qr(t)}const Jn=bt({foundation:ft(),foundationTerm:ft(),initial:ft(),taper:ft(),terminal:ft()}),Xn=Kn(ct(dt(bt({epoch:ft(),effectiveSlot:ft(),amount:ft(),postBalance:ft(),commission:pt(dt(ft()))})))),Qn=ct(bt({slot:ft(),prioritizationFee:ft()})),ei=bt({total:ft(),validator:ft(),foundation:ft(),epoch:ft()}),ti=bt({epoch:ft(),slotIndex:ft(),slotsInEpoch:ft(),absoluteSlot:ft(),blockHeight:pt(ft()),transactionCount:pt(ft())}),ri=bt({slotsPerEpoch:ft(),leaderScheduleSlotOffset:ft(),warmup:lt(),firstNormalEpoch:ft(),firstNormalSlot:ft()}),ni=gt(mt(),ct(ft())),ii=dt(wt([bt({}),mt()])),si=bt({err:ii}),oi=ht("receivedSignature"),ai=bt({"solana-core":mt(),"feature-set":pt(ft())}),ci=bt({program:mt(),programId:zn,parsed:vt()}),li=bt({programId:zn,accounts:ct(zn),data:mt()}),ui=Gn(bt({err:dt(wt([bt({}),mt()])),logs:dt(ct(mt())),accounts:pt(dt(ct(dt(bt({executable:lt(),owner:mt(),lamports:ft(),data:ct(mt()),rentEpoch:pt(ft())}))))),unitsConsumed:pt(ft()),returnData:pt(dt(bt({programId:mt(),data:yt([mt(),ht("base64")])}))),innerInstructions:pt(dt(ct(bt({index:ft(),instructions:ct(wt([ci,li]))}))))})),hi=Gn(bt({byIdentity:gt(mt(),ct(ft())),range:bt({firstSlot:ft(),lastSlot:ft()})})),di=Kn(Jn),fi=Kn(ei),pi=Kn(Qn),gi=Kn(ti),mi=Kn(ri),yi=Kn(ni),bi=Kn(ft()),wi=Gn(bt({total:ft(),circulating:ft(),nonCirculating:ft(),nonCirculatingAccounts:ct(zn)})),vi=bt({amount:mt(),uiAmount:dt(ft()),decimals:ft(),uiAmountString:pt(mt())}),_i=Gn(ct(bt({address:zn,amount:mt(),uiAmount:dt(ft()),decimals:ft(),uiAmountString:pt(mt())}))),Ei=Gn(ct(bt({pubkey:zn,account:bt({executable:lt(),owner:zn,lamports:ft(),data:Fn,rentEpoch:ft()})}))),xi=bt({program:mt(),parsed:vt(),space:ft()}),Si=Gn(ct(bt({pubkey:zn,account:bt({executable:lt(),owner:zn,lamports:ft(),data:xi,rentEpoch:ft()})}))),Ai=Gn(ct(bt({lamports:ft(),address:zn}))),Ii=bt({executable:lt(),owner:zn,lamports:ft(),data:Fn,rentEpoch:ft()}),ki=bt({pubkey:zn,account:Ii}),Ti=_t(wt([ut(i.Buffer),xi]),wt([jn,xi]),(e=>Array.isArray(e)?it(e,Fn):e)),Pi=bt({executable:lt(),owner:zn,lamports:ft(),data:Ti,rentEpoch:ft()}),Ci=bt({pubkey:zn,account:Pi}),Oi=bt({state:wt([ht("active"),ht("inactive"),ht("activating"),ht("deactivating")]),active:ft(),inactive:ft()}),Mi=Kn(ct(bt({signature:mt(),slot:ft(),err:ii,memo:dt(mt()),blockTime:pt(dt(ft()))}))),Ri=Kn(ct(bt({signature:mt(),slot:ft(),err:ii,memo:dt(mt()),blockTime:pt(dt(ft()))}))),Li=bt({subscription:ft(),result:Zn(Ii)}),Ni=bt({pubkey:zn,account:Ii}),Bi=bt({subscription:ft(),result:Zn(Ni)}),Di=bt({parent:ft(),slot:ft(),root:ft()}),Ui=bt({subscription:ft(),result:Di}),zi=wt([bt({type:wt([ht("firstShredReceived"),ht("completed"),ht("optimisticConfirmation"),ht("root")]),slot:ft(),timestamp:ft()}),bt({type:ht("createdBank"),parent:ft(),slot:ft(),timestamp:ft()}),bt({type:ht("frozen"),slot:ft(),timestamp:ft(),stats:bt({numTransactionEntries:ft(),numSuccessfulTransactions:ft(),numFailedTransactions:ft(),maxTransactionsPerEntry:ft()})}),bt({type:ht("dead"),slot:ft(),timestamp:ft(),err:mt()})]),ji=bt({subscription:ft(),result:zi}),Fi=bt({subscription:ft(),result:Zn(wt([si,oi]))}),$i=bt({subscription:ft(),result:ft()}),qi=bt({pubkey:mt(),gossip:dt(mt()),tpu:dt(mt()),rpc:dt(mt()),version:dt(mt())}),Wi=bt({votePubkey:mt(),nodePubkey:mt(),activatedStake:ft(),epochVoteAccount:lt(),epochCredits:ct(yt([ft(),ft(),ft()])),commission:ft(),lastVote:ft(),rootSlot:dt(ft())}),Hi=Kn(bt({current:ct(Wi),delinquent:ct(Wi)})),Vi=wt([ht("processed"),ht("confirmed"),ht("finalized")]),Ki=bt({slot:ft(),confirmations:dt(ft()),err:ii,confirmationStatus:pt(Vi)}),Gi=Gn(ct(dt(Ki))),Zi=Kn(ft()),Yi=bt({accountKey:zn,writableIndexes:ct(ft()),readonlyIndexes:ct(ft())}),Ji=bt({signatures:ct(mt()),message:bt({accountKeys:ct(mt()),header:bt({numRequiredSignatures:ft(),numReadonlySignedAccounts:ft(),numReadonlyUnsignedAccounts:ft()}),instructions:ct(bt({accounts:ct(ft()),data:mt(),programIdIndex:ft()})),recentBlockhash:mt(),addressTableLookups:pt(ct(Yi))})}),Xi=bt({pubkey:zn,signer:lt(),writable:lt(),source:pt(wt([ht("transaction"),ht("lookupTable")]))}),Qi=bt({accountKeys:ct(Xi),signatures:ct(mt())}),es=bt({parsed:vt(),program:mt(),programId:zn}),ts=bt({accounts:ct(zn),data:mt(),programId:zn}),rs=_t(wt([ts,es]),wt([bt({parsed:vt(),program:mt(),programId:mt()}),bt({accounts:ct(mt()),data:mt(),programId:mt()})]),(e=>it(e,"accounts"in e?ts:es))),ns=bt({signatures:ct(mt()),message:bt({accountKeys:ct(Xi),instructions:ct(rs),recentBlockhash:mt(),addressTableLookups:pt(dt(ct(Yi)))})}),is=bt({accountIndex:ft(),mint:mt(),owner:pt(mt()),programId:pt(mt()),uiTokenAmount:vi}),ss=bt({writable:ct(zn),readonly:ct(zn)}),os=bt({err:ii,fee:ft(),innerInstructions:pt(dt(ct(bt({index:ft(),instructions:ct(bt({accounts:ct(ft()),data:mt(),programIdIndex:ft()}))})))),preBalances:ct(ft()),postBalances:ct(ft()),logMessages:pt(dt(ct(mt()))),preTokenBalances:pt(dt(ct(is))),postTokenBalances:pt(dt(ct(is))),loadedAddresses:pt(ss),computeUnitsConsumed:pt(ft())}),as=bt({err:ii,fee:ft(),innerInstructions:pt(dt(ct(bt({index:ft(),instructions:ct(rs)})))),preBalances:ct(ft()),postBalances:ct(ft()),logMessages:pt(dt(ct(mt()))),preTokenBalances:pt(dt(ct(is))),postTokenBalances:pt(dt(ct(is))),loadedAddresses:pt(ss),computeUnitsConsumed:pt(ft())}),cs=wt([ht(0),ht("legacy")]),ls=bt({pubkey:mt(),lamports:ft(),postBalance:dt(ft()),rewardType:dt(mt()),commission:pt(dt(ft()))}),us=Kn(dt(bt({blockhash:mt(),previousBlockhash:mt(),parentSlot:ft(),transactions:ct(bt({transaction:Ji,meta:dt(os),version:pt(cs)})),rewards:pt(ct(ls)),blockTime:dt(ft()),blockHeight:dt(ft())}))),hs=Kn(dt(bt({blockhash:mt(),previousBlockhash:mt(),parentSlot:ft(),rewards:pt(ct(ls)),blockTime:dt(ft()),blockHeight:dt(ft())}))),ds=Kn(dt(bt({blockhash:mt(),previousBlockhash:mt(),parentSlot:ft(),transactions:ct(bt({transaction:Qi,meta:dt(os),version:pt(cs)})),rewards:pt(ct(ls)),blockTime:dt(ft()),blockHeight:dt(ft())}))),fs=Kn(dt(bt({blockhash:mt(),previousBlockhash:mt(),parentSlot:ft(),transactions:ct(bt({transaction:ns,meta:dt(as),version:pt(cs)})),rewards:pt(ct(ls)),blockTime:dt(ft()),blockHeight:dt(ft())}))),ps=Kn(dt(bt({blockhash:mt(),previousBlockhash:mt(),parentSlot:ft(),transactions:ct(bt({transaction:Qi,meta:dt(as),version:pt(cs)})),rewards:pt(ct(ls)),blockTime:dt(ft()),blockHeight:dt(ft())}))),gs=Kn(dt(bt({blockhash:mt(),previousBlockhash:mt(),parentSlot:ft(),rewards:pt(ct(ls)),blockTime:dt(ft()),blockHeight:dt(ft())}))),ms=Kn(dt(bt({blockhash:mt(),previousBlockhash:mt(),parentSlot:ft(),transactions:ct(bt({transaction:Ji,meta:dt(os)})),rewards:pt(ct(ls)),blockTime:dt(ft())}))),ys=Kn(dt(bt({blockhash:mt(),previousBlockhash:mt(),parentSlot:ft(),signatures:ct(mt()),blockTime:dt(ft())}))),bs=Kn(dt(bt({slot:ft(),meta:dt(os),blockTime:pt(dt(ft())),transaction:Ji,version:pt(cs)}))),ws=Kn(dt(bt({slot:ft(),transaction:ns,meta:dt(as),blockTime:pt(dt(ft())),version:pt(cs)}))),vs=Gn(bt({blockhash:mt(),lastValidBlockHeight:ft()})),_s=Gn(lt()),Es=Kn(ct(bt({slot:ft(),numTransactions:ft(),numSlots:ft(),samplePeriodSecs:ft()}))),xs=Gn(dt(bt({feeCalculator:bt({lamportsPerSignature:ft()})}))),Ss=Kn(mt()),As=Kn(mt()),Is=bt({err:ii,logs:ct(mt()),signature:mt()}),ks=bt({result:Zn(Is),subscription:ft()}),Ts={"solana-client":"js/1.0.0-maintenance"};class Ps{constructor(e,t){let r,n,i,s,o,a;var c;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const e={};return async t=>{const{commitment:r,config:n}=qn(t),i=this._buildArgs([],r,void 0,n),s=On(i);return e[s]=e[s]??(async()=>{try{const e=it(await this._rpcRequest("getBlockHeight",i),Kn(ft()));if("error"in e)throw new un(e.error,"failed to get block height information");return e.result}finally{delete e[s]}})(),await e[s]}})(),t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,n=t.httpHeaders,i=t.fetch,s=t.fetchMiddleware,o=t.disableRetryOnRateLimit,a=t.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(e),this._rpcWsEndpoint=r||function(e){const t=e.match(Un);if(null==t)throw TypeError(`Failed to validate endpoint URL \`${e}\``);const[r,n,i,s]=t,o=e.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10);return`${o}//${n}${null==a?"":`:${a+1}`}${s}`}(e),this._rpcClient=function(e,t,r,n,i,s){const o=r||Ln;let a;return null!=s&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(a=async(e,t)=>{const r=await new Promise(((r,i)=>{try{n(e,t,((e,t)=>r([e,t])))}catch(e){i(e)}}));return await o(...r)}),new(xt())((async(r,n)=>{const s={method:"POST",body:r,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},t||{},Ts)};try{let t,r=5,c=500;for(;t=a?await a(e,s):await o(e,s),429===t.status&&!0!==i&&(r-=1,0!==r);)console.error(`Server responded with ${t.status} ${t.statusText}.  Retrying after ${c}ms delay...`),await dn(c),c*=2;const l=await t.text();t.ok?n(null,l):n(new Error(`${t.status} ${t.statusText}: ${l}`))}catch(e){e instanceof Error&&n(e)}}),{})}(e,n,i,s,o,a),this._rpcRequest=(c=this._rpcClient,(e,t)=>new Promise(((r,n)=>{c.request(e,t,((e,t)=>{e?n(e):r(t)}))}))),this._rpcBatchRequest=function(e){return t=>new Promise(((r,n)=>{0===t.length&&r([]);const i=t.map((t=>e.request(t.methodName,t.args)));e.request(i,((e,t)=>{e?n(e):r(t)}))}))}(this._rpcClient),this._rpcWebSocket=new Nn(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:n}=qn(t),i=this._buildArgs([e.toBase58()],r,void 0,n),s=it(await this._rpcRequest("getBalance",i),Gn(ft()));if("error"in s)throw new un(s.error,`failed to get balance for ${e.toBase58()}`);return s.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+t)}))}async getBlockTime(e){const t=it(await this._rpcRequest("getBlockTime",[e]),Kn(dt(ft())));if("error"in t)throw new un(t.error,`failed to get block time for slot ${e}`);return t.result}async getMinimumLedgerSlot(){const e=it(await this._rpcRequest("minimumLedgerSlot",[]),Kn(ft()));if("error"in e)throw new un(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const e=it(await this._rpcRequest("getFirstAvailableBlock",[]),bi);if("error"in e)throw new un(e.error,"failed to get first available block");return e.result}async getSupply(e){let t={};t="string"==typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};const r=it(await this._rpcRequest("getSupply",[t]),wi);if("error"in r)throw new un(r.error,"failed to get supply");return r.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),n=it(await this._rpcRequest("getTokenSupply",r),Gn(vi));if("error"in n)throw new un(n.error,"failed to get token supply");return n.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),n=it(await this._rpcRequest("getTokenAccountBalance",r),Gn(vi));if("error"in n)throw new un(n.error,"failed to get token account balance");return n.result}async getTokenAccountsByOwner(e,t,r){const{commitment:n,config:i}=qn(r);let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const o=this._buildArgs(s,n,"base64",i),a=it(await this._rpcRequest("getTokenAccountsByOwner",o),Ei);if("error"in a)throw new un(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getParsedTokenAccountsByOwner(e,t,r){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),s=it(await this._rpcRequest("getTokenAccountsByOwner",i),Si);if("error"in s)throw new un(s.error,`failed to get token accounts owned by account ${e.toBase58()}`);return s.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],n=it(await this._rpcRequest("getLargestAccounts",r),Ai);if("error"in n)throw new un(n.error,"failed to get largest accounts");return n.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),n=it(await this._rpcRequest("getTokenLargestAccounts",r),_i);if("error"in n)throw new un(n.error,"failed to get token largest accounts");return n.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:n}=qn(t),i=this._buildArgs([e.toBase58()],r,"base64",n),s=it(await this._rpcRequest("getAccountInfo",i),Gn(dt(Ii)));if("error"in s)throw new un(s.error,`failed to get info about account ${e.toBase58()}`);return s.result}async getParsedAccountInfo(e,t){const{commitment:r,config:n}=qn(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),s=it(await this._rpcRequest("getAccountInfo",i),Gn(dt(Pi)));if("error"in s)throw new un(s.error,`failed to get info about account ${e.toBase58()}`);return s.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(t){throw new Error("failed to get info about account "+e.toBase58()+": "+t)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:n}=qn(t),i=e.map((e=>e.toBase58())),s=this._buildArgs([i],r,"jsonParsed",n),o=it(await this._rpcRequest("getMultipleAccounts",s),Gn(ct(dt(Pi))));if("error"in o)throw new un(o.error,`failed to get info for accounts ${i}`);return o.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:n}=qn(t),i=e.map((e=>e.toBase58())),s=this._buildArgs([i],r,"base64",n),o=it(await this._rpcRequest("getMultipleAccounts",s),Gn(ct(dt(Ii))));if("error"in o)throw new un(o.error,`failed to get info for accounts ${i}`);return o.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:n,config:i}=qn(t),s=this._buildArgs([e.toBase58()],n,void 0,{...i,epoch:null!=r?r:i?.epoch}),o=it(await this._rpcRequest("getStakeActivation",s),Kn(Oi));if("error"in o)throw new un(o.error,`failed to get Stake Activation ${e.toBase58()}`);return o.result}async getProgramAccounts(e,t){const{commitment:r,config:n}=qn(t),{encoding:i,...s}=n||{},o=this._buildArgs([e.toBase58()],r,i||"base64",{...s,...s.filters?{filters:Wn(s.filters)}:null}),a=await this._rpcRequest("getProgramAccounts",o),c=ct(ki),l=!0===s.withContext?it(a,Gn(c)):it(a,Kn(c));if("error"in l)throw new un(l.error,`failed to get accounts owned by program ${e.toBase58()}`);return l.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:n}=qn(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),s=it(await this._rpcRequest("getProgramAccounts",i),Kn(ct(Ci)));if("error"in s)throw new un(s.error,`failed to get accounts owned by program ${e.toBase58()}`);return s.result}async confirmTransaction(e,t){let r,n;if("string"==typeof e)r=e;else{const t=e;if(t.abortSignal?.aborted)return Promise.reject(t.abortSignal.reason);r=t.signature}try{n=We().decode(r)}catch(e){throw new Error("signature must be base58 encoded: "+r)}return Ur(64===n.length,"signature has invalid length"),"string"==typeof e?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise(((t,r)=>{null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",(()=>{r(e.reason)})))}))}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,n,i=!1;return{abortConfirmation:()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:new Promise(((s,o)=>{try{r=this.onSignature(t,((e,t)=>{r=void 0;const n={context:t,value:e};s({__type:Vr.PROCESSED,response:n})}),e);const a=new Promise((e=>{null==r?e():n=this._onSubscriptionStateChange(r,(t=>{"subscribed"===t&&e()}))}));(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(t);if(i)return;if(null==r)return;const{context:n,value:c}=r;if(null!=c)if(c?.err)o(c.err);else{switch(e){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return}i=!0,s({__type:Vr.PROCESSED,response:{context:n,value:c}})}})()}catch(e){o(e)}}))}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:n}}){let i=!1;const s=new Promise((t=>{const n=async()=>{try{return await this.getBlockHeight(e)}catch(e){return-1}};(async()=>{let e=await n();if(!i){for(;e<=r;){if(await dn(1e3),i)return;if(e=await n(),i)return}t({__type:Vr.BLOCKHEIGHT_EXCEEDED})}})()})),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:n}),c=this.getCancellationPromise(t);let l;try{const e=await Promise.race([c,a,s]);if(e.__type!==Vr.PROCESSED)throw new Tr(n);l=e.response}finally{i=!0,o()}return l}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:s}}){let o=!1;const a=new Promise((t=>{let s=i,a=null;const c=async()=>{try{const{context:t,value:i}=await this.getNonceAndContext(n,{commitment:e,minContextSlot:r});return a=t.slot,i?.nonce}catch(e){return s}};(async()=>{if(s=await c(),!o)for(;;){if(i!==s)return void t({__type:Vr.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await dn(2e3),o)return;if(s=await c(),o)return}})()})),{abortConfirmation:c,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),u=this.getCancellationPromise(t);let h;try{const t=await Promise.race([u,l,a]);if(t.__type===Vr.PROCESSED)h=t.response;else{let n;for(;;){const e=await this.getSignatureStatus(s);if(null==e)break;if(!(e.context.slot<(t.slotInWhichNonceDidAdvance??r))){n=e;break}await dn(400)}if(!n?.value)throw new Cr(s);{const t=e||"finalized",{confirmationStatus:r}=n.value;switch(t){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new Cr(s);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new Cr(s);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new Cr(s)}h={context:n.context,value:{err:n.value.err}}}}}finally{o=!0,c()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const n=new Promise((t=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4}r=setTimeout((()=>t({__type:Vr.TIMED_OUT,timeoutMs:n})),n)})),{abortConfirmation:i,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let o;try{const e=await Promise.race([s,n]);if(e.__type!==Vr.PROCESSED)throw new Pr(t,e.timeoutMs/1e3);o=e.response}finally{clearTimeout(r),i()}return o}async getClusterNodes(){const e=it(await this._rpcRequest("getClusterNodes",[]),Kn(ct(qi)));if("error"in e)throw new un(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=it(await this._rpcRequest("getVoteAccounts",t),Hi);if("error"in r)throw new un(r.error,"failed to get vote accounts");return r.result}async getSlot(e){const{commitment:t,config:r}=qn(e),n=this._buildArgs([],t,void 0,r),i=it(await this._rpcRequest("getSlot",n),Kn(ft()));if("error"in i)throw new un(i.error,"failed to get slot");return i.result}async getSlotLeader(e){const{commitment:t,config:r}=qn(e),n=this._buildArgs([],t,void 0,r),i=it(await this._rpcRequest("getSlotLeader",n),Kn(mt()));if("error"in i)throw new un(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(e,t){const r=[e,t],n=it(await this._rpcRequest("getSlotLeaders",r),Kn(ct(zn)));if("error"in n)throw new un(n.error,"failed to get slot leaders");return n.result}async getSignatureStatus(e,t){const{context:r,value:n}=await this.getSignatureStatuses([e],t);return Ur(1===n.length),{context:r,value:n[0]}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const n=it(await this._rpcRequest("getSignatureStatuses",r),Gi);if("error"in n)throw new un(n.error,"failed to get signature status");return n.result}async getTransactionCount(e){const{commitment:t,config:r}=qn(e),n=this._buildArgs([],t,void 0,r),i=it(await this._rpcRequest("getTransactionCount",n),Kn(ft()));if("error"in i)throw new un(i.error,"failed to get transaction count");return i.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=it(await this._rpcRequest("getInflationGovernor",t),di);if("error"in r)throw new un(r.error,"failed to get inflation");return r.result}async getInflationReward(e,t,r){const{commitment:n,config:i}=qn(r),s=this._buildArgs([e.map((e=>e.toBase58()))],n,void 0,{...i,epoch:null!=t?t:i?.epoch}),o=it(await this._rpcRequest("getInflationReward",s),Xn);if("error"in o)throw new un(o.error,"failed to get inflation reward");return o.result}async getInflationRate(){const e=it(await this._rpcRequest("getInflationRate",[]),fi);if("error"in e)throw new un(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(e){const{commitment:t,config:r}=qn(e),n=this._buildArgs([],t,void 0,r),i=it(await this._rpcRequest("getEpochInfo",n),gi);if("error"in i)throw new un(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){const e=it(await this._rpcRequest("getEpochSchedule",[]),mi);if("error"in e)throw new un(e.error,"failed to get epoch schedule");const t=e.result;return new Rn(t.slotsPerEpoch,t.leaderScheduleSlotOffset,t.warmup,t.firstNormalEpoch,t.firstNormalSlot)}async getLeaderSchedule(){const e=it(await this._rpcRequest("getLeaderSchedule",[]),yi);if("error"in e)throw new un(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),n=it(await this._rpcRequest("getMinimumBalanceForRentExemption",r),Zi);return"error"in n?(console.warn("Unable to fetch minimum balance for rent exemption"),0):n.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(e){const t=it(await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),Es);if("error"in t)throw new un(t.error,"failed to get recent performance samples");return t.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),n=it(await this._rpcRequest("getFeeCalculatorForBlockhash",r),xs);if("error"in n)throw new un(n.error,"failed to get fee calculator");const{context:i,value:s}=n.result;return{context:i,value:null!==s?s.feeCalculator:null}}async getFeeForMessage(e,t){const r=pr(e.serialize()).toString("base64"),n=this._buildArgs([r],t),i=it(await this._rpcRequest("getFeeForMessage",n),Gn(dt(ft())));if("error"in i)throw new un(i.error,"failed to get fee for message");if(null===i.result)throw new Error("invalid blockhash");return i.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map((e=>e.toBase58())),r=t?.length?[t]:[],n=it(await this._rpcRequest("getRecentPrioritizationFees",r),pi);if("error"in n)throw new un(n.error,"failed to get recent prioritization fees");return n.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=qn(e),n=this._buildArgs([],t,void 0,r),i=it(await this._rpcRequest("getLatestBlockhash",n),vs);if("error"in i)throw new un(i.error,"failed to get latest blockhash");return i.result}async isBlockhashValid(e,t){const{commitment:r,config:n}=qn(t),i=this._buildArgs([e],r,void 0,n),s=it(await this._rpcRequest("isBlockhashValid",i),_s);if("error"in s)throw new un(s.error,"failed to determine if the blockhash `"+e+"`is valid");return s.result}async getVersion(){const e=it(await this._rpcRequest("getVersion",[]),Kn(ai));if("error"in e)throw new un(e.error,"failed to get version");return e.result}async getGenesisHash(){const e=it(await this._rpcRequest("getGenesisHash",[]),Kn(mt()));if("error"in e)throw new un(e.error,"failed to get genesis hash");return e.result}async getBlock(e,t){const{commitment:r,config:n}=qn(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),s=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const e=it(s,ds);if("error"in e)throw e.error;return e.result}case"none":{const e=it(s,hs);if("error"in e)throw e.error;return e.result}default:{const e=it(s,us);if("error"in e)throw e.error;const{result:t}=e;return t?{...t,transactions:t.transactions.map((({transaction:e,meta:t,version:r})=>({meta:t,transaction:{...e,message:Yn(r,e.message)},version:r})))}:null}}}catch(e){throw new un(e,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:n}=qn(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),s=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const e=it(s,ps);if("error"in e)throw e.error;return e.result}case"none":{const e=it(s,gs);if("error"in e)throw e.error;return e.result}default:{const e=it(s,fs);if("error"in e)throw e.error;return e.result}}}catch(e){throw new un(e,"failed to get block")}}async getBlockProduction(e){let t,r;if("string"==typeof e)r=e;else if(e){const{commitment:n,...i}=e;r=n,t=i}const n=this._buildArgs([],r,"base64",t),i=it(await this._rpcRequest("getBlockProduction",n),hi);if("error"in i)throw new un(i.error,"failed to get block production information");return i.result}async getTransaction(e,t){const{commitment:r,config:n}=qn(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),s=it(await this._rpcRequest("getTransaction",i),bs);if("error"in s)throw new un(s.error,"failed to get transaction");const o=s.result;return o?{...o,transaction:{...o.transaction,message:Yn(o.version,o.transaction.message)}}:o}async getParsedTransaction(e,t){const{commitment:r,config:n}=qn(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),s=it(await this._rpcRequest("getTransaction",i),ws);if("error"in s)throw new un(s.error,"failed to get transaction");return s.result}async getParsedTransactions(e,t){const{commitment:r,config:n}=qn(t),i=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n)})));return(await this._rpcBatchRequest(i)).map((e=>{const t=it(e,ws);if("error"in t)throw new un(t.error,"failed to get transactions");return t.result}))}async getTransactions(e,t){const{commitment:r,config:n}=qn(t),i=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,void 0,n)})));return(await this._rpcBatchRequest(i)).map((e=>{const t=it(e,bs);if("error"in t)throw new un(t.error,"failed to get transactions");const r=t.result;return r?{...r,transaction:{...r.transaction,message:Yn(r.version,r.transaction.message)}}:r}))}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=it(await this._rpcRequest("getBlock",r),ms);if("error"in n)throw new un(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+e+" not found");const s={...i,transactions:i.transactions.map((({transaction:e,meta:t})=>{const r=new qr(e.message);return{meta:t,transaction:{...e,message:r}}}))};return{...s,transactions:s.transactions.map((({transaction:e,meta:t})=>({meta:t,transaction:Zr.populate(e.message,e.signatures)})))}}async getBlocks(e,t,r){const n=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),i=it(await this._rpcRequest("getBlocks",n),Kn(ct(ft())));if("error"in i)throw new un(i.error,"failed to get blocks");return i.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=it(await this._rpcRequest("getBlock",r),ys);if("error"in n)throw new un(n.error,"failed to get block");const i=n.result;if(!i)throw new Error("Block "+e+" not found");return i}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=it(await this._rpcRequest("getBlock",r),ys);if("error"in n)throw new un(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+e+" not found");return i}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=it(await this._rpcRequest("getTransaction",r),bs);if("error"in n)throw new un(n.error,"failed to get transaction");const i=n.result;if(!i)return i;const s=new qr(i.transaction.message),o=i.transaction.signatures;return{...i,transaction:Zr.populate(s,o)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=it(await this._rpcRequest("getTransaction",r),ws);if("error"in n)throw new un(n.error,"failed to get confirmed transaction");return n.result}async getParsedConfirmedTransactions(e,t){const r=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],t,"jsonParsed")})));return(await this._rpcBatchRequest(r)).map((e=>{const t=it(e,ws);if("error"in t)throw new un(t.error,"failed to get confirmed transactions");return t.result}))}async getConfirmedSignaturesForAddress(e,t,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--t<=0||t<i);)try{const e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(n.until=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}let s=await this.getSlot("finalized");for(;!("before"in n||++r>s);)try{const e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(n.before=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}return(await this.getConfirmedSignaturesForAddress2(e,n)).map((e=>e.signature))}async getConfirmedSignaturesForAddress2(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=it(await this._rpcRequest("getConfirmedSignaturesForAddress2",n),Mi);if("error"in i)throw new un(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=it(await this._rpcRequest("getSignaturesForAddress",n),Ri);if("error"in i)throw new un(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=new Bn({key:e,state:Bn.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=bn.fromAccountData(n.data)),{context:r,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+t)}))}async requestAirdrop(e,t){const r=it(await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),Ss);if("error"in r)throw new un(r.error,`airdrop to ${e.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await dn(100);const e=Date.now()-this._blockhashInfo.lastFetch>=$n;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let e=0;e<50;e++){const e=await this.getLatestBlockhash("finalized");if(r!==e.blockhash)return this._blockhashInfo={latestBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await dn(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=qn(e),n=this._buildArgs([],t,"base64",r),i=it(await this._rpcRequest("getStakeMinimumDelegation",n),Gn(ft()));if("error"in i)throw new un(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(e,t,r){if("message"in e){const n=e.serialize(),s=i.Buffer.from(n).toString("base64");if(Array.isArray(t)||void 0!==r)throw new Error("Invalid arguments");const o=t||{};o.encoding="base64","commitment"in o||(o.commitment=this.commitment),t&&"object"==typeof t&&"innerInstructions"in t&&(o.innerInstructions=t.innerInstructions);const a=[s,o],c=it(await this._rpcRequest("simulateTransaction",a),ui);if("error"in c)throw new Error("failed to simulate transaction: "+c.error.message);return c.result}let n;if(e instanceof Zr){let t=e;n=new Zr,n.feePayer=t.feePayer,n.instructions=e.instructions,n.nonceInfo=t.nonceInfo,n.signatures=t.signatures}else n=Zr.populate(e),n._message=n._json=void 0;if(void 0!==t&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(n.nonceInfo&&s)n.sign(...s);else{let e=this._disableBlockhashCaching;for(;;){const t=await this._blockhashWithExpiryBlockHeight(e);if(n.lastValidBlockHeight=t.lastValidBlockHeight,n.recentBlockhash=t.blockhash,!s)break;if(n.sign(...s),!n.signature)throw new Error("!signature");const r=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}e=!0}}const o=n._compile(),a=o.serialize(),c=n._serialize(a).toString("base64"),l={encoding:"base64",commitment:this.commitment};if(r){const e=(Array.isArray(r)?r:o.nonProgramIds()).map((e=>e.toBase58()));l.accounts={encoding:"base64",addresses:e}}s&&(l.sigVerify=!0),t&&"object"==typeof t&&"innerInstructions"in t&&(l.innerInstructions=t.innerInstructions);const u=[c,l],h=it(await this._rpcRequest("simulateTransaction",u),ui);if("error"in h){let e;if("data"in h.error&&(e=h.error.data.logs,e&&Array.isArray(e))){const t="\n    ",r=t+e.join(t);console.error(h.error.message,r)}throw new cn({action:"simulate",signature:"",transactionMessage:h.error.message,logs:e})}return h.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const r=e.serialize();return await this.sendRawTransaction(r,t)}if(void 0===t||!Array.isArray(t))throw new Error("Invalid arguments");const n=t;if(e.nonceInfo)e.sign(...n);else{let t=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(t);if(e.lastValidBlockHeight=r.lastValidBlockHeight,e.recentBlockhash=r.blockhash,e.sign(...n),!e.signature)throw new Error("!signature");const i=e.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}t=!0}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,t){const r=pr(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},n=t&&t.skipPreflight,i=!0===n?"processed":t&&t.preflightCommitment||this.commitment;t&&null!=t.maxRetries&&(r.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(r.minContextSlot=t.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const s=[e,r],o=it(await this._rpcRequest("sendTransaction",s),As);if("error"in o){let e;throw"data"in o.error&&(e=o.error.data.logs),new cn({action:n?"send":"simulate",signature:"",transactionMessage:o.error.message,logs:e})}return o.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()}),5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((([e,t])=>{this._setSubscription(e,{...t,state:"pending"})}))):this._updateSubscriptions()}_setSubscription(e,t){const r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const r=this._subscriptionStateChangeCallbacksByHash[e];r&&r.forEach((e=>{try{e(t.state)}catch{}}))}}_onSubscriptionStateChange(e,t){const r=this._subscriptionHashByClientSubscriptionId[e];if(null==r)return()=>{};const n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(t),()=>{n.delete(t),0===n.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log(`Error when closing socket connection: ${e.message}`)}}),500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map((async e=>{const r=this._subscriptionsByHash[e];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[e],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(e,{...r,state:"subscribing"});const t=await this._rpcWebSocket.call(i,n);this._setSubscription(e,{...r,serverSubscriptionId:t,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[t]=r.callbacks,await this._updateSubscriptions()}catch(s){if(console.error(`Received ${s instanceof Error?"":"JSON-RPC "}error calling \`${i}\``,{args:n,error:s}),!t())return;this._setSubscription(e,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(e,{...r,state:"unsubscribing"}),this._setSubscription(e,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(n){if(n instanceof Error&&console.error(`${i} error:`,n.message),!t())return;return this._setSubscription(e,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(e,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}})))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach((e=>{try{e(...t)}catch(e){console.error(e)}}))}_wsOnAccountNotification(e){const{result:t,subscription:r}=it(e,Li);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,n=On([e.method,t]),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const t=this._subscriptionsByHash[n];Ur(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:n,config:i}=qn(r),s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=it(e,Bi);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,n){const{commitment:i,config:s}=qn(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s||(n?{filters:Wn(n)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const n=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=it(e,ks);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=it(e,Ui);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=it(e,ji);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,n){const i=t||this._commitment;if(i||r||n){let t={};r&&(t.encoding=r),i&&(t.commitment=i),n&&(t=Object.assign(t,n)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,n){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=it(e,Fi);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const n=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(i)}catch(e){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(e,t,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([e],n,void 0,i),o=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(o)}catch(e){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=it(e,$i);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Cs{constructor(e){this._keypair=void 0,this._keypair=e??lr()}static generate(){return new Cs(lr())}static fromSecretKey(e,t){if(64!==e.byteLength)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const t=e.slice(0,32),n=ur(t);for(let e=0;e<32;e++)if(r[e]!==n[e])throw new Error("provided secretKey is invalid")}return new Cs({publicKey:r,secretKey:e})}static fromSeed(e){const t=ur(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new Cs({publicKey:t,secretKey:r})}get publicKey(){return new Er(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Os=Object.freeze({CreateLookupTable:{index:0,layout:Ke.w3([Ke.DH("instruction"),wn("recentSlot"),Ke.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:Ke.w3([Ke.DH("instruction")])},ExtendLookupTable:{index:2,layout:Ke.w3([Ke.DH("instruction"),wn(),Ke.O6(Mr(),Ke.cY(Ke.DH(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Ke.w3([Ke.DH("instruction")])},CloseLookupTable:{index:4,layout:Ke.w3([Ke.DH("instruction")])}});class Ms{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=Ke.DH("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(Os))if(n.index==t){r=e;break}if(!r)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return r}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=pn(Os.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=pn(Os.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map((e=>new Er(e)))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Rs.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Rs{constructor(){}static createLookupTable(e){const[t,r]=Er.findProgramAddressSync([e.authority.toBuffer(),(0,Ge.Bq)(BigInt(e.recentSlot),8)],this.programId),n=fn(Os.CreateLookupTable,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),i=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:En.programId,isSigner:!1,isWritable:!1}];return[new Gr({programId:this.programId,keys:i,data:n}),t]}static freezeLookupTable(e){const t=fn(Os.FreezeLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Gr({programId:this.programId,keys:r,data:t})}static extendLookupTable(e){const t=fn(Os.ExtendLookupTable,{addresses:e.addresses.map((e=>e.toBytes()))}),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&r.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:En.programId,isSigner:!1,isWritable:!1}),new Gr({programId:this.programId,keys:r,data:t})}static deactivateLookupTable(e){const t=fn(Os.DeactivateLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Gr({programId:this.programId,keys:r,data:t})}static closeLookupTable(e){const t=fn(Os.CloseLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new Gr({programId:this.programId,keys:r,data:t})}}Rs.programId=new Er("AddressLookupTab1e1111111111111111111111111");class Ls{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=Ke.u8("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(Ns))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return r}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:r}=pn(Ns.RequestUnits,e.data);return{units:t,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=pn(Ns.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=pn(Ns.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=pn(Ns.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Bs.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Ns=Object.freeze({RequestUnits:{index:0,layout:Ke.w3([Ke.u8("instruction"),Ke.DH("units"),Ke.DH("additionalFee")])},RequestHeapFrame:{index:1,layout:Ke.w3([Ke.u8("instruction"),Ke.DH("bytes")])},SetComputeUnitLimit:{index:2,layout:Ke.w3([Ke.u8("instruction"),Ke.DH("units")])},SetComputeUnitPrice:{index:3,layout:Ke.w3([Ke.u8("instruction"),wn("microLamports")])}});class Bs{constructor(){}static requestUnits(e){const t=fn(Ns.RequestUnits,e);return new Gr({keys:[],programId:this.programId,data:t})}static requestHeapFrame(e){const t=fn(Ns.RequestHeapFrame,e);return new Gr({keys:[],programId:this.programId,data:t})}static setComputeUnitLimit(e){const t=fn(Ns.SetComputeUnitLimit,e);return new Gr({keys:[],programId:this.programId,data:t})}static setComputeUnitPrice(e){const t=fn(Ns.SetComputeUnitPrice,{microLamports:BigInt(e.microLamports)});return new Gr({keys:[],programId:this.programId,data:t})}}Bs.programId=new Er("ComputeBudget111111111111111111111111111111");const Ds=Ke.w3([Ke.u8("numSignatures"),Ke.u8("padding"),Ke.NX("signatureOffset"),Ke.NX("signatureInstructionIndex"),Ke.NX("publicKeyOffset"),Ke.NX("publicKeyInstructionIndex"),Ke.NX("messageDataOffset"),Ke.NX("messageDataSize"),Ke.NX("messageInstructionIndex")]);class Us{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,instructionIndex:s}=e;Ur(32===t.length,`Public Key must be 32 bytes but received ${t.length} bytes`),Ur(64===n.length,`Signature must be 64 bytes but received ${n.length} bytes`);const o=Ds.span,a=o+t.length,c=a+n.length,l=i.Buffer.alloc(c+r.length),u=null==s?65535:s;return Ds.encode({numSignatures:1,padding:0,signatureOffset:a,signatureInstructionIndex:u,publicKeyOffset:o,publicKeyInstructionIndex:u,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:u},l),l.fill(t,o),l.fill(n,a),l.fill(r,c),new Gr({keys:[],programId:Us.programId,data:l})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;Ur(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{const e=Cs.fromSecretKey(t),i=e.publicKey.toBytes(),s=dr(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,instructionIndex:n})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}Us.programId=new Er("Ed25519SigVerify111111111111111111111111111"),ar.utils.isValidPrivateKey;const zs=ar.getPublicKey,js=Ke.w3([Ke.u8("numSignatures"),Ke.NX("signatureOffset"),Ke.u8("signatureInstructionIndex"),Ke.NX("ethAddressOffset"),Ke.u8("ethAddressInstructionIndex"),Ke.NX("messageDataOffset"),Ke.NX("messageDataSize"),Ke.u8("messageInstructionIndex"),Ke.av(20,"ethAddress"),Ke.av(64,"signature"),Ke.u8("recoveryId")]);class Fs{constructor(){}static publicKeyToEthAddress(e){Ur(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return i.Buffer.from(qt(pr(e))).slice(-20)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,recoveryId:i,instructionIndex:s}=e;return Fs.createInstructionWithEthAddress({ethAddress:Fs.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:r,signature:n,recoveryId:s,instructionIndex:o=0}=e;let a;a="string"==typeof t?t.startsWith("0x")?i.Buffer.from(t.substr(2),"hex"):i.Buffer.from(t,"hex"):t,Ur(20===a.length,`Address must be 20 bytes but received ${a.length} bytes`);const c=12+a.length,l=c+n.length+1,u=i.Buffer.alloc(js.span+r.length);return js.encode({numSignatures:1,signatureOffset:c,signatureInstructionIndex:o,ethAddressOffset:12,ethAddressInstructionIndex:o,messageDataOffset:l,messageDataSize:r.length,messageInstructionIndex:o,signature:pr(n),ethAddress:pr(a),recoveryId:s},u),u.fill(pr(r),js.span),new Gr({keys:[],programId:Fs.programId,data:u})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;Ur(32===t.length,`Private key must be 32 bytes but received ${t.length} bytes`);try{const e=pr(t),s=zs(e,!1).slice(1),o=i.Buffer.from(qt(pr(r))),[a,c]=((e,t)=>{const r=ar.sign(e,t);return[r.toCompactRawBytes(),r.recovery]})(o,e);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:a,recoveryId:c,instructionIndex:n})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}var $s;Fs.programId=new Er("KeccakSecp256k11111111111111111111111111111");const qs=new Er("StakeConfig11111111111111111111111111111111");class Ws{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class Hs{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}$s=Hs,Hs.default=new $s(0,0,Er.default);class Vs{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=Ke.DH("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(Ks))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a StakeInstruction");return r}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:r}=pn(Ks.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Ws(new Er(t.staker),new Er(t.withdrawer)),lockup:new Hs(r.unixTimestamp,r.epoch,new Er(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),pn(Ks.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:r}=pn(Ks.Authorize,e.data),n={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Er(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(n.custodianPubkey=e.keys[3].pubkey),n}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=pn(Ks.AuthorizeWithSeed,e.data),s={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:n,authorityOwner:new Er(i),newAuthorizedPubkey:new Er(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=pn(Ks.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),pn(Ks.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=pn(Ks.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),pn(Ks.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Zs.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ks=Object.freeze({Initialize:{index:0,layout:Ke.w3([Ke.DH("instruction"),((e="authorized")=>Ke.w3([Mr("staker"),Mr("withdrawer")],e))(),((e="lockup")=>Ke.w3([Ke.Wg("unixTimestamp"),Ke.Wg("epoch"),Mr("custodian")],e))()])},Authorize:{index:1,layout:Ke.w3([Ke.DH("instruction"),Mr("newAuthorized"),Ke.DH("stakeAuthorizationType")])},Delegate:{index:2,layout:Ke.w3([Ke.DH("instruction")])},Split:{index:3,layout:Ke.w3([Ke.DH("instruction"),Ke.Wg("lamports")])},Withdraw:{index:4,layout:Ke.w3([Ke.DH("instruction"),Ke.Wg("lamports")])},Deactivate:{index:5,layout:Ke.w3([Ke.DH("instruction")])},Merge:{index:7,layout:Ke.w3([Ke.DH("instruction")])},AuthorizeWithSeed:{index:8,layout:Ke.w3([Ke.DH("instruction"),Mr("newAuthorized"),Ke.DH("stakeAuthorizationType"),Lr("authoritySeed"),Mr("authorityOwner")])}}),Gs=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Zs{constructor(){}static initialize(e){const{stakePubkey:t,authorized:r,lockup:n}=e,i=n||Hs.default,s=fn(Ks.Initialize,{authorized:{staker:pr(r.staker.toBuffer()),withdrawer:pr(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:pr(i.custodian.toBuffer())}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rn,isSigner:!1,isWritable:!1}],programId:this.programId,data:s};return new Gr(o)}static createAccountWithSeed(e){const t=new Zr;t.add(En.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(e){const t=new Zr;t.add(En.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,i=fn(Ks.Delegate);return(new Zr).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Xr,isSigner:!1,isWritable:!1},{pubkey:an,isSigner:!1,isWritable:!1},{pubkey:qs,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(e){const{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:s}=e,o=fn(Ks.Authorize,{newAuthorized:pr(n.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Xr,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!0,isWritable:!1}),(new Zr).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=e,c=fn(Ks.AuthorizeWithSeed,{newAuthorized:pr(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:pr(i.toBuffer())}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Xr,isSigner:!1,isWritable:!1}];return a&&l.push({pubkey:a,isSigner:!0,isWritable:!1}),(new Zr).add({keys:l,programId:this.programId,data:c})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=e,s=fn(Ks.Split,{lamports:i});return new Gr({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static split(e,t){const r=new Zr;return r.add(En.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=e,c=new Zr;return c.add(En.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),t&&t>0&&c.add(En.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,i=fn(Ks.Merge);return(new Zr).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Xr,isSigner:!1,isWritable:!1},{pubkey:an,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:s}=e,o=fn(Ks.Withdraw,{lamports:i}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Xr,isSigner:!1,isWritable:!1},{pubkey:an,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!0,isWritable:!1}),(new Zr).add({keys:a,programId:this.programId,data:o})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:r}=e,n=fn(Ks.Deactivate);return(new Zr).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Xr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}Zs.programId=new Er("Stake11111111111111111111111111111111111111"),Zs.space=200;class Ys{constructor(e,t,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=r,this.commission=n}}class Js{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=Ke.DH("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(Xs))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a VoteInstruction");return r}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=pn(Xs.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new Ys(new Er(t.nodePubkey),new Er(t.authorizedVoter),new Er(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:r}=pn(Xs.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Er(t),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=pn(Xs.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Er(t),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new Er(n),voteAuthorizationType:{index:i},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=pn(Xs.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(eo.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Xs=Object.freeze({InitializeAccount:{index:0,layout:Ke.w3([Ke.DH("instruction"),((e="voteInit")=>Ke.w3([Mr("nodePubkey"),Mr("authorizedVoter"),Mr("authorizedWithdrawer"),Ke.u8("commission")],e))()])},Authorize:{index:1,layout:Ke.w3([Ke.DH("instruction"),Mr("newAuthorized"),Ke.DH("voteAuthorizationType")])},Withdraw:{index:3,layout:Ke.w3([Ke.DH("instruction"),Ke.Wg("lamports")])},UpdateValidatorIdentity:{index:4,layout:Ke.w3([Ke.DH("instruction")])},AuthorizeWithSeed:{index:10,layout:Ke.w3([Ke.DH("instruction"),((e="voteAuthorizeWithSeedArgs")=>Ke.w3([Ke.DH("voteAuthorizationType"),Mr("currentAuthorityDerivedKeyOwnerPubkey"),Lr("currentAuthorityDerivedKeySeed"),Mr("newAuthorized")],e))()])}}),Qs=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class eo{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:r,voteInit:n}=e,i=fn(Xs.InitializeAccount,{voteInit:{nodePubkey:pr(n.nodePubkey.toBuffer()),authorizedVoter:pr(n.authorizedVoter.toBuffer()),authorizedWithdrawer:pr(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),s={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rn,isSigner:!1,isWritable:!1},{pubkey:Xr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new Gr(s)}static createAccount(e){const t=new Zr;return t.add(En.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=e,s=fn(Xs.Authorize,{newAuthorized:pr(n.toBuffer()),voteAuthorizationType:i.index}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Xr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Zr).add({keys:o,programId:this.programId,data:s})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:s,votePubkey:o}=e,a=fn(Xs.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:pr(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:pr(i.toBuffer()),voteAuthorizationType:s.index}}),c=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:Xr,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new Zr).add({keys:c,programId:this.programId,data:a})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=e,s=fn(Xs.Withdraw,{lamports:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Zr).add({keys:o,programId:this.programId,data:s})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return eo.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:n}=e,i=fn(Xs.UpdateValidatorIdentity),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Zr).add({keys:s,programId:this.programId,data:i})}}eo.programId=new Er("Vote111111111111111111111111111111111111111"),eo.space=3762;const to=new Er("Va1idator1nfo111111111111111111111111111111"),ro=bt({name:mt(),website:pt(mt()),details:pt(mt()),iconUrl:pt(mt()),keybaseUsername:pt(mt())});class no{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(2!==Br(t))return null;const r=[];for(let e=0;e<2;e++){const e=new Er($r(t,0,vr)),n=1===Fr(t);r.push({publicKey:e,isSigner:n})}if(r[0].publicKey.equals(to)&&r[1].isSigner){const e=Lr().decode(i.Buffer.from(t)),n=JSON.parse(e);return nt(n,ro),new no(r[1].publicKey,n)}return null}}const io=new Er("Vote111111111111111111111111111111111111111"),so=Ke.w3([Mr("nodePubkey"),Mr("authorizedWithdrawer"),Ke.u8("commission"),Ke.I0(),Ke.O6(Ke.w3([Ke.I0("slot"),Ke.DH("confirmationCount")]),Ke.cY(Ke.DH(),-8),"votes"),Ke.u8("rootSlotValid"),Ke.I0("rootSlot"),Ke.I0(),Ke.O6(Ke.w3([Ke.I0("epoch"),Mr("authorizedVoter")]),Ke.cY(Ke.DH(),-8),"authorizedVoters"),Ke.w3([Ke.O6(Ke.w3([Mr("authorizedPubkey"),Ke.I0("epochOfLastAuthorizedSwitch"),Ke.I0("targetEpoch")]),32,"buf"),Ke.I0("idx"),Ke.u8("isEmpty")],"priorVoters"),Ke.I0(),Ke.O6(Ke.w3([Ke.I0("epoch"),Ke.I0("credits"),Ke.I0("prevCredits")]),Ke.cY(Ke.DH(),-8),"epochCredits"),Ke.w3([Ke.I0("slot"),Ke.I0("timestamp")],"lastTimestamp")]);class oo{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const t=so.decode(pr(e),4);let r=t.rootSlot;return t.rootSlotValid||(r=null),new oo({nodePubkey:new Er(t.nodePubkey),authorizedWithdrawer:new Er(t.authorizedWithdrawer),commission:t.commission,votes:t.votes,rootSlot:r,authorizedVoters:t.authorizedVoters.map(ao),priorVoters:lo(t.priorVoters),epochCredits:t.epochCredits,lastTimestamp:t.lastTimestamp})}}function ao({authorizedVoter:e,epoch:t}){return{epoch:t,authorizedVoter:new Er(e)}}function co({authorizedPubkey:e,epochOfLastAuthorizedSwitch:t,targetEpoch:r}){return{authorizedPubkey:new Er(e),epochOfLastAuthorizedSwitch:t,targetEpoch:r}}function lo({buf:e,idx:t,isEmpty:r}){return r?[]:[...e.slice(t+1).map(co),...e.slice(0,t).map(co)]}const uo={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function ho(e,t){const r=!1===t?"http":"https";if(!e)return uo[r].devnet;const n=uo[r][e];if(!n)throw new Error(`Unknown ${r} cluster: ${e}`);return n}async function fo(e,t,r,n){let i,s;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,s=n):s=r;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},a=await e.sendRawTransaction(t,o),c=s&&s.commitment,l=i?e.confirmTransaction(i,c):e.confirmTransaction(a,c),u=(await l).value;if(u.err){if(null!=a)throw new cn({action:o?.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(u)})`});throw new Error(`Raw transaction ${a} failed (${JSON.stringify(u)})`)}return a}const po=1e9},2900:(e,t,r)=>{"use strict";t.I0=t.DH=t.NX=t.u8=t.cY=void 0,t.av=t.O6=t.w3=t.Wg=void 0;const n=r(8287);function i(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function s(e){return i(e),n.Buffer.from(e.buffer,e.byteOffset,e.length)}class o{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function a(e,t){return t.property?e+"["+t.property+"]":e}class c extends o{isCount(){throw new Error("ExternalLayout is abstract")}}class l extends c{constructor(e,t=0,r){if(!(e instanceof o))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof u||this.layout instanceof h}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}class u extends o{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readUIntLE(t,this.span)}encode(e,t,r=0){return s(t).writeUIntLE(e,r,this.span),this.span}}class h extends o{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readUIntBE(t,this.span)}encode(e,t,r=0){return s(t).writeUIntBE(e,r,this.span),this.span}}const d=Math.pow(2,32);function f(e){const t=Math.floor(e/d);return{hi32:t,lo32:e-t*d}}function p(e,t){return e*d+t}class g extends o{constructor(e){super(8,e)}decode(e,t=0){const r=s(e),n=r.readUInt32LE(t);return p(r.readUInt32LE(t+4),n)}encode(e,t,r=0){const n=f(e),i=s(t);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}class m extends o{constructor(e){super(8,e)}decode(e,t=0){const r=s(e),n=r.readUInt32LE(t);return p(r.readInt32LE(t+4),n)}encode(e,t,r=0){const n=f(e),i=s(t);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}class y extends o{constructor(e,t,r){if(!(e instanceof o))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof c&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(t instanceof c)&&0<e.span&&(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof c&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e,t=0){const r=[];let n=0,i=this.count;for(i instanceof c&&(i=i.decode(e,t));n<i;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r=0){const n=this.elementLayout,i=e.reduce(((e,i)=>e+n.encode(i,t,r+e)),0);return this.count instanceof c&&this.count.encode(e.length,t,r),i}}class b extends o{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof o),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===r&&(r=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(e){throw new RangeError("indeterminate span")}return r}decode(e,t=0){i(e);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const n=r;let i=0,s=0;for(const n of this.fields){let o=n.span;if(s=0<o?o:0,void 0!==n.property){const i=e[n.property];void 0!==i&&(s=n.encode(i,t,r),0>o&&(o=n.getSpan(t,r)))}i=r,r+=o}return i+s-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class w extends o{constructor(e,t){if(!(e instanceof c&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof c||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),s(e).slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof c&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw new TypeError(a("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw new RangeError("encoding overruns Uint8Array");const i=s(e);return s(t).write(i.toString("hex"),r,n,"hex"),this.length instanceof c&&this.length.encode(n,t,r),n}}t.cY=(e,t,r)=>new l(e,t,r),t.u8=e=>new u(1,e),t.NX=e=>new u(2,e),t.DH=e=>new u(4,e),t.I0=e=>new g(e),t.Wg=e=>new m(e),t.w3=(e,t,r)=>new b(e,t,r),t.O6=(e,t,r)=>new y(e,t,r),t.av=(e,t)=>new w(e,t)},972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4512);function i(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}function s(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}function o(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function a(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function c(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function l(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function u(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}function h(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}function d(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),u(e/4294967296>>>0,t,r),u(e>>>0,t,r+4),t}function f(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),h(e>>>0,t,r),h(e/4294967296>>>0,t,r+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=i,t.writeInt16BE=i,t.writeUint16LE=s,t.writeInt16LE=s,t.readInt32BE=o,t.readUint32BE=a,t.readInt32LE=c,t.readUint32LE=l,t.writeUint32BE=u,t.writeInt32BE=u,t.writeUint32LE=h,t.writeInt32LE=h,t.readInt64BE=function(e,t){void 0===t&&(t=0);var r=o(e,t),n=o(e,t+4);return 4294967296*r+n-4294967296*(n>>31)},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*a(e,t)+a(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var r=c(e,t);return 4294967296*c(e,t+4)+r-4294967296*(r>>31)},t.readUint64LE=function(e,t){void 0===t&&(t=0);var r=l(e,t);return 4294967296*l(e,t+4)+r},t.writeUint64BE=d,t.writeInt64BE=d,t.writeUint64LE=f,t.writeInt64LE=f,t.readUintBE=function(e,t,r){if(void 0===r&&(r=0),e%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=e/8+r-1;s>=r;s--)n+=t[s]*i,i*=256;return n},t.readUintLE=function(e,t,r){if(void 0===r&&(r=0),e%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+e/8;s++)n+=t[s]*i,i*=256;return n},t.writeUintBE=function(e,t,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var s=1,o=e/8+i-1;o>=i;o--)r[o]=t/s&255,s*=256;return r},t.writeUintLE=function(e,t,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var s=1,o=i;o<i+e/8;o++)r[o]=t/s&255,s*=256;return r},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e),t},t.writeFloat32LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e,!0),t},t.writeFloat64BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e),t},t.writeFloat64LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e,!0),t}},9918:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(972),i=r(6228);function s(e,t,r){for(var i=1634760805,s=857760878,o=2036477234,a=1797285236,c=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],h=r[15]<<24|r[14]<<16|r[13]<<8|r[12],d=r[19]<<24|r[18]<<16|r[17]<<8|r[16],f=r[23]<<24|r[22]<<16|r[21]<<8|r[20],p=r[27]<<24|r[26]<<16|r[25]<<8|r[24],g=r[31]<<24|r[30]<<16|r[29]<<8|r[28],m=t[3]<<24|t[2]<<16|t[1]<<8|t[0],y=t[7]<<24|t[6]<<16|t[5]<<8|t[4],b=t[11]<<24|t[10]<<16|t[9]<<8|t[8],w=t[15]<<24|t[14]<<16|t[13]<<8|t[12],v=i,_=s,E=o,x=a,S=c,A=l,I=u,k=h,T=d,P=f,C=p,O=g,M=m,R=y,L=b,N=w,B=0;B<20;B+=2)S=(S^=T=T+(M=(M^=v=v+S|0)>>>16|M<<16)|0)>>>20|S<<12,A=(A^=P=P+(R=(R^=_=_+A|0)>>>16|R<<16)|0)>>>20|A<<12,I=(I^=C=C+(L=(L^=E=E+I|0)>>>16|L<<16)|0)>>>20|I<<12,k=(k^=O=O+(N=(N^=x=x+k|0)>>>16|N<<16)|0)>>>20|k<<12,I=(I^=C=C+(L=(L^=E=E+I|0)>>>24|L<<8)|0)>>>25|I<<7,k=(k^=O=O+(N=(N^=x=x+k|0)>>>24|N<<8)|0)>>>25|k<<7,A=(A^=P=P+(R=(R^=_=_+A|0)>>>24|R<<8)|0)>>>25|A<<7,S=(S^=T=T+(M=(M^=v=v+S|0)>>>24|M<<8)|0)>>>25|S<<7,A=(A^=C=C+(N=(N^=v=v+A|0)>>>16|N<<16)|0)>>>20|A<<12,I=(I^=O=O+(M=(M^=_=_+I|0)>>>16|M<<16)|0)>>>20|I<<12,k=(k^=T=T+(R=(R^=E=E+k|0)>>>16|R<<16)|0)>>>20|k<<12,S=(S^=P=P+(L=(L^=x=x+S|0)>>>16|L<<16)|0)>>>20|S<<12,k=(k^=T=T+(R=(R^=E=E+k|0)>>>24|R<<8)|0)>>>25|k<<7,S=(S^=P=P+(L=(L^=x=x+S|0)>>>24|L<<8)|0)>>>25|S<<7,I=(I^=O=O+(M=(M^=_=_+I|0)>>>24|M<<8)|0)>>>25|I<<7,A=(A^=C=C+(N=(N^=v=v+A|0)>>>24|N<<8)|0)>>>25|A<<7;n.writeUint32LE(v+i|0,e,0),n.writeUint32LE(_+s|0,e,4),n.writeUint32LE(E+o|0,e,8),n.writeUint32LE(x+a|0,e,12),n.writeUint32LE(S+c|0,e,16),n.writeUint32LE(A+l|0,e,20),n.writeUint32LE(I+u|0,e,24),n.writeUint32LE(k+h|0,e,28),n.writeUint32LE(T+d|0,e,32),n.writeUint32LE(P+f|0,e,36),n.writeUint32LE(C+p|0,e,40),n.writeUint32LE(O+g|0,e,44),n.writeUint32LE(M+m|0,e,48),n.writeUint32LE(R+y|0,e,52),n.writeUint32LE(L+b|0,e,56),n.writeUint32LE(N+w|0,e,60)}function o(e,t,r,n,o){if(void 0===o&&(o=0),32!==e.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var c,l;if(0===o){if(8!==t.length&&12!==t.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");l=(c=new Uint8Array(16)).length-t.length,c.set(t,l)}else{if(16!==t.length)throw new Error("ChaCha nonce with counter must be 16 bytes");c=t,l=o}for(var u=new Uint8Array(64),h=0;h<r.length;h+=64){s(u,c,e);for(var d=h;d<h+64&&d<r.length;d++)n[d]=r[d]^u[d-h];a(c,0,l)}return i.wipe(u),0===o&&i.wipe(c),n}function a(e,t,r){for(var n=1;r--;)n=n+(255&e[t])|0,e[t]=255&n,n>>>=8,t++;if(n>0)throw new Error("ChaCha: counter overflow")}t.streamXOR=o,t.stream=function(e,t,r,n){return void 0===n&&(n=0),i.wipe(r),o(e,t,r,r,n)}},1612:(e,t,r)=>{"use strict";var n=r(9918),i=r(7360),s=r(6228),o=r(972),a=r(6452);t.J4=32,t.PX=12,t.iW=16;var c=new Uint8Array(16),l=function(){function e(e){if(this.nonceLength=t.PX,this.tagLength=t.iW,e.length!==t.J4)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,r,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(e,o.length-e.length);var a=new Uint8Array(32);n.stream(this._key,o,a,4);var c,l=t.length+this.tagLength;if(i){if(i.length!==l)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(l);return n.streamXOR(this._key,o,t,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),a,c.subarray(0,c.length-this.tagLength),r),s.wipe(o),c},e.prototype.open=function(e,t,r,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(e,o.length-e.length);var c=new Uint8Array(32);n.stream(this._key,o,c,4);var l=new Uint8Array(this.tagLength);if(this._authenticate(l,c,t.subarray(0,t.length-this.tagLength),r),!a.equal(l,t.subarray(t.length-this.tagLength,t.length)))return null;var u,h=t.length-this.tagLength;if(i){if(i.length!==h)throw new Error("ChaCha20Poly1305: incorrect destination length");u=i}else u=new Uint8Array(h);return n.streamXOR(this._key,o,t.subarray(0,t.length-this.tagLength),u,4),s.wipe(o),u},e.prototype.clean=function(){return s.wipe(this._key),this},e.prototype._authenticate=function(e,t,r,n){var a=new i.Poly1305(t);n&&(a.update(n),n.length%16>0&&a.update(c.subarray(n.length%16))),a.update(r),r.length%16>0&&a.update(c.subarray(r.length%16));var l=new Uint8Array(8);n&&o.writeUint64LE(n.length,l),a.update(l),o.writeUint64LE(r.length,l),a.update(l);for(var u=a.digest(),h=0;h<u.length;h++)e[h]=u[h];a.clean(),s.wipe(u),s.wipe(l)},e}();t.g6=l},6452:(e,t)=>{"use strict";function r(e,t){if(e.length!==t.length)return 0;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 1&r-1>>>8}Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t,r){return~(e-1)&t|e-1&r},t.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},t.compare=r,t.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==r(e,t)}},4904:(e,t,r)=>{"use strict";t._S=t.K=t.TP=t.wE=t.Ee=void 0;r(7052);const n=r(4974);r(6228);function i(e){const t=new Float64Array(16);if(e)for(let r=0;r<e.length;r++)t[r]=e[r];return t}t.Ee=64,t.wE=64,t.TP=32,new Uint8Array(32)[0]=9;const s=i(),o=i([1]),a=(i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),c=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function u(e,t){for(let r=0;r<16;r++)e[r]=0|t[r]}function h(e){let t=1;for(let r=0;r<16;r++){let n=e[r]+t+65535;t=Math.floor(n/65536),e[r]=n-65536*t}e[0]+=t-1+37*(t-1)}function d(e,t,r){const n=~(r-1);for(let r=0;r<16;r++){const i=n&(e[r]^t[r]);e[r]^=i,t[r]^=i}}function f(e,t){const r=i(),n=i();for(let e=0;e<16;e++)n[e]=t[e];h(n),h(n),h(n);for(let e=0;e<2;e++){r[0]=n[0]-65517;for(let e=1;e<15;e++)r[e]=n[e]-65535-(r[e-1]>>16&1),r[e-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);const e=r[15]>>16&1;r[14]&=65535,d(n,r,1-e)}for(let t=0;t<16;t++)e[2*t]=255&n[t],e[2*t+1]=n[t]>>8}function p(e){const t=new Uint8Array(32);return f(t,e),1&t[0]}function g(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]+r[n]}function m(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]-r[n]}function y(e,t,r){let n,i,s=0,o=0,a=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,m=0,y=0,b=0,w=0,v=0,_=0,E=0,x=0,S=0,A=0,I=0,k=0,T=0,P=0,C=0,O=0,M=0,R=0,L=0,N=0,B=r[0],D=r[1],U=r[2],z=r[3],j=r[4],F=r[5],$=r[6],q=r[7],W=r[8],H=r[9],V=r[10],K=r[11],G=r[12],Z=r[13],Y=r[14],J=r[15];n=t[0],s+=n*B,o+=n*D,a+=n*U,c+=n*z,l+=n*j,u+=n*F,h+=n*$,d+=n*q,f+=n*W,p+=n*H,g+=n*V,m+=n*K,y+=n*G,b+=n*Z,w+=n*Y,v+=n*J,n=t[1],o+=n*B,a+=n*D,c+=n*U,l+=n*z,u+=n*j,h+=n*F,d+=n*$,f+=n*q,p+=n*W,g+=n*H,m+=n*V,y+=n*K,b+=n*G,w+=n*Z,v+=n*Y,_+=n*J,n=t[2],a+=n*B,c+=n*D,l+=n*U,u+=n*z,h+=n*j,d+=n*F,f+=n*$,p+=n*q,g+=n*W,m+=n*H,y+=n*V,b+=n*K,w+=n*G,v+=n*Z,_+=n*Y,E+=n*J,n=t[3],c+=n*B,l+=n*D,u+=n*U,h+=n*z,d+=n*j,f+=n*F,p+=n*$,g+=n*q,m+=n*W,y+=n*H,b+=n*V,w+=n*K,v+=n*G,_+=n*Z,E+=n*Y,x+=n*J,n=t[4],l+=n*B,u+=n*D,h+=n*U,d+=n*z,f+=n*j,p+=n*F,g+=n*$,m+=n*q,y+=n*W,b+=n*H,w+=n*V,v+=n*K,_+=n*G,E+=n*Z,x+=n*Y,S+=n*J,n=t[5],u+=n*B,h+=n*D,d+=n*U,f+=n*z,p+=n*j,g+=n*F,m+=n*$,y+=n*q,b+=n*W,w+=n*H,v+=n*V,_+=n*K,E+=n*G,x+=n*Z,S+=n*Y,A+=n*J,n=t[6],h+=n*B,d+=n*D,f+=n*U,p+=n*z,g+=n*j,m+=n*F,y+=n*$,b+=n*q,w+=n*W,v+=n*H,_+=n*V,E+=n*K,x+=n*G,S+=n*Z,A+=n*Y,I+=n*J,n=t[7],d+=n*B,f+=n*D,p+=n*U,g+=n*z,m+=n*j,y+=n*F,b+=n*$,w+=n*q,v+=n*W,_+=n*H,E+=n*V,x+=n*K,S+=n*G,A+=n*Z,I+=n*Y,k+=n*J,n=t[8],f+=n*B,p+=n*D,g+=n*U,m+=n*z,y+=n*j,b+=n*F,w+=n*$,v+=n*q,_+=n*W,E+=n*H,x+=n*V,S+=n*K,A+=n*G,I+=n*Z,k+=n*Y,T+=n*J,n=t[9],p+=n*B,g+=n*D,m+=n*U,y+=n*z,b+=n*j,w+=n*F,v+=n*$,_+=n*q,E+=n*W,x+=n*H,S+=n*V,A+=n*K,I+=n*G,k+=n*Z,T+=n*Y,P+=n*J,n=t[10],g+=n*B,m+=n*D,y+=n*U,b+=n*z,w+=n*j,v+=n*F,_+=n*$,E+=n*q,x+=n*W,S+=n*H,A+=n*V,I+=n*K,k+=n*G,T+=n*Z,P+=n*Y,C+=n*J,n=t[11],m+=n*B,y+=n*D,b+=n*U,w+=n*z,v+=n*j,_+=n*F,E+=n*$,x+=n*q,S+=n*W,A+=n*H,I+=n*V,k+=n*K,T+=n*G,P+=n*Z,C+=n*Y,O+=n*J,n=t[12],y+=n*B,b+=n*D,w+=n*U,v+=n*z,_+=n*j,E+=n*F,x+=n*$,S+=n*q,A+=n*W,I+=n*H,k+=n*V,T+=n*K,P+=n*G,C+=n*Z,O+=n*Y,M+=n*J,n=t[13],b+=n*B,w+=n*D,v+=n*U,_+=n*z,E+=n*j,x+=n*F,S+=n*$,A+=n*q,I+=n*W,k+=n*H,T+=n*V,P+=n*K,C+=n*G,O+=n*Z,M+=n*Y,R+=n*J,n=t[14],w+=n*B,v+=n*D,_+=n*U,E+=n*z,x+=n*j,S+=n*F,A+=n*$,I+=n*q,k+=n*W,T+=n*H,P+=n*V,C+=n*K,O+=n*G,M+=n*Z,R+=n*Y,L+=n*J,n=t[15],v+=n*B,_+=n*D,E+=n*U,x+=n*z,S+=n*j,A+=n*F,I+=n*$,k+=n*q,T+=n*W,P+=n*H,C+=n*V,O+=n*K,M+=n*G,R+=n*Z,L+=n*Y,N+=n*J,s+=38*_,o+=38*E,a+=38*x,c+=38*S,l+=38*A,u+=38*I,h+=38*k,d+=38*T,f+=38*P,p+=38*C,g+=38*O,m+=38*M,y+=38*R,b+=38*L,w+=38*N,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,s+=i-1+37*(i-1),e[0]=s,e[1]=o,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=d,e[8]=f,e[9]=p,e[10]=g,e[11]=m,e[12]=y,e[13]=b,e[14]=w,e[15]=v}function b(e,t){y(e,t,t)}function w(e,t){const r=i(),n=i(),s=i(),o=i(),c=i(),l=i(),u=i(),h=i(),d=i();m(r,e[1],e[0]),m(d,t[1],t[0]),y(r,r,d),g(n,e[0],e[1]),g(d,t[0],t[1]),y(n,n,d),y(s,e[3],t[3]),y(s,s,a),y(o,e[2],t[2]),g(o,o,o),m(c,n,r),m(l,o,s),g(u,o,s),g(h,n,r),y(e[0],c,l),y(e[1],h,u),y(e[2],u,l),y(e[3],c,h)}function v(e,t,r){for(let n=0;n<4;n++)d(e[n],t[n],r)}function _(e,t){const r=i(),n=i(),s=i();(function(e,t){const r=i();let n;for(n=0;n<16;n++)r[n]=t[n];for(n=253;n>=0;n--)b(r,r),2!==n&&4!==n&&y(r,r,t);for(n=0;n<16;n++)e[n]=r[n]})(s,t[2]),y(r,t[0],s),y(n,t[1],s),f(e,n),e[31]^=p(r)<<7}function E(e,t){const r=[i(),i(),i(),i()];u(r[0],c),u(r[1],l),u(r[2],o),y(r[3],c,l),function(e,t,r){u(e[0],s),u(e[1],o),u(e[2],o),u(e[3],s);for(let n=255;n>=0;--n){const i=r[n/8|0]>>(7&n)&1;v(e,t,i),w(t,e),w(e,e),v(e,t,i)}}(e,r,t)}t.K=function(e){if(e.length!==t.TP)throw new Error(`ed25519: seed must be ${t.TP} bytes`);const r=(0,n.hash)(e);r[0]&=248,r[31]&=127,r[31]|=64;const s=new Uint8Array(32),o=[i(),i(),i(),i()];E(o,r),_(s,o);const a=new Uint8Array(64);return a.set(e),a.set(s,32),{publicKey:s,secretKey:a}};const x=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function S(e,t){let r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)t[i]+=r-16*t[n]*x[i-(n-32)],r=Math.floor((t[i]+128)/256),t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*x[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*x[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function A(e){const t=new Float64Array(64);for(let r=0;r<64;r++)t[r]=e[r];for(let t=0;t<64;t++)e[t]=0;S(e,t)}t._S=function(e,t){const r=new Float64Array(64),s=[i(),i(),i(),i()],o=(0,n.hash)(e.subarray(0,32));o[0]&=248,o[31]&=127,o[31]|=64;const a=new Uint8Array(64);a.set(o.subarray(32),32);const c=new n.SHA512;c.update(a.subarray(32)),c.update(t);const l=c.digest();c.clean(),A(l),E(s,l),_(a,s),c.reset(),c.update(a.subarray(0,32)),c.update(e.subarray(32)),c.update(t);const u=c.digest();A(u);for(let e=0;e<32;e++)r[e]=l[e];for(let e=0;e<32;e++)for(let t=0;t<32;t++)r[e+t]+=u[e]*o[t];return S(a.subarray(32),r),a}},2670:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=function(e){return void 0!==e.saveState&&void 0!==e.restoreState&&void 0!==e.cleanSavedState}},6804:(e,t,r)=>{"use strict";var n=r(2412),i=r(6228),s=function(){function e(e,t,r,i){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=n.hmac(this._hash,r,t);this._hmac=new n.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),r=0;r<t.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[r]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),i.wipe(this._buffer),i.wipe(this._counter),this._bufpos=0},e}();t.i=s},2412:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2670),i=r(6452),s=r(6228),o=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(r).clean():r.set(t);for(var i=0;i<r.length;i++)r[i]^=54;for(this._inner.update(r),i=0;i<r.length;i++)r[i]^=106;this._outer.update(r),n.isSerializableHash(this._inner)&&n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),s.wipe(r)}return e.prototype.reset=function(){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();t.HMAC=o,t.hmac=function(e,t,r){var n=new o(e,t);n.update(r);var i=n.digest();return n.clean(),i},t.equal=i.equal},4512:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var r=65535&e,n=65535&t;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},7360:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6452),i=r(6228);t.DIGEST_LENGTH=16;var s=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=8191&r;var n=e[2]|e[3]<<8;this._r[1]=8191&(r>>>13|n<<3);var i=e[4]|e[5]<<8;this._r[2]=7939&(n>>>10|i<<6);var s=e[6]|e[7]<<8;this._r[3]=8191&(i>>>7|s<<9);var o=e[8]|e[9]<<8;this._r[4]=255&(s>>>4|o<<12),this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=8191&(o>>>14|a<<2);var c=e[12]|e[13]<<8;this._r[7]=8065&(a>>>11|c<<5);var l=e[14]|e[15]<<8;this._r[8]=8191&(c>>>8|l<<8),this._r[9]=l>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,r){for(var n=this._fin?0:2048,i=this._h[0],s=this._h[1],o=this._h[2],a=this._h[3],c=this._h[4],l=this._h[5],u=this._h[6],h=this._h[7],d=this._h[8],f=this._h[9],p=this._r[0],g=this._r[1],m=this._r[2],y=this._r[3],b=this._r[4],w=this._r[5],v=this._r[6],_=this._r[7],E=this._r[8],x=this._r[9];r>=16;){var S=e[t+0]|e[t+1]<<8;i+=8191&S;var A=e[t+2]|e[t+3]<<8;s+=8191&(S>>>13|A<<3);var I=e[t+4]|e[t+5]<<8;o+=8191&(A>>>10|I<<6);var k=e[t+6]|e[t+7]<<8;a+=8191&(I>>>7|k<<9);var T=e[t+8]|e[t+9]<<8;c+=8191&(k>>>4|T<<12),l+=T>>>1&8191;var P=e[t+10]|e[t+11]<<8;u+=8191&(T>>>14|P<<2);var C=e[t+12]|e[t+13]<<8;h+=8191&(P>>>11|C<<5);var O=e[t+14]|e[t+15]<<8,M=0,R=M;R+=i*p,R+=s*(5*x),R+=o*(5*E),R+=a*(5*_),M=(R+=c*(5*v))>>>13,R&=8191,R+=l*(5*w),R+=u*(5*b),R+=h*(5*y),R+=(d+=8191&(C>>>8|O<<8))*(5*m);var L=M+=(R+=(f+=O>>>5|n)*(5*g))>>>13;L+=i*g,L+=s*p,L+=o*(5*x),L+=a*(5*E),M=(L+=c*(5*_))>>>13,L&=8191,L+=l*(5*v),L+=u*(5*w),L+=h*(5*b),L+=d*(5*y),M+=(L+=f*(5*m))>>>13,L&=8191;var N=M;N+=i*m,N+=s*g,N+=o*p,N+=a*(5*x),M=(N+=c*(5*E))>>>13,N&=8191,N+=l*(5*_),N+=u*(5*v),N+=h*(5*w),N+=d*(5*b);var B=M+=(N+=f*(5*y))>>>13;B+=i*y,B+=s*m,B+=o*g,B+=a*p,M=(B+=c*(5*x))>>>13,B&=8191,B+=l*(5*E),B+=u*(5*_),B+=h*(5*v),B+=d*(5*w);var D=M+=(B+=f*(5*b))>>>13;D+=i*b,D+=s*y,D+=o*m,D+=a*g,M=(D+=c*p)>>>13,D&=8191,D+=l*(5*x),D+=u*(5*E),D+=h*(5*_),D+=d*(5*v);var U=M+=(D+=f*(5*w))>>>13;U+=i*w,U+=s*b,U+=o*y,U+=a*m,M=(U+=c*g)>>>13,U&=8191,U+=l*p,U+=u*(5*x),U+=h*(5*E),U+=d*(5*_);var z=M+=(U+=f*(5*v))>>>13;z+=i*v,z+=s*w,z+=o*b,z+=a*y,M=(z+=c*m)>>>13,z&=8191,z+=l*g,z+=u*p,z+=h*(5*x),z+=d*(5*E);var j=M+=(z+=f*(5*_))>>>13;j+=i*_,j+=s*v,j+=o*w,j+=a*b,M=(j+=c*y)>>>13,j&=8191,j+=l*m,j+=u*g,j+=h*p,j+=d*(5*x);var F=M+=(j+=f*(5*E))>>>13;F+=i*E,F+=s*_,F+=o*v,F+=a*w,M=(F+=c*b)>>>13,F&=8191,F+=l*y,F+=u*m,F+=h*g,F+=d*p;var $=M+=(F+=f*(5*x))>>>13;$+=i*x,$+=s*E,$+=o*_,$+=a*v,M=($+=c*w)>>>13,$&=8191,$+=l*b,$+=u*y,$+=h*m,$+=d*g,i=R=8191&(M=(M=((M+=($+=f*p)>>>13)<<2)+M|0)+(R&=8191)|0),s=L+=M>>>=13,o=N&=8191,a=B&=8191,c=D&=8191,l=U&=8191,u=z&=8191,h=j&=8191,d=F&=8191,f=$&=8191,t+=16,r-=16}this._h[0]=i,this._h[1]=s,this._h[2]=o,this._h[3]=a,this._h[4]=c,this._h[5]=l,this._h[6]=u,this._h[7]=h,this._h[8]=d,this._h[9]=f},e.prototype.finish=function(e,t){void 0===t&&(t=0);var r,n,i,s,o=new Uint16Array(10);if(this._leftover){for(s=this._leftover,this._buffer[s++]=1;s<16;s++)this._buffer[s]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,s=2;s<10;s++)this._h[s]+=r,r=this._h[s]>>>13,this._h[s]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,o[0]=this._h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this._h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,n=(1^r)-1,s=0;s<10;s++)o[s]&=n;for(n=~n,s=0;s<10;s++)this._h[s]=this._h[s]&n|o[s];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),i=this._h[0]+this._pad[0],this._h[0]=65535&i,s=1;s<8;s++)i=(this._h[s]+this._pad[s]|0)+(i>>>16)|0,this._h[s]=65535&i;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,r=0,n=e.length;if(this._leftover){(t=16-this._leftover)>n&&(t=n);for(var i=0;i<t;i++)this._buffer[this._leftover+i]=e[r+i];if(n-=t,r+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(t=n-n%16,this._blocks(e,r,t),r+=t,n-=t),n){for(i=0;i<n;i++)this._buffer[this._leftover+i]=e[r+i];this._leftover+=n}return this},e.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return i.wipe(this._buffer),i.wipe(this._r),i.wipe(this._h),i.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();t.Poly1305=s,t.oneTimeAuth=function(e,t){var r=new s(e);r.update(t);var n=r.digest();return r.clean(),n},t.equal=function(e,r){return e.length===t.DIGEST_LENGTH&&r.length===t.DIGEST_LENGTH&&n.equal(e,r)}},7052:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const n=r(5492),i=r(972),s=r(6228);function o(e,r=t.defaultRandomSource){return r.randomBytes(e)}t.defaultRandomSource=new n.SystemRandomSource,t.randomBytes=o,t.randomUint32=function(e=t.defaultRandomSource){const r=o(4,e),n=(0,i.readUint32LE)(r);return(0,s.wipe)(r),n};const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(e,r=a,n=t.defaultRandomSource){if(r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");let i="";const c=r.length,l=256-256%c;for(;e>0;){const t=o(Math.ceil(256*e/l),n);for(let n=0;n<t.length&&e>0;n++){const s=t[n];s<l&&(i+=r.charAt(s%c),e--)}(0,s.wipe)(t)}return i}t.randomString=c,t.randomStringForEntropy=function(e,r=a,n=t.defaultRandomSource){return c(Math.ceil(e/(Math.log(r.length)/Math.LN2)),r,n)}},7029:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0,t.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let e=0;e<t.length;e+=65536)this._crypto.getRandomValues(t.subarray(e,e+Math.min(t.length-e,65536)));return t}}},5821:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;const n=r(6228);t.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const e=r(9432);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const r=new Uint8Array(e);for(let e=0;e<r.length;e++)r[e]=t[e];return(0,n.wipe)(t),r}}},5492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;const n=r(7029),i=r(5821);t.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new i.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}},204:(e,t,r)=>{"use strict";var n=r(972),i=r(6228);t.On=32,t.cS=64;var s=function(){function e(){this.digestLength=t.On,this.blockSize=t.cS,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[r++],t--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(r=a(this._temp,this._state,e,r,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[r++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,i=t/536870912|0,s=t<<3,o=t%64<56?64:128;this._buffer[r]=128;for(var c=r+1;c<o-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,o-8),n.writeUint32BE(s,this._buffer,o-4),a(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(c=0;c<this.digestLength/4;c++)n.writeUint32BE(this._state[c],e,4*c);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){i.wipe(e.state),e.buffer&&i.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.aD=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(e,t,r,i,s){for(;s>=64;){for(var a=t[0],c=t[1],l=t[2],u=t[3],h=t[4],d=t[5],f=t[6],p=t[7],g=0;g<16;g++){var m=i+4*g;e[g]=n.readUint32BE(r,m)}for(g=16;g<64;g++){var y=e[g-2],b=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10,w=((y=e[g-15])>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;e[g]=(b+e[g-7]|0)+(w+e[g-16]|0)}for(g=0;g<64;g++)b=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&f)|0)+(p+(o[g]+e[g]|0)|0)|0,w=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&l^c&l)|0,p=f,f=d,d=h,h=u+b|0,u=l,l=c,c=a,a=b+w|0;t[0]+=a,t[1]+=c,t[2]+=l,t[3]+=u,t[4]+=h,t[5]+=d,t[6]+=f,t[7]+=p,i+=64,s-=64}return i}t.tW=function(e){var t=new s;t.update(e);var r=t.digest();return t.clean(),r}},4974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(972),i=r(6228);t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var s=function(){function e(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._tempHi),i.wipe(this._tempLo),this.reset()},e.prototype.update=function(e,r){if(void 0===r&&(r=e.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&r>0;)this._buffer[this._bufferLength++]=e[n++],r--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(n=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,e,n,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[n++],r--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,i=t/536870912|0,s=t<<3,o=t%128<112?128:256;this._buffer[r]=128;for(var c=r+1;c<o-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,o-8),n.writeUint32BE(s,this._buffer,o-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,o),this._finished=!0}for(c=0;c<this.digestLength/8;c++)n.writeUint32BE(this._stateHi[c],e,8*c),n.writeUint32BE(this._stateLo[c],e,8*c+4);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){i.wipe(e.stateHi),i.wipe(e.stateLo),e.buffer&&i.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(e,t,r,i,s,a,c){for(var l,u,h,d,f,p,g,m,y=r[0],b=r[1],w=r[2],v=r[3],_=r[4],E=r[5],x=r[6],S=r[7],A=i[0],I=i[1],k=i[2],T=i[3],P=i[4],C=i[5],O=i[6],M=i[7];c>=128;){for(var R=0;R<16;R++){var L=8*R+a;e[R]=n.readUint32BE(s,L),t[R]=n.readUint32BE(s,L+4)}for(R=0;R<80;R++){var N,B,D=y,U=b,z=w,j=v,F=_,$=E,q=x,W=A,H=I,V=k,K=T,G=P,Z=C,Y=O;if(f=65535&(u=M),p=u>>>16,g=65535&(l=S),m=l>>>16,f+=65535&(u=(P>>>14|_<<18)^(P>>>18|_<<14)^(_>>>9|P<<23)),p+=u>>>16,g+=65535&(l=(_>>>14|P<<18)^(_>>>18|P<<14)^(P>>>9|_<<23)),m+=l>>>16,f+=65535&(u=P&C^~P&O),p+=u>>>16,g+=65535&(l=_&E^~_&x),m+=l>>>16,l=o[2*R],f+=65535&(u=o[2*R+1]),p+=u>>>16,g+=65535&l,m+=l>>>16,l=e[R%16],p+=(u=t[R%16])>>>16,g+=65535&l,m+=l>>>16,g+=(p+=(f+=65535&u)>>>16)>>>16,f=65535&(u=d=65535&f|p<<16),p=u>>>16,g=65535&(l=h=65535&g|(m+=g>>>16)<<16),m=l>>>16,f+=65535&(u=(A>>>28|y<<4)^(y>>>2|A<<30)^(y>>>7|A<<25)),p+=u>>>16,g+=65535&(l=(y>>>28|A<<4)^(A>>>2|y<<30)^(A>>>7|y<<25)),m+=l>>>16,p+=(u=A&I^A&k^I&k)>>>16,g+=65535&(l=y&b^y&w^b&w),m+=l>>>16,N=65535&(g+=(p+=(f+=65535&u)>>>16)>>>16)|(m+=g>>>16)<<16,B=65535&f|p<<16,f=65535&(u=K),p=u>>>16,g=65535&(l=j),m=l>>>16,p+=(u=d)>>>16,g+=65535&(l=h),m+=l>>>16,b=D,w=U,v=z,_=j=65535&(g+=(p+=(f+=65535&u)>>>16)>>>16)|(m+=g>>>16)<<16,E=F,x=$,S=q,y=N,I=W,k=H,T=V,P=K=65535&f|p<<16,C=G,O=Z,M=Y,A=B,R%16==15)for(L=0;L<16;L++)l=e[L],f=65535&(u=t[L]),p=u>>>16,g=65535&l,m=l>>>16,l=e[(L+9)%16],f+=65535&(u=t[(L+9)%16]),p+=u>>>16,g+=65535&l,m+=l>>>16,h=e[(L+1)%16],f+=65535&(u=((d=t[(L+1)%16])>>>1|h<<31)^(d>>>8|h<<24)^(d>>>7|h<<25)),p+=u>>>16,g+=65535&(l=(h>>>1|d<<31)^(h>>>8|d<<24)^h>>>7),m+=l>>>16,h=e[(L+14)%16],p+=(u=((d=t[(L+14)%16])>>>19|h<<13)^(h>>>29|d<<3)^(d>>>6|h<<26))>>>16,g+=65535&(l=(h>>>19|d<<13)^(d>>>29|h<<3)^h>>>6),m+=l>>>16,m+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,e[L]=65535&g|m<<16,t[L]=65535&f|p<<16}f=65535&(u=A),p=u>>>16,g=65535&(l=y),m=l>>>16,l=r[0],p+=(u=i[0])>>>16,g+=65535&l,m+=l>>>16,m+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[0]=y=65535&g|m<<16,i[0]=A=65535&f|p<<16,f=65535&(u=I),p=u>>>16,g=65535&(l=b),m=l>>>16,l=r[1],p+=(u=i[1])>>>16,g+=65535&l,m+=l>>>16,m+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[1]=b=65535&g|m<<16,i[1]=I=65535&f|p<<16,f=65535&(u=k),p=u>>>16,g=65535&(l=w),m=l>>>16,l=r[2],p+=(u=i[2])>>>16,g+=65535&l,m+=l>>>16,m+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[2]=w=65535&g|m<<16,i[2]=k=65535&f|p<<16,f=65535&(u=T),p=u>>>16,g=65535&(l=v),m=l>>>16,l=r[3],p+=(u=i[3])>>>16,g+=65535&l,m+=l>>>16,m+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[3]=v=65535&g|m<<16,i[3]=T=65535&f|p<<16,f=65535&(u=P),p=u>>>16,g=65535&(l=_),m=l>>>16,l=r[4],p+=(u=i[4])>>>16,g+=65535&l,m+=l>>>16,m+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[4]=_=65535&g|m<<16,i[4]=P=65535&f|p<<16,f=65535&(u=C),p=u>>>16,g=65535&(l=E),m=l>>>16,l=r[5],p+=(u=i[5])>>>16,g+=65535&l,m+=l>>>16,m+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[5]=E=65535&g|m<<16,i[5]=C=65535&f|p<<16,f=65535&(u=O),p=u>>>16,g=65535&(l=x),m=l>>>16,l=r[6],p+=(u=i[6])>>>16,g+=65535&l,m+=l>>>16,m+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[6]=x=65535&g|m<<16,i[6]=O=65535&f|p<<16,f=65535&(u=M),p=u>>>16,g=65535&(l=S),m=l>>>16,l=r[7],p+=(u=i[7])>>>16,g+=65535&l,m+=l>>>16,m+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[7]=S=65535&g|m<<16,i[7]=M=65535&f|p<<16,a+=128,c-=128}return a}t.hash=function(e){var t=new s;t.update(e);var r=t.digest();return t.clean(),r}},6228:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},774:(e,t,r)=>{"use strict";t.Tc=t.TZ=t.wE=t.Xx=void 0;const n=r(7052),i=r(6228);function s(e){const t=new Float64Array(16);if(e)for(let r=0;r<e.length;r++)t[r]=e[r];return t}t.Xx=32,t.wE=32;const o=new Uint8Array(32);o[0]=9;const a=s([56129,1]);function c(e){let t=1;for(let r=0;r<16;r++){let n=e[r]+t+65535;t=Math.floor(n/65536),e[r]=n-65536*t}e[0]+=t-1+37*(t-1)}function l(e,t,r){const n=~(r-1);for(let r=0;r<16;r++){const i=n&(e[r]^t[r]);e[r]^=i,t[r]^=i}}function u(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]+r[n]}function h(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]-r[n]}function d(e,t,r){let n,i,s=0,o=0,a=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,m=0,y=0,b=0,w=0,v=0,_=0,E=0,x=0,S=0,A=0,I=0,k=0,T=0,P=0,C=0,O=0,M=0,R=0,L=0,N=0,B=r[0],D=r[1],U=r[2],z=r[3],j=r[4],F=r[5],$=r[6],q=r[7],W=r[8],H=r[9],V=r[10],K=r[11],G=r[12],Z=r[13],Y=r[14],J=r[15];n=t[0],s+=n*B,o+=n*D,a+=n*U,c+=n*z,l+=n*j,u+=n*F,h+=n*$,d+=n*q,f+=n*W,p+=n*H,g+=n*V,m+=n*K,y+=n*G,b+=n*Z,w+=n*Y,v+=n*J,n=t[1],o+=n*B,a+=n*D,c+=n*U,l+=n*z,u+=n*j,h+=n*F,d+=n*$,f+=n*q,p+=n*W,g+=n*H,m+=n*V,y+=n*K,b+=n*G,w+=n*Z,v+=n*Y,_+=n*J,n=t[2],a+=n*B,c+=n*D,l+=n*U,u+=n*z,h+=n*j,d+=n*F,f+=n*$,p+=n*q,g+=n*W,m+=n*H,y+=n*V,b+=n*K,w+=n*G,v+=n*Z,_+=n*Y,E+=n*J,n=t[3],c+=n*B,l+=n*D,u+=n*U,h+=n*z,d+=n*j,f+=n*F,p+=n*$,g+=n*q,m+=n*W,y+=n*H,b+=n*V,w+=n*K,v+=n*G,_+=n*Z,E+=n*Y,x+=n*J,n=t[4],l+=n*B,u+=n*D,h+=n*U,d+=n*z,f+=n*j,p+=n*F,g+=n*$,m+=n*q,y+=n*W,b+=n*H,w+=n*V,v+=n*K,_+=n*G,E+=n*Z,x+=n*Y,S+=n*J,n=t[5],u+=n*B,h+=n*D,d+=n*U,f+=n*z,p+=n*j,g+=n*F,m+=n*$,y+=n*q,b+=n*W,w+=n*H,v+=n*V,_+=n*K,E+=n*G,x+=n*Z,S+=n*Y,A+=n*J,n=t[6],h+=n*B,d+=n*D,f+=n*U,p+=n*z,g+=n*j,m+=n*F,y+=n*$,b+=n*q,w+=n*W,v+=n*H,_+=n*V,E+=n*K,x+=n*G,S+=n*Z,A+=n*Y,I+=n*J,n=t[7],d+=n*B,f+=n*D,p+=n*U,g+=n*z,m+=n*j,y+=n*F,b+=n*$,w+=n*q,v+=n*W,_+=n*H,E+=n*V,x+=n*K,S+=n*G,A+=n*Z,I+=n*Y,k+=n*J,n=t[8],f+=n*B,p+=n*D,g+=n*U,m+=n*z,y+=n*j,b+=n*F,w+=n*$,v+=n*q,_+=n*W,E+=n*H,x+=n*V,S+=n*K,A+=n*G,I+=n*Z,k+=n*Y,T+=n*J,n=t[9],p+=n*B,g+=n*D,m+=n*U,y+=n*z,b+=n*j,w+=n*F,v+=n*$,_+=n*q,E+=n*W,x+=n*H,S+=n*V,A+=n*K,I+=n*G,k+=n*Z,T+=n*Y,P+=n*J,n=t[10],g+=n*B,m+=n*D,y+=n*U,b+=n*z,w+=n*j,v+=n*F,_+=n*$,E+=n*q,x+=n*W,S+=n*H,A+=n*V,I+=n*K,k+=n*G,T+=n*Z,P+=n*Y,C+=n*J,n=t[11],m+=n*B,y+=n*D,b+=n*U,w+=n*z,v+=n*j,_+=n*F,E+=n*$,x+=n*q,S+=n*W,A+=n*H,I+=n*V,k+=n*K,T+=n*G,P+=n*Z,C+=n*Y,O+=n*J,n=t[12],y+=n*B,b+=n*D,w+=n*U,v+=n*z,_+=n*j,E+=n*F,x+=n*$,S+=n*q,A+=n*W,I+=n*H,k+=n*V,T+=n*K,P+=n*G,C+=n*Z,O+=n*Y,M+=n*J,n=t[13],b+=n*B,w+=n*D,v+=n*U,_+=n*z,E+=n*j,x+=n*F,S+=n*$,A+=n*q,I+=n*W,k+=n*H,T+=n*V,P+=n*K,C+=n*G,O+=n*Z,M+=n*Y,R+=n*J,n=t[14],w+=n*B,v+=n*D,_+=n*U,E+=n*z,x+=n*j,S+=n*F,A+=n*$,I+=n*q,k+=n*W,T+=n*H,P+=n*V,C+=n*K,O+=n*G,M+=n*Z,R+=n*Y,L+=n*J,n=t[15],v+=n*B,_+=n*D,E+=n*U,x+=n*z,S+=n*j,A+=n*F,I+=n*$,k+=n*q,T+=n*W,P+=n*H,C+=n*V,O+=n*K,M+=n*G,R+=n*Z,L+=n*Y,N+=n*J,s+=38*_,o+=38*E,a+=38*x,c+=38*S,l+=38*A,u+=38*I,h+=38*k,d+=38*T,f+=38*P,p+=38*C,g+=38*O,m+=38*M,y+=38*R,b+=38*L,w+=38*N,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,s+=i-1+37*(i-1),e[0]=s,e[1]=o,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=d,e[8]=f,e[9]=p,e[10]=g,e[11]=m,e[12]=y,e[13]=b,e[14]=w,e[15]=v}function f(e,t){d(e,t,t)}function p(e,t){const r=new Uint8Array(32),n=new Float64Array(80),i=s(),o=s(),p=s(),g=s(),m=s(),y=s();for(let t=0;t<31;t++)r[t]=e[t];r[31]=127&e[31]|64,r[0]&=248,function(e,t){for(let r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}(n,t);for(let e=0;e<16;e++)o[e]=n[e];i[0]=g[0]=1;for(let e=254;e>=0;--e){const t=r[e>>>3]>>>(7&e)&1;l(i,o,t),l(p,g,t),u(m,i,p),h(i,i,p),u(p,o,g),h(o,o,g),f(g,m),f(y,i),d(i,p,i),d(p,o,m),u(m,i,p),h(i,i,p),f(o,i),h(p,g,y),d(i,p,a),u(i,i,g),d(p,p,i),d(i,g,y),d(g,o,n),f(o,m),l(i,o,t),l(p,g,t)}for(let e=0;e<16;e++)n[e+16]=i[e],n[e+32]=p[e],n[e+48]=o[e],n[e+64]=g[e];const b=n.subarray(32),w=n.subarray(16);!function(e,t){const r=s();for(let e=0;e<16;e++)r[e]=t[e];for(let e=253;e>=0;e--)f(r,r),2!==e&&4!==e&&d(r,r,t);for(let t=0;t<16;t++)e[t]=r[t]}(b,b),d(w,w,b);const v=new Uint8Array(32);return function(e,t){const r=s(),n=s();for(let e=0;e<16;e++)n[e]=t[e];c(n),c(n),c(n);for(let e=0;e<2;e++){r[0]=n[0]-65517;for(let e=1;e<15;e++)r[e]=n[e]-65535-(r[e-1]>>16&1),r[e-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);const e=r[15]>>16&1;r[14]&=65535,l(n,r,1-e)}for(let t=0;t<16;t++)e[2*t]=255&n[t],e[2*t+1]=n[t]>>8}(v,w),v}t.TZ=function(e){const r=(0,n.randomBytes)(32,e),s=function(e){if(e.length!==t.wE)throw new Error(`x25519: seed must be ${t.wE} bytes`);const r=new Uint8Array(e);return{publicKey:(n=r,p(n,o)),secretKey:r};var n}(r);return(0,i.wipe)(r),s},t.Tc=function(e,r,n=!1){if(e.length!==t.Xx)throw new Error("X25519: incorrect secret key length");if(r.length!==t.Xx)throw new Error("X25519: incorrect public key length");const i=p(e,r);if(n){let e=0;for(let t=0;t<i.length;t++)e|=i[t];if(0===e)throw new Error("X25519: invalid shared key")}return i}},7499:(e,t)=>{"use strict";function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}t.YE=void 0,t.YE=function(){return r("document")}},7276:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},7173:(e,t,r)=>{"use strict";function n(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function i(){const e=n();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=n,t.getSubtleCrypto=i,t.isBrowserCryptoAvailable=function(){return!!n()&&!!i()}},1089:(e,t)=>{"use strict";function r(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function n(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=r,t.isNode=n,t.isBrowser=function(){return!r()&&!n()}},5682:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8186);n.__exportStar(r(7173),t),n.__exportStar(r(1089),t)},8186:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>s,__asyncDelegator:()=>v,__asyncGenerator:()=>w,__asyncValues:()=>_,__await:()=>b,__awaiter:()=>u,__classPrivateFieldGet:()=>A,__classPrivateFieldSet:()=>I,__createBinding:()=>d,__decorate:()=>a,__exportStar:()=>f,__extends:()=>i,__generator:()=>h,__importDefault:()=>S,__importStar:()=>x,__makeTemplateObject:()=>E,__metadata:()=>l,__param:()=>c,__read:()=>g,__rest:()=>o,__spread:()=>m,__spreadArrays:()=>y,__values:()=>p});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,n){t(r,n,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}function h(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function f(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function w(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=i[e](t)).value instanceof b?Promise.resolve(r.value.v).then(c,l):u(s[0][2],r)}catch(e){u(s[0][3],e)}var r}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function v(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function I(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},5665:()=>{},9026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(584);n.__exportStar(r(9244),t),n.__exportStar(r(1861),t)},9244:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},1861:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},8900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(584);n.__exportStar(r(9606),t),n.__exportStar(r(9883),t),n.__exportStar(r(2010),t),n.__exportStar(r(9026),t)},2010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(584).__exportStar(r(3093),t)},3093:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0,t.IWatch=class{}},221:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;const n=r(9026);t.toMiliseconds=function(e){return e*n.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/n.ONE_THOUSAND)}},2985:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout((()=>{t(!0)}),e)}))}},9606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(584);n.__exportStar(r(2985),t),n.__exportStar(r(221),t)},9883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const t=this.get(e);if(void 0!==t.elapsed)throw new Error(`Watch already stopped for label: ${e}`);const r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){const t=this.timestamps.get(e);if(void 0===t)throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){const t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=r,t.default=r},584:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>s,__asyncDelegator:()=>v,__asyncGenerator:()=>w,__asyncValues:()=>_,__await:()=>b,__awaiter:()=>u,__classPrivateFieldGet:()=>A,__classPrivateFieldSet:()=>I,__createBinding:()=>d,__decorate:()=>a,__exportStar:()=>f,__extends:()=>i,__generator:()=>h,__importDefault:()=>S,__importStar:()=>x,__makeTemplateObject:()=>E,__metadata:()=>l,__param:()=>c,__read:()=>g,__rest:()=>o,__spread:()=>m,__spreadArrays:()=>y,__values:()=>p});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,n){t(r,n,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}function h(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function f(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function w(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=i[e](t)).value instanceof b?Promise.resolve(r.value.v).then(c,l):u(s[0][2],r)}catch(e){u(s[0][3],e)}var r}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function v(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function I(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},2939:(e,t)=>{"use strict";function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function n(e){const t=r(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=n,t.getDocumentOrThrow=function(){return n("document")},t.getDocument=function(){return r("document")},t.getNavigatorOrThrow=function(){return n("navigator")},t.getNavigator=function(){return r("navigator")},t.getLocationOrThrow=function(){return n("location")},t.getLocation=function(){return r("location")},t.getCryptoOrThrow=function(){return n("crypto")},t.getCrypto=function(){return r("crypto")},t.getLocalStorageOrThrow=function(){return n("localStorage")},t.getLocalStorage=function(){return r("localStorage")}},9454:(e,t,r)=>{"use strict";t.g=void 0;const n=r(2939);t.g=function(){let e,t;try{e=n.getDocumentOrThrow(),t=n.getLocationOrThrow()}catch(e){return null}function r(...t){const r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){const n=r[e],i=["itemprop","property","name"].map((e=>n.getAttribute(e))).filter((e=>!!e&&t.includes(e)));if(i.length&&i){const e=n.getAttribute("content");if(e)return e}}return""}const i=function(){let t=r("name","og:site_name","og:title","twitter:title");return t||(t=e.title),t}();return{description:r("description","og:description","twitter:description","keywords"),url:t.origin,icons:function(){const r=e.getElementsByTagName("link"),n=[];for(let e=0;e<r.length;e++){const i=r[e],s=i.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){const e=i.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{const n=t.pathname.split("/");n.pop(),r+=n.join("/")+"/"+e}n.push(r)}else if(0===e.indexOf("//")){const r=t.protocol+e;n.push(r)}else n.push(e)}}return n}(),name:i}}},6455:function(e,t,r){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(9895).Buffer}catch(e){}function a(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function c(e,t,r){var n=a(e,r);return r-1>=t&&(n|=a(e,r-1)<<4),n}function l(e,t,r,n){for(var i=0,s=Math.min(e.length,r),o=t;o<s;o++){var a=e.charCodeAt(o)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=e.length-1,s=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this.strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=c(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=c(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this.strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var s=e.length-r,o=s%n,a=Math.min(s,s-o)+r,c=0,u=r;u<a;u+=n)c=l(e,u,u+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var h=1;for(c=l(e,u,e.length,t),u=0;u<o;u++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],s=0|t.words[0],o=i*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var l=1;l<n;l++){for(var u=c>>>26,h=67108863&c,d=Math.min(l,t.length-1),f=Math.max(0,l-e.length+1);f<=d;f++){var p=l-f|0;u+=(o=(i=0|e.words[p])*(s=0|t.words[f])+h)/67108864|0,h=67108863&o}r.words[l]=0|h,c=0|u}return 0!==c?r.words[l]=0|c:r.length--,r.strip()}s.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?u[6-c.length]+c+r:c+r}for(0!==s&&(r=s.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var l=h[e],f=d[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(f).toString(e);r=(p=p.idivn(f)).isZero()?g+r:u[l-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,t){return n(void 0!==o),this.toArrayLike(o,e,t)},s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0"),this.strip();var o,a,c="le"===t,l=new e(s),u=this.clone();if(c){for(a=0;!u.isZero();a++)o=u.andln(255),u.iushrn(8),l[a]=o;for(;a<s;a++)l[a]=0}else{for(a=0;a<s-i;a++)l[a]=0;for(a=0;!u.isZero();a++)o=u.andln(255),u.iushrn(8),l[s-a-1]=o}return l},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},s.prototype.ior=function(e){return n(!(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},s.prototype.iand=function(e){return n(!(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},s.prototype.ixor=function(e){return n(!(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)t=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&t,i=t>>>26;for(;0!==i&&s<r.length;s++)t=(0|r.words[s])+i,this.words[s]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var s=0,o=0;o<n.length;o++)s=(t=(0|r.words[o])-(0|n.words[o])+s)>>26,this.words[o]=67108863&t;for(;0!==s&&o<r.length;o++)s=(t=(0|r.words[o])+s)>>26,this.words[o]=67108863&t;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var n,i,s,o=e.words,a=t.words,c=r.words,l=0,u=0|o[0],h=8191&u,d=u>>>13,f=0|o[1],p=8191&f,g=f>>>13,m=0|o[2],y=8191&m,b=m>>>13,w=0|o[3],v=8191&w,_=w>>>13,E=0|o[4],x=8191&E,S=E>>>13,A=0|o[5],I=8191&A,k=A>>>13,T=0|o[6],P=8191&T,C=T>>>13,O=0|o[7],M=8191&O,R=O>>>13,L=0|o[8],N=8191&L,B=L>>>13,D=0|o[9],U=8191&D,z=D>>>13,j=0|a[0],F=8191&j,$=j>>>13,q=0|a[1],W=8191&q,H=q>>>13,V=0|a[2],K=8191&V,G=V>>>13,Z=0|a[3],Y=8191&Z,J=Z>>>13,X=0|a[4],Q=8191&X,ee=X>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],se=8191&ie,oe=ie>>>13,ae=0|a[7],ce=8191&ae,le=ae>>>13,ue=0|a[8],he=8191&ue,de=ue>>>13,fe=0|a[9],pe=8191&fe,ge=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(l+(n=Math.imul(h,F))|0)+((8191&(i=(i=Math.imul(h,$))+Math.imul(d,F)|0))<<13)|0;l=((s=Math.imul(d,$))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,$))+Math.imul(g,F)|0,s=Math.imul(g,$);var ye=(l+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(d,W)|0))<<13)|0;l=((s=s+Math.imul(d,H)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,F),i=(i=Math.imul(y,$))+Math.imul(b,F)|0,s=Math.imul(b,$),n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(g,W)|0,s=s+Math.imul(g,H)|0;var be=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(d,K)|0))<<13)|0;l=((s=s+Math.imul(d,G)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(v,F),i=(i=Math.imul(v,$))+Math.imul(_,F)|0,s=Math.imul(_,$),n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(b,W)|0,s=s+Math.imul(b,H)|0,n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(g,K)|0,s=s+Math.imul(g,G)|0;var we=(l+(n=n+Math.imul(h,Y)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(d,Y)|0))<<13)|0;l=((s=s+Math.imul(d,J)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(x,F),i=(i=Math.imul(x,$))+Math.imul(S,F)|0,s=Math.imul(S,$),n=n+Math.imul(v,W)|0,i=(i=i+Math.imul(v,H)|0)+Math.imul(_,W)|0,s=s+Math.imul(_,H)|0,n=n+Math.imul(y,K)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,G)|0,n=n+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(g,Y)|0,s=s+Math.imul(g,J)|0;var ve=(l+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(d,Q)|0))<<13)|0;l=((s=s+Math.imul(d,ee)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,$))+Math.imul(k,F)|0,s=Math.imul(k,$),n=n+Math.imul(x,W)|0,i=(i=i+Math.imul(x,H)|0)+Math.imul(S,W)|0,s=s+Math.imul(S,H)|0,n=n+Math.imul(v,K)|0,i=(i=i+Math.imul(v,G)|0)+Math.imul(_,K)|0,s=s+Math.imul(_,G)|0,n=n+Math.imul(y,Y)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(b,Y)|0,s=s+Math.imul(b,J)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,ee)|0;var _e=(l+(n=n+Math.imul(h,re)|0)|0)+((8191&(i=(i=i+Math.imul(h,ne)|0)+Math.imul(d,re)|0))<<13)|0;l=((s=s+Math.imul(d,ne)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(P,F),i=(i=Math.imul(P,$))+Math.imul(C,F)|0,s=Math.imul(C,$),n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,W)|0,s=s+Math.imul(k,H)|0,n=n+Math.imul(x,K)|0,i=(i=i+Math.imul(x,G)|0)+Math.imul(S,K)|0,s=s+Math.imul(S,G)|0,n=n+Math.imul(v,Y)|0,i=(i=i+Math.imul(v,J)|0)+Math.imul(_,Y)|0,s=s+Math.imul(_,J)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(b,Q)|0,s=s+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(g,re)|0,s=s+Math.imul(g,ne)|0;var Ee=(l+(n=n+Math.imul(h,se)|0)|0)+((8191&(i=(i=i+Math.imul(h,oe)|0)+Math.imul(d,se)|0))<<13)|0;l=((s=s+Math.imul(d,oe)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(M,F),i=(i=Math.imul(M,$))+Math.imul(R,F)|0,s=Math.imul(R,$),n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(C,W)|0,s=s+Math.imul(C,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(k,K)|0,s=s+Math.imul(k,G)|0,n=n+Math.imul(x,Y)|0,i=(i=i+Math.imul(x,J)|0)+Math.imul(S,Y)|0,s=s+Math.imul(S,J)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(_,Q)|0,s=s+Math.imul(_,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(b,re)|0,s=s+Math.imul(b,ne)|0,n=n+Math.imul(p,se)|0,i=(i=i+Math.imul(p,oe)|0)+Math.imul(g,se)|0,s=s+Math.imul(g,oe)|0;var xe=(l+(n=n+Math.imul(h,ce)|0)|0)+((8191&(i=(i=i+Math.imul(h,le)|0)+Math.imul(d,ce)|0))<<13)|0;l=((s=s+Math.imul(d,le)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(N,F),i=(i=Math.imul(N,$))+Math.imul(B,F)|0,s=Math.imul(B,$),n=n+Math.imul(M,W)|0,i=(i=i+Math.imul(M,H)|0)+Math.imul(R,W)|0,s=s+Math.imul(R,H)|0,n=n+Math.imul(P,K)|0,i=(i=i+Math.imul(P,G)|0)+Math.imul(C,K)|0,s=s+Math.imul(C,G)|0,n=n+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(k,Y)|0,s=s+Math.imul(k,J)|0,n=n+Math.imul(x,Q)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(S,Q)|0,s=s+Math.imul(S,ee)|0,n=n+Math.imul(v,re)|0,i=(i=i+Math.imul(v,ne)|0)+Math.imul(_,re)|0,s=s+Math.imul(_,ne)|0,n=n+Math.imul(y,se)|0,i=(i=i+Math.imul(y,oe)|0)+Math.imul(b,se)|0,s=s+Math.imul(b,oe)|0,n=n+Math.imul(p,ce)|0,i=(i=i+Math.imul(p,le)|0)+Math.imul(g,ce)|0,s=s+Math.imul(g,le)|0;var Se=(l+(n=n+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;l=((s=s+Math.imul(d,de)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(U,F),i=(i=Math.imul(U,$))+Math.imul(z,F)|0,s=Math.imul(z,$),n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(B,W)|0,s=s+Math.imul(B,H)|0,n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,G)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,G)|0,n=n+Math.imul(P,Y)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(C,Y)|0,s=s+Math.imul(C,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(k,Q)|0,s=s+Math.imul(k,ee)|0,n=n+Math.imul(x,re)|0,i=(i=i+Math.imul(x,ne)|0)+Math.imul(S,re)|0,s=s+Math.imul(S,ne)|0,n=n+Math.imul(v,se)|0,i=(i=i+Math.imul(v,oe)|0)+Math.imul(_,se)|0,s=s+Math.imul(_,oe)|0,n=n+Math.imul(y,ce)|0,i=(i=i+Math.imul(y,le)|0)+Math.imul(b,ce)|0,s=s+Math.imul(b,le)|0,n=n+Math.imul(p,he)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(g,he)|0,s=s+Math.imul(g,de)|0;var Ae=(l+(n=n+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ge)|0)+Math.imul(d,pe)|0))<<13)|0;l=((s=s+Math.imul(d,ge)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,H))+Math.imul(z,W)|0,s=Math.imul(z,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(B,K)|0,s=s+Math.imul(B,G)|0,n=n+Math.imul(M,Y)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(R,Y)|0,s=s+Math.imul(R,J)|0,n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(C,Q)|0,s=s+Math.imul(C,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(k,re)|0,s=s+Math.imul(k,ne)|0,n=n+Math.imul(x,se)|0,i=(i=i+Math.imul(x,oe)|0)+Math.imul(S,se)|0,s=s+Math.imul(S,oe)|0,n=n+Math.imul(v,ce)|0,i=(i=i+Math.imul(v,le)|0)+Math.imul(_,ce)|0,s=s+Math.imul(_,le)|0,n=n+Math.imul(y,he)|0,i=(i=i+Math.imul(y,de)|0)+Math.imul(b,he)|0,s=s+Math.imul(b,de)|0;var Ie=(l+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ge)|0)+Math.imul(g,pe)|0))<<13)|0;l=((s=s+Math.imul(g,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(U,K),i=(i=Math.imul(U,G))+Math.imul(z,K)|0,s=Math.imul(z,G),n=n+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(B,Y)|0,s=s+Math.imul(B,J)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(R,Q)|0,s=s+Math.imul(R,ee)|0,n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(C,re)|0,s=s+Math.imul(C,ne)|0,n=n+Math.imul(I,se)|0,i=(i=i+Math.imul(I,oe)|0)+Math.imul(k,se)|0,s=s+Math.imul(k,oe)|0,n=n+Math.imul(x,ce)|0,i=(i=i+Math.imul(x,le)|0)+Math.imul(S,ce)|0,s=s+Math.imul(S,le)|0,n=n+Math.imul(v,he)|0,i=(i=i+Math.imul(v,de)|0)+Math.imul(_,he)|0,s=s+Math.imul(_,de)|0;var ke=(l+(n=n+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,ge)|0)+Math.imul(b,pe)|0))<<13)|0;l=((s=s+Math.imul(b,ge)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(U,Y),i=(i=Math.imul(U,J))+Math.imul(z,Y)|0,s=Math.imul(z,J),n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(B,Q)|0,s=s+Math.imul(B,ee)|0,n=n+Math.imul(M,re)|0,i=(i=i+Math.imul(M,ne)|0)+Math.imul(R,re)|0,s=s+Math.imul(R,ne)|0,n=n+Math.imul(P,se)|0,i=(i=i+Math.imul(P,oe)|0)+Math.imul(C,se)|0,s=s+Math.imul(C,oe)|0,n=n+Math.imul(I,ce)|0,i=(i=i+Math.imul(I,le)|0)+Math.imul(k,ce)|0,s=s+Math.imul(k,le)|0,n=n+Math.imul(x,he)|0,i=(i=i+Math.imul(x,de)|0)+Math.imul(S,he)|0,s=s+Math.imul(S,de)|0;var Te=(l+(n=n+Math.imul(v,pe)|0)|0)+((8191&(i=(i=i+Math.imul(v,ge)|0)+Math.imul(_,pe)|0))<<13)|0;l=((s=s+Math.imul(_,ge)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,Q),i=(i=Math.imul(U,ee))+Math.imul(z,Q)|0,s=Math.imul(z,ee),n=n+Math.imul(N,re)|0,i=(i=i+Math.imul(N,ne)|0)+Math.imul(B,re)|0,s=s+Math.imul(B,ne)|0,n=n+Math.imul(M,se)|0,i=(i=i+Math.imul(M,oe)|0)+Math.imul(R,se)|0,s=s+Math.imul(R,oe)|0,n=n+Math.imul(P,ce)|0,i=(i=i+Math.imul(P,le)|0)+Math.imul(C,ce)|0,s=s+Math.imul(C,le)|0,n=n+Math.imul(I,he)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(k,he)|0,s=s+Math.imul(k,de)|0;var Pe=(l+(n=n+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,ge)|0)+Math.imul(S,pe)|0))<<13)|0;l=((s=s+Math.imul(S,ge)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(U,re),i=(i=Math.imul(U,ne))+Math.imul(z,re)|0,s=Math.imul(z,ne),n=n+Math.imul(N,se)|0,i=(i=i+Math.imul(N,oe)|0)+Math.imul(B,se)|0,s=s+Math.imul(B,oe)|0,n=n+Math.imul(M,ce)|0,i=(i=i+Math.imul(M,le)|0)+Math.imul(R,ce)|0,s=s+Math.imul(R,le)|0,n=n+Math.imul(P,he)|0,i=(i=i+Math.imul(P,de)|0)+Math.imul(C,he)|0,s=s+Math.imul(C,de)|0;var Ce=(l+(n=n+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,ge)|0)+Math.imul(k,pe)|0))<<13)|0;l=((s=s+Math.imul(k,ge)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(U,se),i=(i=Math.imul(U,oe))+Math.imul(z,se)|0,s=Math.imul(z,oe),n=n+Math.imul(N,ce)|0,i=(i=i+Math.imul(N,le)|0)+Math.imul(B,ce)|0,s=s+Math.imul(B,le)|0,n=n+Math.imul(M,he)|0,i=(i=i+Math.imul(M,de)|0)+Math.imul(R,he)|0,s=s+Math.imul(R,de)|0;var Oe=(l+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ge)|0)+Math.imul(C,pe)|0))<<13)|0;l=((s=s+Math.imul(C,ge)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(U,ce),i=(i=Math.imul(U,le))+Math.imul(z,ce)|0,s=Math.imul(z,le),n=n+Math.imul(N,he)|0,i=(i=i+Math.imul(N,de)|0)+Math.imul(B,he)|0,s=s+Math.imul(B,de)|0;var Me=(l+(n=n+Math.imul(M,pe)|0)|0)+((8191&(i=(i=i+Math.imul(M,ge)|0)+Math.imul(R,pe)|0))<<13)|0;l=((s=s+Math.imul(R,ge)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(U,he),i=(i=Math.imul(U,de))+Math.imul(z,he)|0,s=Math.imul(z,de);var Re=(l+(n=n+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,ge)|0)+Math.imul(B,pe)|0))<<13)|0;l=((s=s+Math.imul(B,ge)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var Le=(l+(n=Math.imul(U,pe))|0)+((8191&(i=(i=Math.imul(U,ge))+Math.imul(z,pe)|0))<<13)|0;return l=((s=Math.imul(z,ge))+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,c[0]=me,c[1]=ye,c[2]=be,c[3]=we,c[4]=ve,c[5]=_e,c[6]=Ee,c[7]=xe,c[8]=Se,c[9]=Ae,c[10]=Ie,c[11]=ke,c[12]=Te,c[13]=Pe,c[14]=Ce,c[15]=Oe,c[16]=Me,c[17]=Re,c[18]=Le,0!==l&&(c[19]=l,r.length++),r};function g(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(p=f),s.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?p(this,e,t):n<63?f(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,c=Math.min(s,t.length-1),l=Math.max(0,s-e.length+1);l<=c;l++){var u=s-l,h=(0|e.words[u])*(0|t.words[l]),d=67108863&h;a=67108863&(d=d+a|0),i+=(o=(o=o+(h/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r.strip()}(this,e,t):g(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,i,s){for(var o=0;o<s;o++)n[o]=t[e[o]],i[o]=r[e[o]]},m.prototype.transform=function(e,t,r,n,i,s){this.permute(s,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),l=Math.sin(2*Math.PI/a),u=0;u<i;u+=a)for(var h=c,d=l,f=0;f<o;f++){var p=r[u+f],g=n[u+f],m=r[u+f+o],y=n[u+f+o],b=h*m-d*y;y=h*y+d*m,m=b,r[u+f]=p+m,n[u+f]=g+y,r[u+f+o]=p-m,n[u+f+o]=g-y,f!==a&&(b=c*h-l*d,d=c*d+l*h,h=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},m.prototype.convert13b=function(e,t,r,i){for(var s=0,o=0;o<t;o++)s+=0|e[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===s),n(!(-8192&s))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),c=new Array(n),l=new Array(n),u=new Array(n),h=new Array(n),d=r.words;d.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,l,n),this.transform(o,s,a,c,n,i),this.transform(l,s,u,h,n,i);for(var f=0;f<n;f++){var p=a[f]*u[f]-c[f]*h[f];c[f]=a[f]*h[f]+c[f]*u[f],a[f]=p}return this.conjugate(a,c,n),this.transform(a,c,d,s,n,i),this.conjugate(d,s,n),this.normalize13b(d,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),g(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,s=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=s>>>26,this.words[r]=67108863&s}return 0!==t&&(this.words[r]=t,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,c=(0|this.words[t])-a<<r;this.words[t]=c|o,o=a>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},s.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(i-=o,i=Math.max(0,i),c){for(var l=0;l<o;l++)c.words[l]=this.words[l];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=i);l--){var h=0|this.words[l];this.words[l]=u<<26-s|h>>>s,u=h&a}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},s.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var i,s,o=e.length+r;this._expand(o);var a=0;for(i=0;i<e.length;i++){s=(0|this.words[i+r])+a;var c=(0|e.words[i])*t;a=((s-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)a=(s=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&s;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!=(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new s(null)).length=c+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var u=n.clone()._ishlnsubmul(i,1,c);0===u.negative&&(n=u,a&&(a.words[c]=1));for(var h=c-1;h>=0;h--){var d=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(d=Math.min(d/o|0,67108863),n._ishlnsubmul(i,d,h);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=d)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):this.negative&e.negative?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},s.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new s(1),o=new s(0),a=new s(0),c=new s(1),l=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++l;for(var u=r.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;!(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(u),o.isub(h)),i.iushrn(1),o.iushrn(1);for(var p=0,g=1;!(r.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(u),c.isub(h)),a.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(a),o.isub(c)):(r.isub(t),a.isub(i),c.isub(o))}return{a,b:c,gcd:r.iushln(l)}},s.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new s(1),a=new s(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,u=1;!(t.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(t.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var h=0,d=1;!(r.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(a)):(r.isub(t),a.isub(o))}return(i=0===t.cmpn(1)?o:a).cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var s=t;t=r,r=s}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return!(1&this.words[0])},s.prototype.isOdd=function(){return!(1&~this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new x(e)},s.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},i(w,b),w.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&r,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,e.words[i-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},w.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(v,b),i(_,b),i(E,b),E.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new w;else if("p224"===e)t=new v;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return y[e]=t,t},x.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){n(!(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,l).cmp(c);)u.redIAdd(c);for(var h=this.pow(u,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=o;0!==f.cmp(a);){for(var g=f,m=0;0!==g.cmp(a);m++)g=g.redSqr();n(m<p);var y=this.pow(h,new s(1).iushln(p-m-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=m}return d},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var l=t.words[n],u=c-1;u>=0;u--){var h=l>>u&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==o?(o<<=1,o|=h,(4==++a||0===n&&0===u)&&(i=this.mul(i,r[o]),a=0,o=0)):a=0}c=26}return i},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new S(e)},i(S,x),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},4112:(e,t,r)=>{"use strict";var n=t;n.version=r(7559).rE,n.utils=r(8402),n.rand=r(5037),n.curve=r(7867),n.curves=r(7483),n.ec=r(2040),n.eddsa=r(6983)},4278:(e,t,r)=>{"use strict";var n=r(6455),i=r(8402),s=i.getNAF,o=i.getJSF,a=i.assert;function c(e,t){this.type=e,this.p=new n(t.p,16),this.red=t.prime?n.red(t.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=t.n&&new n(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){a(e.precomputed);var r=e._getDoubles(),n=s(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,c,l=[];for(o=0;o<n.length;o+=r.step){c=0;for(var u=o+r.step-1;u>=o;u--)c=(c<<1)+n[u];l.push(c)}for(var h=this.jpoint(null,null,null),d=this.jpoint(null,null,null),f=i;f>0;f--){for(o=0;o<l.length;o++)(c=l[o])===f?d=d.mixedAdd(r.points[o]):c===-f&&(d=d.mixedAdd(r.points[o].neg()));h=h.add(d)}return h.toP()},c.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=s(t,r,this._bitLength),c=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var u=0;l>=0&&0===o[l];l--)u++;if(l>=0&&u++,c=c.dblp(u),l<0)break;var h=o[l];a(0!==h),c="affine"===e.type?h>0?c.mixedAdd(i[h-1>>1]):c.mixedAdd(i[-h-1>>1].neg()):h>0?c.add(i[h-1>>1]):c.add(i[-h-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,r,n,i){var a,c,l,u=this._wnafT1,h=this._wnafT2,d=this._wnafT3,f=0;for(a=0;a<n;a++){var p=(l=t[a])._getNAFPoints(e);u[a]=p.wnd,h[a]=p.points}for(a=n-1;a>=1;a-=2){var g=a-1,m=a;if(1===u[g]&&1===u[m]){var y=[t[g],null,null,t[m]];0===t[g].y.cmp(t[m].y)?(y[1]=t[g].add(t[m]),y[2]=t[g].toJ().mixedAdd(t[m].neg())):0===t[g].y.cmp(t[m].y.redNeg())?(y[1]=t[g].toJ().mixedAdd(t[m]),y[2]=t[g].add(t[m].neg())):(y[1]=t[g].toJ().mixedAdd(t[m]),y[2]=t[g].toJ().mixedAdd(t[m].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],w=o(r[g],r[m]);for(f=Math.max(w[0].length,f),d[g]=new Array(f),d[m]=new Array(f),c=0;c<f;c++){var v=0|w[0][c],_=0|w[1][c];d[g][c]=b[3*(v+1)+(_+1)],d[m][c]=0,h[g]=y}}else d[g]=s(r[g],u[g],this._bitLength),d[m]=s(r[m],u[m],this._bitLength),f=Math.max(d[g].length,f),f=Math.max(d[m].length,f)}var E=this.jpoint(null,null,null),x=this._wnafT4;for(a=f;a>=0;a--){for(var S=0;a>=0;){var A=!0;for(c=0;c<n;c++)x[c]=0|d[c][a],0!==x[c]&&(A=!1);if(!A)break;S++,a--}if(a>=0&&S++,E=E.dblp(S),a<0)break;for(c=0;c<n;c++){var I=x[c];0!==I&&(I>0?l=h[c][I-1>>1]:I<0&&(l=h[c][-I-1>>1].neg()),E="affine"===l.type?E.mixedAdd(l):E.add(l))}}for(a=0;a<n;a++)h[a]=null;return i?E:E.toP()},c.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=i.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?a(e[e.length-1]%2==0):7===e[0]&&a(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(e){return this.encode(e,!0)},l.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},l.prototype.encode=function(e,t){return i.encode(this._encode(t),e)},l.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},l.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},l.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var s=0;s<e;s++)n=n.dbl();r.push(n)}return{step:e,points:r}},l.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},6491:(e,t,r)=>{"use strict";var n=r(8402),i=r(6455),s=r(6698),o=r(4278),a=n.assert;function c(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new i(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function l(e,t,r,n,s){o.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(t,16),this.y=new i(r,16),this.z=n?new i(n,16):this.curve.one,this.t=s&&new i(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s(c,o),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},c.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),s=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=n.redMul(s.redInvm()),a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var c=a.fromRed().isOdd();return(t&&!c||!t&&c)&&(a=a.redNeg()),this.point(e,a)},c.prototype.pointFromY=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),s=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(s.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},s(l,o.BasePoint),c.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},c.prototype.point=function(e,t,r,n){return new l(this,e,t,r,n)},l.fromJSON=function(e,t){return new l(e,t[0],t[1],t[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),s=n.redAdd(t),o=s.redSub(r),a=n.redSub(t),c=i.redMul(o),l=s.redMul(a),u=i.redMul(a),h=o.redMul(s);return this.curve.point(c,l,h,u)},l.prototype._projDbl=function(){var e,t,r,n,i,s,o=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var l=(n=this.curve._mulA(a)).redAdd(c);this.zOne?(e=o.redSub(a).redSub(c).redMul(l.redSub(this.curve.two)),t=l.redMul(n.redSub(c)),r=l.redSqr().redSub(l).redSub(l)):(i=this.z.redSqr(),s=l.redSub(i).redISub(i),e=o.redSub(a).redISub(c).redMul(s),t=l.redMul(n.redSub(c)),r=l.redMul(s))}else n=a.redAdd(c),i=this.curve._mulC(this.z).redSqr(),s=n.redSub(i).redSub(i),e=this.curve._mulC(o.redISub(n)).redMul(s),t=this.curve._mulC(n).redMul(a.redISub(c)),r=n.redMul(s);return this.curve.point(e,t,r)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),s=r.redSub(t),o=i.redSub(n),a=i.redAdd(n),c=r.redAdd(t),l=s.redMul(o),u=a.redMul(c),h=s.redMul(c),d=o.redMul(a);return this.curve.point(l,u,d,h)},l.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),s=this.x.redMul(e.x),o=this.y.redMul(e.y),a=this.curve.d.redMul(s).redMul(o),c=i.redSub(a),l=i.redAdd(a),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(o),h=n.redMul(c).redMul(u);return this.curve.twisted?(t=n.redMul(l).redMul(o.redSub(this.curve._mulA(s))),r=c.redMul(l)):(t=n.redMul(l).redMul(o.redSub(s)),r=this.curve._mulC(c).redMul(l)),this.curve.point(h,t,r)},l.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},l.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},l.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},l.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},7867:(e,t,r)=>{"use strict";var n=t;n.base=r(4278),n.short=r(3461),n.mont=r(4397),n.edwards=r(6491)},4397:(e,t,r)=>{"use strict";var n=r(6455),i=r(6698),s=r(4278),o=r(8402);function a(e){s.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,r){s.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(a,s),e.exports=a,a.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},i(c,s.BasePoint),a.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},a.prototype.point=function(e,t){return new c(this,e,t)},a.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),s=e.x.redSub(e.z).redMul(r),o=i.redMul(n),a=t.z.redMul(s.redAdd(o).redSqr()),c=t.x.redMul(s.redISub(o).redSqr());return this.curve.point(a,c)},c.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var s=i.length-1;s>=0;s--)0===i[s]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},3461:(e,t,r)=>{"use strict";var n=r(8402),i=r(6455),s=r(6698),o=r(4278),a=n.assert;function c(e){o.call(this,"short",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(e,t,r,n){o.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(e,t,r,n){o.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s(c,o),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new i(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new i(e.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))?r=s[0]:(r=s[1],a(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new i(e.a,16),b:new i(e.b,16)}})):this._getEndoBasis(r)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:i.mont(e),r=new i(2).toRed(t).redInvm(),n=r.redNeg(),s=new i(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(s).fromRed(),n.redSub(s).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,r,n,s,o,a,c,l,u,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=e,f=this.n.clone(),p=new i(1),g=new i(0),m=new i(0),y=new i(1),b=0;0!==d.cmpn(0);){var w=f.div(d);l=f.sub(w.mul(d)),u=m.sub(w.mul(p));var v=y.sub(w.mul(g));if(!n&&l.cmp(h)<0)t=c.neg(),r=p,n=l.neg(),s=u;else if(n&&2==++b)break;c=l,f=d,d=l,m=p,p=u,y=g,g=v}o=l.neg(),a=u;var _=n.sqr().add(s.sqr());return o.sqr().add(a.sqr()).cmp(_)>=0&&(o=t,a=r),n.negative&&(n=n.neg(),s=s.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:n,b:s},{a:o,b:a}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),o=i.mul(r.a),a=s.mul(n.a),c=i.mul(r.b),l=s.mul(n.b);return{k1:e.sub(o).sub(a),k2:c.add(l).neg()}},c.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var s=n.fromRed().isOdd();return(t&&!s||!t&&s)&&(n=n.redNeg()),this.point(e,n)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(t[s]),a=e[s],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),n[2*s]=a,n[2*s+1]=c,i[2*s]=o.k1,i[2*s+1]=o.k2}for(var l=this._wnafMulAdd(1,n,i,2*s,r),u=0;u<2*s;u++)n[u]=null,i[u]=null;return l},s(l,o.BasePoint),c.prototype.point=function(e,t,r){return new l(this,e,t,r)},c.prototype.pointFromJSON=function(e,t){return l.fromJSON(this,e,t)},l.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var s=t[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(i))}},n},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},l.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),s=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(e){return e=new i(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},l.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},l.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},l.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},s(u,o.BasePoint),c.prototype.jpoint=function(e,t,r){return new u(this,e,t,r)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),s=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=s.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),h=n.redMul(l),d=c.redSqr().redIAdd(u).redISub(h).redISub(h),f=c.redMul(h.redISub(d)).redISub(s.redMul(u)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,f,p)},u.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,s=e.y.redMul(t).redMul(this.z),o=r.redSub(n),a=i.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),l=c.redMul(o),u=r.redMul(c),h=a.redSqr().redIAdd(l).redISub(u).redISub(u),d=a.redMul(u.redISub(h)).redISub(i.redMul(l)),f=this.z.redMul(o);return this.curve.jpoint(h,d,f)},u.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,s=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),l=o.redAdd(o);for(t=0;t<e;t++){var u=s.redSqr(),h=l.redSqr(),d=h.redSqr(),f=u.redAdd(u).redIAdd(u).redIAdd(n.redMul(c)),p=s.redMul(h),g=f.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),y=f.redMul(m);y=y.redIAdd(y).redISub(d);var b=l.redMul(a);t+1<e&&(c=c.redMul(d)),s=g,a=b,l=y}return this.curve.jpoint(s,l.redMul(i),a)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(o).redISub(o),l=s.redIAdd(s);l=(l=l.redIAdd(l)).redIAdd(l),e=c,t=a.redMul(o.redISub(c)).redISub(l),r=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),f=this.x.redAdd(h).redSqr().redISub(u).redISub(d);f=f.redIAdd(f);var p=u.redAdd(u).redIAdd(u),g=p.redSqr(),m=d.redIAdd(d);m=(m=m.redIAdd(m)).redIAdd(m),e=g.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},u.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);e=c;var l=s.redIAdd(s);l=(l=l.redIAdd(l)).redIAdd(l),t=a.redMul(o.redISub(c)).redISub(l),r=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),h=this.y.redSqr(),d=this.x.redMul(h),f=this.x.redSub(u).redMul(this.x.redAdd(u));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),g=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(u);var m=h.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=f.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},u.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),s=t.redSqr(),o=r.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(i)),c=t.redAdd(t),l=(c=c.redIAdd(c)).redMul(o),u=a.redSqr().redISub(l.redAdd(l)),h=l.redISub(u),d=o.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=a.redMul(h).redISub(d),p=r.redAdd(r).redMul(n);return this.curve.jpoint(u,f,p)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),s=i.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var l=i.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(c),u=t.redMul(l);u=(u=u.redIAdd(u)).redIAdd(u);var h=this.x.redMul(a).redISub(u);h=(h=h.redIAdd(h)).redIAdd(h);var d=this.y.redMul(l.redMul(c.redISub(l)).redISub(o.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,d,f)},u.prototype.mul=function(e,t){return e=new i(e,t),this.curve._wnafMul(this,e)},u.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},u.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},7483:(e,t,r)=>{"use strict";var n,i=t,s=r(7952),o=r(7867),a=r(8402).assert;function c(e){"short"===e.type?this.curve=new o.short(e):"edwards"===e.type?this.curve=new o.edwards(e):this.curve=new o.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var r=new c(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=c,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=r(4674)}catch(e){n=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},2040:(e,t,r)=>{"use strict";var n=r(6455),i=r(2723),s=r(8402),o=r(7483),a=r(5037),c=s.assert,l=r(4747),u=r(6390);function h(e){if(!(this instanceof h))return new h(e);"string"==typeof e&&(c(Object.prototype.hasOwnProperty.call(o,e),"Unknown curve "+e),e=o[e]),e instanceof o.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=h,h.prototype.keyPair=function(e){return new l(this,e)},h.prototype.keyFromPrivate=function(e,t){return l.fromPrivate(this,e,t)},h.prototype.keyFromPublic=function(e,t){return l.fromPublic(this,e,t)},h.prototype.genKeyPair=function(e){e||(e={});for(var t=new i({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),s=this.n.sub(new n(2));;){var o=new n(t.generate(r));if(!(o.cmp(s)>0))return o.iaddn(1),this.keyFromPrivate(o)}},h.prototype._truncateToN=function(e,t,r){var i;if(n.isBN(e)||"number"==typeof e)i=(e=new n(e,16)).byteLength();else if("object"==typeof e)i=e.length,e=new n(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new n(s,16)}"number"!=typeof r&&(r=8*i);var o=r-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},h.prototype.sign=function(e,t,r,s){if("object"==typeof r&&(s=r,r=null),s||(s={}),"string"!=typeof e&&"number"!=typeof e&&!n.isBN(e)){c("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),c(e.length>>>0===e.length);for(var o=0;o<e.length;o++)c((255&e[o])===e[o])}t=this.keyFromPrivate(t,r),e=this._truncateToN(e,!1,s.msgBitLength),c(!e.isNeg(),"Can not sign a negative message");var a=this.n.byteLength(),l=t.getPrivate().toArray("be",a),h=e.toArray("be",a);c(new n(h).eq(e),"Can not sign message");for(var d=new i({hash:this.hash,entropy:l,nonce:h,pers:s.pers,persEnc:s.persEnc||"utf8"}),f=this.n.sub(new n(1)),p=0;;p++){var g=s.k?s.k(p):new n(d.generate(this.n.byteLength()));if(!((g=this._truncateToN(g,!0)).cmpn(1)<=0||g.cmp(f)>=0)){var m=this.g.mul(g);if(!m.isInfinity()){var y=m.getX(),b=y.umod(this.n);if(0!==b.cmpn(0)){var w=g.invm(this.n).mul(b.mul(t.getPrivate()).iadd(e));if(0!==(w=w.umod(this.n)).cmpn(0)){var v=(m.getY().isOdd()?1:0)|(0!==y.cmp(b)?2:0);return s.canonical&&w.cmp(this.nh)>0&&(w=this.n.sub(w),v^=1),new u({r:b,s:w,recoveryParam:v})}}}}}},h.prototype.verify=function(e,t,r,n,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),r=this.keyFromPublic(r,n);var s=(t=new u(t,"hex")).r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,c=o.invm(this.n),l=c.mul(e).umod(this.n),h=c.mul(s).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(l,r.getPublic(),h)).isInfinity()&&a.eqXToP(s):!(a=this.g.mulAdd(l,r.getPublic(),h)).isInfinity()&&0===a.getX().umod(this.n).cmp(s)},h.prototype.recoverPubKey=function(e,t,r,i){c((3&r)===r,"The recovery param is more than two bits"),t=new u(t,i);var s=this.n,o=new n(e),a=t.r,l=t.s,h=1&r,d=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");a=d?this.curve.pointFromX(a.add(this.curve.n),h):this.curve.pointFromX(a,h);var f=t.r.invm(s),p=s.sub(o).mul(f).umod(s),g=l.mul(f).umod(s);return this.g.mulAdd(p,a,g)},h.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new u(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch(e){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")}},4747:(e,t,r)=>{"use strict";var n=r(6455),i=r(8402).assert;function s(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=s,s.fromPublic=function(e,t,r){return t instanceof s?t:new s(e,{pub:t,pubEnc:r})},s.fromPrivate=function(e,t,r){return t instanceof s?t:new s(e,{priv:t,privEnc:r})},s.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},s.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},s.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},s.prototype._importPrivate=function(e,t){this.priv=new n(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},s.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?i(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},s.prototype.derive=function(e){return e.validate()||i(e.validate(),"public point not validated"),e.mul(this.priv).getX()},s.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},s.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},s.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},6390:(e,t,r)=>{"use strict";var n=r(6455),i=r(8402),s=i.assert;function o(e,t){if(e instanceof o)return e;this._importDER(e,t)||(s(e.r&&e.s,"Signature without r or s"),this.r=new n(e.r,16),this.s=new n(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function c(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;if(0===e[t.place])return!1;for(var i=0,s=0,o=t.place;s<n;s++,o++)i<<=8,i|=e[o],i>>>=0;return!(i<=127)&&(t.place=o,i)}function l(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function u(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}e.exports=o,o.prototype._importDER=function(e,t){e=i.toArray(e,t);var r=new a;if(48!==e[r.place++])return!1;var s=c(e,r);if(!1===s)return!1;if(s+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var o=c(e,r);if(!1===o)return!1;if(128&e[r.place])return!1;var l=e.slice(r.place,o+r.place);if(r.place+=o,2!==e[r.place++])return!1;var u=c(e,r);if(!1===u)return!1;if(e.length!==u+r.place)return!1;if(128&e[r.place])return!1;var h=e.slice(r.place,u+r.place);if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new n(l),this.s=new n(h),this.recoveryParam=null,!0},o.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=l(t),r=l(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];u(n,t.length),(n=n.concat(t)).push(2),u(n,r.length);var s=n.concat(r),o=[48];return u(o,s.length),o=o.concat(s),i.encode(o,e)}},6983:(e,t,r)=>{"use strict";var n=r(7952),i=r(7483),s=r(8402),o=s.assert,a=s.parseBytes,c=r(6032),l=r(7681);function u(e){if(o("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof u))return new u(e);e=i[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=n.sha512}e.exports=u,u.prototype.sign=function(e,t){e=a(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),s=this.encodePoint(i),o=this.hashInt(s,r.pubBytes(),e).mul(r.priv()),c=n.add(o).umod(this.curve.n);return this.makeSignature({R:i,S:c,Rencoded:s})},u.prototype.verify=function(e,t,r){if(e=a(e),(t=this.makeSignature(t)).S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),s=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(s)},u.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return s.intFromLE(e.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},u.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},u.prototype.makeSignature=function(e){return e instanceof l?e:new l(this,e)},u.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},u.prototype.decodePoint=function(e){var t=(e=s.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=!!(128&e[t]),i=s.intFromLE(r);return this.curve.pointFromY(i,n)},u.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(e){return s.intFromLE(e)},u.prototype.isPoint=function(e){return e instanceof this.pointClass}},6032:(e,t,r)=>{"use strict";var n=r(8402),i=n.assert,s=n.parseBytes,o=n.cachedProperty;function a(e,t){this.eddsa=e,this._secret=s(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=s(t.pub)}a.fromPublic=function(e,t){return t instanceof a?t:new a(e,{pub:t})},a.fromSecret=function(e,t){return t instanceof a?t:new a(e,{secret:t})},a.prototype.secret=function(){return this._secret},o(a,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),o(a,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),o(a,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),o(a,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),o(a,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),o(a,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),a.prototype.sign=function(e){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},a.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},a.prototype.getSecret=function(e){return i(this._secret,"KeyPair is public only"),n.encode(this.secret(),e)},a.prototype.getPublic=function(e){return n.encode(this.pubBytes(),e)},e.exports=a},7681:(e,t,r)=>{"use strict";var n=r(6455),i=r(8402),s=i.assert,o=i.cachedProperty,a=i.parseBytes;function c(e,t){this.eddsa=e,"object"!=typeof t&&(t=a(t)),Array.isArray(t)&&(s(t.length===2*e.encodingLength,"Signature has invalid size"),t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),s(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof n&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}o(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),o(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),o(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),o(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},4674:e=>{e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},8402:(e,t,r)=>{"use strict";var n=t,i=r(6455),s=r(3349),o=r(4367);n.assert=s,n.toArray=o.toArray,n.zero2=o.zero2,n.toHex=o.toHex,n.encode=o.encode,n.getNAF=function(e,t,r){var n,i=new Array(Math.max(e.bitLength(),r)+1);for(n=0;n<i.length;n+=1)i[n]=0;var s=1<<t+1,o=e.clone();for(n=0;n<i.length;n++){var a,c=o.andln(s-1);o.isOdd()?(a=c>(s>>1)-1?(s>>1)-c:c,o.isubn(a)):a=0,i[n]=a,o.iushrn(1)}return i},n.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,s=0;e.cmpn(-i)>0||t.cmpn(-s)>0;){var o,a,c=e.andln(3)+i&3,l=t.andln(3)+s&3;3===c&&(c=-1),3===l&&(l=-1),o=1&c?3!=(n=e.andln(7)+i&7)&&5!==n||2!==l?c:-c:0,r[0].push(o),a=1&l?3!=(n=t.andln(7)+s&7)&&5!==n||2!==c?l:-l:0,r[1].push(a),2*i===o+1&&(i=1-i),2*s===a+1&&(s=1-s),e.iushrn(1),t.iushrn(1)}return r},n.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},n.parseBytes=function(e){return"string"==typeof e?n.toArray(e,"hex"):e},n.intFromLE=function(e){return new i(e,"hex","le")}},5364:(e,t,r)=>{"use strict";var n=r(2861).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==t[o])throw new TypeError(s+" is ambiguous");t[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,i=0,s=0;e[r]===c;)i++,r++;for(var o=(e.length-r)*l+1>>>0,u=new Uint8Array(o);r<e.length;){var h=t[e.charCodeAt(r)];if(255===h)return;for(var d=0,f=o-1;(0!==h||d<s)&&-1!==f;f--,d++)h+=a*u[f]>>>0,u[f]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");s=d,r++}for(var p=o-s;p!==o&&0===u[p];)p++;var g=n.allocUnsafe(i+(o-p));g.fill(0,0,i);for(var m=i;p!==o;)g[m++]=u[p++];return g}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,s=0,o=t.length;s!==o&&0===t[s];)s++,r++;for(var l=(o-s)*u+1>>>0,h=new Uint8Array(l);s!==o;){for(var d=t[s],f=0,p=l-1;(0!==d||f<i)&&-1!==p;p--,f++)d+=256*h[p]>>>0,h[p]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=f,s++}for(var g=l-i;g!==l&&0===h[g];)g++;for(var m=c.repeat(r);g<l;++g)m+=e.charAt(h[g]);return m},decodeUnsafe:h,decode:function(e){var t=h(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,s=a(e),o=s[0],c=s[1],l=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,c)),u=0,h=c>0?o-4:o;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===c&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[u++]=255&t),1===c&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=16383,a=0,l=n-i;a<l;a+=o)s.push(c(e,a,a+o>l?l:a+o));return 1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,s,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},184:(e,t)=>{"use strict";t.k5=function(e){{const t=Buffer.from(e);t.reverse();const r=t.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}},t.Bq=function(e,t){{const r=e.toString(16),n=Buffer.from(r.padStart(2*t,"0").slice(0,2*t),"hex");return n.reverse(),n}}},9404:function(e,t,r){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(7790).Buffer}catch(e){}function a(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function c(e,t,r){var n=a(e,r);return r-1>=t&&(n|=a(e,r-1)<<4),n}function l(e,t,r,i){for(var s=0,o=0,a=Math.min(e.length,r),c=t;c<a;c++){var l=e.charCodeAt(c)-48;s*=i,o=l>=49?l-49+10:l>=17?l-17+10:l,n(l>=0&&o<i,"Invalid character"),s+=o}return s}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=e.length-1,s=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=c(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=c(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var s=e.length-r,o=s%n,a=Math.min(s,s-o)+r,c=0,u=r;u<a;u+=n)c=l(e,u,u+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var h=1;for(c=l(e,u,e.length,t),u=0;u<o;u++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){u(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(e){s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],s=0|t.words[0],o=i*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var l=1;l<n;l++){for(var u=c>>>26,h=67108863&c,d=Math.min(l,t.length-1),f=Math.max(0,l-e.length+1);f<=d;f++){var p=l-f|0;u+=(o=(i=0|e.words[p])*(s=0|t.words[f])+h)/67108864|0,h=67108863&o}r.words[l]=0|h,c=0|u}return 0!==c?r.words[l]=0|c:r.length--,r._strip()}s.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?d[6-c.length]+c+r:c+r}for(0!==s&&(r=s.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var l=f[e],u=p[e];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var g=h.modrn(u).toString(e);r=(h=h.idivn(u)).isZero()?g+r:d[l-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(o,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,s);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,i),o},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===s?(r<e.length&&(e[r++]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===s?(r>=0&&(e[r--]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return n(!(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return n(!(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return n(!(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)t=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&t,i=t>>>26;for(;0!==i&&s<r.length;s++)t=(0|r.words[s])+i,this.words[s]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var s=0,o=0;o<n.length;o++)s=(t=(0|r.words[o])-(0|n.words[o])+s)>>26,this.words[o]=67108863&t;for(;0!==s&&o<r.length;o++)s=(t=(0|r.words[o])+s)>>26,this.words[o]=67108863&t;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,i,s,o=e.words,a=t.words,c=r.words,l=0,u=0|o[0],h=8191&u,d=u>>>13,f=0|o[1],p=8191&f,g=f>>>13,m=0|o[2],y=8191&m,b=m>>>13,w=0|o[3],v=8191&w,_=w>>>13,E=0|o[4],x=8191&E,S=E>>>13,A=0|o[5],I=8191&A,k=A>>>13,T=0|o[6],P=8191&T,C=T>>>13,O=0|o[7],M=8191&O,R=O>>>13,L=0|o[8],N=8191&L,B=L>>>13,D=0|o[9],U=8191&D,z=D>>>13,j=0|a[0],F=8191&j,$=j>>>13,q=0|a[1],W=8191&q,H=q>>>13,V=0|a[2],K=8191&V,G=V>>>13,Z=0|a[3],Y=8191&Z,J=Z>>>13,X=0|a[4],Q=8191&X,ee=X>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],se=8191&ie,oe=ie>>>13,ae=0|a[7],ce=8191&ae,le=ae>>>13,ue=0|a[8],he=8191&ue,de=ue>>>13,fe=0|a[9],pe=8191&fe,ge=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(l+(n=Math.imul(h,F))|0)+((8191&(i=(i=Math.imul(h,$))+Math.imul(d,F)|0))<<13)|0;l=((s=Math.imul(d,$))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,$))+Math.imul(g,F)|0,s=Math.imul(g,$);var ye=(l+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(d,W)|0))<<13)|0;l=((s=s+Math.imul(d,H)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,F),i=(i=Math.imul(y,$))+Math.imul(b,F)|0,s=Math.imul(b,$),n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(g,W)|0,s=s+Math.imul(g,H)|0;var be=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(d,K)|0))<<13)|0;l=((s=s+Math.imul(d,G)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(v,F),i=(i=Math.imul(v,$))+Math.imul(_,F)|0,s=Math.imul(_,$),n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(b,W)|0,s=s+Math.imul(b,H)|0,n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(g,K)|0,s=s+Math.imul(g,G)|0;var we=(l+(n=n+Math.imul(h,Y)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(d,Y)|0))<<13)|0;l=((s=s+Math.imul(d,J)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(x,F),i=(i=Math.imul(x,$))+Math.imul(S,F)|0,s=Math.imul(S,$),n=n+Math.imul(v,W)|0,i=(i=i+Math.imul(v,H)|0)+Math.imul(_,W)|0,s=s+Math.imul(_,H)|0,n=n+Math.imul(y,K)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,G)|0,n=n+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(g,Y)|0,s=s+Math.imul(g,J)|0;var ve=(l+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(d,Q)|0))<<13)|0;l=((s=s+Math.imul(d,ee)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,$))+Math.imul(k,F)|0,s=Math.imul(k,$),n=n+Math.imul(x,W)|0,i=(i=i+Math.imul(x,H)|0)+Math.imul(S,W)|0,s=s+Math.imul(S,H)|0,n=n+Math.imul(v,K)|0,i=(i=i+Math.imul(v,G)|0)+Math.imul(_,K)|0,s=s+Math.imul(_,G)|0,n=n+Math.imul(y,Y)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(b,Y)|0,s=s+Math.imul(b,J)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,ee)|0;var _e=(l+(n=n+Math.imul(h,re)|0)|0)+((8191&(i=(i=i+Math.imul(h,ne)|0)+Math.imul(d,re)|0))<<13)|0;l=((s=s+Math.imul(d,ne)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(P,F),i=(i=Math.imul(P,$))+Math.imul(C,F)|0,s=Math.imul(C,$),n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,W)|0,s=s+Math.imul(k,H)|0,n=n+Math.imul(x,K)|0,i=(i=i+Math.imul(x,G)|0)+Math.imul(S,K)|0,s=s+Math.imul(S,G)|0,n=n+Math.imul(v,Y)|0,i=(i=i+Math.imul(v,J)|0)+Math.imul(_,Y)|0,s=s+Math.imul(_,J)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(b,Q)|0,s=s+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(g,re)|0,s=s+Math.imul(g,ne)|0;var Ee=(l+(n=n+Math.imul(h,se)|0)|0)+((8191&(i=(i=i+Math.imul(h,oe)|0)+Math.imul(d,se)|0))<<13)|0;l=((s=s+Math.imul(d,oe)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(M,F),i=(i=Math.imul(M,$))+Math.imul(R,F)|0,s=Math.imul(R,$),n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(C,W)|0,s=s+Math.imul(C,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(k,K)|0,s=s+Math.imul(k,G)|0,n=n+Math.imul(x,Y)|0,i=(i=i+Math.imul(x,J)|0)+Math.imul(S,Y)|0,s=s+Math.imul(S,J)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(_,Q)|0,s=s+Math.imul(_,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(b,re)|0,s=s+Math.imul(b,ne)|0,n=n+Math.imul(p,se)|0,i=(i=i+Math.imul(p,oe)|0)+Math.imul(g,se)|0,s=s+Math.imul(g,oe)|0;var xe=(l+(n=n+Math.imul(h,ce)|0)|0)+((8191&(i=(i=i+Math.imul(h,le)|0)+Math.imul(d,ce)|0))<<13)|0;l=((s=s+Math.imul(d,le)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(N,F),i=(i=Math.imul(N,$))+Math.imul(B,F)|0,s=Math.imul(B,$),n=n+Math.imul(M,W)|0,i=(i=i+Math.imul(M,H)|0)+Math.imul(R,W)|0,s=s+Math.imul(R,H)|0,n=n+Math.imul(P,K)|0,i=(i=i+Math.imul(P,G)|0)+Math.imul(C,K)|0,s=s+Math.imul(C,G)|0,n=n+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(k,Y)|0,s=s+Math.imul(k,J)|0,n=n+Math.imul(x,Q)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(S,Q)|0,s=s+Math.imul(S,ee)|0,n=n+Math.imul(v,re)|0,i=(i=i+Math.imul(v,ne)|0)+Math.imul(_,re)|0,s=s+Math.imul(_,ne)|0,n=n+Math.imul(y,se)|0,i=(i=i+Math.imul(y,oe)|0)+Math.imul(b,se)|0,s=s+Math.imul(b,oe)|0,n=n+Math.imul(p,ce)|0,i=(i=i+Math.imul(p,le)|0)+Math.imul(g,ce)|0,s=s+Math.imul(g,le)|0;var Se=(l+(n=n+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;l=((s=s+Math.imul(d,de)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(U,F),i=(i=Math.imul(U,$))+Math.imul(z,F)|0,s=Math.imul(z,$),n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(B,W)|0,s=s+Math.imul(B,H)|0,n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,G)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,G)|0,n=n+Math.imul(P,Y)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(C,Y)|0,s=s+Math.imul(C,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(k,Q)|0,s=s+Math.imul(k,ee)|0,n=n+Math.imul(x,re)|0,i=(i=i+Math.imul(x,ne)|0)+Math.imul(S,re)|0,s=s+Math.imul(S,ne)|0,n=n+Math.imul(v,se)|0,i=(i=i+Math.imul(v,oe)|0)+Math.imul(_,se)|0,s=s+Math.imul(_,oe)|0,n=n+Math.imul(y,ce)|0,i=(i=i+Math.imul(y,le)|0)+Math.imul(b,ce)|0,s=s+Math.imul(b,le)|0,n=n+Math.imul(p,he)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(g,he)|0,s=s+Math.imul(g,de)|0;var Ae=(l+(n=n+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ge)|0)+Math.imul(d,pe)|0))<<13)|0;l=((s=s+Math.imul(d,ge)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,H))+Math.imul(z,W)|0,s=Math.imul(z,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(B,K)|0,s=s+Math.imul(B,G)|0,n=n+Math.imul(M,Y)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(R,Y)|0,s=s+Math.imul(R,J)|0,n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(C,Q)|0,s=s+Math.imul(C,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(k,re)|0,s=s+Math.imul(k,ne)|0,n=n+Math.imul(x,se)|0,i=(i=i+Math.imul(x,oe)|0)+Math.imul(S,se)|0,s=s+Math.imul(S,oe)|0,n=n+Math.imul(v,ce)|0,i=(i=i+Math.imul(v,le)|0)+Math.imul(_,ce)|0,s=s+Math.imul(_,le)|0,n=n+Math.imul(y,he)|0,i=(i=i+Math.imul(y,de)|0)+Math.imul(b,he)|0,s=s+Math.imul(b,de)|0;var Ie=(l+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ge)|0)+Math.imul(g,pe)|0))<<13)|0;l=((s=s+Math.imul(g,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(U,K),i=(i=Math.imul(U,G))+Math.imul(z,K)|0,s=Math.imul(z,G),n=n+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(B,Y)|0,s=s+Math.imul(B,J)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(R,Q)|0,s=s+Math.imul(R,ee)|0,n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(C,re)|0,s=s+Math.imul(C,ne)|0,n=n+Math.imul(I,se)|0,i=(i=i+Math.imul(I,oe)|0)+Math.imul(k,se)|0,s=s+Math.imul(k,oe)|0,n=n+Math.imul(x,ce)|0,i=(i=i+Math.imul(x,le)|0)+Math.imul(S,ce)|0,s=s+Math.imul(S,le)|0,n=n+Math.imul(v,he)|0,i=(i=i+Math.imul(v,de)|0)+Math.imul(_,he)|0,s=s+Math.imul(_,de)|0;var ke=(l+(n=n+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,ge)|0)+Math.imul(b,pe)|0))<<13)|0;l=((s=s+Math.imul(b,ge)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(U,Y),i=(i=Math.imul(U,J))+Math.imul(z,Y)|0,s=Math.imul(z,J),n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(B,Q)|0,s=s+Math.imul(B,ee)|0,n=n+Math.imul(M,re)|0,i=(i=i+Math.imul(M,ne)|0)+Math.imul(R,re)|0,s=s+Math.imul(R,ne)|0,n=n+Math.imul(P,se)|0,i=(i=i+Math.imul(P,oe)|0)+Math.imul(C,se)|0,s=s+Math.imul(C,oe)|0,n=n+Math.imul(I,ce)|0,i=(i=i+Math.imul(I,le)|0)+Math.imul(k,ce)|0,s=s+Math.imul(k,le)|0,n=n+Math.imul(x,he)|0,i=(i=i+Math.imul(x,de)|0)+Math.imul(S,he)|0,s=s+Math.imul(S,de)|0;var Te=(l+(n=n+Math.imul(v,pe)|0)|0)+((8191&(i=(i=i+Math.imul(v,ge)|0)+Math.imul(_,pe)|0))<<13)|0;l=((s=s+Math.imul(_,ge)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,Q),i=(i=Math.imul(U,ee))+Math.imul(z,Q)|0,s=Math.imul(z,ee),n=n+Math.imul(N,re)|0,i=(i=i+Math.imul(N,ne)|0)+Math.imul(B,re)|0,s=s+Math.imul(B,ne)|0,n=n+Math.imul(M,se)|0,i=(i=i+Math.imul(M,oe)|0)+Math.imul(R,se)|0,s=s+Math.imul(R,oe)|0,n=n+Math.imul(P,ce)|0,i=(i=i+Math.imul(P,le)|0)+Math.imul(C,ce)|0,s=s+Math.imul(C,le)|0,n=n+Math.imul(I,he)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(k,he)|0,s=s+Math.imul(k,de)|0;var Pe=(l+(n=n+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,ge)|0)+Math.imul(S,pe)|0))<<13)|0;l=((s=s+Math.imul(S,ge)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(U,re),i=(i=Math.imul(U,ne))+Math.imul(z,re)|0,s=Math.imul(z,ne),n=n+Math.imul(N,se)|0,i=(i=i+Math.imul(N,oe)|0)+Math.imul(B,se)|0,s=s+Math.imul(B,oe)|0,n=n+Math.imul(M,ce)|0,i=(i=i+Math.imul(M,le)|0)+Math.imul(R,ce)|0,s=s+Math.imul(R,le)|0,n=n+Math.imul(P,he)|0,i=(i=i+Math.imul(P,de)|0)+Math.imul(C,he)|0,s=s+Math.imul(C,de)|0;var Ce=(l+(n=n+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,ge)|0)+Math.imul(k,pe)|0))<<13)|0;l=((s=s+Math.imul(k,ge)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(U,se),i=(i=Math.imul(U,oe))+Math.imul(z,se)|0,s=Math.imul(z,oe),n=n+Math.imul(N,ce)|0,i=(i=i+Math.imul(N,le)|0)+Math.imul(B,ce)|0,s=s+Math.imul(B,le)|0,n=n+Math.imul(M,he)|0,i=(i=i+Math.imul(M,de)|0)+Math.imul(R,he)|0,s=s+Math.imul(R,de)|0;var Oe=(l+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ge)|0)+Math.imul(C,pe)|0))<<13)|0;l=((s=s+Math.imul(C,ge)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(U,ce),i=(i=Math.imul(U,le))+Math.imul(z,ce)|0,s=Math.imul(z,le),n=n+Math.imul(N,he)|0,i=(i=i+Math.imul(N,de)|0)+Math.imul(B,he)|0,s=s+Math.imul(B,de)|0;var Me=(l+(n=n+Math.imul(M,pe)|0)|0)+((8191&(i=(i=i+Math.imul(M,ge)|0)+Math.imul(R,pe)|0))<<13)|0;l=((s=s+Math.imul(R,ge)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(U,he),i=(i=Math.imul(U,de))+Math.imul(z,he)|0,s=Math.imul(z,de);var Re=(l+(n=n+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,ge)|0)+Math.imul(B,pe)|0))<<13)|0;l=((s=s+Math.imul(B,ge)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var Le=(l+(n=Math.imul(U,pe))|0)+((8191&(i=(i=Math.imul(U,ge))+Math.imul(z,pe)|0))<<13)|0;return l=((s=Math.imul(z,ge))+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,c[0]=me,c[1]=ye,c[2]=be,c[3]=we,c[4]=ve,c[5]=_e,c[6]=Ee,c[7]=xe,c[8]=Se,c[9]=Ae,c[10]=Ie,c[11]=ke,c[12]=Te,c[13]=Pe,c[14]=Ce,c[15]=Oe,c[16]=Me,c[17]=Re,c[18]=Le,0!==l&&(c[19]=l,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,c=Math.min(s,t.length-1),l=Math.max(0,s-e.length+1);l<=c;l++){var u=s-l,h=(0|e.words[u])*(0|t.words[l]),d=67108863&h;a=67108863&(d=d+a|0),i+=(o=(o=o+(h/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r._strip()}function b(e,t,r){return y(e,t,r)}function w(e,t){this.x=e,this.y=t}Math.imul||(m=g),s.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):r<63?g(this,e,t):r<1024?y(this,e,t):b(this,e,t)},w.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},w.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},w.prototype.permute=function(e,t,r,n,i,s){for(var o=0;o<s;o++)n[o]=t[e[o]],i[o]=r[e[o]]},w.prototype.transform=function(e,t,r,n,i,s){this.permute(s,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),l=Math.sin(2*Math.PI/a),u=0;u<i;u+=a)for(var h=c,d=l,f=0;f<o;f++){var p=r[u+f],g=n[u+f],m=r[u+f+o],y=n[u+f+o],b=h*m-d*y;y=h*y+d*m,m=b,r[u+f]=p+m,n[u+f]=g+y,r[u+f+o]=p-m,n[u+f+o]=g-y,f!==a&&(b=c*h-l*d,d=c*d+l*h,h=b)}},w.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},w.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},w.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},w.prototype.convert13b=function(e,t,r,i){for(var s=0,o=0;o<t;o++)s+=0|e[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===s),n(!(-8192&s))},w.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},w.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),c=new Array(n),l=new Array(n),u=new Array(n),h=new Array(n),d=r.words;d.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,l,n),this.transform(o,s,a,c,n,i),this.transform(l,s,u,h,n,i);for(var f=0;f<n;f++){var p=a[f]*u[f]-c[f]*h[f];c[f]=a[f]*h[f]+c[f]*u[f],a[f]=p}return this.conjugate(a,c,n),this.transform(a,c,d,s,n,i),this.conjugate(d,s,n),this.normalize13b(d,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),b(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var s=(0|this.words[i])*e,o=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=67108863&o}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,c=(0|this.words[t])-a<<r;this.words[t]=c|o,o=a>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},s.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(i-=o,i=Math.max(0,i),c){for(var l=0;l<o;l++)c.words[l]=this.words[l];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=i);l--){var h=0|this.words[l];this.words[l]=u<<26-s|h>>>s,u=h&a}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},s.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var i,s,o=e.length+r;this._expand(o);var a=0;for(i=0;i<e.length;i++){s=(0|this.words[i+r])+a;var c=(0|e.words[i])*t;a=((s-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)a=(s=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&s;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!=(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new s(null)).length=c+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var u=n.clone()._ishlnsubmul(i,1,c);0===u.negative&&(n=u,a&&(a.words[c]=1));for(var h=c-1;h>=0;h--){var d=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(d=Math.min(d/o|0,67108863),n._ishlnsubmul(i,d,h);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=d)}return a&&a._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):this.negative&e.negative?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,s=this.length-1;s>=0;s--)i=(r*i+(0|this.words[s]))%e;return t?-i:i},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*r;this.words[i]=s/e|0,r=s%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new s(1),o=new s(0),a=new s(0),c=new s(1),l=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++l;for(var u=r.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;!(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(u),o.isub(h)),i.iushrn(1),o.iushrn(1);for(var p=0,g=1;!(r.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(u),c.isub(h)),a.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(a),o.isub(c)):(r.isub(t),a.isub(i),c.isub(o))}return{a,b:c,gcd:r.iushln(l)}},s.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new s(1),a=new s(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,u=1;!(t.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(t.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var h=0,d=1;!(r.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(a)):(r.isub(t),a.isub(o))}return(i=0===t.cmpn(1)?o:a).cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var s=t;t=r,r=s}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return!(1&this.words[0])},s.prototype.isOdd=function(){return!(1&~this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new I(e)},s.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function _(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function k(e){I.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},_.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},_.prototype.split=function(e,t){e.iushrn(this.n,0,t)},_.prototype.imulK=function(e){return e.imul(this.k)},i(E,_),E.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&r,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,e.words[i-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},E.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(x,_),i(S,_),i(A,_),A.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(v[e])return v[e];var t;if("k256"===e)t=new E;else if("p224"===e)t=new x;else if("p192"===e)t=new S;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new A}return v[e]=t,t},I.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},I.prototype._verify2=function(e,t){n(!(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},I.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},I.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},I.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},I.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},I.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},I.prototype.isqr=function(e){return this.imul(e,e.clone())},I.prototype.sqr=function(e){return this.mul(e,e)},I.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,l).cmp(c);)u.redIAdd(c);for(var h=this.pow(u,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=o;0!==f.cmp(a);){for(var g=f,m=0;0!==g.cmp(a);m++)g=g.redSqr();n(m<p);var y=this.pow(h,new s(1).iushln(p-m-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=m}return d},I.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},I.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var l=t.words[n],u=c-1;u>=0;u--){var h=l>>u&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==o?(o<<=1,o|=h,(4==++a||0===n&&0===u)&&(i=this.mul(i,r[o]),a=0,o=0)):a=0}c=26}return i},I.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},I.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new k(e)},i(k,I),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},2755:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeUnchecked=t.deserialize=t.serialize=t.BinaryReader=t.BinaryWriter=t.BorshError=t.baseDecode=t.baseEncode=void 0;const c=a(r(9404)),l=a(r(6763)),u=o(r(4281)),h=new("function"!=typeof TextDecoder?u.TextDecoder:TextDecoder)("utf-8",{fatal:!0});t.baseEncode=function(e){return"string"==typeof e&&(e=Buffer.from(e,"utf8")),l.default.encode(Buffer.from(e))},t.baseDecode=function(e){return Buffer.from(l.default.decode(e))};const d=1024;class f extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}t.BorshError=f;class p{constructor(){this.buf=Buffer.alloc(d),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(d)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new c.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new c.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new c.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new c.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(d)]),this.length+=e.length}writeString(e){this.maybeResize();const t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function g(e,t,r){const n=r.value;r.value=function(...e){try{return n.apply(this,e)}catch(e){if(e instanceof RangeError){const t=e.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(t)>=0)throw new f("Reached the end of buffer when deserializing")}throw e}}}t.BinaryWriter=p;class m{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new c.default(e,"le")}readU128(){const e=this.readBuffer(16);return new c.default(e,"le")}readU256(){const e=this.readBuffer(32);return new c.default(e,"le")}readU512(){const e=this.readBuffer(64);return new c.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new f(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return h.decode(t)}catch(e){throw new f(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let n=0;n<t;++n)r.push(e());return r}}function y(e){return e.charAt(0).toUpperCase()+e.slice(1)}function b(e,t,r,n,i){try{if("string"==typeof n)i[`write${y(n)}`](r);else if(n instanceof Array)if("number"==typeof n[0]){if(r.length!==n[0])throw new f(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new f(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let t=0;t<n[1];t++)b(e,null,r[t],n[0],i)}else i.writeArray(r,(r=>{b(e,t,r,n[0],i)}));else if(void 0!==n.kind)switch(n.kind){case"option":null==r?i.writeU8(0):(i.writeU8(1),b(e,t,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach(((r,s)=>{b(e,t,s,n.key,i),b(e,t,r,n.value,i)}));break;default:throw new f(`FieldType ${n} unrecognized`)}else w(e,r,i)}catch(e){throw e instanceof f&&e.addToFieldPath(t),e}}function w(e,t,r){if("function"==typeof t.borshSerialize)return void t.borshSerialize(r);const n=e.get(t.constructor);if(!n)throw new f(`Class ${t.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map((([n,i])=>{b(e,n,t[n],i,r)}));else{if("enum"!==n.kind)throw new f(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`);{const i=t[n.field];for(let s=0;s<n.values.length;++s){const[o,a]=n.values[s];if(o===i){r.writeU8(s),b(e,o,t[o],a,r);break}}}}}function v(e,t,r,n){try{if("string"==typeof r)return n[`read${y(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return n.readFixedArray(r[0]);if("number"==typeof r[1]){const t=[];for(let i=0;i<r[1];i++)t.push(v(e,null,r[0],n));return t}return n.readArray((()=>v(e,t,r[0],n)))}if("option"===r.kind)return n.readU8()?v(e,t,r.type,n):void 0;if("map"===r.kind){let i=new Map;const s=n.readU32();for(let o=0;o<s;o++){const s=v(e,t,r.key,n),o=v(e,t,r.value,n);i.set(s,o)}return i}return _(e,r,n)}catch(e){throw e instanceof f&&e.addToFieldPath(t),e}}function _(e,t,r){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(r);const n=e.get(t);if(!n)throw new f(`Class ${t.name} is missing in schema`);if("struct"===n.kind){const n={};for(const[i,s]of e.get(t).fields)n[i]=v(e,i,s,r);return new t(n)}if("enum"===n.kind){const i=r.readU8();if(i>=n.values.length)throw new f(`Enum index: ${i} is out of range`);const[s,o]=n.values[i],a=v(e,s,o,r);return new t({[s]:a})}throw new f(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}s([g],m.prototype,"readU8",null),s([g],m.prototype,"readU16",null),s([g],m.prototype,"readU32",null),s([g],m.prototype,"readU64",null),s([g],m.prototype,"readU128",null),s([g],m.prototype,"readU256",null),s([g],m.prototype,"readU512",null),s([g],m.prototype,"readString",null),s([g],m.prototype,"readFixedArray",null),s([g],m.prototype,"readArray",null),t.BinaryReader=m,t.serialize=function(e,t,r=p){const n=new r;return w(e,t,n),n.toArray()},t.deserialize=function(e,t,r,n=m){const i=new n(r),s=_(e,t,i);if(i.offset<r.length)throw new f(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return s},t.deserializeUnchecked=function(e,t,r,n=m){return _(e,t,new n(r))}},5037:(e,t,r)=>{var n;function i(e){this.rand=e}if(e.exports=function(e){return n||(n=new i(null)),n.generate(e)},e.exports.Rand=i,i.prototype.generate=function(e){return this._rand(e)},i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var s=r(3776);if("function"!=typeof s.randomBytes)throw new Error("Not supported");i.prototype._rand=function(e){return s.randomBytes(e)}}catch(e){}},6763:(e,t,r)=>{var n=r(5364);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},2828:(e,t)=>{"use strict";class r{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,r){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function n(e,t){return t.property?e+"["+t.property+"]":e}t.Layout=r,t.nameWithProperty=n,t.bindConstructorLayout=function(e,t){if("function"!=typeof e)throw new TypeError("Class must be constructor");if(e.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof r))throw new TypeError("layout must be a Layout");if(t.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value:function(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(e,"decode",{value:function(e,r){return t.decode(e,r)},writable:!0})};class i extends r{isCount(){throw new Error("ExternalLayout is abstract")}}class s extends i{constructor(e,t){if(void 0===e&&(e=1),!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t){void 0===t&&(t=0);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}class o extends i{constructor(e,t,n){if(!(e instanceof r))throw new TypeError("layout must be a Layout");if(void 0===t)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof a||this.layout instanceof c}decode(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,r){return void 0===r&&(r=0),this.layout.encode(e,t,r+this.offset)}}class a extends r{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeUIntLE(e,r,this.span),this.span}}class c extends r{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeUIntBE(e,r,this.span),this.span}}class l extends r{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readIntLE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeIntLE(e,r,this.span),this.span}}class u extends r{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readIntBE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeIntBE(e,r,this.span),this.span}}const h=Math.pow(2,32);function d(e){const t=Math.floor(e/h);return{hi32:t,lo32:e-t*h}}function f(e,t){return e*h+t}class p extends r{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const r=e.readUInt32LE(t);return f(e.readUInt32LE(t+4),r)}encode(e,t,r){void 0===r&&(r=0);const n=d(e);return t.writeUInt32LE(n.lo32,r),t.writeUInt32LE(n.hi32,r+4),8}}class g extends r{constructor(e){super(8,e)}decode(e,t){return void 0===t&&(t=0),f(e.readUInt32BE(t),e.readUInt32BE(t+4))}encode(e,t,r){void 0===r&&(r=0);const n=d(e);return t.writeUInt32BE(n.hi32,r),t.writeUInt32BE(n.lo32,r+4),8}}class m extends r{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const r=e.readUInt32LE(t);return f(e.readInt32LE(t+4),r)}encode(e,t,r){void 0===r&&(r=0);const n=d(e);return t.writeUInt32LE(n.lo32,r),t.writeInt32LE(n.hi32,r+4),8}}class y extends r{constructor(e){super(8,e)}decode(e,t){return void 0===t&&(t=0),f(e.readInt32BE(t),e.readUInt32BE(t+4))}encode(e,t,r){void 0===r&&(r=0);const n=d(e);return t.writeInt32BE(n.hi32,r),t.writeUInt32BE(n.lo32,r+4),8}}class b extends r{constructor(e){super(4,e)}decode(e,t){return void 0===t&&(t=0),e.readFloatLE(t)}encode(e,t,r){return void 0===r&&(r=0),t.writeFloatLE(e,r),4}}class w extends r{constructor(e){super(4,e)}decode(e,t){return void 0===t&&(t=0),e.readFloatBE(t)}encode(e,t,r){return void 0===r&&(r=0),t.writeFloatBE(e,r),4}}class v extends r{constructor(e){super(8,e)}decode(e,t){return void 0===t&&(t=0),e.readDoubleLE(t)}encode(e,t,r){return void 0===r&&(r=0),t.writeDoubleLE(e,r),8}}class _ extends r{constructor(e){super(8,e)}decode(e,t){return void 0===t&&(t=0),e.readDoubleBE(t)}encode(e,t,r){return void 0===r&&(r=0),t.writeDoubleBE(e,r),8}}class E extends r{constructor(e,t,n){if(!(e instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof i&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(t instanceof i)&&0<e.span&&(s=t*e.span),super(s,n),this.elementLayout=e,this.count=t}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0,n=this.count;if(n instanceof i&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e,t){void 0===t&&(t=0);const r=[];let n=0,s=this.count;for(s instanceof i&&(s=s.decode(e,t));n<s;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r){void 0===r&&(r=0);const n=this.elementLayout,s=e.reduce(((e,i)=>e+n.encode(i,t,r+e)),0);return this.count instanceof i&&this.count.encode(e.length,t,r),s}}class x extends r{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof r),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===n&&(n=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(e){throw new RangeError("indeterminate span")}return r}decode(e,t){void 0===t&&(t=0);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r){void 0===r&&(r=0);const n=r;let i=0,s=0;for(const n of this.fields){let o=n.span;if(s=0<o?o:0,void 0!==n.property){const i=e[n.property];void 0!==i&&(s=n.encode(i,t,r),0>o&&(o=n.getSpan(t,r)))}i=r,r+=o}return i+s-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class S{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class A extends S{constructor(e,t){if(!(e instanceof i&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}class I extends r{constructor(e,t,n){const s=e instanceof a||e instanceof c;if(s)e=new A(new o(e));else if(e instanceof i&&e.isCount())e=new A(e);else if(!(e instanceof S))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let l=-1;t&&(l=t.span,0<=l&&s&&(l+=e.layout.span)),super(l,n),this.discriminator=e,this.usesPrefixDiscriminator=s,this.defaultLayout=t,this.registry={};let u=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return u(e)},this.configGetSourceVariant=function(e){u=e.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(e,t){let r;void 0===t&&(t=0);const n=this.discriminator,i=n.decode(e,t);let s=this.registry[i];if(void 0===s){let o=0;s=this.defaultLayout,this.usesPrefixDiscriminator&&(o=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[s.property]=this.defaultLayout.decode(e,t+o)}else r=s.decode(e,t);return r}encode(e,t,r){void 0===r&&(r=0);const n=this.getSourceVariant(e);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let s=0;return this.usesPrefixDiscriminator&&(s=n.layout.span),n.encode(e[n.property],t,r),s+i.encode(e[i.property],t,r+s)}return n.encode(e,t,r)}addVariant(e,t,r){const n=new k(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t){let r=e;return Buffer.isBuffer(e)&&(void 0===t&&(t=0),r=this.discriminator.decode(e,t)),this.registry[r]}}class k extends r{constructor(e,t,n,i){if(!(e instanceof I))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===i&&(i=n,n=null),n){if(!(n instanceof r))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof i)throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(e,t+r)}decode(e,t){const r=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r){void 0===r&&(r=0);let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function T(e){return 0>e&&(e+=4294967296),e}class P extends r{constructor(e,t,r){if(!(e instanceof a||e instanceof c))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===r&&(r=t,t=void 0),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(e){return n=T(e),this},this._packedGetValue=function(){return n}}decode(e,t){const r=this.makeDestinationObject();void 0===t&&(t=0);const n=this.word.decode(e,t);this._packedSetValue(n);for(const e of this.fields)void 0!==e.property&&(r[e.property]=e.decode(n));return r}encode(e,t,r){void 0===r&&(r=0);const n=this.word.decode(t,r);this._packedSetValue(n);for(const t of this.fields)if(void 0!==t.property){const r=e[t.property];void 0!==r&&t.encode(r)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new C(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new O(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}class C{constructor(e,t,r){if(!(e instanceof P))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const n=8*e.span,i=e.fields.reduce(((e,t)=>e+t.bits),0);if(t+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-t),this.wordMask=T(this.valueMask<<this.start),this.property=r}decode(){return T(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if(!Number.isInteger(e)||e!==T(e&this.valueMask))throw new TypeError(n("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=T(e<<this.start);this.container._packedSetValue(T(t&~this.wordMask)|r)}}class O extends C{constructor(e,t){super(e,1,t)}decode(e,t){return!!C.prototype.decode.call(this,e,t)}encode(e){return"boolean"==typeof e&&(e=+e),C.prototype.encode.call(this,e)}}class M extends r{constructor(e,t){if(!(e instanceof i&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof i||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t){void 0===t&&(t=0);let r=this.span;return 0>r&&(r=this.length.decode(e,t)),e.slice(t,t+r)}encode(e,t,r){let s=this.length;if(this.length instanceof i&&(s=e.length),!Buffer.isBuffer(e)||s!==e.length)throw new TypeError(n("Blob.encode",this)+" requires (length "+s+") Buffer as src");if(r+s>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),r,s,"hex"),this.length instanceof i&&this.length.encode(s,t,r),s}}class R extends r{constructor(e){super(-1,e)}getSpan(e,t){if(!Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");void 0===t&&(t=0);let r=t;for(;r<e.length&&0!==e[r];)r+=1;return 1+r-t}decode(e,t,r){void 0===t&&(t=0);let n=this.getSpan(e,t);return e.slice(t,t+n-1).toString("utf-8")}encode(e,t,r){void 0===r&&(r=0),"string"!=typeof e&&(e=e.toString());const n=new Buffer(e,"utf8"),i=n.length;if(r+i>t.length)throw new RangeError("encoding overruns Buffer");return n.copy(t,r),t[r+i]=0,i+1}}class L extends r{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t){if(!Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");return void 0===t&&(t=0),e.length-t}decode(e,t,r){void 0===t&&(t=0);let n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return e.slice(t,t+n).toString("utf-8")}encode(e,t,r){void 0===r&&(r=0),"string"!=typeof e&&(e=e.toString());const n=new Buffer(e,"utf8"),i=n.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>t.length)throw new RangeError("encoding overruns Buffer");return n.copy(t,r),i}}class N extends r{constructor(e,t){super(0,t),this.value=e}decode(e,t,r){return this.value}encode(e,t,r){return 0}}t.ExternalLayout=i,t.GreedyCount=s,t.OffsetLayout=o,t.UInt=a,t.UIntBE=c,t.Int=l,t.IntBE=u,t.Float=b,t.FloatBE=w,t.Double=v,t.DoubleBE=_,t.Sequence=E,t.Structure=x,t.UnionDiscriminator=S,t.UnionLayoutDiscriminator=A,t.Union=I,t.VariantLayout=k,t.BitStructure=P,t.BitField=C,t.Boolean=O,t.Blob=M,t.CString=R,t.UTF8=L,t.Constant=N,t.greedy=(e,t)=>new s(e,t),t.offset=(e,t,r)=>new o(e,t,r),t.u8=e=>new a(1,e),t.u16=e=>new a(2,e),t.u24=e=>new a(3,e),t.u32=e=>new a(4,e),t.u40=e=>new a(5,e),t.u48=e=>new a(6,e),t.nu64=e=>new p(e),t.u16be=e=>new c(2,e),t.u24be=e=>new c(3,e),t.u32be=e=>new c(4,e),t.u40be=e=>new c(5,e),t.u48be=e=>new c(6,e),t.nu64be=e=>new g(e),t.s8=e=>new l(1,e),t.s16=e=>new l(2,e),t.s24=e=>new l(3,e),t.s32=e=>new l(4,e),t.s40=e=>new l(5,e),t.s48=e=>new l(6,e),t.ns64=e=>new m(e),t.s16be=e=>new u(2,e),t.s24be=e=>new u(3,e),t.s32be=e=>new u(4,e),t.s40be=e=>new u(5,e),t.s48be=e=>new u(6,e),t.ns64be=e=>new y(e),t.f32=e=>new b(e),t.f32be=e=>new w(e),t.f64=e=>new v(e),t.f64be=e=>new _(e),t.struct=(e,t,r)=>new x(e,t,r),t.bits=(e,t,r)=>new P(e,t,r),t.seq=(e,t,r)=>new E(e,t,r),t.union=(e,t,r)=>new I(e,t,r),t.unionLayoutDiscriminator=(e,t)=>new A(e,t),t.blob=(e,t)=>new M(e,t),t.cstr=e=>new R(e),t.utf8=(e,t)=>new L(e,t),t.const=(e,t)=>new N(e,t)},8287:(e,t,r)=>{"use strict";const n=r(7526),i=r(251),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let n=a(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Z(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Z(e,ArrayBuffer)||e&&Z(e.buffer,ArrayBuffer))return f(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Z(e,SharedArrayBuffer)||e&&Z(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);const i=function(e){if(c.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||Y(e.length)?a(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),a(e<0?0:0|p(e))}function d(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,c.prototype),n}function p(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(e).length;default:if(i)return n?-1:V(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,i){let s,o=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(l(e,s)===l(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===c)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){let r=!0;for(let n=0;n<c;n++)if(l(e,s+n)!==l(t,n)){r=!1;break}if(r)return s}return-1}function v(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=t.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(Y(n))return o;e[r+o]=n}return o}function _(e,t,r,n){return G(V(t,e.length-r),e,r,n)}function E(e,t,r,n){return G(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return G(K(t),e,r,n)}function S(e,t,r,n){return G(function(e,t){let r,n,i;const s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function A(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function I(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,c;switch(o){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(s=c));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(e){const t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=k));return r}(n)}t.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},c.allocUnsafe=function(e){return h(e)},c.allocUnsafeSlow=function(e){return h(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(Z(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Z(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=c.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(Z(t,Uint8Array))i+t.length>n.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):m.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,i){if(Z(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0);const a=Math.min(s,o),l=this.slice(n,i),u=e.slice(t,r);for(let e=0;e<a;++e)if(l[e]!==u[e]){s=l[e],o=u[e];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return x(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function T(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function P(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function C(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=J[e[n]];return i}function O(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function M(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,n,i,s){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n,i){$(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function N(e,t,r,n,i){$(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function B(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,s){return t=+t,r>>>=0,s||B(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,s){return t=+t,r>>>=0,s||B(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},c.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||R(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||R(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=X((function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=X((function(e,t=0){return N(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=X((function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=X((function(e,t=0){return N(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=c.isBuffer(e)?e:c.from(e,n),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const z={};function j(e,t,r){z[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function F(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function $(e,t,r,n,i,s){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new z.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||W(t,e.length-(r+1))}(n,i,s)}function q(e,t){if("number"!=typeof e)throw new z.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,r){if(Math.floor(e)!==e)throw q(e,r),new z.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new z.ERR_BUFFER_OUT_OF_BOUNDS;throw new z.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}j("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),j("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),j("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=F(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=F(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function V(e,t){let r;t=t||1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function K(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},2729:e=>{"use strict";const t=/[\p{Lu}]/u,r=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,i=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,o=new RegExp("^"+s.source),a=new RegExp(s.source+i.source,"gu"),c=new RegExp("\\d+"+i.source,"gu"),l=(e,i)=>{if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");if(i={pascalCase:!1,preserveConsecutiveUppercase:!1,...i},0===(e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim()).length)return"";const s=!1===i.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(i.locale),l=!1===i.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(i.locale);return 1===e.length?i.pascalCase?l(e):s(e):(e!==s(e)&&(e=((e,n,i)=>{let s=!1,o=!1,a=!1;for(let c=0;c<e.length;c++){const l=e[c];s&&t.test(l)?(e=e.slice(0,c)+"-"+e.slice(c),s=!1,a=o,o=!0,c++):o&&a&&r.test(l)?(e=e.slice(0,c-1)+"-"+e.slice(c-1),a=o,o=!1,s=!0):(s=n(l)===l&&i(l)!==l,a=o,o=i(l)===l&&n(l)!==l)}return e})(e,s,l)),e=e.replace(o,""),e=i.preserveConsecutiveUppercase?((e,t)=>(n.lastIndex=0,e.replace(n,(e=>t(e)))))(e,s):s(e),i.pascalCase&&(e=l(e.charAt(0))+e.slice(1)),((e,t)=>(a.lastIndex=0,c.lastIndex=0,e.replace(a,((e,r)=>t(r))).replace(c,(e=>t(e)))))(e,l))};e.exports=l,e.exports.default=l},4945:function(e,t){var r="undefined"!=typeof self?self:this,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function g(e){var t=new FileReader,r=p(t);return t.readAsArrayBuffer(e),r}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&i&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,r,n=f(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,r=p(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=l(e),t=u(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},d.prototype.delete=function(e){delete this.map[l(e)]},d.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},d.prototype.set=function(e,t){this.map[l(e)]=u(t)},d.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),h(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),h(e)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e,t){var r,n,i=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),b.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function v(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},y.call(w.prototype),y.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];_.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function x(e,r){return new Promise((function(n,s){var o=new w(e,r);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new _(i,r))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",c)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}x.polyfill=!0,e.fetch||(e.fetch=x,e.Headers=d,e.Request=w,e.Response=_),t.Headers=d,t.Request=w,t.Response=_,t.fetch=x,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},6320:e=>{"use strict";var t={single_source_shortest_paths:function(e,r,n){var i={},s={};s[r]=0;var o,a,c,l,u,h,d,f=t.PriorityQueue.make();for(f.push(r,0);!f.empty();)for(c in a=(o=f.pop()).value,l=o.cost,u=e[a]||{})u.hasOwnProperty(c)&&(h=l+u[c],d=s[c],(void 0===s[c]||d>h)&&(s[c]=h,f.push(c,h),i[c]=a));if(void 0!==n&&void 0===s[n]){var p=["Could not find a path from ",r," to ",n,"."].join("");throw new Error(p)}return i},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],n=t;n;)r.push(n),e[n],n=e[n];return r.reverse(),r},find_path:function(e,r,n){var i=t.single_source_shortest_paths(e,r,n);return t.extract_shortest_path_from_predecessor_list(i,n)},PriorityQueue:{make:function(e){var r,n=t.PriorityQueue,i={};for(r in e=e||{},n)n.hasOwnProperty(r)&&(i[r]=n[r]);return i.queue=[],i.sorter=e.sorter||n.default_sorter,i},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var r={value:e,cost:t};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},9049:e=>{"use strict";e.exports=function(e){for(var t=[],r=e.length,n=0;n<r;n++){var i=e.charCodeAt(n);if(i>=55296&&i<=56319&&r>n+1){var s=e.charCodeAt(n+1);s>=56320&&s<=57343&&(i=1024*(i-55296)+s-56320+65536,n+=1)}i<128?t.push(i):i<2048?(t.push(i>>6|192),t.push(63&i|128)):i<55296||i>=57344&&i<65536?(t.push(i>>12|224),t.push(i>>6&63|128),t.push(63&i|128)):i>=65536&&i<=1114111?(t.push(i>>18|240),t.push(i>>12&63|128),t.push(i>>6&63|128),t.push(63&i|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,s),!0;case 6:return u.fn.call(u.context,t,n,i,s,o),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,i);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&l.push(a[c]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},7007:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}g(e,t,s,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var i,s,o,l;if(a(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=u.bind(n);return i.listener=r,n.wrapFn=i,i}function d(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){n.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var l=c.length,u=p(c,l);for(r=0;r<l;++r)n(u[r],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,s,o;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7952:(e,t,r)=>{var n=t;n.utils=r(7426),n.common=r(6166),n.sha=r(6229),n.ripemd=r(6784),n.hmac=r(8948),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},6166:(e,t,r)=>{"use strict";var n=r(7426),i=r(3349);function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=s,s.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},s.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},s.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n}},8948:(e,t,r)=>{"use strict";var n=r(7426),i=r(3349);function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}e.exports=s,s.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},s.prototype.update=function(e,t){return this.inner.update(e,t),this},s.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},6784:(e,t,r)=>{"use strict";var n=r(7426),i=r(6166),s=n.rotl32,o=n.sum32,a=n.sum32_3,c=n.sum32_4,l=i.BlockHash;function u(){if(!(this instanceof u))return new u;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function d(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function f(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}n.inherits(u,l),t.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],l=this.h[3],u=this.h[4],b=r,w=n,v=i,_=l,E=u,x=0;x<80;x++){var S=o(s(c(r,h(x,n,i,l),e[p[x]+t],d(x)),m[x]),u);r=u,u=l,l=s(i,10),i=n,n=S,S=o(s(c(b,h(79-x,w,v,_),e[g[x]+t],f(x)),y[x]),E),b=E,E=_,_=s(v,10),v=w,w=S}S=a(this.h[1],i,_),this.h[1]=a(this.h[2],l,E),this.h[2]=a(this.h[3],u,b),this.h[3]=a(this.h[4],r,w),this.h[4]=a(this.h[0],n,v),this.h[0]=S},u.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},6229:(e,t,r)=>{"use strict";t.sha1=r(3917),t.sha224=r(7714),t.sha256=r(2287),t.sha384=r(1911),t.sha512=r(7766)},3917:(e,t,r)=>{"use strict";var n=r(7426),i=r(6166),s=r(6225),o=n.rotl32,a=n.sum32,c=n.sum32_5,l=s.ft_1,u=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(d,u),e.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=o(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],s=this.h[1],u=this.h[2],d=this.h[3],f=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),g=c(o(i,5),l(p,s,u,d),f,r[n],h[p]);f=d,d=u,u=o(s,30),s=i,i=g}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],u),this.h[3]=a(this.h[3],d),this.h[4]=a(this.h[4],f)},d.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},7714:(e,t,r)=>{"use strict";var n=r(7426),i=r(2287);function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(s,i),e.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},2287:(e,t,r)=>{"use strict";var n=r(7426),i=r(6166),s=r(6225),o=r(3349),a=n.sum32,c=n.sum32_4,l=n.sum32_5,u=s.ch32,h=s.maj32,d=s.s0_256,f=s.s1_256,p=s.g0_256,g=s.g1_256,m=i.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}n.inherits(b,m),e.exports=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=c(g(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],m=this.h[2],y=this.h[3],b=this.h[4],w=this.h[5],v=this.h[6],_=this.h[7];for(o(this.k.length===r.length),n=0;n<r.length;n++){var E=l(_,f(b),u(b,w,v),this.k[n],r[n]),x=a(d(i),h(i,s,m));_=v,v=w,w=b,b=a(y,E),y=m,m=s,s=i,i=a(E,x)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],m),this.h[3]=a(this.h[3],y),this.h[4]=a(this.h[4],b),this.h[5]=a(this.h[5],w),this.h[6]=a(this.h[6],v),this.h[7]=a(this.h[7],_)},b.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},1911:(e,t,r)=>{"use strict";var n=r(7426),i=r(7766);function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(s,i),e.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},7766:(e,t,r)=>{"use strict";var n=r(7426),i=r(6166),s=r(3349),o=n.rotr64_hi,a=n.rotr64_lo,c=n.shr64_hi,l=n.shr64_lo,u=n.sum64,h=n.sum64_hi,d=n.sum64_lo,f=n.sum64_4_hi,p=n.sum64_4_lo,g=n.sum64_5_hi,m=n.sum64_5_lo,y=i.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function w(){if(!(this instanceof w))return new w;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160)}function v(e,t,r,n,i){var s=e&r^~e&i;return s<0&&(s+=4294967296),s}function _(e,t,r,n,i,s){var o=t&n^~t&s;return o<0&&(o+=4294967296),o}function E(e,t,r,n,i){var s=e&r^e&i^r&i;return s<0&&(s+=4294967296),s}function x(e,t,r,n,i,s){var o=t&n^t&s^n&s;return o<0&&(o+=4294967296),o}function S(e,t){var r=o(e,t,28)^o(t,e,2)^o(t,e,7);return r<0&&(r+=4294967296),r}function A(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=4294967296),r}function I(e,t){var r=a(e,t,14)^a(e,t,18)^a(t,e,9);return r<0&&(r+=4294967296),r}function k(e,t){var r=o(e,t,1)^o(e,t,8)^c(e,t,7);return r<0&&(r+=4294967296),r}function T(e,t){var r=a(e,t,1)^a(e,t,8)^l(e,t,7);return r<0&&(r+=4294967296),r}function P(e,t){var r=a(e,t,19)^a(t,e,29)^l(e,t,6);return r<0&&(r+=4294967296),r}n.inherits(w,y),e.exports=w,w.blockSize=1024,w.outSize=512,w.hmacStrength=192,w.padLength=128,w.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=(m=r[n-4],y=r[n-3],b=void 0,(b=o(m,y,19)^o(y,m,29)^c(m,y,6))<0&&(b+=4294967296),b),s=P(r[n-4],r[n-3]),a=r[n-14],l=r[n-13],u=k(r[n-30],r[n-29]),h=T(r[n-30],r[n-29]),d=r[n-32],g=r[n-31];r[n]=f(i,s,a,l,u,h,d,g),r[n+1]=p(i,s,a,l,u,h,d,g)}var m,y,b},w.prototype._update=function(e,t){this._prepareBlock(e,t);var r,n,i,a=this.W,c=this.h[0],l=this.h[1],f=this.h[2],p=this.h[3],y=this.h[4],b=this.h[5],w=this.h[6],k=this.h[7],T=this.h[8],P=this.h[9],C=this.h[10],O=this.h[11],M=this.h[12],R=this.h[13],L=this.h[14],N=this.h[15];s(this.k.length===a.length);for(var B=0;B<a.length;B+=2){var D=L,U=N,z=(i=void 0,(i=o(r=T,n=P,14)^o(r,n,18)^o(n,r,9))<0&&(i+=4294967296),i),j=I(T,P),F=v(T,0,C,0,M),$=_(0,P,0,O,0,R),q=this.k[B],W=this.k[B+1],H=a[B],V=a[B+1],K=g(D,U,z,j,F,$,q,W,H,V),G=m(D,U,z,j,F,$,q,W,H,V);D=S(c,l),U=A(c,l),z=E(c,0,f,0,y),j=x(0,l,0,p,0,b);var Z=h(D,U,z,j),Y=d(D,U,z,j);L=M,N=R,M=C,R=O,C=T,O=P,T=h(w,k,K,G),P=d(k,k,K,G),w=y,k=b,y=f,b=p,f=c,p=l,c=h(K,G,Z,Y),l=d(K,G,Z,Y)}u(this.h,0,c,l),u(this.h,2,f,p),u(this.h,4,y,b),u(this.h,6,w,k),u(this.h,8,T,P),u(this.h,10,C,O),u(this.h,12,M,R),u(this.h,14,L,N)},w.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},6225:(e,t,r)=>{"use strict";var n=r(7426).rotr32;function i(e,t,r){return e&t^~e&r}function s(e,t,r){return e&t^e&r^t&r}function o(e,t,r){return e^t^r}t.ft_1=function(e,t,r,n){return 0===e?i(t,r,n):1===e||3===e?o(t,r,n):2===e?s(t,r,n):void 0},t.ch32=i,t.maj32=s,t.p32=o,t.s0_256=function(e){return n(e,2)^n(e,13)^n(e,22)},t.s1_256=function(e){return n(e,6)^n(e,11)^n(e,25)},t.g0_256=function(e){return n(e,7)^n(e,18)^e>>>3},t.g1_256=function(e){return n(e,17)^n(e,19)^e>>>10}},7426:(e,t,r)=>{"use strict";var n=r(3349),i=r(6698);function s(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function o(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function a(e){return 1===e.length?"0"+e:e}function c(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=i,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=63&o|128):s(e,i)?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++i)),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=63&o|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},t.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=a(e[r].toString(16));return t},t.htonl=o,t.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=o(i)),r+=c(i.toString(16))}return r},t.zero2=a,t.zero8=c,t.join32=function(e,t,r,i){var s=r-t;n(s%4==0);for(var o=new Array(s/4),a=0,c=t;a<o.length;a++,c+=4){var l;l="big"===i?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],o[a]=l>>>0}return o},t.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var s=e[n];"big"===t?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=255&s):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=255&s)}return r},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,r){return e+t+r>>>0},t.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},t.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},t.sum64=function(e,t,r,n){var i=e[t],s=n+e[t+1]>>>0,o=(s<n?1:0)+r+i;e[t]=o>>>0,e[t+1]=s},t.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},t.sum64_lo=function(e,t,r,n){return t+n>>>0},t.sum64_4_hi=function(e,t,r,n,i,s,o,a){var c=0,l=t;return c+=(l=l+n>>>0)<t?1:0,c+=(l=l+s>>>0)<s?1:0,e+r+i+o+(c+=(l=l+a>>>0)<a?1:0)>>>0},t.sum64_4_lo=function(e,t,r,n,i,s,o,a){return t+n+s+a>>>0},t.sum64_5_hi=function(e,t,r,n,i,s,o,a,c,l){var u=0,h=t;return u+=(h=h+n>>>0)<t?1:0,u+=(h=h+s>>>0)<s?1:0,u+=(h=h+a>>>0)<a?1:0,e+r+i+o+c+(u+=(h=h+l>>>0)<l?1:0)>>>0},t.sum64_5_lo=function(e,t,r,n,i,s,o,a,c,l){return t+n+s+a+l>>>0},t.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},t.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},t.shr64_hi=function(e,t,r){return e>>>r},t.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}},2723:(e,t,r)=>{"use strict";var n=r(7952),i=r(4367),s=r(3349);function o(e){if(!(this instanceof o))return new o(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=i.toArray(e.entropy,e.entropyEnc||"hex"),r=i.toArray(e.nonce,e.nonceEnc||"hex"),n=i.toArray(e.pers,e.persEnc||"hex");s(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}e.exports=o,o.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},o.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=i.toArray(e,t),r=i.toArray(r,n),s(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},o.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(r),this._reseed++,i.encode(o,t)}},251:(e,t)=>{t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,c=(1<<a)-1,l=c>>1,u=-7,h=r?i-1:0,d=r?-1:1,f=e[t+h];for(h+=d,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+e[t+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=256*o+e[t+h],h+=d,u-=8);if(0===s)s=1-l;else{if(s===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),s-=l}return(f?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,c,l=8*s-i-1,u=(1<<l)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(o++,c/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(t*c-1)*Math.pow(2,i),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;e[r+f]=255&o,f+=p,o/=256,l-=8);e[r+f-p]|=128*g}},6698:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},22:(e,t,r)=>{"use strict";const n=r(4253).v4,i=r(3289),s=function(e,t){if(!(this instanceof s))return new s(e,t);t||(t={}),this.options={reviver:void 0!==t.reviver?t.reviver:null,replacer:void 0!==t.replacer?t.replacer:null,generator:void 0!==t.generator?t.generator:function(){return n()},version:void 0!==t.version?t.version:2,notificationIdNull:"boolean"==typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};e.exports=s,s.prototype.request=function(e,t,r,n){const s=this;let o=null;const a=Array.isArray(e)&&"function"==typeof t;if(1===this.options.version&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");if(a||!a&&e&&"object"==typeof e&&"function"==typeof t)n=t,o=e;else{"function"==typeof r&&(n=r,r=void 0);const s="function"==typeof n;try{o=i(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(e){if(s)return n(e);throw e}if(!s)return o}let c;try{c=JSON.stringify(o,this.options.replacer)}catch(e){return n(e)}return this.callServer(c,(function(e,t){s._parseResponse(e,t,n)})),o},s.prototype._parseResponse=function(e,t,r){if(e)return void r(e);if(!t)return r();let n;try{n=JSON.parse(t,this.options.reviver)}catch(e){return r(e)}if(3===r.length){if(Array.isArray(n)){const e=function(e){return void 0!==e.error},t=function(t){return!e(t)};return r(null,n.filter(e),n.filter(t))}return r(null,n.error,n.result)}r(null,n)}},3289:(e,t,r)=>{"use strict";const n=r(4253).v4;e.exports=function(e,t,r,i){if("string"!=typeof e)throw new TypeError(e+" must be a string");const s="number"==typeof(i=i||{}).version?i.version:2;if(1!==s&&2!==s)throw new TypeError(s+" must be 1 or 2");const o={method:e};if(2===s&&(o.jsonrpc="2.0"),t){if("object"!=typeof t&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");o.params=t}if(void 0===r){const e="function"==typeof i.generator?i.generator:function(){return n()};o.id=e(o,i)}else 2===s&&null===r?i.notificationIdNull&&(o.id=null):o.id=r;return o}},4253:(e,t,r)=>{"use strict";var n;r.d(t,{v4:()=>u});var i=new Uint8Array(16);function s(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var a=[],c=0;c<256;++c)a.push((c+256).toString(16).substr(1));const l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&o.test(e)}(r))throw TypeError("Stringified UUID is invalid");return r},u=function(e,t,r){var n=(e=e||{}).random||(e.rng||s)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return l(n)}},1176:(e,t,r)=>{var n;!function(){"use strict";var i="input is invalid type",s="object"==typeof window,o=s?window:{};o.JS_SHA3_NO_WINDOW&&(s=!1);var a=!s&&"object"==typeof self;!o.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?o=r.g:a&&(o=self);var c=!o.JS_SHA3_NO_COMMON_JS&&e.exports,l=r.amdO,u=!o.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,h="0123456789abcdef".split(""),d=[4,1024,262144,67108864],f=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],g=[224,256,384,512],m=[128,256],y=["hex","buffer","arrayBuffer","array","digest"],b={128:168,256:136};!o.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!u||!o.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var w=function(e,t,r){return function(n){return new L(e,t,e).update(n)[r]()}},v=function(e,t,r){return function(n,i){return new L(e,t,i).update(n)[r]()}},_=function(e,t,r){return function(t,n,i,s){return I["cshake"+e].update(t,n,i,s)[r]()}},E=function(e,t,r){return function(t,n,i,s){return I["kmac"+e].update(t,n,i,s)[r]()}},x=function(e,t,r,n){for(var i=0;i<y.length;++i){var s=y[i];e[s]=t(r,n,s)}return e},S=function(e,t){var r=w(e,t,"hex");return r.create=function(){return new L(e,t,e)},r.update=function(e){return r.create().update(e)},x(r,w,e,t)},A=[{name:"keccak",padding:[1,256,65536,16777216],bits:g,createMethod:S},{name:"sha3",padding:[6,1536,393216,100663296],bits:g,createMethod:S},{name:"shake",padding:[31,7936,2031616,520093696],bits:m,createMethod:function(e,t){var r=v(e,t,"hex");return r.create=function(r){return new L(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},x(r,v,e,t)}},{name:"cshake",padding:d,bits:m,createMethod:function(e,t){var r=b[e],n=_(e,0,"hex");return n.create=function(n,i,s){return i||s?new L(e,t,n).bytepad([i,s],r):I["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},x(n,_,e,t)}},{name:"kmac",padding:d,bits:m,createMethod:function(e,t){var r=b[e],n=E(e,0,"hex");return n.create=function(n,i,s){return new N(e,t,i).bytepad(["KMAC",s],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},x(n,E,e,t)}}],I={},k=[],T=0;T<A.length;++T)for(var P=A[T],C=P.bits,O=0;O<C.length;++O){var M=P.name+"_"+C[O];if(k.push(M),I[M]=P.createMethod(C[O],P.padding),"sha3"!==P.name){var R=P.name+C[O];k.push(R),I[R]=I[M]}}function L(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function N(e,t,r){L.call(this,e,t,r)}L.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(i);if(null===e)throw new Error(i);if(u&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||u&&ArrayBuffer.isView(e)))throw new Error(i);t=!0}for(var n,s,o=this.blocks,a=this.byteCount,c=e.length,l=this.blockCount,h=0,d=this.s;h<c;){if(this.reset)for(this.reset=!1,o[0]=this.block,n=1;n<l+1;++n)o[n]=0;if(t)for(n=this.start;h<c&&n<a;++h)o[n>>2]|=e[h]<<f[3&n++];else for(n=this.start;h<c&&n<a;++h)(s=e.charCodeAt(h))<128?o[n>>2]|=s<<f[3&n++]:s<2048?(o[n>>2]|=(192|s>>6)<<f[3&n++],o[n>>2]|=(128|63&s)<<f[3&n++]):s<55296||s>=57344?(o[n>>2]|=(224|s>>12)<<f[3&n++],o[n>>2]|=(128|s>>6&63)<<f[3&n++],o[n>>2]|=(128|63&s)<<f[3&n++]):(s=65536+((1023&s)<<10|1023&e.charCodeAt(++h)),o[n>>2]|=(240|s>>18)<<f[3&n++],o[n>>2]|=(128|s>>12&63)<<f[3&n++],o[n>>2]|=(128|s>>6&63)<<f[3&n++],o[n>>2]|=(128|63&s)<<f[3&n++]);if(this.lastByteIndex=n,n>=a){for(this.start=n-a,this.block=o[l],n=0;n<l;++n)d[n]^=o[n];B(d),this.reset=!0}else this.start=n}return this},L.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},L.prototype.encodeString=function(e){var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(i);if(null===e)throw new Error(i);if(u&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||u&&ArrayBuffer.isView(e)))throw new Error(i);t=!0}var n=0,s=e.length;if(t)n=s;else for(var o=0;o<e.length;++o){var a=e.charCodeAt(o);a<128?n+=1:a<2048?n+=2:a<55296||a>=57344?n+=3:(a=65536+((1023&a)<<10|1023&e.charCodeAt(++o)),n+=4)}return n+=this.encode(8*n),this.update(e),n},L.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,s=[];return s.length=i,this.update(s),this},L.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];B(n)}},L.prototype.toString=L.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,o=0,a="";o<n;){for(s=0;s<t&&o<n;++s,++o)e=r[s],a+=h[e>>4&15]+h[15&e]+h[e>>12&15]+h[e>>8&15]+h[e>>20&15]+h[e>>16&15]+h[e>>28&15]+h[e>>24&15];o%t==0&&(B(r),s=0)}return i&&(e=r[s],a+=h[e>>4&15]+h[15&e],i>1&&(a+=h[e>>12&15]+h[e>>8&15]),i>2&&(a+=h[e>>20&15]+h[e>>16&15])),a},L.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,o=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);o<n;){for(s=0;s<t&&o<n;++s,++o)c[o]=r[s];o%t==0&&B(r)}return i&&(c[s]=r[s],e=e.slice(0,a)),e},L.prototype.buffer=L.prototype.arrayBuffer,L.prototype.digest=L.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,s=this.extraBytes,o=0,a=0,c=[];a<i;){for(o=0;o<r&&a<i;++o,++a)e=a<<2,t=n[o],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&B(n)}return s&&(e=a<<2,t=n[o],c[e]=255&t,s>1&&(c[e+1]=t>>8&255),s>2&&(c[e+2]=t>>16&255)),c},N.prototype=new L,N.prototype.finalize=function(){return this.encode(this.outputBits,!0),L.prototype.finalize.call(this)};var B=function(e){var t,r,n,i,s,o,a,c,l,u,h,d,f,g,m,y,b,w,v,_,E,x,S,A,I,k,T,P,C,O,M,R,L,N,B,D,U,z,j,F,$,q,W,H,V,K,G,Z,Y,J,X,Q,ee,te,re,ne,ie,se,oe,ae,ce,le,ue;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],s=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],l=e[5]^e[15]^e[25]^e[35]^e[45],u=e[6]^e[16]^e[26]^e[36]^e[46],h=e[7]^e[17]^e[27]^e[37]^e[47],t=(d=e[8]^e[18]^e[28]^e[38]^e[48])^(o<<1|a>>>31),r=(f=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|o>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|l>>>31),r=s^(l<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=o^(u<<1|h>>>31),r=a^(h<<1|u>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(d<<1|f>>>31),r=l^(f<<1|d>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=u^(i<<1|s>>>31),r=h^(s<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,g=e[0],m=e[1],K=e[11]<<4|e[10]>>>28,G=e[10]<<4|e[11]>>>28,P=e[20]<<3|e[21]>>>29,C=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,q=e[40]<<18|e[41]>>>14,W=e[41]<<18|e[40]>>>14,N=e[2]<<1|e[3]>>>31,B=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,b=e[12]<<12|e[13]>>>20,Z=e[22]<<10|e[23]>>>22,Y=e[23]<<10|e[22]>>>22,O=e[33]<<13|e[32]>>>19,M=e[32]<<13|e[33]>>>19,le=e[42]<<2|e[43]>>>30,ue=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,D=e[14]<<6|e[15]>>>26,U=e[15]<<6|e[14]>>>26,w=e[25]<<11|e[24]>>>21,v=e[24]<<11|e[25]>>>21,J=e[34]<<15|e[35]>>>17,X=e[35]<<15|e[34]>>>17,R=e[45]<<29|e[44]>>>3,L=e[44]<<29|e[45]>>>3,A=e[6]<<28|e[7]>>>4,I=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,z=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,_=e[36]<<21|e[37]>>>11,E=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,H=e[8]<<27|e[9]>>>5,V=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,se=e[29]<<7|e[28]>>>25,oe=e[28]<<7|e[29]>>>25,F=e[38]<<8|e[39]>>>24,$=e[39]<<8|e[38]>>>24,x=e[48]<<14|e[49]>>>18,S=e[49]<<14|e[48]>>>18,e[0]=g^~y&w,e[1]=m^~b&v,e[10]=A^~k&P,e[11]=I^~T&C,e[20]=N^~D&z,e[21]=B^~U&j,e[30]=H^~K&Z,e[31]=V^~G&Y,e[40]=te^~ne&se,e[41]=re^~ie&oe,e[2]=y^~w&_,e[3]=b^~v&E,e[12]=k^~P&O,e[13]=T^~C&M,e[22]=D^~z&F,e[23]=U^~j&$,e[32]=K^~Z&J,e[33]=G^~Y&X,e[42]=ne^~se&ae,e[43]=ie^~oe&ce,e[4]=w^~_&x,e[5]=v^~E&S,e[14]=P^~O&R,e[15]=C^~M&L,e[24]=z^~F&q,e[25]=j^~$&W,e[34]=Z^~J&Q,e[35]=Y^~X&ee,e[44]=se^~ae&le,e[45]=oe^~ce&ue,e[6]=_^~x&g,e[7]=E^~S&m,e[16]=O^~R&A,e[17]=M^~L&I,e[26]=F^~q&N,e[27]=$^~W&B,e[36]=J^~Q&H,e[37]=X^~ee&V,e[46]=ae^~le&te,e[47]=ce^~ue&re,e[8]=x^~g&y,e[9]=S^~m&b,e[18]=R^~A&k,e[19]=L^~I&T,e[28]=q^~N&D,e[29]=W^~B&U,e[38]=Q^~H&K,e[39]=ee^~V&G,e[48]=le^~te&ne,e[49]=ue^~re&ie,e[0]^=p[n],e[1]^=p[n+1]};if(c)e.exports=I;else{for(T=0;T<k.length;++T)o[k[T]]=I[k[T]];l&&(void 0===(n=function(){return I}.call(t,r,t,e))||(e.exports=n))}}()},8142:(e,t,r)=>{e=r.nmd(e);var n="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",c="[object Date]",l="[object Error]",u="[object Function]",h="[object Map]",d="[object Number]",f="[object Object]",p="[object Promise]",g="[object RegExp]",m="[object Set]",y="[object String]",b="[object WeakMap]",w="[object ArrayBuffer]",v="[object DataView]",_=/^\[object .+?Constructor\]$/,E=/^(?:0|[1-9]\d*)$/,x={};x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x[s]=x[o]=x[w]=x[a]=x[v]=x[c]=x[l]=x[u]=x[h]=x[d]=x[f]=x[g]=x[m]=x[y]=x[b]=!1;var S="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,A="object"==typeof self&&self&&self.Object===Object&&self,I=S||A||Function("return this")(),k=t&&!t.nodeType&&t,T=k&&e&&!e.nodeType&&e,P=T&&T.exports===k,C=P&&S.process,O=function(){try{return C&&C.binding&&C.binding("util")}catch(e){}}(),M=O&&O.isTypedArray;function R(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function L(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function N(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var B,D,U,z=Array.prototype,j=Function.prototype,F=Object.prototype,$=I["__core-js_shared__"],q=j.toString,W=F.hasOwnProperty,H=(B=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",V=F.toString,K=RegExp("^"+q.call(W).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=P?I.Buffer:void 0,Z=I.Symbol,Y=I.Uint8Array,J=F.propertyIsEnumerable,X=z.splice,Q=Z?Z.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=G?G.isBuffer:void 0,re=(D=Object.keys,U=Object,function(e){return D(U(e))}),ne=Te(I,"DataView"),ie=Te(I,"Map"),se=Te(I,"Promise"),oe=Te(I,"Set"),ae=Te(I,"WeakMap"),ce=Te(Object,"create"),le=Me(ne),ue=Me(ie),he=Me(se),de=Me(oe),fe=Me(ae),pe=Z?Z.prototype:void 0,ge=pe?pe.valueOf:void 0;function me(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ye(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function be(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function we(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new be;++t<r;)this.add(e[t])}function ve(e){var t=this.__data__=new ye(e);this.size=t.size}function _e(e,t){for(var r=e.length;r--;)if(Re(e[r][0],t))return r;return-1}function Ee(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Q&&Q in Object(e)?function(e){var t=W.call(e,Q),r=e[Q];try{e[Q]=void 0;var n=!0}catch(e){}var i=V.call(e);return n&&(t?e[Q]=r:delete e[Q]),i}(e):function(e){return V.call(e)}(e)}function xe(e){return je(e)&&Ee(e)==s}function Se(e,t,r,n,i){return e===t||(null==e||null==t||!je(e)&&!je(t)?e!=e&&t!=t:function(e,t,r,n,i,u){var p=Ne(e),b=Ne(t),_=p?o:Ce(e),E=b?o:Ce(t),x=(_=_==s?f:_)==f,S=(E=E==s?f:E)==f,A=_==E;if(A&&Be(e)){if(!Be(t))return!1;p=!0,x=!1}if(A&&!x)return u||(u=new ve),p||Fe(e)?Ae(e,t,r,n,i,u):function(e,t,r,n,i,s,o){switch(r){case v:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!s(new Y(e),new Y(t)));case a:case c:case d:return Re(+e,+t);case l:return e.name==t.name&&e.message==t.message;case g:case y:return e==t+"";case h:var u=L;case m:var f=1&n;if(u||(u=N),e.size!=t.size&&!f)return!1;var p=o.get(e);if(p)return p==t;n|=2,o.set(e,t);var b=Ae(u(e),u(t),n,i,s,o);return o.delete(e),b;case"[object Symbol]":if(ge)return ge.call(e)==ge.call(t)}return!1}(e,t,_,r,n,i,u);if(!(1&r)){var I=x&&W.call(e,"__wrapped__"),k=S&&W.call(t,"__wrapped__");if(I||k){var T=I?e.value():e,P=k?t.value():t;return u||(u=new ve),i(T,P,r,n,u)}}return!!A&&(u||(u=new ve),function(e,t,r,n,i,s){var o=1&r,a=Ie(e),c=a.length;if(c!=Ie(t).length&&!o)return!1;for(var l=c;l--;){var u=a[l];if(!(o?u in t:W.call(t,u)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var d=!0;s.set(e,t),s.set(t,e);for(var f=o;++l<c;){var p=e[u=a[l]],g=t[u];if(n)var m=o?n(g,p,u,t,e,s):n(p,g,u,e,t,s);if(!(void 0===m?p===g||i(p,g,r,n,s):m)){d=!1;break}f||(f="constructor"==u)}if(d&&!f){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(d=!1)}return s.delete(e),s.delete(t),d}(e,t,r,n,i,u))}(e,t,r,n,Se,i))}function Ae(e,t,r,n,i,s){var o=1&r,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var l=s.get(e);if(l&&s.get(t))return l==t;var u=-1,h=!0,d=2&r?new we:void 0;for(s.set(e,t),s.set(t,e);++u<a;){var f=e[u],p=t[u];if(n)var g=o?n(p,f,u,t,e,s):n(f,p,u,e,t,s);if(void 0!==g){if(g)continue;h=!1;break}if(d){if(!R(t,(function(e,t){if(o=t,!d.has(o)&&(f===e||i(f,e,r,n,s)))return d.push(t);var o}))){h=!1;break}}else if(f!==p&&!i(f,p,r,n,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function Ie(e){return function(e,t,r){var n=t(e);return Ne(e)?n:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(n,r(e))}(e,$e,Pe)}function ke(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function Te(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!ze(e)||function(e){return!!H&&H in e}(e))&&(De(e)?K:_).test(Me(e))}(r)?r:void 0}me.prototype.clear=function(){this.__data__=ce?ce(null):{},this.size=0},me.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},me.prototype.get=function(e){var t=this.__data__;if(ce){var r=t[e];return r===n?void 0:r}return W.call(t,e)?t[e]:void 0},me.prototype.has=function(e){var t=this.__data__;return ce?void 0!==t[e]:W.call(t,e)},me.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ce&&void 0===t?n:t,this},ye.prototype.clear=function(){this.__data__=[],this.size=0},ye.prototype.delete=function(e){var t=this.__data__,r=_e(t,e);return!(r<0||(r==t.length-1?t.pop():X.call(t,r,1),--this.size,0))},ye.prototype.get=function(e){var t=this.__data__,r=_e(t,e);return r<0?void 0:t[r][1]},ye.prototype.has=function(e){return _e(this.__data__,e)>-1},ye.prototype.set=function(e,t){var r=this.__data__,n=_e(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},be.prototype.clear=function(){this.size=0,this.__data__={hash:new me,map:new(ie||ye),string:new me}},be.prototype.delete=function(e){var t=ke(this,e).delete(e);return this.size-=t?1:0,t},be.prototype.get=function(e){return ke(this,e).get(e)},be.prototype.has=function(e){return ke(this,e).has(e)},be.prototype.set=function(e,t){var r=ke(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},we.prototype.add=we.prototype.push=function(e){return this.__data__.set(e,n),this},we.prototype.has=function(e){return this.__data__.has(e)},ve.prototype.clear=function(){this.__data__=new ye,this.size=0},ve.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ve.prototype.get=function(e){return this.__data__.get(e)},ve.prototype.has=function(e){return this.__data__.has(e)},ve.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ye){var n=r.__data__;if(!ie||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new be(n)}return r.set(e,t),this.size=r.size,this};var Pe=ee?function(e){return null==e?[]:(e=Object(e),function(t){for(var r=-1,n=null==t?0:t.length,i=0,s=[];++r<n;){var o=t[r];a=o,J.call(e,a)&&(s[i++]=o)}var a;return s}(ee(e)))}:function(){return[]},Ce=Ee;function Oe(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||E.test(e))&&e>-1&&e%1==0&&e<t}function Me(e){if(null!=e){try{return q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Re(e,t){return e===t||e!=e&&t!=t}(ne&&Ce(new ne(new ArrayBuffer(1)))!=v||ie&&Ce(new ie)!=h||se&&Ce(se.resolve())!=p||oe&&Ce(new oe)!=m||ae&&Ce(new ae)!=b)&&(Ce=function(e){var t=Ee(e),r=t==f?e.constructor:void 0,n=r?Me(r):"";if(n)switch(n){case le:return v;case ue:return h;case he:return p;case de:return m;case fe:return b}return t});var Le=xe(function(){return arguments}())?xe:function(e){return je(e)&&W.call(e,"callee")&&!J.call(e,"callee")},Ne=Array.isArray,Be=te||function(){return!1};function De(e){if(!ze(e))return!1;var t=Ee(e);return t==u||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ue(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function ze(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function je(e){return null!=e&&"object"==typeof e}var Fe=M?function(e){return function(t){return e(t)}}(M):function(e){return je(e)&&Ue(e.length)&&!!x[Ee(e)]};function $e(e){return null!=(t=e)&&Ue(t.length)&&!De(t)?function(e,t){var r=Ne(e),n=!r&&Le(e),i=!r&&!n&&Be(e),s=!r&&!n&&!i&&Fe(e),o=r||n||i||s,a=o?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=a.length;for(var l in e)!t&&!W.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Oe(l,c))||a.push(l);return a}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||F))return re(e);var t,r,n=[];for(var i in Object(e))W.call(e,i)&&"constructor"!=i&&n.push(i);return n}(e);var t}e.exports=function(e,t){return Se(e,t)}},2543:function(e,t,r){var n;e=r.nmd(e),function(){var i,s="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",c=32,l=128,u=1/0,h=9007199254740991,d=NaN,f=4294967295,p=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",c],["partialRight",64],["rearg",256]],g="[object Arguments]",m="[object Array]",y="[object Boolean]",b="[object Date]",w="[object Error]",v="[object Function]",_="[object GeneratorFunction]",E="[object Map]",x="[object Number]",S="[object Object]",A="[object Promise]",I="[object RegExp]",k="[object Set]",T="[object String]",P="[object Symbol]",C="[object WeakMap]",O="[object ArrayBuffer]",M="[object DataView]",R="[object Float32Array]",L="[object Float64Array]",N="[object Int8Array]",B="[object Int16Array]",D="[object Int32Array]",U="[object Uint8Array]",z="[object Uint8ClampedArray]",j="[object Uint16Array]",F="[object Uint32Array]",$=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,V=/[&<>"']/g,K=RegExp(H.source),G=RegExp(V.source),Z=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,re=RegExp(te.source),ne=/^\s+/,ie=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oe=/\{\n\/\* \[wrapped with (.+)\] \*/,ae=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,le=/[()=,{}\[\]\/\s]/,ue=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,pe=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,ve=/['\n\r\u2028\u2029\\]/g,_e="\\ud800-\\udfff",Ee="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xe="\\u2700-\\u27bf",Se="a-z\\xdf-\\xf6\\xf8-\\xff",Ae="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",ke="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Te="["+_e+"]",Pe="["+ke+"]",Ce="["+Ee+"]",Oe="\\d+",Me="["+xe+"]",Re="["+Se+"]",Le="[^"+_e+ke+Oe+xe+Se+Ae+"]",Ne="\\ud83c[\\udffb-\\udfff]",Be="[^"+_e+"]",De="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",ze="["+Ae+"]",je="\\u200d",Fe="(?:"+Re+"|"+Le+")",$e="(?:"+ze+"|"+Le+")",qe="(?:['](?:d|ll|m|re|s|t|ve))?",We="(?:['](?:D|LL|M|RE|S|T|VE))?",He="(?:"+Ce+"|"+Ne+")?",Ve="["+Ie+"]?",Ke=Ve+He+"(?:"+je+"(?:"+[Be,De,Ue].join("|")+")"+Ve+He+")*",Ge="(?:"+[Me,De,Ue].join("|")+")"+Ke,Ze="(?:"+[Be+Ce+"?",Ce,De,Ue,Te].join("|")+")",Ye=RegExp("[']","g"),Je=RegExp(Ce,"g"),Xe=RegExp(Ne+"(?="+Ne+")|"+Ze+Ke,"g"),Qe=RegExp([ze+"?"+Re+"+"+qe+"(?="+[Pe,ze,"$"].join("|")+")",$e+"+"+We+"(?="+[Pe,ze+Fe,"$"].join("|")+")",ze+"?"+Fe+"+"+qe,ze+"+"+We,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Oe,Ge].join("|"),"g"),et=RegExp("["+je+_e+Ee+Ie+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nt=-1,it={};it[R]=it[L]=it[N]=it[B]=it[D]=it[U]=it[z]=it[j]=it[F]=!0,it[g]=it[m]=it[O]=it[y]=it[M]=it[b]=it[w]=it[v]=it[E]=it[x]=it[S]=it[I]=it[k]=it[T]=it[C]=!1;var st={};st[g]=st[m]=st[O]=st[M]=st[y]=st[b]=st[R]=st[L]=st[N]=st[B]=st[D]=st[E]=st[x]=st[S]=st[I]=st[k]=st[T]=st[P]=st[U]=st[z]=st[j]=st[F]=!0,st[w]=st[v]=st[C]=!1;var ot={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,ct=parseInt,lt="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,ut="object"==typeof self&&self&&self.Object===Object&&self,ht=lt||ut||Function("return this")(),dt=t&&!t.nodeType&&t,ft=dt&&e&&!e.nodeType&&e,pt=ft&&ft.exports===dt,gt=pt&&lt.process,mt=function(){try{return ft&&ft.require&&ft.require("util").types||gt&&gt.binding&&gt.binding("util")}catch(e){}}(),yt=mt&&mt.isArrayBuffer,bt=mt&&mt.isDate,wt=mt&&mt.isMap,vt=mt&&mt.isRegExp,_t=mt&&mt.isSet,Et=mt&&mt.isTypedArray;function xt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function St(e,t,r,n){for(var i=-1,s=null==e?0:e.length;++i<s;){var o=e[i];t(n,o,r(o),e)}return n}function At(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function It(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function kt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Tt(e,t){for(var r=-1,n=null==e?0:e.length,i=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[i++]=o)}return s}function Pt(e,t){return!(null==e||!e.length)&&zt(e,t,0)>-1}function Ct(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function Ot(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Mt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Rt(e,t,r,n){var i=-1,s=null==e?0:e.length;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r}function Lt(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function Nt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Bt=qt("length");function Dt(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function Ut(e,t,r,n){for(var i=e.length,s=r+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function zt(e,t,r){return t==t?function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):Ut(e,Ft,r)}function jt(e,t,r,n){for(var i=r-1,s=e.length;++i<s;)if(n(e[i],t))return i;return-1}function Ft(e){return e!=e}function $t(e,t){var r=null==e?0:e.length;return r?Vt(e,t)/r:d}function qt(e){return function(t){return null==t?i:t[e]}}function Wt(e){return function(t){return null==e?i:e[t]}}function Ht(e,t,r,n,i){return i(e,(function(e,i,s){r=n?(n=!1,e):t(r,e,i,s)})),r}function Vt(e,t){for(var r,n=-1,s=e.length;++n<s;){var o=t(e[n]);o!==i&&(r=r===i?o:r+o)}return r}function Kt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Gt(e){return e?e.slice(0,hr(e)+1).replace(ne,""):e}function Zt(e){return function(t){return e(t)}}function Yt(e,t){return Ot(t,(function(t){return e[t]}))}function Jt(e,t){return e.has(t)}function Xt(e,t){for(var r=-1,n=e.length;++r<n&&zt(t,e[r],0)>-1;);return r}function Qt(e,t){for(var r=e.length;r--&&zt(t,e[r],0)>-1;);return r}var er=Wt({:"A",:"A",:"A",:"A",:"A",:"A", :"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G", :"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S", :"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),tr=Wt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rr(e){return"\\"+ot[e]}function nr(e){return et.test(e)}function ir(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function sr(e,t){return function(r){return e(t(r))}}function or(e,t){for(var r=-1,n=e.length,i=0,s=[];++r<n;){var o=e[r];o!==t&&o!==a||(e[r]=a,s[i++]=r)}return s}function ar(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function cr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function lr(e){return nr(e)?function(e){for(var t=Xe.lastIndex=0;Xe.test(e);)++t;return t}(e):Bt(e)}function ur(e){return nr(e)?function(e){return e.match(Xe)||[]}(e):function(e){return e.split("")}(e)}function hr(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var dr=Wt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),fr=function e(t){var r,n=(t=null==t?ht:fr.defaults(ht.Object(),t,fr.pick(ht,rt))).Array,ie=t.Date,_e=t.Error,Ee=t.Function,xe=t.Math,Se=t.Object,Ae=t.RegExp,Ie=t.String,ke=t.TypeError,Te=n.prototype,Pe=Ee.prototype,Ce=Se.prototype,Oe=t["__core-js_shared__"],Me=Pe.toString,Re=Ce.hasOwnProperty,Le=0,Ne=(r=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Be=Ce.toString,De=Me.call(Se),Ue=ht._,ze=Ae("^"+Me.call(Re).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=pt?t.Buffer:i,Fe=t.Symbol,$e=t.Uint8Array,qe=je?je.allocUnsafe:i,We=sr(Se.getPrototypeOf,Se),He=Se.create,Ve=Ce.propertyIsEnumerable,Ke=Te.splice,Ge=Fe?Fe.isConcatSpreadable:i,Ze=Fe?Fe.iterator:i,Xe=Fe?Fe.toStringTag:i,et=function(){try{var e=cs(Se,"defineProperty");return e({},"",{}),e}catch(e){}}(),ot=t.clearTimeout!==ht.clearTimeout&&t.clearTimeout,lt=ie&&ie.now!==ht.Date.now&&ie.now,ut=t.setTimeout!==ht.setTimeout&&t.setTimeout,dt=xe.ceil,ft=xe.floor,gt=Se.getOwnPropertySymbols,mt=je?je.isBuffer:i,Bt=t.isFinite,Wt=Te.join,pr=sr(Se.keys,Se),gr=xe.max,mr=xe.min,yr=ie.now,br=t.parseInt,wr=xe.random,vr=Te.reverse,_r=cs(t,"DataView"),Er=cs(t,"Map"),xr=cs(t,"Promise"),Sr=cs(t,"Set"),Ar=cs(t,"WeakMap"),Ir=cs(Se,"create"),kr=Ar&&new Ar,Tr={},Pr=Bs(_r),Cr=Bs(Er),Or=Bs(xr),Mr=Bs(Sr),Rr=Bs(Ar),Lr=Fe?Fe.prototype:i,Nr=Lr?Lr.valueOf:i,Br=Lr?Lr.toString:i;function Dr(e){if(ea(e)&&!qo(e)&&!(e instanceof Fr)){if(e instanceof jr)return e;if(Re.call(e,"__wrapped__"))return Ds(e)}return new jr(e)}var Ur=function(){function e(){}return function(t){if(!Qo(t))return{};if(He)return He(t);e.prototype=t;var r=new e;return e.prototype=i,r}}();function zr(){}function jr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Fr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function $r(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function qr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Wr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Hr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Wr;++t<r;)this.add(e[t])}function Vr(e){var t=this.__data__=new qr(e);this.size=t.size}function Kr(e,t){var r=qo(e),n=!r&&$o(e),i=!r&&!n&&Ko(e),s=!r&&!n&&!i&&ca(e),o=r||n||i||s,a=o?Kt(e.length,Ie):[],c=a.length;for(var l in e)!t&&!Re.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||gs(l,c))||a.push(l);return a}function Gr(e){var t=e.length;return t?e[Hn(0,t-1)]:i}function Zr(e,t){return Os(Ii(e),sn(t,0,e.length))}function Yr(e){return Os(Ii(e))}function Jr(e,t,r){(r!==i&&!zo(e[t],r)||r===i&&!(t in e))&&rn(e,t,r)}function Xr(e,t,r){var n=e[t];Re.call(e,t)&&zo(n,r)&&(r!==i||t in e)||rn(e,t,r)}function Qr(e,t){for(var r=e.length;r--;)if(zo(e[r][0],t))return r;return-1}function en(e,t,r,n){return un(e,(function(e,i,s){t(n,e,r(e),s)})),n}function tn(e,t){return e&&ki(t,Ca(t),e)}function rn(e,t,r){"__proto__"==t&&et?et(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function nn(e,t){for(var r=-1,s=t.length,o=n(s),a=null==e;++r<s;)o[r]=a?i:Aa(e,t[r]);return o}function sn(e,t,r){return e==e&&(r!==i&&(e=e<=r?e:r),t!==i&&(e=e>=t?e:t)),e}function on(e,t,r,n,s,o){var a,c=1&t,l=2&t,u=4&t;if(r&&(a=s?r(e,n,s,o):r(e)),a!==i)return a;if(!Qo(e))return e;var h=qo(e);if(h){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Re.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!c)return Ii(e,a)}else{var d=hs(e),f=d==v||d==_;if(Ko(e))return vi(e,c);if(d==S||d==g||f&&!s){if(a=l||f?{}:fs(e),!c)return l?function(e,t){return ki(e,us(e),t)}(e,function(e,t){return e&&ki(t,Oa(t),e)}(a,e)):function(e,t){return ki(e,ls(e),t)}(e,tn(a,e))}else{if(!st[d])return s?e:{};a=function(e,t,r){var n,i=e.constructor;switch(t){case O:return _i(e);case y:case b:return new i(+e);case M:return function(e,t){var r=t?_i(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case R:case L:case N:case B:case D:case U:case z:case j:case F:return Ei(e,r);case E:return new i;case x:case T:return new i(e);case I:return function(e){var t=new e.constructor(e.source,de.exec(e));return t.lastIndex=e.lastIndex,t}(e);case k:return new i;case P:return n=e,Nr?Se(Nr.call(n)):{}}}(e,d,c)}}o||(o=new Vr);var p=o.get(e);if(p)return p;o.set(e,a),sa(e)?e.forEach((function(n){a.add(on(n,t,r,n,e,o))})):ta(e)&&e.forEach((function(n,i){a.set(i,on(n,t,r,i,e,o))}));var m=h?i:(u?l?ts:es:l?Oa:Ca)(e);return At(m||e,(function(n,i){m&&(n=e[i=n]),Xr(a,i,on(n,t,r,i,e,o))})),a}function an(e,t,r){var n=r.length;if(null==e)return!n;for(e=Se(e);n--;){var s=r[n],o=t[s],a=e[s];if(a===i&&!(s in e)||!o(a))return!1}return!0}function cn(e,t,r){if("function"!=typeof e)throw new ke(s);return ks((function(){e.apply(i,r)}),t)}function ln(e,t,r,n){var i=-1,s=Pt,o=!0,a=e.length,c=[],l=t.length;if(!a)return c;r&&(t=Ot(t,Zt(r))),n?(s=Ct,o=!1):t.length>=200&&(s=Jt,o=!1,t=new Hr(t));e:for(;++i<a;){var u=e[i],h=null==r?u:r(u);if(u=n||0!==u?u:0,o&&h==h){for(var d=l;d--;)if(t[d]===h)continue e;c.push(u)}else s(t,h,n)||c.push(u)}return c}Dr.templateSettings={escape:Z,evaluate:Y,interpolate:J,variable:"",imports:{_:Dr}},Dr.prototype=zr.prototype,Dr.prototype.constructor=Dr,jr.prototype=Ur(zr.prototype),jr.prototype.constructor=jr,Fr.prototype=Ur(zr.prototype),Fr.prototype.constructor=Fr,$r.prototype.clear=function(){this.__data__=Ir?Ir(null):{},this.size=0},$r.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$r.prototype.get=function(e){var t=this.__data__;if(Ir){var r=t[e];return r===o?i:r}return Re.call(t,e)?t[e]:i},$r.prototype.has=function(e){var t=this.__data__;return Ir?t[e]!==i:Re.call(t,e)},$r.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ir&&t===i?o:t,this},qr.prototype.clear=function(){this.__data__=[],this.size=0},qr.prototype.delete=function(e){var t=this.__data__,r=Qr(t,e);return!(r<0||(r==t.length-1?t.pop():Ke.call(t,r,1),--this.size,0))},qr.prototype.get=function(e){var t=this.__data__,r=Qr(t,e);return r<0?i:t[r][1]},qr.prototype.has=function(e){return Qr(this.__data__,e)>-1},qr.prototype.set=function(e,t){var r=this.__data__,n=Qr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Wr.prototype.clear=function(){this.size=0,this.__data__={hash:new $r,map:new(Er||qr),string:new $r}},Wr.prototype.delete=function(e){var t=os(this,e).delete(e);return this.size-=t?1:0,t},Wr.prototype.get=function(e){return os(this,e).get(e)},Wr.prototype.has=function(e){return os(this,e).has(e)},Wr.prototype.set=function(e,t){var r=os(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Hr.prototype.add=Hr.prototype.push=function(e){return this.__data__.set(e,o),this},Hr.prototype.has=function(e){return this.__data__.has(e)},Vr.prototype.clear=function(){this.__data__=new qr,this.size=0},Vr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Vr.prototype.get=function(e){return this.__data__.get(e)},Vr.prototype.has=function(e){return this.__data__.has(e)},Vr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof qr){var n=r.__data__;if(!Er||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Wr(n)}return r.set(e,t),this.size=r.size,this};var un=Ci(bn),hn=Ci(wn,!0);function dn(e,t){var r=!0;return un(e,(function(e,n,i){return r=!!t(e,n,i)})),r}function fn(e,t,r){for(var n=-1,s=e.length;++n<s;){var o=e[n],a=t(o);if(null!=a&&(c===i?a==a&&!aa(a):r(a,c)))var c=a,l=o}return l}function pn(e,t){var r=[];return un(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function gn(e,t,r,n,i){var s=-1,o=e.length;for(r||(r=ps),i||(i=[]);++s<o;){var a=e[s];t>0&&r(a)?t>1?gn(a,t-1,r,n,i):Mt(i,a):n||(i[i.length]=a)}return i}var mn=Oi(),yn=Oi(!0);function bn(e,t){return e&&mn(e,t,Ca)}function wn(e,t){return e&&yn(e,t,Ca)}function vn(e,t){return Tt(t,(function(t){return Yo(e[t])}))}function _n(e,t){for(var r=0,n=(t=mi(t,e)).length;null!=e&&r<n;)e=e[Ns(t[r++])];return r&&r==n?e:i}function En(e,t,r){var n=t(e);return qo(e)?n:Mt(n,r(e))}function xn(e){return null==e?e===i?"[object Undefined]":"[object Null]":Xe&&Xe in Se(e)?function(e){var t=Re.call(e,Xe),r=e[Xe];try{e[Xe]=i;var n=!0}catch(e){}var s=Be.call(e);return n&&(t?e[Xe]=r:delete e[Xe]),s}(e):function(e){return Be.call(e)}(e)}function Sn(e,t){return e>t}function An(e,t){return null!=e&&Re.call(e,t)}function In(e,t){return null!=e&&t in Se(e)}function kn(e,t,r){for(var s=r?Ct:Pt,o=e[0].length,a=e.length,c=a,l=n(a),u=1/0,h=[];c--;){var d=e[c];c&&t&&(d=Ot(d,Zt(t))),u=mr(d.length,u),l[c]=!r&&(t||o>=120&&d.length>=120)?new Hr(c&&d):i}d=e[0];var f=-1,p=l[0];e:for(;++f<o&&h.length<u;){var g=d[f],m=t?t(g):g;if(g=r||0!==g?g:0,!(p?Jt(p,m):s(h,m,r))){for(c=a;--c;){var y=l[c];if(!(y?Jt(y,m):s(e[c],m,r)))continue e}p&&p.push(m),h.push(g)}}return h}function Tn(e,t,r){var n=null==(e=Ss(e,t=mi(t,e)))?e:e[Ns(Gs(t))];return null==n?i:xt(n,e,r)}function Pn(e){return ea(e)&&xn(e)==g}function Cn(e,t,r,n,s){return e===t||(null==e||null==t||!ea(e)&&!ea(t)?e!=e&&t!=t:function(e,t,r,n,s,o){var a=qo(e),c=qo(t),l=a?m:hs(e),u=c?m:hs(t),h=(l=l==g?S:l)==S,d=(u=u==g?S:u)==S,f=l==u;if(f&&Ko(e)){if(!Ko(t))return!1;a=!0,h=!1}if(f&&!h)return o||(o=new Vr),a||ca(e)?Xi(e,t,r,n,s,o):function(e,t,r,n,i,s,o){switch(r){case M:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!s(new $e(e),new $e(t)));case y:case b:case x:return zo(+e,+t);case w:return e.name==t.name&&e.message==t.message;case I:case T:return e==t+"";case E:var a=ir;case k:var c=1&n;if(a||(a=ar),e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;n|=2,o.set(e,t);var u=Xi(a(e),a(t),n,i,s,o);return o.delete(e),u;case P:if(Nr)return Nr.call(e)==Nr.call(t)}return!1}(e,t,l,r,n,s,o);if(!(1&r)){var p=h&&Re.call(e,"__wrapped__"),v=d&&Re.call(t,"__wrapped__");if(p||v){var _=p?e.value():e,A=v?t.value():t;return o||(o=new Vr),s(_,A,r,n,o)}}return!!f&&(o||(o=new Vr),function(e,t,r,n,s,o){var a=1&r,c=es(e),l=c.length;if(l!=es(t).length&&!a)return!1;for(var u=l;u--;){var h=c[u];if(!(a?h in t:Re.call(t,h)))return!1}var d=o.get(e),f=o.get(t);if(d&&f)return d==t&&f==e;var p=!0;o.set(e,t),o.set(t,e);for(var g=a;++u<l;){var m=e[h=c[u]],y=t[h];if(n)var b=a?n(y,m,h,t,e,o):n(m,y,h,e,t,o);if(!(b===i?m===y||s(m,y,r,n,o):b)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var w=e.constructor,v=t.constructor;w==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof v&&v instanceof v||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,r,n,s,o))}(e,t,r,n,Cn,s))}function On(e,t,r,n){var s=r.length,o=s,a=!n;if(null==e)return!o;for(e=Se(e);s--;){var c=r[s];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<o;){var l=(c=r[s])[0],u=e[l],h=c[1];if(a&&c[2]){if(u===i&&!(l in e))return!1}else{var d=new Vr;if(n)var f=n(u,h,l,e,t,d);if(!(f===i?Cn(h,u,3,n,d):f))return!1}}return!0}function Mn(e){return!(!Qo(e)||(t=e,Ne&&Ne in t))&&(Yo(e)?ze:ge).test(Bs(e));var t}function Rn(e){return"function"==typeof e?e:null==e?rc:"object"==typeof e?qo(e)?Un(e[0],e[1]):Dn(e):hc(e)}function Ln(e){if(!vs(e))return pr(e);var t=[];for(var r in Se(e))Re.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Nn(e,t){return e<t}function Bn(e,t){var r=-1,i=Ho(e)?n(e.length):[];return un(e,(function(e,n,s){i[++r]=t(e,n,s)})),i}function Dn(e){var t=as(e);return 1==t.length&&t[0][2]?Es(t[0][0],t[0][1]):function(r){return r===e||On(r,e,t)}}function Un(e,t){return ys(e)&&_s(t)?Es(Ns(e),t):function(r){var n=Aa(r,e);return n===i&&n===t?Ia(r,e):Cn(t,n,3)}}function zn(e,t,r,n,s){e!==t&&mn(t,(function(o,a){if(s||(s=new Vr),Qo(o))!function(e,t,r,n,s,o,a){var c=As(e,r),l=As(t,r),u=a.get(l);if(u)Jr(e,r,u);else{var h=o?o(c,l,r+"",e,t,a):i,d=h===i;if(d){var f=qo(l),p=!f&&Ko(l),g=!f&&!p&&ca(l);h=l,f||p||g?qo(c)?h=c:Vo(c)?h=Ii(c):p?(d=!1,h=vi(l,!0)):g?(d=!1,h=Ei(l,!0)):h=[]:na(l)||$o(l)?(h=c,$o(c)?h=ma(c):Qo(c)&&!Yo(c)||(h=fs(l))):d=!1}d&&(a.set(l,h),s(h,l,n,o,a),a.delete(l)),Jr(e,r,h)}}(e,t,a,r,zn,n,s);else{var c=n?n(As(e,a),o,a+"",e,t,s):i;c===i&&(c=o),Jr(e,a,c)}}),Oa)}function jn(e,t){var r=e.length;if(r)return gs(t+=t<0?r:0,r)?e[t]:i}function Fn(e,t,r){t=t.length?Ot(t,(function(e){return qo(e)?function(t){return _n(t,1===e.length?e[0]:e)}:e})):[rc];var n=-1;t=Ot(t,Zt(ss()));var i=Bn(e,(function(e,r,i){var s=Ot(t,(function(t){return t(e)}));return{criteria:s,index:++n,value:e}}));return function(e){var t=e.length;for(e.sort((function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,s=t.criteria,o=i.length,a=r.length;++n<o;){var c=xi(i[n],s[n]);if(c)return n>=a?c:c*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}));t--;)e[t]=e[t].value;return e}(i)}function $n(e,t,r){for(var n=-1,i=t.length,s={};++n<i;){var o=t[n],a=_n(e,o);r(a,o)&&Yn(s,mi(o,e),a)}return s}function qn(e,t,r,n){var i=n?jt:zt,s=-1,o=t.length,a=e;for(e===t&&(t=Ii(t)),r&&(a=Ot(e,Zt(r)));++s<o;)for(var c=0,l=t[s],u=r?r(l):l;(c=i(a,u,c,n))>-1;)a!==e&&Ke.call(a,c,1),Ke.call(e,c,1);return e}function Wn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==s){var s=i;gs(i)?Ke.call(e,i,1):ci(e,i)}}return e}function Hn(e,t){return e+ft(wr()*(t-e+1))}function Vn(e,t){var r="";if(!e||t<1||t>h)return r;do{t%2&&(r+=e),(t=ft(t/2))&&(e+=e)}while(t);return r}function Kn(e,t){return Ts(xs(e,t,rc),e+"")}function Gn(e){return Gr(za(e))}function Zn(e,t){var r=za(e);return Os(r,sn(t,0,r.length))}function Yn(e,t,r,n){if(!Qo(e))return e;for(var s=-1,o=(t=mi(t,e)).length,a=o-1,c=e;null!=c&&++s<o;){var l=Ns(t[s]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(s!=a){var h=c[l];(u=n?n(h,l,c):i)===i&&(u=Qo(h)?h:gs(t[s+1])?[]:{})}Xr(c,l,u),c=c[l]}return e}var Jn=kr?function(e,t){return kr.set(e,t),e}:rc,Xn=et?function(e,t){return et(e,"toString",{configurable:!0,enumerable:!1,value:Qa(t),writable:!0})}:rc;function Qn(e){return Os(za(e))}function ei(e,t,r){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var o=n(s);++i<s;)o[i]=e[i+t];return o}function ti(e,t){var r;return un(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}function ri(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var s=n+i>>>1,o=e[s];null!==o&&!aa(o)&&(r?o<=t:o<t)?n=s+1:i=s}return i}return ni(e,t,rc,r)}function ni(e,t,r,n){var s=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=r(t))!=t,c=null===t,l=aa(t),u=t===i;s<o;){var h=ft((s+o)/2),d=r(e[h]),f=d!==i,p=null===d,g=d==d,m=aa(d);if(a)var y=n||g;else y=u?g&&(n||f):c?g&&f&&(n||!p):l?g&&f&&!p&&(n||!m):!p&&!m&&(n?d<=t:d<t);y?s=h+1:o=h}return mr(o,4294967294)}function ii(e,t){for(var r=-1,n=e.length,i=0,s=[];++r<n;){var o=e[r],a=t?t(o):o;if(!r||!zo(a,c)){var c=a;s[i++]=0===o?0:o}}return s}function si(e){return"number"==typeof e?e:aa(e)?d:+e}function oi(e){if("string"==typeof e)return e;if(qo(e))return Ot(e,oi)+"";if(aa(e))return Br?Br.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ai(e,t,r){var n=-1,i=Pt,s=e.length,o=!0,a=[],c=a;if(r)o=!1,i=Ct;else if(s>=200){var l=t?null:Vi(e);if(l)return ar(l);o=!1,i=Jt,c=new Hr}else c=t?[]:a;e:for(;++n<s;){var u=e[n],h=t?t(u):u;if(u=r||0!==u?u:0,o&&h==h){for(var d=c.length;d--;)if(c[d]===h)continue e;t&&c.push(h),a.push(u)}else i(c,h,r)||(c!==a&&c.push(h),a.push(u))}return a}function ci(e,t){return null==(e=Ss(e,t=mi(t,e)))||delete e[Ns(Gs(t))]}function li(e,t,r,n){return Yn(e,t,r(_n(e,t)),n)}function ui(e,t,r,n){for(var i=e.length,s=n?i:-1;(n?s--:++s<i)&&t(e[s],s,e););return r?ei(e,n?0:s,n?s+1:i):ei(e,n?s+1:0,n?i:s)}function hi(e,t){var r=e;return r instanceof Fr&&(r=r.value()),Rt(t,(function(e,t){return t.func.apply(t.thisArg,Mt([e],t.args))}),r)}function di(e,t,r){var i=e.length;if(i<2)return i?ai(e[0]):[];for(var s=-1,o=n(i);++s<i;)for(var a=e[s],c=-1;++c<i;)c!=s&&(o[s]=ln(o[s]||a,e[c],t,r));return ai(gn(o,1),t,r)}function fi(e,t,r){for(var n=-1,s=e.length,o=t.length,a={};++n<s;){var c=n<o?t[n]:i;r(a,e[n],c)}return a}function pi(e){return Vo(e)?e:[]}function gi(e){return"function"==typeof e?e:rc}function mi(e,t){return qo(e)?e:ys(e,t)?[e]:Ls(ya(e))}var yi=Kn;function bi(e,t,r){var n=e.length;return r=r===i?n:r,!t&&r>=n?e:ei(e,t,r)}var wi=ot||function(e){return ht.clearTimeout(e)};function vi(e,t){if(t)return e.slice();var r=e.length,n=qe?qe(r):new e.constructor(r);return e.copy(n),n}function _i(e){var t=new e.constructor(e.byteLength);return new $e(t).set(new $e(e)),t}function Ei(e,t){var r=t?_i(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function xi(e,t){if(e!==t){var r=e!==i,n=null===e,s=e==e,o=aa(e),a=t!==i,c=null===t,l=t==t,u=aa(t);if(!c&&!u&&!o&&e>t||o&&a&&l&&!c&&!u||n&&a&&l||!r&&l||!s)return 1;if(!n&&!o&&!u&&e<t||u&&r&&s&&!n&&!o||c&&r&&s||!a&&s||!l)return-1}return 0}function Si(e,t,r,i){for(var s=-1,o=e.length,a=r.length,c=-1,l=t.length,u=gr(o-a,0),h=n(l+u),d=!i;++c<l;)h[c]=t[c];for(;++s<a;)(d||s<o)&&(h[r[s]]=e[s]);for(;u--;)h[c++]=e[s++];return h}function Ai(e,t,r,i){for(var s=-1,o=e.length,a=-1,c=r.length,l=-1,u=t.length,h=gr(o-c,0),d=n(h+u),f=!i;++s<h;)d[s]=e[s];for(var p=s;++l<u;)d[p+l]=t[l];for(;++a<c;)(f||s<o)&&(d[p+r[a]]=e[s++]);return d}function Ii(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function ki(e,t,r,n){var s=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var c=t[o],l=n?n(r[c],e[c],c,r,e):i;l===i&&(l=e[c]),s?rn(r,c,l):Xr(r,c,l)}return r}function Ti(e,t){return function(r,n){var i=qo(r)?St:en,s=t?t():{};return i(r,e,ss(n,2),s)}}function Pi(e){return Kn((function(t,r){var n=-1,s=r.length,o=s>1?r[s-1]:i,a=s>2?r[2]:i;for(o=e.length>3&&"function"==typeof o?(s--,o):i,a&&ms(r[0],r[1],a)&&(o=s<3?i:o,s=1),t=Se(t);++n<s;){var c=r[n];c&&e(t,c,n,o)}return t}))}function Ci(e,t){return function(r,n){if(null==r)return r;if(!Ho(r))return e(r,n);for(var i=r.length,s=t?i:-1,o=Se(r);(t?s--:++s<i)&&!1!==n(o[s],s,o););return r}}function Oi(e){return function(t,r,n){for(var i=-1,s=Se(t),o=n(t),a=o.length;a--;){var c=o[e?a:++i];if(!1===r(s[c],c,s))break}return t}}function Mi(e){return function(t){var r=nr(t=ya(t))?ur(t):i,n=r?r[0]:t.charAt(0),s=r?bi(r,1).join(""):t.slice(1);return n[e]()+s}}function Ri(e){return function(t){return Rt(Ya($a(t).replace(Ye,"")),e,"")}}function Li(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Ur(e.prototype),n=e.apply(r,t);return Qo(n)?n:r}}function Ni(e){return function(t,r,n){var s=Se(t);if(!Ho(t)){var o=ss(r,3);t=Ca(t),r=function(e){return o(s[e],e,s)}}var a=e(t,r,n);return a>-1?s[o?t[a]:a]:i}}function Bi(e){return Qi((function(t){var r=t.length,n=r,o=jr.prototype.thru;for(e&&t.reverse();n--;){var a=t[n];if("function"!=typeof a)throw new ke(s);if(o&&!c&&"wrapper"==ns(a))var c=new jr([],!0)}for(n=c?n:r;++n<r;){var l=ns(a=t[n]),u="wrapper"==l?rs(a):i;c=u&&bs(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[ns(u[0])].apply(c,u[3]):1==a.length&&bs(a)?c[l]():c.thru(a)}return function(){var e=arguments,n=e[0];if(c&&1==e.length&&qo(n))return c.plant(n).value();for(var i=0,s=r?t[i].apply(this,e):n;++i<r;)s=t[i].call(this,s);return s}}))}function Di(e,t,r,s,o,a,c,u,h,d){var f=t&l,p=1&t,g=2&t,m=24&t,y=512&t,b=g?i:Li(e);return function l(){for(var w=arguments.length,v=n(w),_=w;_--;)v[_]=arguments[_];if(m)var E=is(l),x=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(v,E);if(s&&(v=Si(v,s,o,m)),a&&(v=Ai(v,a,c,m)),w-=x,m&&w<d){var S=or(v,E);return Wi(e,t,Di,l.placeholder,r,v,S,u,h,d-w)}var A=p?r:this,I=g?A[e]:e;return w=v.length,u?v=function(e,t){for(var r=e.length,n=mr(t.length,r),s=Ii(e);n--;){var o=t[n];e[n]=gs(o,r)?s[o]:i}return e}(v,u):y&&w>1&&v.reverse(),f&&h<w&&(v.length=h),this&&this!==ht&&this instanceof l&&(I=b||Li(I)),I.apply(A,v)}}function Ui(e,t){return function(r,n){return function(e,t,r,n){return bn(e,(function(e,i,s){t(n,r(e),i,s)})),n}(r,e,t(n),{})}}function zi(e,t){return function(r,n){var s;if(r===i&&n===i)return t;if(r!==i&&(s=r),n!==i){if(s===i)return n;"string"==typeof r||"string"==typeof n?(r=oi(r),n=oi(n)):(r=si(r),n=si(n)),s=e(r,n)}return s}}function ji(e){return Qi((function(t){return t=Ot(t,Zt(ss())),Kn((function(r){var n=this;return e(t,(function(e){return xt(e,n,r)}))}))}))}function Fi(e,t){var r=(t=t===i?" ":oi(t)).length;if(r<2)return r?Vn(t,e):t;var n=Vn(t,dt(e/lr(t)));return nr(t)?bi(ur(n),0,e).join(""):n.slice(0,e)}function $i(e){return function(t,r,s){return s&&"number"!=typeof s&&ms(t,r,s)&&(r=s=i),t=da(t),r===i?(r=t,t=0):r=da(r),function(e,t,r,i){for(var s=-1,o=gr(dt((t-e)/(r||1)),0),a=n(o);o--;)a[i?o:++s]=e,e+=r;return a}(t,r,s=s===i?t<r?1:-1:da(s),e)}}function qi(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=ga(t),r=ga(r)),e(t,r)}}function Wi(e,t,r,n,s,o,a,l,u,h){var d=8&t;t|=d?c:64,4&(t&=~(d?64:c))||(t&=-4);var f=[e,t,s,d?o:i,d?a:i,d?i:o,d?i:a,l,u,h],p=r.apply(i,f);return bs(e)&&Is(p,f),p.placeholder=n,Ps(p,e,t)}function Hi(e){var t=xe[e];return function(e,r){if(e=ga(e),(r=null==r?0:mr(fa(r),292))&&Bt(e)){var n=(ya(e)+"e").split("e");return+((n=(ya(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Vi=Sr&&1/ar(new Sr([,-0]))[1]==u?function(e){return new Sr(e)}:ac;function Ki(e){return function(t){var r=hs(t);return r==E?ir(t):r==k?cr(t):function(e,t){return Ot(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Gi(e,t,r,o,u,h,d,f){var p=2&t;if(!p&&"function"!=typeof e)throw new ke(s);var g=o?o.length:0;if(g||(t&=-97,o=u=i),d=d===i?d:gr(fa(d),0),f=f===i?f:fa(f),g-=u?u.length:0,64&t){var m=o,y=u;o=u=i}var b=p?i:rs(e),w=[e,t,r,o,u,m,y,h,d,f];if(b&&function(e,t){var r=e[1],n=t[1],i=r|n,s=i<131,o=n==l&&8==r||n==l&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!s&&!o)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?Si(u,c,t[4]):c,e[4]=u?or(e[3],a):t[4]}(c=t[5])&&(u=e[5],e[5]=u?Ai(u,c,t[6]):c,e[6]=u?or(e[5],a):t[6]),(c=t[7])&&(e[7]=c),n&l&&(e[8]=null==e[8]?t[8]:mr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(w,b),e=w[0],t=w[1],r=w[2],o=w[3],u=w[4],!(f=w[9]=w[9]===i?p?0:e.length:gr(w[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)v=8==t||16==t?function(e,t,r){var s=Li(e);return function o(){for(var a=arguments.length,c=n(a),l=a,u=is(o);l--;)c[l]=arguments[l];var h=a<3&&c[0]!==u&&c[a-1]!==u?[]:or(c,u);return(a-=h.length)<r?Wi(e,t,Di,o.placeholder,i,c,h,i,i,r-a):xt(this&&this!==ht&&this instanceof o?s:e,this,c)}}(e,t,f):t!=c&&33!=t||u.length?Di.apply(i,w):function(e,t,r,i){var s=1&t,o=Li(e);return function t(){for(var a=-1,c=arguments.length,l=-1,u=i.length,h=n(u+c),d=this&&this!==ht&&this instanceof t?o:e;++l<u;)h[l]=i[l];for(;c--;)h[l++]=arguments[++a];return xt(d,s?r:this,h)}}(e,t,r,o);else var v=function(e,t,r){var n=1&t,i=Li(e);return function t(){return(this&&this!==ht&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,r);return Ps((b?Jn:Is)(v,w),e,t)}function Zi(e,t,r,n){return e===i||zo(e,Ce[r])&&!Re.call(n,r)?t:e}function Yi(e,t,r,n,s,o){return Qo(e)&&Qo(t)&&(o.set(t,e),zn(e,t,i,Yi,o),o.delete(t)),e}function Ji(e){return na(e)?i:e}function Xi(e,t,r,n,s,o){var a=1&r,c=e.length,l=t.length;if(c!=l&&!(a&&l>c))return!1;var u=o.get(e),h=o.get(t);if(u&&h)return u==t&&h==e;var d=-1,f=!0,p=2&r?new Hr:i;for(o.set(e,t),o.set(t,e);++d<c;){var g=e[d],m=t[d];if(n)var y=a?n(m,g,d,t,e,o):n(g,m,d,e,t,o);if(y!==i){if(y)continue;f=!1;break}if(p){if(!Nt(t,(function(e,t){if(!Jt(p,t)&&(g===e||s(g,e,r,n,o)))return p.push(t)}))){f=!1;break}}else if(g!==m&&!s(g,m,r,n,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function Qi(e){return Ts(xs(e,i,qs),e+"")}function es(e){return En(e,Ca,ls)}function ts(e){return En(e,Oa,us)}var rs=kr?function(e){return kr.get(e)}:ac;function ns(e){for(var t=e.name+"",r=Tr[t],n=Re.call(Tr,t)?r.length:0;n--;){var i=r[n],s=i.func;if(null==s||s==e)return i.name}return t}function is(e){return(Re.call(Dr,"placeholder")?Dr:e).placeholder}function ss(){var e=Dr.iteratee||nc;return e=e===nc?Rn:e,arguments.length?e(arguments[0],arguments[1]):e}function os(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function as(e){for(var t=Ca(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,_s(i)]}return t}function cs(e,t){var r=function(e,t){return null==e?i:e[t]}(e,t);return Mn(r)?r:i}var ls=gt?function(e){return null==e?[]:(e=Se(e),Tt(gt(e),(function(t){return Ve.call(e,t)})))}:pc,us=gt?function(e){for(var t=[];e;)Mt(t,ls(e)),e=We(e);return t}:pc,hs=xn;function ds(e,t,r){for(var n=-1,i=(t=mi(t,e)).length,s=!1;++n<i;){var o=Ns(t[n]);if(!(s=null!=e&&r(e,o)))break;e=e[o]}return s||++n!=i?s:!!(i=null==e?0:e.length)&&Xo(i)&&gs(o,i)&&(qo(e)||$o(e))}function fs(e){return"function"!=typeof e.constructor||vs(e)?{}:Ur(We(e))}function ps(e){return qo(e)||$o(e)||!!(Ge&&e&&e[Ge])}function gs(e,t){var r=typeof e;return!!(t=null==t?h:t)&&("number"==r||"symbol"!=r&&ye.test(e))&&e>-1&&e%1==0&&e<t}function ms(e,t,r){if(!Qo(r))return!1;var n=typeof t;return!!("number"==n?Ho(r)&&gs(t,r.length):"string"==n&&t in r)&&zo(r[t],e)}function ys(e,t){if(qo(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!aa(e))||Q.test(e)||!X.test(e)||null!=t&&e in Se(t)}function bs(e){var t=ns(e),r=Dr[t];if("function"!=typeof r||!(t in Fr.prototype))return!1;if(e===r)return!0;var n=rs(r);return!!n&&e===n[0]}(_r&&hs(new _r(new ArrayBuffer(1)))!=M||Er&&hs(new Er)!=E||xr&&hs(xr.resolve())!=A||Sr&&hs(new Sr)!=k||Ar&&hs(new Ar)!=C)&&(hs=function(e){var t=xn(e),r=t==S?e.constructor:i,n=r?Bs(r):"";if(n)switch(n){case Pr:return M;case Cr:return E;case Or:return A;case Mr:return k;case Rr:return C}return t});var ws=Oe?Yo:gc;function vs(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ce)}function _s(e){return e==e&&!Qo(e)}function Es(e,t){return function(r){return null!=r&&r[e]===t&&(t!==i||e in Se(r))}}function xs(e,t,r){return t=gr(t===i?e.length-1:t,0),function(){for(var i=arguments,s=-1,o=gr(i.length-t,0),a=n(o);++s<o;)a[s]=i[t+s];s=-1;for(var c=n(t+1);++s<t;)c[s]=i[s];return c[t]=r(a),xt(e,this,c)}}function Ss(e,t){return t.length<2?e:_n(e,ei(t,0,-1))}function As(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Is=Cs(Jn),ks=ut||function(e,t){return ht.setTimeout(e,t)},Ts=Cs(Xn);function Ps(e,t,r){var n=t+"";return Ts(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return At(p,(function(r){var n="_."+r[0];t&r[1]&&!Pt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(oe);return t?t[1].split(ae):[]}(n),r)))}function Cs(e){var t=0,r=0;return function(){var n=yr(),s=16-(n-r);if(r=n,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Os(e,t){var r=-1,n=e.length,s=n-1;for(t=t===i?n:t;++r<t;){var o=Hn(r,s),a=e[o];e[o]=e[r],e[r]=a}return e.length=t,e}var Ms,Rs,Ls=(Ms=Ro((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,r,n,i){t.push(n?i.replace(ue,"$1"):r||e)})),t}),(function(e){return 500===Rs.size&&Rs.clear(),e})),Rs=Ms.cache,Ms);function Ns(e){if("string"==typeof e||aa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bs(e){if(null!=e){try{return Me.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ds(e){if(e instanceof Fr)return e.clone();var t=new jr(e.__wrapped__,e.__chain__);return t.__actions__=Ii(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Us=Kn((function(e,t){return Vo(e)?ln(e,gn(t,1,Vo,!0)):[]})),zs=Kn((function(e,t){var r=Gs(t);return Vo(r)&&(r=i),Vo(e)?ln(e,gn(t,1,Vo,!0),ss(r,2)):[]})),js=Kn((function(e,t){var r=Gs(t);return Vo(r)&&(r=i),Vo(e)?ln(e,gn(t,1,Vo,!0),i,r):[]}));function Fs(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:fa(r);return i<0&&(i=gr(n+i,0)),Ut(e,ss(t,3),i)}function $s(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var s=n-1;return r!==i&&(s=fa(r),s=r<0?gr(n+s,0):mr(s,n-1)),Ut(e,ss(t,3),s,!0)}function qs(e){return null!=e&&e.length?gn(e,1):[]}function Ws(e){return e&&e.length?e[0]:i}var Hs=Kn((function(e){var t=Ot(e,pi);return t.length&&t[0]===e[0]?kn(t):[]})),Vs=Kn((function(e){var t=Gs(e),r=Ot(e,pi);return t===Gs(r)?t=i:r.pop(),r.length&&r[0]===e[0]?kn(r,ss(t,2)):[]})),Ks=Kn((function(e){var t=Gs(e),r=Ot(e,pi);return(t="function"==typeof t?t:i)&&r.pop(),r.length&&r[0]===e[0]?kn(r,i,t):[]}));function Gs(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Zs=Kn(Ys);function Ys(e,t){return e&&e.length&&t&&t.length?qn(e,t):e}var Js=Qi((function(e,t){var r=null==e?0:e.length,n=nn(e,t);return Wn(e,Ot(t,(function(e){return gs(e,r)?+e:e})).sort(xi)),n}));function Xs(e){return null==e?e:vr.call(e)}var Qs=Kn((function(e){return ai(gn(e,1,Vo,!0))})),eo=Kn((function(e){var t=Gs(e);return Vo(t)&&(t=i),ai(gn(e,1,Vo,!0),ss(t,2))})),to=Kn((function(e){var t=Gs(e);return t="function"==typeof t?t:i,ai(gn(e,1,Vo,!0),i,t)}));function ro(e){if(!e||!e.length)return[];var t=0;return e=Tt(e,(function(e){if(Vo(e))return t=gr(e.length,t),!0})),Kt(t,(function(t){return Ot(e,qt(t))}))}function no(e,t){if(!e||!e.length)return[];var r=ro(e);return null==t?r:Ot(r,(function(e){return xt(t,i,e)}))}var io=Kn((function(e,t){return Vo(e)?ln(e,t):[]})),so=Kn((function(e){return di(Tt(e,Vo))})),oo=Kn((function(e){var t=Gs(e);return Vo(t)&&(t=i),di(Tt(e,Vo),ss(t,2))})),ao=Kn((function(e){var t=Gs(e);return t="function"==typeof t?t:i,di(Tt(e,Vo),i,t)})),co=Kn(ro),lo=Kn((function(e){var t=e.length,r=t>1?e[t-1]:i;return r="function"==typeof r?(e.pop(),r):i,no(e,r)}));function uo(e){var t=Dr(e);return t.__chain__=!0,t}function ho(e,t){return t(e)}var fo=Qi((function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,s=function(t){return nn(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Fr&&gs(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:ho,args:[s],thisArg:i}),new jr(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(s)})),po=Ti((function(e,t,r){Re.call(e,r)?++e[r]:rn(e,r,1)})),go=Ni(Fs),mo=Ni($s);function yo(e,t){return(qo(e)?At:un)(e,ss(t,3))}function bo(e,t){return(qo(e)?It:hn)(e,ss(t,3))}var wo=Ti((function(e,t,r){Re.call(e,r)?e[r].push(t):rn(e,r,[t])})),vo=Kn((function(e,t,r){var i=-1,s="function"==typeof t,o=Ho(e)?n(e.length):[];return un(e,(function(e){o[++i]=s?xt(t,e,r):Tn(e,t,r)})),o})),_o=Ti((function(e,t,r){rn(e,r,t)}));function Eo(e,t){return(qo(e)?Ot:Bn)(e,ss(t,3))}var xo=Ti((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),So=Kn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&ms(e,t[0],t[1])?t=[]:r>2&&ms(t[0],t[1],t[2])&&(t=[t[0]]),Fn(e,gn(t,1),[])})),Ao=lt||function(){return ht.Date.now()};function Io(e,t,r){return t=r?i:t,t=e&&null==t?e.length:t,Gi(e,l,i,i,i,i,t)}function ko(e,t){var r;if("function"!=typeof t)throw new ke(s);return e=fa(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=i),r}}var To=Kn((function(e,t,r){var n=1;if(r.length){var i=or(r,is(To));n|=c}return Gi(e,n,t,r,i)})),Po=Kn((function(e,t,r){var n=3;if(r.length){var i=or(r,is(Po));n|=c}return Gi(t,n,e,r,i)}));function Co(e,t,r){var n,o,a,c,l,u,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new ke(s);function g(t){var r=n,s=o;return n=o=i,h=t,c=e.apply(s,r)}function m(e){var r=e-u;return u===i||r>=t||r<0||f&&e-h>=a}function y(){var e=Ao();if(m(e))return b(e);l=ks(y,function(e){var r=t-(e-u);return f?mr(r,a-(e-h)):r}(e))}function b(e){return l=i,p&&n?g(e):(n=o=i,c)}function w(){var e=Ao(),r=m(e);if(n=arguments,o=this,u=e,r){if(l===i)return function(e){return h=e,l=ks(y,t),d?g(e):c}(u);if(f)return wi(l),l=ks(y,t),g(u)}return l===i&&(l=ks(y,t)),c}return t=ga(t)||0,Qo(r)&&(d=!!r.leading,a=(f="maxWait"in r)?gr(ga(r.maxWait)||0,t):a,p="trailing"in r?!!r.trailing:p),w.cancel=function(){l!==i&&wi(l),h=0,n=u=o=l=i},w.flush=function(){return l===i?c:b(Ao())},w}var Oo=Kn((function(e,t){return cn(e,1,t)})),Mo=Kn((function(e,t,r){return cn(e,ga(t)||0,r)}));function Ro(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ke(s);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(Ro.Cache||Wr),r}function Lo(e){if("function"!=typeof e)throw new ke(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ro.Cache=Wr;var No=yi((function(e,t){var r=(t=1==t.length&&qo(t[0])?Ot(t[0],Zt(ss())):Ot(gn(t,1),Zt(ss()))).length;return Kn((function(n){for(var i=-1,s=mr(n.length,r);++i<s;)n[i]=t[i].call(this,n[i]);return xt(e,this,n)}))})),Bo=Kn((function(e,t){var r=or(t,is(Bo));return Gi(e,c,i,t,r)})),Do=Kn((function(e,t){var r=or(t,is(Do));return Gi(e,64,i,t,r)})),Uo=Qi((function(e,t){return Gi(e,256,i,i,i,t)}));function zo(e,t){return e===t||e!=e&&t!=t}var jo=qi(Sn),Fo=qi((function(e,t){return e>=t})),$o=Pn(function(){return arguments}())?Pn:function(e){return ea(e)&&Re.call(e,"callee")&&!Ve.call(e,"callee")},qo=n.isArray,Wo=yt?Zt(yt):function(e){return ea(e)&&xn(e)==O};function Ho(e){return null!=e&&Xo(e.length)&&!Yo(e)}function Vo(e){return ea(e)&&Ho(e)}var Ko=mt||gc,Go=bt?Zt(bt):function(e){return ea(e)&&xn(e)==b};function Zo(e){if(!ea(e))return!1;var t=xn(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!na(e)}function Yo(e){if(!Qo(e))return!1;var t=xn(e);return t==v||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Jo(e){return"number"==typeof e&&e==fa(e)}function Xo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function Qo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ea(e){return null!=e&&"object"==typeof e}var ta=wt?Zt(wt):function(e){return ea(e)&&hs(e)==E};function ra(e){return"number"==typeof e||ea(e)&&xn(e)==x}function na(e){if(!ea(e)||xn(e)!=S)return!1;var t=We(e);if(null===t)return!0;var r=Re.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Me.call(r)==De}var ia=vt?Zt(vt):function(e){return ea(e)&&xn(e)==I},sa=_t?Zt(_t):function(e){return ea(e)&&hs(e)==k};function oa(e){return"string"==typeof e||!qo(e)&&ea(e)&&xn(e)==T}function aa(e){return"symbol"==typeof e||ea(e)&&xn(e)==P}var ca=Et?Zt(Et):function(e){return ea(e)&&Xo(e.length)&&!!it[xn(e)]},la=qi(Nn),ua=qi((function(e,t){return e<=t}));function ha(e){if(!e)return[];if(Ho(e))return oa(e)?ur(e):Ii(e);if(Ze&&e[Ze])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Ze]());var t=hs(e);return(t==E?ir:t==k?ar:za)(e)}function da(e){return e?(e=ga(e))===u||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function fa(e){var t=da(e),r=t%1;return t==t?r?t-r:t:0}function pa(e){return e?sn(fa(e),0,f):0}function ga(e){if("number"==typeof e)return e;if(aa(e))return d;if(Qo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Qo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Gt(e);var r=pe.test(e);return r||me.test(e)?ct(e.slice(2),r?2:8):fe.test(e)?d:+e}function ma(e){return ki(e,Oa(e))}function ya(e){return null==e?"":oi(e)}var ba=Pi((function(e,t){if(vs(t)||Ho(t))ki(t,Ca(t),e);else for(var r in t)Re.call(t,r)&&Xr(e,r,t[r])})),wa=Pi((function(e,t){ki(t,Oa(t),e)})),va=Pi((function(e,t,r,n){ki(t,Oa(t),e,n)})),_a=Pi((function(e,t,r,n){ki(t,Ca(t),e,n)})),Ea=Qi(nn),xa=Kn((function(e,t){e=Se(e);var r=-1,n=t.length,s=n>2?t[2]:i;for(s&&ms(t[0],t[1],s)&&(n=1);++r<n;)for(var o=t[r],a=Oa(o),c=-1,l=a.length;++c<l;){var u=a[c],h=e[u];(h===i||zo(h,Ce[u])&&!Re.call(e,u))&&(e[u]=o[u])}return e})),Sa=Kn((function(e){return e.push(i,Yi),xt(Ra,i,e)}));function Aa(e,t,r){var n=null==e?i:_n(e,t);return n===i?r:n}function Ia(e,t){return null!=e&&ds(e,t,In)}var ka=Ui((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),e[t]=r}),Qa(rc)),Ta=Ui((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),Re.call(e,t)?e[t].push(r):e[t]=[r]}),ss),Pa=Kn(Tn);function Ca(e){return Ho(e)?Kr(e):Ln(e)}function Oa(e){return Ho(e)?Kr(e,!0):function(e){if(!Qo(e))return function(e){var t=[];if(null!=e)for(var r in Se(e))t.push(r);return t}(e);var t=vs(e),r=[];for(var n in e)("constructor"!=n||!t&&Re.call(e,n))&&r.push(n);return r}(e)}var Ma=Pi((function(e,t,r){zn(e,t,r)})),Ra=Pi((function(e,t,r,n){zn(e,t,r,n)})),La=Qi((function(e,t){var r={};if(null==e)return r;var n=!1;t=Ot(t,(function(t){return t=mi(t,e),n||(n=t.length>1),t})),ki(e,ts(e),r),n&&(r=on(r,7,Ji));for(var i=t.length;i--;)ci(r,t[i]);return r})),Na=Qi((function(e,t){return null==e?{}:function(e,t){return $n(e,t,(function(t,r){return Ia(e,r)}))}(e,t)}));function Ba(e,t){if(null==e)return{};var r=Ot(ts(e),(function(e){return[e]}));return t=ss(t),$n(e,r,(function(e,r){return t(e,r[0])}))}var Da=Ki(Ca),Ua=Ki(Oa);function za(e){return null==e?[]:Yt(e,Ca(e))}var ja=Ri((function(e,t,r){return t=t.toLowerCase(),e+(r?Fa(t):t)}));function Fa(e){return Za(ya(e).toLowerCase())}function $a(e){return(e=ya(e))&&e.replace(be,er).replace(Je,"")}var qa=Ri((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),Wa=Ri((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Ha=Mi("toLowerCase"),Va=Ri((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),Ka=Ri((function(e,t,r){return e+(r?" ":"")+Za(t)})),Ga=Ri((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Za=Mi("toUpperCase");function Ya(e,t,r){return e=ya(e),(t=r?i:t)===i?function(e){return tt.test(e)}(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.match(ce)||[]}(e):e.match(t)||[]}var Ja=Kn((function(e,t){try{return xt(e,i,t)}catch(e){return Zo(e)?e:new _e(e)}})),Xa=Qi((function(e,t){return At(t,(function(t){t=Ns(t),rn(e,t,To(e[t],e))})),e}));function Qa(e){return function(){return e}}var ec=Bi(),tc=Bi(!0);function rc(e){return e}function nc(e){return Rn("function"==typeof e?e:on(e,1))}var ic=Kn((function(e,t){return function(r){return Tn(r,e,t)}})),sc=Kn((function(e,t){return function(r){return Tn(e,r,t)}}));function oc(e,t,r){var n=Ca(t),i=vn(t,n);null!=r||Qo(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=vn(t,Ca(t)));var s=!(Qo(r)&&"chain"in r&&!r.chain),o=Yo(e);return At(i,(function(r){var n=t[r];e[r]=n,o&&(e.prototype[r]=function(){var t=this.__chain__;if(s||t){var r=e(this.__wrapped__);return(r.__actions__=Ii(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Mt([this.value()],arguments))})})),e}function ac(){}var cc=ji(Ot),lc=ji(kt),uc=ji(Nt);function hc(e){return ys(e)?qt(Ns(e)):function(e){return function(t){return _n(t,e)}}(e)}var dc=$i(),fc=$i(!0);function pc(){return[]}function gc(){return!1}var mc,yc=zi((function(e,t){return e+t}),0),bc=Hi("ceil"),wc=zi((function(e,t){return e/t}),1),vc=Hi("floor"),_c=zi((function(e,t){return e*t}),1),Ec=Hi("round"),xc=zi((function(e,t){return e-t}),0);return Dr.after=function(e,t){if("function"!=typeof t)throw new ke(s);return e=fa(e),function(){if(--e<1)return t.apply(this,arguments)}},Dr.ary=Io,Dr.assign=ba,Dr.assignIn=wa,Dr.assignInWith=va,Dr.assignWith=_a,Dr.at=Ea,Dr.before=ko,Dr.bind=To,Dr.bindAll=Xa,Dr.bindKey=Po,Dr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return qo(e)?e:[e]},Dr.chain=uo,Dr.chunk=function(e,t,r){t=(r?ms(e,t,r):t===i)?1:gr(fa(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var o=0,a=0,c=n(dt(s/t));o<s;)c[a++]=ei(e,o,o+=t);return c},Dr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var s=e[t];s&&(i[n++]=s)}return i},Dr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Mt(qo(r)?Ii(r):[r],gn(t,1))},Dr.cond=function(e){var t=null==e?0:e.length,r=ss();return e=t?Ot(e,(function(e){if("function"!=typeof e[1])throw new ke(s);return[r(e[0]),e[1]]})):[],Kn((function(r){for(var n=-1;++n<t;){var i=e[n];if(xt(i[0],this,r))return xt(i[1],this,r)}}))},Dr.conforms=function(e){return function(e){var t=Ca(e);return function(r){return an(r,e,t)}}(on(e,1))},Dr.constant=Qa,Dr.countBy=po,Dr.create=function(e,t){var r=Ur(e);return null==t?r:tn(r,t)},Dr.curry=function e(t,r,n){var s=Gi(t,8,i,i,i,i,i,r=n?i:r);return s.placeholder=e.placeholder,s},Dr.curryRight=function e(t,r,n){var s=Gi(t,16,i,i,i,i,i,r=n?i:r);return s.placeholder=e.placeholder,s},Dr.debounce=Co,Dr.defaults=xa,Dr.defaultsDeep=Sa,Dr.defer=Oo,Dr.delay=Mo,Dr.difference=Us,Dr.differenceBy=zs,Dr.differenceWith=js,Dr.drop=function(e,t,r){var n=null==e?0:e.length;return n?ei(e,(t=r||t===i?1:fa(t))<0?0:t,n):[]},Dr.dropRight=function(e,t,r){var n=null==e?0:e.length;return n?ei(e,0,(t=n-(t=r||t===i?1:fa(t)))<0?0:t):[]},Dr.dropRightWhile=function(e,t){return e&&e.length?ui(e,ss(t,3),!0,!0):[]},Dr.dropWhile=function(e,t){return e&&e.length?ui(e,ss(t,3),!0):[]},Dr.fill=function(e,t,r,n){var s=null==e?0:e.length;return s?(r&&"number"!=typeof r&&ms(e,t,r)&&(r=0,n=s),function(e,t,r,n){var s=e.length;for((r=fa(r))<0&&(r=-r>s?0:s+r),(n=n===i||n>s?s:fa(n))<0&&(n+=s),n=r>n?0:pa(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},Dr.filter=function(e,t){return(qo(e)?Tt:pn)(e,ss(t,3))},Dr.flatMap=function(e,t){return gn(Eo(e,t),1)},Dr.flatMapDeep=function(e,t){return gn(Eo(e,t),u)},Dr.flatMapDepth=function(e,t,r){return r=r===i?1:fa(r),gn(Eo(e,t),r)},Dr.flatten=qs,Dr.flattenDeep=function(e){return null!=e&&e.length?gn(e,u):[]},Dr.flattenDepth=function(e,t){return null!=e&&e.length?gn(e,t=t===i?1:fa(t)):[]},Dr.flip=function(e){return Gi(e,512)},Dr.flow=ec,Dr.flowRight=tc,Dr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},Dr.functions=function(e){return null==e?[]:vn(e,Ca(e))},Dr.functionsIn=function(e){return null==e?[]:vn(e,Oa(e))},Dr.groupBy=wo,Dr.initial=function(e){return null!=e&&e.length?ei(e,0,-1):[]},Dr.intersection=Hs,Dr.intersectionBy=Vs,Dr.intersectionWith=Ks,Dr.invert=ka,Dr.invertBy=Ta,Dr.invokeMap=vo,Dr.iteratee=nc,Dr.keyBy=_o,Dr.keys=Ca,Dr.keysIn=Oa,Dr.map=Eo,Dr.mapKeys=function(e,t){var r={};return t=ss(t,3),bn(e,(function(e,n,i){rn(r,t(e,n,i),e)})),r},Dr.mapValues=function(e,t){var r={};return t=ss(t,3),bn(e,(function(e,n,i){rn(r,n,t(e,n,i))})),r},Dr.matches=function(e){return Dn(on(e,1))},Dr.matchesProperty=function(e,t){return Un(e,on(t,1))},Dr.memoize=Ro,Dr.merge=Ma,Dr.mergeWith=Ra,Dr.method=ic,Dr.methodOf=sc,Dr.mixin=oc,Dr.negate=Lo,Dr.nthArg=function(e){return e=fa(e),Kn((function(t){return jn(t,e)}))},Dr.omit=La,Dr.omitBy=function(e,t){return Ba(e,Lo(ss(t)))},Dr.once=function(e){return ko(2,e)},Dr.orderBy=function(e,t,r,n){return null==e?[]:(qo(t)||(t=null==t?[]:[t]),qo(r=n?i:r)||(r=null==r?[]:[r]),Fn(e,t,r))},Dr.over=cc,Dr.overArgs=No,Dr.overEvery=lc,Dr.overSome=uc,Dr.partial=Bo,Dr.partialRight=Do,Dr.partition=xo,Dr.pick=Na,Dr.pickBy=Ba,Dr.property=hc,Dr.propertyOf=function(e){return function(t){return null==e?i:_n(e,t)}},Dr.pull=Zs,Dr.pullAll=Ys,Dr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?qn(e,t,ss(r,2)):e},Dr.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?qn(e,t,i,r):e},Dr.pullAt=Js,Dr.range=dc,Dr.rangeRight=fc,Dr.rearg=Uo,Dr.reject=function(e,t){return(qo(e)?Tt:pn)(e,Lo(ss(t,3)))},Dr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],s=e.length;for(t=ss(t,3);++n<s;){var o=e[n];t(o,n,e)&&(r.push(o),i.push(n))}return Wn(e,i),r},Dr.rest=function(e,t){if("function"!=typeof e)throw new ke(s);return Kn(e,t=t===i?t:fa(t))},Dr.reverse=Xs,Dr.sampleSize=function(e,t,r){return t=(r?ms(e,t,r):t===i)?1:fa(t),(qo(e)?Zr:Zn)(e,t)},Dr.set=function(e,t,r){return null==e?e:Yn(e,t,r)},Dr.setWith=function(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:Yn(e,t,r,n)},Dr.shuffle=function(e){return(qo(e)?Yr:Qn)(e)},Dr.slice=function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&ms(e,t,r)?(t=0,r=n):(t=null==t?0:fa(t),r=r===i?n:fa(r)),ei(e,t,r)):[]},Dr.sortBy=So,Dr.sortedUniq=function(e){return e&&e.length?ii(e):[]},Dr.sortedUniqBy=function(e,t){return e&&e.length?ii(e,ss(t,2)):[]},Dr.split=function(e,t,r){return r&&"number"!=typeof r&&ms(e,t,r)&&(t=r=i),(r=r===i?f:r>>>0)?(e=ya(e))&&("string"==typeof t||null!=t&&!ia(t))&&!(t=oi(t))&&nr(e)?bi(ur(e),0,r):e.split(t,r):[]},Dr.spread=function(e,t){if("function"!=typeof e)throw new ke(s);return t=null==t?0:gr(fa(t),0),Kn((function(r){var n=r[t],i=bi(r,0,t);return n&&Mt(i,n),xt(e,this,i)}))},Dr.tail=function(e){var t=null==e?0:e.length;return t?ei(e,1,t):[]},Dr.take=function(e,t,r){return e&&e.length?ei(e,0,(t=r||t===i?1:fa(t))<0?0:t):[]},Dr.takeRight=function(e,t,r){var n=null==e?0:e.length;return n?ei(e,(t=n-(t=r||t===i?1:fa(t)))<0?0:t,n):[]},Dr.takeRightWhile=function(e,t){return e&&e.length?ui(e,ss(t,3),!1,!0):[]},Dr.takeWhile=function(e,t){return e&&e.length?ui(e,ss(t,3)):[]},Dr.tap=function(e,t){return t(e),e},Dr.throttle=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new ke(s);return Qo(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Co(e,t,{leading:n,maxWait:t,trailing:i})},Dr.thru=ho,Dr.toArray=ha,Dr.toPairs=Da,Dr.toPairsIn=Ua,Dr.toPath=function(e){return qo(e)?Ot(e,Ns):aa(e)?[e]:Ii(Ls(ya(e)))},Dr.toPlainObject=ma,Dr.transform=function(e,t,r){var n=qo(e),i=n||Ko(e)||ca(e);if(t=ss(t,4),null==r){var s=e&&e.constructor;r=i?n?new s:[]:Qo(e)&&Yo(s)?Ur(We(e)):{}}return(i?At:bn)(e,(function(e,n,i){return t(r,e,n,i)})),r},Dr.unary=function(e){return Io(e,1)},Dr.union=Qs,Dr.unionBy=eo,Dr.unionWith=to,Dr.uniq=function(e){return e&&e.length?ai(e):[]},Dr.uniqBy=function(e,t){return e&&e.length?ai(e,ss(t,2)):[]},Dr.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?ai(e,i,t):[]},Dr.unset=function(e,t){return null==e||ci(e,t)},Dr.unzip=ro,Dr.unzipWith=no,Dr.update=function(e,t,r){return null==e?e:li(e,t,gi(r))},Dr.updateWith=function(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:li(e,t,gi(r),n)},Dr.values=za,Dr.valuesIn=function(e){return null==e?[]:Yt(e,Oa(e))},Dr.without=io,Dr.words=Ya,Dr.wrap=function(e,t){return Bo(gi(t),e)},Dr.xor=so,Dr.xorBy=oo,Dr.xorWith=ao,Dr.zip=co,Dr.zipObject=function(e,t){return fi(e||[],t||[],Xr)},Dr.zipObjectDeep=function(e,t){return fi(e||[],t||[],Yn)},Dr.zipWith=lo,Dr.entries=Da,Dr.entriesIn=Ua,Dr.extend=wa,Dr.extendWith=va,oc(Dr,Dr),Dr.add=yc,Dr.attempt=Ja,Dr.camelCase=ja,Dr.capitalize=Fa,Dr.ceil=bc,Dr.clamp=function(e,t,r){return r===i&&(r=t,t=i),r!==i&&(r=(r=ga(r))==r?r:0),t!==i&&(t=(t=ga(t))==t?t:0),sn(ga(e),t,r)},Dr.clone=function(e){return on(e,4)},Dr.cloneDeep=function(e){return on(e,5)},Dr.cloneDeepWith=function(e,t){return on(e,5,t="function"==typeof t?t:i)},Dr.cloneWith=function(e,t){return on(e,4,t="function"==typeof t?t:i)},Dr.conformsTo=function(e,t){return null==t||an(e,t,Ca(t))},Dr.deburr=$a,Dr.defaultTo=function(e,t){return null==e||e!=e?t:e},Dr.divide=wc,Dr.endsWith=function(e,t,r){e=ya(e),t=oi(t);var n=e.length,s=r=r===i?n:sn(fa(r),0,n);return(r-=t.length)>=0&&e.slice(r,s)==t},Dr.eq=zo,Dr.escape=function(e){return(e=ya(e))&&G.test(e)?e.replace(V,tr):e},Dr.escapeRegExp=function(e){return(e=ya(e))&&re.test(e)?e.replace(te,"\\$&"):e},Dr.every=function(e,t,r){var n=qo(e)?kt:dn;return r&&ms(e,t,r)&&(t=i),n(e,ss(t,3))},Dr.find=go,Dr.findIndex=Fs,Dr.findKey=function(e,t){return Dt(e,ss(t,3),bn)},Dr.findLast=mo,Dr.findLastIndex=$s,Dr.findLastKey=function(e,t){return Dt(e,ss(t,3),wn)},Dr.floor=vc,Dr.forEach=yo,Dr.forEachRight=bo,Dr.forIn=function(e,t){return null==e?e:mn(e,ss(t,3),Oa)},Dr.forInRight=function(e,t){return null==e?e:yn(e,ss(t,3),Oa)},Dr.forOwn=function(e,t){return e&&bn(e,ss(t,3))},Dr.forOwnRight=function(e,t){return e&&wn(e,ss(t,3))},Dr.get=Aa,Dr.gt=jo,Dr.gte=Fo,Dr.has=function(e,t){return null!=e&&ds(e,t,An)},Dr.hasIn=Ia,Dr.head=Ws,Dr.identity=rc,Dr.includes=function(e,t,r,n){e=Ho(e)?e:za(e),r=r&&!n?fa(r):0;var i=e.length;return r<0&&(r=gr(i+r,0)),oa(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&zt(e,t,r)>-1},Dr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:fa(r);return i<0&&(i=gr(n+i,0)),zt(e,t,i)},Dr.inRange=function(e,t,r){return t=da(t),r===i?(r=t,t=0):r=da(r),function(e,t,r){return e>=mr(t,r)&&e<gr(t,r)}(e=ga(e),t,r)},Dr.invoke=Pa,Dr.isArguments=$o,Dr.isArray=qo,Dr.isArrayBuffer=Wo,Dr.isArrayLike=Ho,Dr.isArrayLikeObject=Vo,Dr.isBoolean=function(e){return!0===e||!1===e||ea(e)&&xn(e)==y},Dr.isBuffer=Ko,Dr.isDate=Go,Dr.isElement=function(e){return ea(e)&&1===e.nodeType&&!na(e)},Dr.isEmpty=function(e){if(null==e)return!0;if(Ho(e)&&(qo(e)||"string"==typeof e||"function"==typeof e.splice||Ko(e)||ca(e)||$o(e)))return!e.length;var t=hs(e);if(t==E||t==k)return!e.size;if(vs(e))return!Ln(e).length;for(var r in e)if(Re.call(e,r))return!1;return!0},Dr.isEqual=function(e,t){return Cn(e,t)},Dr.isEqualWith=function(e,t,r){var n=(r="function"==typeof r?r:i)?r(e,t):i;return n===i?Cn(e,t,i,r):!!n},Dr.isError=Zo,Dr.isFinite=function(e){return"number"==typeof e&&Bt(e)},Dr.isFunction=Yo,Dr.isInteger=Jo,Dr.isLength=Xo,Dr.isMap=ta,Dr.isMatch=function(e,t){return e===t||On(e,t,as(t))},Dr.isMatchWith=function(e,t,r){return r="function"==typeof r?r:i,On(e,t,as(t),r)},Dr.isNaN=function(e){return ra(e)&&e!=+e},Dr.isNative=function(e){if(ws(e))throw new _e("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mn(e)},Dr.isNil=function(e){return null==e},Dr.isNull=function(e){return null===e},Dr.isNumber=ra,Dr.isObject=Qo,Dr.isObjectLike=ea,Dr.isPlainObject=na,Dr.isRegExp=ia,Dr.isSafeInteger=function(e){return Jo(e)&&e>=-9007199254740991&&e<=h},Dr.isSet=sa,Dr.isString=oa,Dr.isSymbol=aa,Dr.isTypedArray=ca,Dr.isUndefined=function(e){return e===i},Dr.isWeakMap=function(e){return ea(e)&&hs(e)==C},Dr.isWeakSet=function(e){return ea(e)&&"[object WeakSet]"==xn(e)},Dr.join=function(e,t){return null==e?"":Wt.call(e,t)},Dr.kebabCase=qa,Dr.last=Gs,Dr.lastIndexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var s=n;return r!==i&&(s=(s=fa(r))<0?gr(n+s,0):mr(s,n-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,s):Ut(e,Ft,s,!0)},Dr.lowerCase=Wa,Dr.lowerFirst=Ha,Dr.lt=la,Dr.lte=ua,Dr.max=function(e){return e&&e.length?fn(e,rc,Sn):i},Dr.maxBy=function(e,t){return e&&e.length?fn(e,ss(t,2),Sn):i},Dr.mean=function(e){return $t(e,rc)},Dr.meanBy=function(e,t){return $t(e,ss(t,2))},Dr.min=function(e){return e&&e.length?fn(e,rc,Nn):i},Dr.minBy=function(e,t){return e&&e.length?fn(e,ss(t,2),Nn):i},Dr.stubArray=pc,Dr.stubFalse=gc,Dr.stubObject=function(){return{}},Dr.stubString=function(){return""},Dr.stubTrue=function(){return!0},Dr.multiply=_c,Dr.nth=function(e,t){return e&&e.length?jn(e,fa(t)):i},Dr.noConflict=function(){return ht._===this&&(ht._=Ue),this},Dr.noop=ac,Dr.now=Ao,Dr.pad=function(e,t,r){e=ya(e);var n=(t=fa(t))?lr(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Fi(ft(i),r)+e+Fi(dt(i),r)},Dr.padEnd=function(e,t,r){e=ya(e);var n=(t=fa(t))?lr(e):0;return t&&n<t?e+Fi(t-n,r):e},Dr.padStart=function(e,t,r){e=ya(e);var n=(t=fa(t))?lr(e):0;return t&&n<t?Fi(t-n,r)+e:e},Dr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),br(ya(e).replace(ne,""),t||0)},Dr.random=function(e,t,r){if(r&&"boolean"!=typeof r&&ms(e,t,r)&&(t=r=i),r===i&&("boolean"==typeof t?(r=t,t=i):"boolean"==typeof e&&(r=e,e=i)),e===i&&t===i?(e=0,t=1):(e=da(e),t===i?(t=e,e=0):t=da(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var s=wr();return mr(e+s*(t-e+at("1e-"+((s+"").length-1))),t)}return Hn(e,t)},Dr.reduce=function(e,t,r){var n=qo(e)?Rt:Ht,i=arguments.length<3;return n(e,ss(t,4),r,i,un)},Dr.reduceRight=function(e,t,r){var n=qo(e)?Lt:Ht,i=arguments.length<3;return n(e,ss(t,4),r,i,hn)},Dr.repeat=function(e,t,r){return t=(r?ms(e,t,r):t===i)?1:fa(t),Vn(ya(e),t)},Dr.replace=function(){var e=arguments,t=ya(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Dr.result=function(e,t,r){var n=-1,s=(t=mi(t,e)).length;for(s||(s=1,e=i);++n<s;){var o=null==e?i:e[Ns(t[n])];o===i&&(n=s,o=r),e=Yo(o)?o.call(e):o}return e},Dr.round=Ec,Dr.runInContext=e,Dr.sample=function(e){return(qo(e)?Gr:Gn)(e)},Dr.size=function(e){if(null==e)return 0;if(Ho(e))return oa(e)?lr(e):e.length;var t=hs(e);return t==E||t==k?e.size:Ln(e).length},Dr.snakeCase=Va,Dr.some=function(e,t,r){var n=qo(e)?Nt:ti;return r&&ms(e,t,r)&&(t=i),n(e,ss(t,3))},Dr.sortedIndex=function(e,t){return ri(e,t)},Dr.sortedIndexBy=function(e,t,r){return ni(e,t,ss(r,2))},Dr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ri(e,t);if(n<r&&zo(e[n],t))return n}return-1},Dr.sortedLastIndex=function(e,t){return ri(e,t,!0)},Dr.sortedLastIndexBy=function(e,t,r){return ni(e,t,ss(r,2),!0)},Dr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=ri(e,t,!0)-1;if(zo(e[r],t))return r}return-1},Dr.startCase=Ka,Dr.startsWith=function(e,t,r){return e=ya(e),r=null==r?0:sn(fa(r),0,e.length),t=oi(t),e.slice(r,r+t.length)==t},Dr.subtract=xc,Dr.sum=function(e){return e&&e.length?Vt(e,rc):0},Dr.sumBy=function(e,t){return e&&e.length?Vt(e,ss(t,2)):0},Dr.template=function(e,t,r){var n=Dr.templateSettings;r&&ms(e,t,r)&&(t=i),e=ya(e),t=va({},t,n,Zi);var s,o,a=va({},t.imports,n.imports,Zi),c=Ca(a),l=Yt(a,c),u=0,h=t.interpolate||we,d="__p += '",f=Ae((t.escape||we).source+"|"+h.source+"|"+(h===J?he:we).source+"|"+(t.evaluate||we).source+"|$","g"),p="//# sourceURL="+(Re.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nt+"]")+"\n";e.replace(f,(function(t,r,n,i,a,c){return n||(n=i),d+=e.slice(u,c).replace(ve,rr),r&&(s=!0,d+="' +\n__e("+r+") +\n'"),a&&(o=!0,d+="';\n"+a+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=c+t.length,t})),d+="';\n";var g=Re.call(t,"variable")&&t.variable;if(g){if(le.test(g))throw new _e("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace($,""):d).replace(q,"$1").replace(W,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Ja((function(){return Ee(c,p+"return "+d).apply(i,l)}));if(m.source=d,Zo(m))throw m;return m},Dr.times=function(e,t){if((e=fa(e))<1||e>h)return[];var r=f,n=mr(e,f);t=ss(t),e-=f;for(var i=Kt(n,t);++r<e;)t(r);return i},Dr.toFinite=da,Dr.toInteger=fa,Dr.toLength=pa,Dr.toLower=function(e){return ya(e).toLowerCase()},Dr.toNumber=ga,Dr.toSafeInteger=function(e){return e?sn(fa(e),-9007199254740991,h):0===e?e:0},Dr.toString=ya,Dr.toUpper=function(e){return ya(e).toUpperCase()},Dr.trim=function(e,t,r){if((e=ya(e))&&(r||t===i))return Gt(e);if(!e||!(t=oi(t)))return e;var n=ur(e),s=ur(t);return bi(n,Xt(n,s),Qt(n,s)+1).join("")},Dr.trimEnd=function(e,t,r){if((e=ya(e))&&(r||t===i))return e.slice(0,hr(e)+1);if(!e||!(t=oi(t)))return e;var n=ur(e);return bi(n,0,Qt(n,ur(t))+1).join("")},Dr.trimStart=function(e,t,r){if((e=ya(e))&&(r||t===i))return e.replace(ne,"");if(!e||!(t=oi(t)))return e;var n=ur(e);return bi(n,Xt(n,ur(t))).join("")},Dr.truncate=function(e,t){var r=30,n="...";if(Qo(t)){var s="separator"in t?t.separator:s;r="length"in t?fa(t.length):r,n="omission"in t?oi(t.omission):n}var o=(e=ya(e)).length;if(nr(e)){var a=ur(e);o=a.length}if(r>=o)return e;var c=r-lr(n);if(c<1)return n;var l=a?bi(a,0,c).join(""):e.slice(0,c);if(s===i)return l+n;if(a&&(c+=l.length-c),ia(s)){if(e.slice(c).search(s)){var u,h=l;for(s.global||(s=Ae(s.source,ya(de.exec(s))+"g")),s.lastIndex=0;u=s.exec(h);)var d=u.index;l=l.slice(0,d===i?c:d)}}else if(e.indexOf(oi(s),c)!=c){var f=l.lastIndexOf(s);f>-1&&(l=l.slice(0,f))}return l+n},Dr.unescape=function(e){return(e=ya(e))&&K.test(e)?e.replace(H,dr):e},Dr.uniqueId=function(e){var t=++Le;return ya(e)+t},Dr.upperCase=Ga,Dr.upperFirst=Za,Dr.each=yo,Dr.eachRight=bo,Dr.first=Ws,oc(Dr,(mc={},bn(Dr,(function(e,t){Re.call(Dr.prototype,t)||(mc[t]=e)})),mc),{chain:!1}),Dr.VERSION="4.17.21",At(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Dr[e].placeholder=Dr})),At(["drop","take"],(function(e,t){Fr.prototype[e]=function(r){r=r===i?1:gr(fa(r),0);var n=this.__filtered__&&!t?new Fr(this):this.clone();return n.__filtered__?n.__takeCount__=mr(r,n.__takeCount__):n.__views__.push({size:mr(r,f),type:e+(n.__dir__<0?"Right":"")}),n},Fr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),At(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Fr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ss(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),At(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Fr.prototype[e]=function(){return this[r](1).value()[0]}})),At(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Fr.prototype[e]=function(){return this.__filtered__?new Fr(this):this[r](1)}})),Fr.prototype.compact=function(){return this.filter(rc)},Fr.prototype.find=function(e){return this.filter(e).head()},Fr.prototype.findLast=function(e){return this.reverse().find(e)},Fr.prototype.invokeMap=Kn((function(e,t){return"function"==typeof e?new Fr(this):this.map((function(r){return Tn(r,e,t)}))})),Fr.prototype.reject=function(e){return this.filter(Lo(ss(e)))},Fr.prototype.slice=function(e,t){e=fa(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Fr(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==i&&(r=(t=fa(t))<0?r.dropRight(-t):r.take(t-e)),r)},Fr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Fr.prototype.toArray=function(){return this.take(f)},bn(Fr.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),s=Dr[n?"take"+("last"==t?"Right":""):t],o=n||/^find/.test(t);s&&(Dr.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,c=t instanceof Fr,l=a[0],u=c||qo(t),h=function(e){var t=s.apply(Dr,Mt([e],a));return n&&d?t[0]:t};u&&r&&"function"==typeof l&&1!=l.length&&(c=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=o&&!d,g=c&&!f;if(!o&&u){t=g?t:new Fr(this);var m=e.apply(t,a);return m.__actions__.push({func:ho,args:[h],thisArg:i}),new jr(m,d)}return p&&g?e.apply(this,a):(m=this.thru(h),p?n?m.value()[0]:m.value():m)})})),At(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Te[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Dr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(qo(i)?i:[],e)}return this[r]((function(r){return t.apply(qo(r)?r:[],e)}))}})),bn(Fr.prototype,(function(e,t){var r=Dr[t];if(r){var n=r.name+"";Re.call(Tr,n)||(Tr[n]=[]),Tr[n].push({name:t,func:r})}})),Tr[Di(i,2).name]=[{name:"wrapper",func:i}],Fr.prototype.clone=function(){var e=new Fr(this.__wrapped__);return e.__actions__=Ii(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ii(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ii(this.__views__),e},Fr.prototype.reverse=function(){if(this.__filtered__){var e=new Fr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Fr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=qo(e),n=t<0,i=r?e.length:0,s=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var s=r[n],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=mr(t,e+o);break;case"takeRight":e=gr(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=s.start,a=s.end,c=a-o,l=n?a:o-1,u=this.__iteratees__,h=u.length,d=0,f=mr(c,this.__takeCount__);if(!r||!n&&i==c&&f==c)return hi(e,this.__actions__);var p=[];e:for(;c--&&d<f;){for(var g=-1,m=e[l+=t];++g<h;){var y=u[g],b=y.iteratee,w=y.type,v=b(m);if(2==w)m=v;else if(!v){if(1==w)continue e;break e}}p[d++]=m}return p},Dr.prototype.at=fo,Dr.prototype.chain=function(){return uo(this)},Dr.prototype.commit=function(){return new jr(this.value(),this.__chain__)},Dr.prototype.next=function(){this.__values__===i&&(this.__values__=ha(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Dr.prototype.plant=function(e){for(var t,r=this;r instanceof zr;){var n=Ds(r);n.__index__=0,n.__values__=i,t?s.__wrapped__=n:t=n;var s=n;r=r.__wrapped__}return s.__wrapped__=e,t},Dr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Fr){var t=e;return this.__actions__.length&&(t=new Fr(this)),(t=t.reverse()).__actions__.push({func:ho,args:[Xs],thisArg:i}),new jr(t,this.__chain__)}return this.thru(Xs)},Dr.prototype.toJSON=Dr.prototype.valueOf=Dr.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Dr.prototype.first=Dr.prototype.head,Ze&&(Dr.prototype[Ze]=function(){return this}),Dr}();ht._=fr,(n=function(){return fr}.call(t,r,t,e))===i||(e.exports=n)}.call(this)},3349:e=>{function t(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},4367:(e,t)=>{"use strict";var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),s=i>>8,o=255&i;s?r.push(s,o):r.push(o)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}},5606:e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var a,c=[],l=!1,u=-1;function h(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&d())}function d(){if(!l){var e=o(h);l=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||l||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},7583:(e,t,r)=>{const n=r(1333),i=r(157),s=r(7899),o=r(6756);function a(e,t,r,s,o){const a=[].slice.call(arguments,1),c=a.length,l="function"==typeof a[c-1];if(!l&&!n())throw new Error("Callback required as last argument");if(!l){if(c<1)throw new Error("Too few arguments provided");return 1===c?(r=t,t=s=void 0):2!==c||t.getContext||(s=r,r=t,t=void 0),new Promise((function(n,o){try{const o=i.create(r,s);n(e(o,t,s))}catch(e){o(e)}}))}if(c<2)throw new Error("Too few arguments provided");2===c?(o=r,r=t,t=s=void 0):3===c&&(t.getContext&&void 0===o?(o=s,s=void 0):(o=s,s=r,r=t,t=void 0));try{const n=i.create(r,s);o(null,e(n,t,s))}catch(e){o(e)}}t.create=i.create,t.toCanvas=a.bind(null,s.render),t.toDataURL=a.bind(null,s.renderToDataURL),t.toString=a.bind(null,(function(e,t,r){return o.render(e,r)}))},1333:e=>{e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},6421:(e,t,r)=>{const n=r(6886).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,r=n(e),i=145===r?26:2*Math.ceil((r-13)/(2*t-2)),s=[r-7];for(let e=1;e<t-1;e++)s[e]=s[e-1]-i;return s.push(6),s.reverse()},t.getPositions=function(e){const r=[],n=t.getRowColCoords(e),i=n.length;for(let e=0;e<i;e++)for(let t=0;t<i;t++)0===e&&0===t||0===e&&t===i-1||e===i-1&&0===t||r.push([n[e],n[t]]);return r}},1433:(e,t,r)=>{const n=r(208),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(e){this.mode=n.ALPHANUMERIC,this.data=e}s.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=45*i.indexOf(this.data[t]);r+=i.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(i.indexOf(this.data[t]),6)},e.exports=s},9899:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let r=0;r<t;r++)this.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},8820:e=>{function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,r,n){const i=e*this.size+t;this.data[i]=r,n&&(this.reservedBit[i]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},5822:(e,t,r)=>{const n=r(9049),i=r(208);function s(e){this.mode=i.BYTE,"string"==typeof e&&(e=n(e)),this.data=new Uint8Array(e)}s.getBitsLength=function(e){return 8*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)},e.exports=s},7518:(e,t,r)=>{const n=r(9953),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case n.L:return i[4*(e-1)+0];case n.M:return i[4*(e-1)+1];case n.Q:return i[4*(e-1)+2];case n.H:return i[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case n.L:return s[4*(e-1)+0];case n.M:return s[4*(e-1)+1];case n.Q:return s[4*(e-1)+2];case n.H:return s[4*(e-1)+3];default:return}}},9953:(e,t)=>{t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,r){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return r}}},7756:(e,t,r)=>{const n=r(6886).getSymbolSize;t.getPositions=function(e){const t=n(e);return[[0,0],[t-7,0],[0,t-7]]}},4565:(e,t,r)=>{const n=r(6886),i=n.getBCHDigit(1335);t.getEncodedBits=function(e,t){const r=e.bit<<3|t;let s=r<<10;for(;n.getBCHDigit(s)-i>=0;)s^=1335<<n.getBCHDigit(s)-i;return 21522^(r<<10|s)}},2731:(e,t)=>{const r=new Uint8Array(512),n=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)r[t]=e,n[e]=t,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)r[e]=r[e-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return n[e]},t.exp=function(e){return r[e]},t.mul=function(e,t){return 0===e||0===t?0:r[n[e]+n[t]]}},4861:(e,t,r)=>{const n=r(208),i=r(6886);function s(e){this.mode=n.KANJI,this.data=e}s.getBitsLength=function(e){return 13*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=i.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else{if(!(r>=57408&&r<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");r-=49472}r=192*(r>>>8&255)+(255&r),e.put(r,13)}},e.exports=s},1332:(e,t)=>{t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function r(e,r,n){switch(e){case t.Patterns.PATTERN000:return(r+n)%2==0;case t.Patterns.PATTERN001:return r%2==0;case t.Patterns.PATTERN010:return n%3==0;case t.Patterns.PATTERN011:return(r+n)%3==0;case t.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(n/3))%2==0;case t.Patterns.PATTERN101:return r*n%2+r*n%3==0;case t.Patterns.PATTERN110:return(r*n%2+r*n%3)%2==0;case t.Patterns.PATTERN111:return(r*n%3+(r+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let r=0,n=0,i=0,s=null,o=null;for(let a=0;a<t;a++){n=i=0,s=o=null;for(let c=0;c<t;c++){let t=e.get(a,c);t===s?n++:(n>=5&&(r+=n-5+3),s=t,n=1),t=e.get(c,a),t===o?i++:(i>=5&&(r+=i-5+3),o=t,i=1)}n>=5&&(r+=n-5+3),i>=5&&(r+=i-5+3)}return r},t.getPenaltyN2=function(e){const t=e.size;let r=0;for(let n=0;n<t-1;n++)for(let i=0;i<t-1;i++){const t=e.get(n,i)+e.get(n,i+1)+e.get(n+1,i)+e.get(n+1,i+1);4!==t&&0!==t||r++}return 3*r},t.getPenaltyN3=function(e){const t=e.size;let r=0,n=0,i=0;for(let s=0;s<t;s++){n=i=0;for(let o=0;o<t;o++)n=n<<1&2047|e.get(s,o),o>=10&&(1488===n||93===n)&&r++,i=i<<1&2047|e.get(o,s),o>=10&&(1488===i||93===i)&&r++}return 40*r},t.getPenaltyN4=function(e){let t=0;const r=e.data.length;for(let n=0;n<r;n++)t+=e.data[n];return 10*Math.abs(Math.ceil(100*t/r/5)-10)},t.applyMask=function(e,t){const n=t.size;for(let i=0;i<n;i++)for(let s=0;s<n;s++)t.isReserved(s,i)||t.xor(s,i,r(e,s,i))},t.getBestMask=function(e,r){const n=Object.keys(t.Patterns).length;let i=0,s=1/0;for(let o=0;o<n;o++){r(o),t.applyMask(o,e);const n=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),n<s&&(s=n,i=o)}return i}},208:(e,t,r)=>{const n=r(1878),i=r(7044);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!n.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return i.testNumeric(e)?t.NUMERIC:i.testAlphanumeric(e)?t.ALPHANUMERIC:i.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,r){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return r}}},4357:(e,t,r)=>{const n=r(208);function i(e){this.mode=n.NUMERIC,this.data=e.toString()}i.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t,r,n;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),n=parseInt(r,10),e.put(n,10);const i=this.data.length-t;i>0&&(r=this.data.substr(t),n=parseInt(r,10),e.put(n,3*i+1))},e.exports=i},4713:(e,t,r)=>{const n=r(2731);t.mul=function(e,t){const r=new Uint8Array(e.length+t.length-1);for(let i=0;i<e.length;i++)for(let s=0;s<t.length;s++)r[i+s]^=n.mul(e[i],t[s]);return r},t.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){const e=r[0];for(let i=0;i<t.length;i++)r[i]^=n.mul(t[i],e);let i=0;for(;i<r.length&&0===r[i];)i++;r=r.slice(i)}return r},t.generateECPolynomial=function(e){let r=new Uint8Array([1]);for(let i=0;i<e;i++)r=t.mul(r,new Uint8Array([1,n.exp(i)]));return r}},157:(e,t,r)=>{const n=r(6886),i=r(9953),s=r(9899),o=r(8820),a=r(6421),c=r(7756),l=r(1332),u=r(7518),h=r(4764),d=r(1427),f=r(4565),p=r(208),g=r(9801);function m(e,t,r){const n=e.size,i=f.getEncodedBits(t,r);let s,o;for(s=0;s<15;s++)o=1==(i>>s&1),s<6?e.set(s,8,o,!0):s<8?e.set(s+1,8,o,!0):e.set(n-15+s,8,o,!0),s<8?e.set(8,n-s-1,o,!0):s<9?e.set(8,15-s-1+1,o,!0):e.set(8,15-s-1,o,!0);e.set(n-8,8,1,!0)}function y(e,t,r,i){let f;if(Array.isArray(e))f=g.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let n=t;if(!n){const t=g.rawSplit(e);n=d.getBestVersionForData(t,r)}f=g.fromString(e,n||40)}}const y=d.getBestVersionForData(f,r);if(!y)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<y)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+y+".\n")}else t=y;const b=function(e,t,r){const i=new s;r.forEach((function(t){i.put(t.mode.bit,4),i.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(i)}));const o=8*(n.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(i.getLengthInBits()+4<=o&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(0);const a=(o-i.getLengthInBits())/8;for(let e=0;e<a;e++)i.put(e%2?17:236,8);return function(e,t,r){const i=n.getSymbolTotalCodewords(t),s=i-u.getTotalCodewordsCount(t,r),o=u.getBlocksCount(t,r),a=o-i%o,c=Math.floor(i/o),l=Math.floor(s/o),d=l+1,f=c-l,p=new h(f);let g=0;const m=new Array(o),y=new Array(o);let b=0;const w=new Uint8Array(e.buffer);for(let e=0;e<o;e++){const t=e<a?l:d;m[e]=w.slice(g,g+t),y[e]=p.encode(m[e]),g+=t,b=Math.max(b,t)}const v=new Uint8Array(i);let _,E,x=0;for(_=0;_<b;_++)for(E=0;E<o;E++)_<m[E].length&&(v[x++]=m[E][_]);for(_=0;_<f;_++)for(E=0;E<o;E++)v[x++]=y[E][_];return v}(i,e,t)}(t,r,f),w=n.getSymbolSize(t),v=new o(w);return function(e,t){const r=e.size,n=c.getPositions(t);for(let t=0;t<n.length;t++){const i=n[t][0],s=n[t][1];for(let t=-1;t<=7;t++)if(!(i+t<=-1||r<=i+t))for(let n=-1;n<=7;n++)s+n<=-1||r<=s+n||(t>=0&&t<=6&&(0===n||6===n)||n>=0&&n<=6&&(0===t||6===t)||t>=2&&t<=4&&n>=2&&n<=4?e.set(i+t,s+n,!0,!0):e.set(i+t,s+n,!1,!0))}}(v,t),function(e){const t=e.size;for(let r=8;r<t-8;r++){const t=r%2==0;e.set(r,6,t,!0),e.set(6,r,t,!0)}}(v),function(e,t){const r=a.getPositions(t);for(let t=0;t<r.length;t++){const n=r[t][0],i=r[t][1];for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)-2===t||2===t||-2===r||2===r||0===t&&0===r?e.set(n+t,i+r,!0,!0):e.set(n+t,i+r,!1,!0)}}(v,t),m(v,r,0),t>=7&&function(e,t){const r=e.size,n=d.getEncodedBits(t);let i,s,o;for(let t=0;t<18;t++)i=Math.floor(t/3),s=t%3+r-8-3,o=1==(n>>t&1),e.set(i,s,o,!0),e.set(s,i,o,!0)}(v,t),function(e,t){const r=e.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(6===a&&a--;;){for(let r=0;r<2;r++)if(!e.isReserved(i,a-r)){let n=!1;o<t.length&&(n=1==(t[o]>>>s&1)),e.set(i,a-r,n),s--,-1===s&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}(v,b),isNaN(i)&&(i=l.getBestMask(v,m.bind(null,v,r))),l.applyMask(i,v),m(v,r,i),{modules:v,version:t,errorCorrectionLevel:r,maskPattern:i,segments:f}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let r,s,o=i.M;return void 0!==t&&(o=i.from(t.errorCorrectionLevel,i.M),r=d.from(t.version),s=l.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),y(e,r,o,s)}},4764:(e,t,r)=>{const n=r(4713);function i(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}i.prototype.initialize=function(e){this.degree=e,this.genPoly=n.generateECPolynomial(this.degree)},i.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const r=n.mod(t,this.genPoly),i=this.degree-r.length;if(i>0){const e=new Uint8Array(this.degree);return e.set(r,i),e}return r},e.exports=i},7044:(e,t)=>{const r="[0-9]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+")(?:.|[\r\n]))+";t.KANJI=new RegExp(n,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(i,"g"),t.NUMERIC=new RegExp(r,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const s=new RegExp("^"+n+"$"),o=new RegExp("^"+r+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return s.test(e)},t.testNumeric=function(e){return o.test(e)},t.testAlphanumeric=function(e){return a.test(e)}},9801:(e,t,r)=>{const n=r(208),i=r(4357),s=r(1433),o=r(5822),a=r(4861),c=r(7044),l=r(6886),u=r(6320);function h(e){return unescape(encodeURIComponent(e)).length}function d(e,t,r){const n=[];let i;for(;null!==(i=e.exec(r));)n.push({data:i[0],index:i.index,mode:t,length:i[0].length});return n}function f(e){const t=d(c.NUMERIC,n.NUMERIC,e),r=d(c.ALPHANUMERIC,n.ALPHANUMERIC,e);let i,s;return l.isKanjiModeEnabled()?(i=d(c.BYTE,n.BYTE,e),s=d(c.KANJI,n.KANJI,e)):(i=d(c.BYTE_KANJI,n.BYTE,e),s=[]),t.concat(r,i,s).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function p(e,t){switch(t){case n.NUMERIC:return i.getBitsLength(e);case n.ALPHANUMERIC:return s.getBitsLength(e);case n.KANJI:return a.getBitsLength(e);case n.BYTE:return o.getBitsLength(e)}}function g(e,t){let r;const c=n.getBestModeForData(e);if(r=n.from(t,c),r!==n.BYTE&&r.bit<c.bit)throw new Error('"'+e+'" cannot be encoded with mode '+n.toString(r)+".\n Suggested mode is: "+n.toString(c));switch(r!==n.KANJI||l.isKanjiModeEnabled()||(r=n.BYTE),r){case n.NUMERIC:return new i(e);case n.ALPHANUMERIC:return new s(e);case n.KANJI:return new a(e);case n.BYTE:return new o(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(g(t,null)):t.data&&e.push(g(t.data,t.mode)),e}),[])},t.fromString=function(e,r){const i=function(e){const t=[];for(let r=0;r<e.length;r++){const i=e[r];switch(i.mode){case n.NUMERIC:t.push([i,{data:i.data,mode:n.ALPHANUMERIC,length:i.length},{data:i.data,mode:n.BYTE,length:i.length}]);break;case n.ALPHANUMERIC:t.push([i,{data:i.data,mode:n.BYTE,length:i.length}]);break;case n.KANJI:t.push([i,{data:i.data,mode:n.BYTE,length:h(i.data)}]);break;case n.BYTE:t.push([{data:i.data,mode:n.BYTE,length:h(i.data)}])}}return t}(f(e,l.isKanjiModeEnabled())),s=function(e,t){const r={},i={start:{}};let s=["start"];for(let o=0;o<e.length;o++){const a=e[o],c=[];for(let e=0;e<a.length;e++){const l=a[e],u=""+o+e;c.push(u),r[u]={node:l,lastCount:0},i[u]={};for(let e=0;e<s.length;e++){const o=s[e];r[o]&&r[o].node.mode===l.mode?(i[o][u]=p(r[o].lastCount+l.length,l.mode)-p(r[o].lastCount,l.mode),r[o].lastCount+=l.length):(r[o]&&(r[o].lastCount=l.length),i[o][u]=p(l.length,l.mode)+4+n.getCharCountIndicator(l.mode,t))}}s=c}for(let e=0;e<s.length;e++)i[s[e]].end=0;return{map:i,table:r}}(i,r),o=u.find_path(s.map,"start","end"),a=[];for(let e=1;e<o.length-1;e++)a.push(s.table[o[e]].node);return t.fromArray(a.reduce((function(e,t){const r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[]))},t.rawSplit=function(e){return t.fromArray(f(e,l.isKanjiModeEnabled()))}},6886:(e,t)=>{let r;const n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return n[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');r=e},t.isKanjiModeEnabled=function(){return void 0!==r},t.toSJIS=function(e){return r(e)}},1878:(e,t)=>{t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},1427:(e,t,r)=>{const n=r(6886),i=r(7518),s=r(9953),o=r(208),a=r(1878),c=n.getBCHDigit(7973);function l(e,t){return o.getCharCountIndicator(e,t)+4}function u(e,t){let r=0;return e.forEach((function(e){const n=l(e.mode,t);r+=n+e.getBitsLength()})),r}t.from=function(e,t){return a.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,r){if(!a.isValid(e))throw new Error("Invalid QR Code version");void 0===r&&(r=o.BYTE);const s=8*(n.getSymbolTotalCodewords(e)-i.getTotalCodewordsCount(e,t));if(r===o.MIXED)return s;const c=s-l(r,e);switch(r){case o.NUMERIC:return Math.floor(c/10*3);case o.ALPHANUMERIC:return Math.floor(c/11*2);case o.KANJI:return Math.floor(c/13);case o.BYTE:default:return Math.floor(c/8)}},t.getBestVersionForData=function(e,r){let n;const i=s.from(r,s.M);if(Array.isArray(e)){if(e.length>1)return function(e,r){for(let n=1;n<=40;n++)if(u(e,n)<=t.getCapacity(n,r,o.MIXED))return n}(e,i);if(0===e.length)return 1;n=e[0]}else n=e;return function(e,r,n){for(let i=1;i<=40;i++)if(r<=t.getCapacity(i,n,e))return i}(n.mode,n.getLength(),i)},t.getEncodedBits=function(e){if(!a.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;n.getBCHDigit(t)-c>=0;)t^=7973<<n.getBCHDigit(t)-c;return e<<12|t}},7899:(e,t,r)=>{const n=r(2726);t.render=function(e,t,r){let i=r,s=t;void 0!==i||t&&t.getContext||(i=t,t=void 0),t||(s=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),i=n.getOptions(i);const o=n.getImageWidth(e.modules.size,i),a=s.getContext("2d"),c=a.createImageData(o,o);return n.qrToImageData(c.data,e,i),function(e,t,r){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=r,t.width=r,t.style.height=r+"px",t.style.width=r+"px"}(a,s,o),a.putImageData(c,0,0),s},t.renderToDataURL=function(e,r,n){let i=n;void 0!==i||r&&r.getContext||(i=r,r=void 0),i||(i={});const s=t.render(e,r,i),o=i.type||"image/png",a=i.rendererOpts||{};return s.toDataURL(o,a.quality)}},6756:(e,t,r)=>{const n=r(2726);function i(e,t){const r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function s(e,t,r){let n=e+t;return void 0!==r&&(n+=" "+r),n}t.render=function(e,t,r){const o=n.getOptions(t),a=e.modules.size,c=e.modules.data,l=a+2*o.margin,u=o.color.light.a?"<path "+i(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",h="<path "+i(o.color.dark,"stroke")+' d="'+function(e,t,r){let n="",i=0,o=!1,a=0;for(let c=0;c<e.length;c++){const l=Math.floor(c%t),u=Math.floor(c/t);l||o||(o=!0),e[c]?(a++,c>0&&l>0&&e[c-1]||(n+=o?s("M",l+r,.5+u+r):s("m",i,0),i=0,o=!1),l+1<t&&e[c+1]||(n+=s("h",a),a=0)):i++}return n}(c,a,o.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+d+' shape-rendering="crispEdges">'+u+h+"</svg>\n";return"function"==typeof r&&r(null,f),f}},2726:(e,t)=>{function r(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const r=parseInt(t.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:n,scale:n?4:i,margin:t,color:{dark:r(e.color.dark||"#000000ff"),light:r(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,r){const n=t.getScale(e,r);return Math.floor((e+2*r.margin)*n)},t.qrToImageData=function(e,r,n){const i=r.modules.size,s=r.modules.data,o=t.getScale(i,n),a=Math.floor((i+2*n.margin)*o),c=n.margin*o,l=[n.color.light,n.color.dark];for(let t=0;t<a;t++)for(let r=0;r<a;r++){let u=4*(t*a+r),h=n.color.light;t>=c&&r>=c&&t<a-c&&r<a-c&&(h=l[s[Math.floor((t-c)/o)*i+Math.floor((r-c)/o)]?1:0]),e[u++]=h.r,e[u++]=h.g,e[u++]=h.b,e[u]=h.a}}},793:e=>{"use strict";function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,n){var i=n&&n.stringify||t;if("object"==typeof e&&null!==e){var s=r.length+1;if(1===s)return e;var o=new Array(s);o[0]=i(e);for(var a=1;a<s;a++)o[a]=i(r[a]);return o.join(" ")}if("string"!=typeof e)return e;var c=r.length;if(0===c)return e;for(var l="",u=0,h=-1,d=e&&e.length||0,f=0;f<d;){if(37===e.charCodeAt(f)&&f+1<d){switch(h=h>-1?h:0,e.charCodeAt(f+1)){case 100:case 102:if(u>=c)break;if(null==r[u])break;h<f&&(l+=e.slice(h,f)),l+=Number(r[u]),h=f+2,f++;break;case 105:if(u>=c)break;if(null==r[u])break;h<f&&(l+=e.slice(h,f)),l+=Math.floor(Number(r[u])),h=f+2,f++;break;case 79:case 111:case 106:if(u>=c)break;if(void 0===r[u])break;h<f&&(l+=e.slice(h,f));var p=typeof r[u];if("string"===p){l+="'"+r[u]+"'",h=f+2,f++;break}if("function"===p){l+=r[u].name||"<anonymous>",h=f+2,f++;break}l+=i(r[u]),h=f+2,f++;break;case 115:if(u>=c)break;h<f&&(l+=e.slice(h,f)),l+=String(r[u]),h=f+2,f++;break;case 37:h<f&&(l+=e.slice(h,f)),l+="%",h=f+2,f++,u--}++u}++f}return-1===h?e:(h<d&&(l+=e.slice(h)),l)}},3678:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,s),!0;case 6:return u.fn.call(u.context,t,n,i,s,o),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,i);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&l.push(a[c]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},2861:(e,t,r)=>{var n=r(8287),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},4281:(e,t)=>{"use strict";function r(e,t,r){return t<=e&&e<=r}function n(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function i(e){this.tokens=[].slice.call(e)}i.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var s=-1;function o(e,t){if(e)throw TypeError("Decoder error");return t||65533}var a="utf-8";function c(e,t){if(!(this instanceof c))return new c(e,t);if((e=void 0!==e?String(e).toLowerCase():a)!==a)throw new Error("Encoding not supported. Only utf-8 is supported");t=n(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function l(e,t){if(!(this instanceof l))return new l(e,t);if((e=void 0!==e?String(e).toLowerCase():a)!==a)throw new Error("Encoding not supported. Only utf-8 is supported");t=n(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function u(e){var t=e.fatal,n=0,i=0,a=0,c=128,l=191;this.handler=function(e,u){if(-1===u&&0!==a)return a=0,o(t);if(-1===u)return s;if(0===a){if(r(u,0,127))return u;if(r(u,194,223))a=1,n=u-192;else if(r(u,224,239))224===u&&(c=160),237===u&&(l=159),a=2,n=u-224;else{if(!r(u,240,244))return o(t);240===u&&(c=144),244===u&&(l=143),a=3,n=u-240}return n<<=6*a,null}if(!r(u,c,l))return n=a=i=0,c=128,l=191,e.prepend(u),o(t);if(c=128,l=191,n+=u-128<<6*(a-(i+=1)),i!==a)return null;var h=n;return n=a=i=0,h}}function h(e){e.fatal,this.handler=function(e,t){if(-1===t)return s;if(r(t,0,127))return t;var n,i;r(t,128,2047)?(n=1,i=192):r(t,2048,65535)?(n=2,i=224):r(t,65536,1114111)&&(n=3,i=240);for(var o=[(t>>6*n)+i];n>0;){var a=t>>6*(n-1);o.push(128|63&a),n-=1}return o}}c.prototype={decode:function(e,t){var r;r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=n(t),this._streaming||(this._decoder=new u({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var o,a=new i(r),c=[];!a.endOfStream()&&(o=this._decoder.handler(a,a.read()))!==s;)null!==o&&(Array.isArray(o)?c.push.apply(c,o):c.push(o));if(!this._streaming){do{if((o=this._decoder.handler(a,a.read()))===s)break;null!==o&&(Array.isArray(o)?c.push.apply(c,o):c.push(o))}while(!a.endOfStream());this._decoder=null}return c.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===c[0]?(this._BOMseen=!0,c.shift()):this._BOMseen=!0)),function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}(c)}},l.prototype={encode:function(e,t){e=e?String(e):"",t=n(t),this._streaming||(this._encoder=new h(this._options)),this._streaming=Boolean(t.stream);for(var r,o=[],a=new i(function(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var s=t.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===r-1)i.push(65533);else{var o=e.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=1023&s,c=1023&o;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}(e));!a.endOfStream()&&(r=this._encoder.handler(a,a.read()))!==s;)Array.isArray(r)?o.push.apply(o,r):o.push(r);if(!this._streaming){for(;(r=this._encoder.handler(a,a.read()))!==s;)Array.isArray(r)?o.push.apply(o,r):o.push(r);this._encoder=null}return new Uint8Array(o)}},t.TextEncoder=l,t.TextDecoder=c},8216:(e,t,r)=>{"use strict";!function(e){const t=e.performance;function r(e){t&&t.mark&&t.mark(e)}function n(e,r){t&&t.measure&&t.measure(e,r)}r("Zone");const i=e.__Zone_symbol_prefix||"__zone_symbol__";function s(e){return i+e}const o=!0===e[s("forceDuplicateZoneCheck")];if(e.Zone){if(o||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}class a{constructor(e,t){this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new l(this,this._parent&&this._parent._zoneDelegate,t)}static assertZonePatched(){if(e.Promise!==C.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let e=a.current;for(;e.parent;)e=e.parent;return e}static get current(){return M.zone}static get currentTask(){return R}static __load_patch(t,i,s=!1){if(C.hasOwnProperty(t)){if(!s&&o)throw Error("Already loaded patch: "+t)}else if(!e["__Zone_disable_"+t]){const s="Zone:"+t;r(s),C[t]=i(e,a,O),n(s,s)}}get parent(){return this._parent}get name(){return this._name}get(e){const t=this.getZoneWith(e);if(t)return t._properties[e]}getZoneWith(e){let t=this;for(;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null}fork(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)}wrap(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);const r=this._zoneDelegate.intercept(this,e,t),n=this;return function(){return n.runGuarded(r,this,arguments,t)}}run(e,t,r,n){M={parent:M,zone:this};try{return this._zoneDelegate.invoke(this,e,t,r,n)}finally{M=M.parent}}runGuarded(e,t=null,r,n){M={parent:M,zone:this};try{try{return this._zoneDelegate.invoke(this,e,t,r,n)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{M=M.parent}}runTask(e,t,r){if(e.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(e.zone||v).name+"; Execution: "+this.name+")");if(e.state===_&&(e.type===P||e.type===T))return;const n=e.state!=S;n&&e._transitionTo(S,x),e.runCount++;const i=R;R=e,M={parent:M,zone:this};try{e.type==T&&e.data&&!e.data.isPeriodic&&(e.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,e,t,r)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{e.state!==_&&e.state!==I&&(e.type==P||e.data&&e.data.isPeriodic?n&&e._transitionTo(x,S):(e.runCount=0,this._updateTaskCount(e,-1),n&&e._transitionTo(_,S,_))),M=M.parent,R=i}}scheduleTask(e){if(e.zone&&e.zone!==this){let t=this;for(;t;){if(t===e.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${e.zone.name}`);t=t.parent}}e._transitionTo(E,_);const t=[];e._zoneDelegates=t,e._zone=this;try{e=this._zoneDelegate.scheduleTask(this,e)}catch(t){throw e._transitionTo(I,E,_),this._zoneDelegate.handleError(this,t),t}return e._zoneDelegates===t&&this._updateTaskCount(e,1),e.state==E&&e._transitionTo(x,E),e}scheduleMicroTask(e,t,r,n){return this.scheduleTask(new u(k,e,t,r,n,void 0))}scheduleMacroTask(e,t,r,n,i){return this.scheduleTask(new u(T,e,t,r,n,i))}scheduleEventTask(e,t,r,n,i){return this.scheduleTask(new u(P,e,t,r,n,i))}cancelTask(e){if(e.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(e.zone||v).name+"; Execution: "+this.name+")");if(e.state===x||e.state===S){e._transitionTo(A,x,S);try{this._zoneDelegate.cancelTask(this,e)}catch(t){throw e._transitionTo(I,A),this._zoneDelegate.handleError(this,t),t}return this._updateTaskCount(e,-1),e._transitionTo(_,A),e.runCount=0,e}}_updateTaskCount(e,t){const r=e._zoneDelegates;-1==t&&(e._zoneDelegates=null);for(let n=0;n<r.length;n++)r[n]._updateTaskCount(e.type,t)}}a.__symbol__=s;const c={name:"",onHasTask:(e,t,r,n)=>e.hasTask(r,n),onScheduleTask:(e,t,r,n)=>e.scheduleTask(r,n),onInvokeTask:(e,t,r,n,i,s)=>e.invokeTask(r,n,i,s),onCancelTask:(e,t,r,n)=>e.cancelTask(r,n)};class l{constructor(e,t,r){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=r&&(r&&r.onFork?r:t._forkZS),this._forkDlgt=r&&(r.onFork?t:t._forkDlgt),this._forkCurrZone=r&&(r.onFork?this.zone:t._forkCurrZone),this._interceptZS=r&&(r.onIntercept?r:t._interceptZS),this._interceptDlgt=r&&(r.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=r&&(r.onIntercept?this.zone:t._interceptCurrZone),this._invokeZS=r&&(r.onInvoke?r:t._invokeZS),this._invokeDlgt=r&&(r.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=r&&(r.onInvoke?this.zone:t._invokeCurrZone),this._handleErrorZS=r&&(r.onHandleError?r:t._handleErrorZS),this._handleErrorDlgt=r&&(r.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=r&&(r.onHandleError?this.zone:t._handleErrorCurrZone),this._scheduleTaskZS=r&&(r.onScheduleTask?r:t._scheduleTaskZS),this._scheduleTaskDlgt=r&&(r.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=r&&(r.onScheduleTask?this.zone:t._scheduleTaskCurrZone),this._invokeTaskZS=r&&(r.onInvokeTask?r:t._invokeTaskZS),this._invokeTaskDlgt=r&&(r.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=r&&(r.onInvokeTask?this.zone:t._invokeTaskCurrZone),this._cancelTaskZS=r&&(r.onCancelTask?r:t._cancelTaskZS),this._cancelTaskDlgt=r&&(r.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=r&&(r.onCancelTask?this.zone:t._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const n=r&&r.onHasTask,i=t&&t._hasTaskZS;(n||i)&&(this._hasTaskZS=n?r:c,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=e,r.onScheduleTask||(this._scheduleTaskZS=c,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),r.onInvokeTask||(this._invokeTaskZS=c,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),r.onCancelTask||(this._cancelTaskZS=c,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}fork(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new a(e,t)}intercept(e,t,r){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,r):t}invoke(e,t,r,n,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,r,n,i):t.apply(r,n)}handleError(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)}scheduleTask(e,t){let r=t;if(this._scheduleTaskZS)this._hasTaskZS&&r._zoneDelegates.push(this._hasTaskDlgtOwner),r=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t),r||(r=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=k)throw new Error("Task is missing scheduleFn.");b(t)}return r}invokeTask(e,t,r,n){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,r,n):t.callback.apply(r,n)}cancelTask(e,t){let r;if(this._cancelTaskZS)r=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");r=t.cancelFn(t)}return r}hasTask(e,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)}catch(t){this.handleError(e,t)}}_updateTaskCount(e,t){const r=this._taskCounts,n=r[e],i=r[e]=n+t;if(i<0)throw new Error("More tasks executed then were scheduled.");if(0==n||0==i){const t={microTask:r.microTask>0,macroTask:r.macroTask>0,eventTask:r.eventTask>0,change:e};this.hasTask(this.zone,t)}}}class u{constructor(t,r,n,i,s,o){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=t,this.source=r,this.data=i,this.scheduleFn=s,this.cancelFn=o,!n)throw new Error("callback is not defined");this.callback=n;const a=this;t===P&&i&&i.useG?this.invoke=u.invokeTask:this.invoke=function(){return u.invokeTask.call(e,a,this,arguments)}}static invokeTask(e,t,r){e||(e=this),L++;try{return e.runCount++,e.zone.runTask(e,t,r)}finally{1==L&&w(),L--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(_,E)}_transitionTo(e,t,r){if(this._state!==t&&this._state!==r)throw new Error(`${this.type} '${this.source}': can not transition to '${e}', expecting state '${t}'${r?" or '"+r+"'":""}, was '${this._state}'.`);this._state=e,e==_&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const h=s("setTimeout"),d=s("Promise"),f=s("then");let p,g=[],m=!1;function y(t){if(p||e[d]&&(p=e[d].resolve(0)),p){let e=p[f];e||(e=p.then),e.call(p,t)}else e[h](t,0)}function b(e){0===L&&0===g.length&&y(w),e&&g.push(e)}function w(){if(!m){for(m=!0;g.length;){const e=g;g=[];for(let t=0;t<e.length;t++){const r=e[t];try{r.zone.runTask(r,null,null)}catch(e){O.onUnhandledError(e)}}}O.microtaskDrainDone(),m=!1}}const v={name:"NO ZONE"},_="notScheduled",E="scheduling",x="scheduled",S="running",A="canceling",I="unknown",k="microTask",T="macroTask",P="eventTask",C={},O={symbol:s,currentZoneFrame:()=>M,onUnhandledError:N,microtaskDrainDone:N,scheduleMicroTask:b,showUncaughtError:()=>!a[s("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:N,patchMethod:()=>N,bindArguments:()=>[],patchThen:()=>N,patchMacroTask:()=>N,patchEventPrototype:()=>N,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>N,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>N,wrapWithCurrentZone:()=>N,filterProperties:()=>[],attachOriginToPatched:()=>N,_redefineProperty:()=>N,patchCallbacks:()=>N,nativeScheduleMicroTask:y};let M={parent:null,zone:new a(null,null)},R=null,L=0;function N(){}n("Zone","Zone"),e.Zone=a}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||r.g);const n=Object.getOwnPropertyDescriptor,i=Object.defineProperty,s=Object.getPrototypeOf,o=Object.create,a=Array.prototype.slice,c="addEventListener",l="removeEventListener",u=Zone.__symbol__(c),h=Zone.__symbol__(l),d="true",f="false",p=Zone.__symbol__("");function g(e,t){return Zone.current.wrap(e,t)}function m(e,t,r,n,i){return Zone.current.scheduleMacroTask(e,t,r,n,i)}const y=Zone.__symbol__,b="undefined"!=typeof window,w=b?window:void 0,v=b&&w||"object"==typeof self&&self||r.g;function _(e,t){for(let r=e.length-1;r>=0;r--)"function"==typeof e[r]&&(e[r]=g(e[r],t+"_"+r));return e}function E(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&void 0===e.set)}const x="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,S=!("nw"in v)&&void 0!==v.process&&"[object process]"==={}.toString.call(v.process),A=!S&&!x&&!(!b||!w.HTMLElement),I=void 0!==v.process&&"[object process]"==={}.toString.call(v.process)&&!x&&!(!b||!w.HTMLElement),k={},T=function(e){if(!(e=e||v.event))return;let t=k[e.type];t||(t=k[e.type]=y("ON_PROPERTY"+e.type));const r=this||e.target||v,n=r[t];let i;if(A&&r===w&&"error"===e.type){const t=e;i=n&&n.call(this,t.message,t.filename,t.lineno,t.colno,t.error),!0===i&&e.preventDefault()}else i=n&&n.apply(this,arguments),null==i||i||e.preventDefault();return i};function P(e,t,r){let s=n(e,t);if(!s&&r&&n(r,t)&&(s={enumerable:!0,configurable:!0}),!s||!s.configurable)return;const o=y("on"+t+"patched");if(e.hasOwnProperty(o)&&e[o])return;delete s.writable,delete s.value;const a=s.get,c=s.set,l=t.slice(2);let u=k[l];u||(u=k[l]=y("ON_PROPERTY"+l)),s.set=function(t){let r=this;r||e!==v||(r=v),r&&("function"==typeof r[u]&&r.removeEventListener(l,T),c&&c.call(r,null),r[u]=t,"function"==typeof t&&r.addEventListener(l,T,!1))},s.get=function(){let r=this;if(r||e!==v||(r=v),!r)return null;const n=r[u];if(n)return n;if(a){let e=a.call(this);if(e)return s.set.call(this,e),"function"==typeof r.removeAttribute&&r.removeAttribute(t),e}return null},i(e,t,s),e[o]=!0}function C(e,t,r){if(t)for(let n=0;n<t.length;n++)P(e,"on"+t[n],r);else{const t=[];for(const r in e)"on"==r.slice(0,2)&&t.push(r);for(let n=0;n<t.length;n++)P(e,t[n],r)}}const O=y("originalInstance");function M(e){const t=v[e];if(!t)return;v[y(e)]=t,v[e]=function(){const r=_(arguments,e);switch(r.length){case 0:this[O]=new t;break;case 1:this[O]=new t(r[0]);break;case 2:this[O]=new t(r[0],r[1]);break;case 3:this[O]=new t(r[0],r[1],r[2]);break;case 4:this[O]=new t(r[0],r[1],r[2],r[3]);break;default:throw new Error("Arg list too long.")}},N(v[e],t);const r=new t((function(){}));let n;for(n in r)"XMLHttpRequest"===e&&"responseBlob"===n||function(t){"function"==typeof r[t]?v[e].prototype[t]=function(){return this[O][t].apply(this[O],arguments)}:i(v[e].prototype,t,{set:function(r){"function"==typeof r?(this[O][t]=g(r,e+"."+t),N(this[O][t],r)):this[O][t]=r},get:function(){return this[O][t]}})}(n);for(n in t)"prototype"!==n&&t.hasOwnProperty(n)&&(v[e][n]=t[n])}function R(e,t,r){let i=e;for(;i&&!i.hasOwnProperty(t);)i=s(i);!i&&e[t]&&(i=e);const o=y(t);let a=null;if(i&&(!(a=i[o])||!i.hasOwnProperty(o))&&(a=i[o]=i[t],E(i&&n(i,t)))){const e=r(a,o,t);i[t]=function(){return e(this,arguments)},N(i[t],a)}return a}function L(e,t,r){let n=null;function i(e){const t=e.data;return t.args[t.cbIdx]=function(){e.invoke.apply(this,arguments)},n.apply(t.target,t.args),e}n=R(e,t,(e=>function(t,n){const s=r(t,n);return s.cbIdx>=0&&"function"==typeof n[s.cbIdx]?m(s.name,n[s.cbIdx],s,i):e.apply(t,n)}))}function N(e,t){e[y("OriginalDelegate")]=t}let B=!1,D=!1;function U(){try{const e=w.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch(e){}return!1}function z(){if(B)return D;B=!0;try{const e=w.navigator.userAgent;-1===e.indexOf("MSIE ")&&-1===e.indexOf("Trident/")&&-1===e.indexOf("Edge/")||(D=!0)}catch(e){}return D}Zone.__load_patch("ZoneAwarePromise",((e,t,r)=>{const n=Object.getOwnPropertyDescriptor,i=Object.defineProperty,s=r.symbol,o=[],a=!0===e[s("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],c=s("Promise"),l=s("then");r.onUnhandledError=e=>{if(r.showUncaughtError()){const t=e&&e.rejection;t?console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0):console.error(e)}},r.microtaskDrainDone=()=>{for(;o.length;){const e=o.shift();try{e.zone.runGuarded((()=>{if(e.throwOriginal)throw e.rejection;throw e}))}catch(e){h(e)}}};const u=s("unhandledPromiseRejectionHandler");function h(e){r.onUnhandledError(e);try{const r=t[u];"function"==typeof r&&r.call(this,e)}catch(e){}}function d(e){return e&&e.then}function f(e){return e}function p(e){return L.reject(e)}const g=s("state"),m=s("value"),y=s("finally"),b=s("parentPromiseValue"),w=s("parentPromiseState"),v=null,_=!0,E=!1;function x(e,t){return r=>{try{k(e,t,r)}catch(t){k(e,!1,t)}}}const S=function(){let e=!1;return function(t){return function(){e||(e=!0,t.apply(null,arguments))}}},A="Promise resolved with itself",I=s("currentTaskTrace");function k(e,n,s){const c=S();if(e===s)throw new TypeError(A);if(e[g]===v){let u=null;try{"object"!=typeof s&&"function"!=typeof s||(u=s&&s.then)}catch(t){return c((()=>{k(e,!1,t)}))(),e}if(n!==E&&s instanceof L&&s.hasOwnProperty(g)&&s.hasOwnProperty(m)&&s[g]!==v)P(s),k(e,s[g],s[m]);else if(n!==E&&"function"==typeof u)try{u.call(s,c(x(e,n)),c(x(e,!1)))}catch(t){c((()=>{k(e,!1,t)}))()}else{e[g]=n;const c=e[m];if(e[m]=s,e[y]===y&&n===_&&(e[g]=e[w],e[m]=e[b]),n===E&&s instanceof Error){const e=t.currentTask&&t.currentTask.data&&t.currentTask.data.__creationTrace__;e&&i(s,I,{configurable:!0,enumerable:!1,writable:!0,value:e})}for(let t=0;t<c.length;)C(e,c[t++],c[t++],c[t++],c[t++]);if(0==c.length&&n==E){e[g]=0;let n=s;try{throw new Error("Uncaught (in promise): "+((l=s)&&l.toString===Object.prototype.toString?(l.constructor&&l.constructor.name||"")+": "+JSON.stringify(l):l?l.toString():Object.prototype.toString.call(l))+(s&&s.stack?"\n"+s.stack:""))}catch(e){n=e}a&&(n.throwOriginal=!0),n.rejection=s,n.promise=e,n.zone=t.current,n.task=t.currentTask,o.push(n),r.scheduleMicroTask()}}}var l;return e}const T=s("rejectionHandledHandler");function P(e){if(0===e[g]){try{const r=t[T];r&&"function"==typeof r&&r.call(this,{rejection:e[m],promise:e})}catch(e){}e[g]=E;for(let t=0;t<o.length;t++)e===o[t].promise&&o.splice(t,1)}}function C(e,t,r,n,i){P(e);const s=e[g],o=s?"function"==typeof n?n:f:"function"==typeof i?i:p;t.scheduleMicroTask("Promise.then",(()=>{try{const n=e[m],i=!!r&&y===r[y];i&&(r[b]=n,r[w]=s);const a=t.run(o,void 0,i&&o!==p&&o!==f?[]:[n]);k(r,!0,a)}catch(e){k(r,!1,e)}}),r)}const O=function(){},M=e.AggregateError;class L{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(e){return k(new this(null),_,e)}static reject(e){return k(new this(null),E,e)}static any(e){if(!e||"function"!=typeof e[Symbol.iterator])return Promise.reject(new M([],"All promises were rejected"));const t=[];let r=0;try{for(let n of e)r++,t.push(L.resolve(n))}catch(e){return Promise.reject(new M([],"All promises were rejected"))}if(0===r)return Promise.reject(new M([],"All promises were rejected"));let n=!1;const i=[];return new L(((e,s)=>{for(let o=0;o<t.length;o++)t[o].then((t=>{n||(n=!0,e(t))}),(e=>{i.push(e),r--,0===r&&(n=!0,s(new M(i,"All promises were rejected")))}))}))}static race(e){let t,r,n=new this(((e,n)=>{t=e,r=n}));function i(e){t(e)}function s(e){r(e)}for(let t of e)d(t)||(t=this.resolve(t)),t.then(i,s);return n}static all(e){return L.allWithCallback(e)}static allSettled(e){return(this&&this.prototype instanceof L?this:L).allWithCallback(e,{thenCallback:e=>({status:"fulfilled",value:e}),errorCallback:e=>({status:"rejected",reason:e})})}static allWithCallback(e,t){let r,n,i=new this(((e,t)=>{r=e,n=t})),s=2,o=0;const a=[];for(let i of e){d(i)||(i=this.resolve(i));const e=o;try{i.then((n=>{a[e]=t?t.thenCallback(n):n,s--,0===s&&r(a)}),(i=>{t?(a[e]=t.errorCallback(i),s--,0===s&&r(a)):n(i)}))}catch(e){n(e)}s++,o++}return s-=2,0===s&&r(a),i}constructor(e){const t=this;if(!(t instanceof L))throw new Error("Must be an instanceof Promise.");t[g]=v,t[m]=[];try{const r=S();e&&e(r(x(t,_)),r(x(t,E)))}catch(e){k(t,!1,e)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return L}then(e,r){var n;let i=null===(n=this.constructor)||void 0===n?void 0:n[Symbol.species];i&&"function"==typeof i||(i=this.constructor||L);const s=new i(O),o=t.current;return this[g]==v?this[m].push(o,s,e,r):C(this,o,s,e,r),s}catch(e){return this.then(null,e)}finally(e){var r;let n=null===(r=this.constructor)||void 0===r?void 0:r[Symbol.species];n&&"function"==typeof n||(n=L);const i=new n(O);i[y]=y;const s=t.current;return this[g]==v?this[m].push(s,i,e,e):C(this,s,i,e,e),i}}L.resolve=L.resolve,L.reject=L.reject,L.race=L.race,L.all=L.all;const N=e[c]=e.Promise;e.Promise=L;const B=s("thenPatched");function D(e){const t=e.prototype,r=n(t,"then");if(r&&(!1===r.writable||!r.configurable))return;const i=t.then;t[l]=i,e.prototype.then=function(e,t){return new L(((e,t)=>{i.call(this,e,t)})).then(e,t)},e[B]=!0}return r.patchThen=D,N&&(D(N),R(e,"fetch",(e=>{return t=e,function(e,r){let n=t.apply(e,r);if(n instanceof L)return n;let i=n.constructor;return i[B]||D(i),n};var t}))),Promise[t.__symbol__("uncaughtPromiseErrors")]=o,L})),Zone.__load_patch("toString",(e=>{const t=Function.prototype.toString,r=y("OriginalDelegate"),n=y("Promise"),i=y("Error"),s=function(){if("function"==typeof this){const s=this[r];if(s)return"function"==typeof s?t.call(s):Object.prototype.toString.call(s);if(this===Promise){const r=e[n];if(r)return t.call(r)}if(this===Error){const r=e[i];if(r)return t.call(r)}}return t.call(this)};s[r]=t,Function.prototype.toString=s;const o=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":o.call(this)}}));let j=!1;if("undefined"!=typeof window)try{const e=Object.defineProperty({},"passive",{get:function(){j=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){j=!1}const F={useG:!0},$={},q={},W=new RegExp("^"+p+"(\\w+)(true|false)$"),H=y("propagationStopped");function V(e,t){const r=(t?t(e):e)+f,n=(t?t(e):e)+d,i=p+r,s=p+n;$[e]={},$[e][f]=i,$[e][d]=s}function K(e,t,r,n){const i=n&&n.add||c,o=n&&n.rm||l,a=n&&n.listeners||"eventListeners",u=n&&n.rmAll||"removeAllListeners",h=y(i),g="."+i+":",m="prependListener",b="."+m+":",w=function(e,t,r){if(e.isRemoved)return;const n=e.callback;let i;"object"==typeof n&&n.handleEvent&&(e.callback=e=>n.handleEvent(e),e.originalDelegate=n);try{e.invoke(e,t,[r])}catch(e){i=e}const s=e.options;if(s&&"object"==typeof s&&s.once){const n=e.originalDelegate?e.originalDelegate:e.callback;t[o].call(t,r.type,n,s)}return i};function v(r,n,i){if(!(n=n||e.event))return;const s=r||n.target||e,o=s[$[n.type][i?d:f]];if(o){const e=[];if(1===o.length){const t=w(o[0],s,n);t&&e.push(t)}else{const t=o.slice();for(let r=0;r<t.length&&(!n||!0!==n[H]);r++){const i=w(t[r],s,n);i&&e.push(i)}}if(1===e.length)throw e[0];for(let r=0;r<e.length;r++){const n=e[r];t.nativeScheduleMicroTask((()=>{throw n}))}}}const _=function(e){return v(this,e,!1)},E=function(e){return v(this,e,!0)};function x(t,r){if(!t)return!1;let n=!0;r&&void 0!==r.useG&&(n=r.useG);const c=r&&r.vh;let l=!0;r&&void 0!==r.chkDup&&(l=r.chkDup);let w=!1;r&&void 0!==r.rt&&(w=r.rt);let v=t;for(;v&&!v.hasOwnProperty(i);)v=s(v);if(!v&&t[i]&&(v=t),!v)return!1;if(v[h])return!1;const x=r&&r.eventNameToString,A={},I=v[h]=v[i],k=v[y(o)]=v[o],T=v[y(a)]=v[a],P=v[y(u)]=v[u];let C;r&&r.prepend&&(C=v[y(r.prepend)]=v[r.prepend]);const O=n?function(e){if(!A.isExisting)return I.call(A.target,A.eventName,A.capture?E:_,A.options)}:function(e){return I.call(A.target,A.eventName,e.invoke,A.options)},M=n?function(e){if(!e.isRemoved){const t=$[e.eventName];let r;t&&(r=t[e.capture?d:f]);const n=r&&e.target[r];if(n)for(let t=0;t<n.length;t++)if(n[t]===e){n.splice(t,1),e.isRemoved=!0,0===n.length&&(e.allRemoved=!0,e.target[r]=null);break}}if(e.allRemoved)return k.call(e.target,e.eventName,e.capture?E:_,e.options)}:function(e){return k.call(e.target,e.eventName,e.invoke,e.options)},R=r&&r.diff?r.diff:function(e,t){const r=typeof t;return"function"===r&&e.callback===t||"object"===r&&e.originalDelegate===t},L=Zone[y("UNPATCHED_EVENTS")],B=e[y("PASSIVE_EVENTS")],D=function(t,i,s,o,a=!1,u=!1){return function(){const h=this||e;let p=arguments[0];r&&r.transferEventName&&(p=r.transferEventName(p));let g=arguments[1];if(!g)return t.apply(this,arguments);if(S&&"uncaughtException"===p)return t.apply(this,arguments);let m=!1;if("function"!=typeof g){if(!g.handleEvent)return t.apply(this,arguments);m=!0}if(c&&!c(t,g,h,arguments))return;const y=j&&!!B&&-1!==B.indexOf(p),b=function(e,t){return!j&&"object"==typeof e&&e?!!e.capture:j&&t?"boolean"==typeof e?{capture:e,passive:!0}:e?"object"==typeof e&&!1!==e.passive?Object.assign(Object.assign({},e),{passive:!0}):e:{passive:!0}:e}(arguments[2],y);if(L)for(let e=0;e<L.length;e++)if(p===L[e])return y?t.call(h,p,g,b):t.apply(this,arguments);const w=!!b&&("boolean"==typeof b||b.capture),v=!(!b||"object"!=typeof b)&&b.once,_=Zone.current;let E=$[p];E||(V(p,x),E=$[p]);const I=E[w?d:f];let k,T=h[I],P=!1;if(T){if(P=!0,l)for(let e=0;e<T.length;e++)if(R(T[e],g))return}else T=h[I]=[];const C=h.constructor.name,O=q[C];O&&(k=O[p]),k||(k=C+i+(x?x(p):p)),A.options=b,v&&(A.options.once=!1),A.target=h,A.capture=w,A.eventName=p,A.isExisting=P;const M=n?F:void 0;M&&(M.taskData=A);const N=_.scheduleEventTask(k,g,M,s,o);return A.target=null,M&&(M.taskData=null),v&&(b.once=!0),(j||"boolean"!=typeof N.options)&&(N.options=b),N.target=h,N.capture=w,N.eventName=p,m&&(N.originalDelegate=g),u?T.unshift(N):T.push(N),a?h:void 0}};return v[i]=D(I,g,O,M,w),C&&(v[m]=D(C,b,(function(e){return C.call(A.target,A.eventName,e.invoke,A.options)}),M,w,!0)),v[o]=function(){const t=this||e;let n=arguments[0];r&&r.transferEventName&&(n=r.transferEventName(n));const i=arguments[2],s=!!i&&("boolean"==typeof i||i.capture),o=arguments[1];if(!o)return k.apply(this,arguments);if(c&&!c(k,o,t,arguments))return;const a=$[n];let l;a&&(l=a[s?d:f]);const u=l&&t[l];if(u)for(let e=0;e<u.length;e++){const r=u[e];if(R(r,o))return u.splice(e,1),r.isRemoved=!0,0===u.length&&(r.allRemoved=!0,t[l]=null,"string"==typeof n)&&(t[p+"ON_PROPERTY"+n]=null),r.zone.cancelTask(r),w?t:void 0}return k.apply(this,arguments)},v[a]=function(){const t=this||e;let n=arguments[0];r&&r.transferEventName&&(n=r.transferEventName(n));const i=[],s=G(t,x?x(n):n);for(let e=0;e<s.length;e++){const t=s[e];let r=t.originalDelegate?t.originalDelegate:t.callback;i.push(r)}return i},v[u]=function(){const t=this||e;let n=arguments[0];if(n){r&&r.transferEventName&&(n=r.transferEventName(n));const e=$[n];if(e){const r=e[f],i=e[d],s=t[r],a=t[i];if(s){const e=s.slice();for(let t=0;t<e.length;t++){const r=e[t];let i=r.originalDelegate?r.originalDelegate:r.callback;this[o].call(this,n,i,r.options)}}if(a){const e=a.slice();for(let t=0;t<e.length;t++){const r=e[t];let i=r.originalDelegate?r.originalDelegate:r.callback;this[o].call(this,n,i,r.options)}}}}else{const e=Object.keys(t);for(let t=0;t<e.length;t++){const r=e[t],n=W.exec(r);let i=n&&n[1];i&&"removeListener"!==i&&this[u].call(this,i)}this[u].call(this,"removeListener")}if(w)return this},N(v[i],I),N(v[o],k),P&&N(v[u],P),T&&N(v[a],T),!0}let A=[];for(let e=0;e<r.length;e++)A[e]=x(r[e],n);return A}function G(e,t){if(!t){const r=[];for(let n in e){const i=W.exec(n);let s=i&&i[1];if(s&&(!t||s===t)){const t=e[n];if(t)for(let e=0;e<t.length;e++)r.push(t[e])}}return r}let r=$[t];r||(V(t),r=$[t]);const n=e[r[f]],i=e[r[d]];return n?i?n.concat(i):n.slice():i?i.slice():[]}function Z(e,t){const r=e.Event;r&&r.prototype&&t.patchMethod(r.prototype,"stopImmediatePropagation",(e=>function(t,r){t[H]=!0,e&&e.apply(t,r)}))}function Y(e,t,r,n,i){const s=Zone.__symbol__(n);if(t[s])return;const o=t[s]=t[n];t[n]=function(s,a,c){return a&&a.prototype&&i.forEach((function(t){const i=`${r}.${n}::`+t,s=a.prototype;try{if(s.hasOwnProperty(t)){const r=e.ObjectGetOwnPropertyDescriptor(s,t);r&&r.value?(r.value=e.wrapWithCurrentZone(r.value,i),e._redefineProperty(a.prototype,t,r)):s[t]&&(s[t]=e.wrapWithCurrentZone(s[t],i))}else s[t]&&(s[t]=e.wrapWithCurrentZone(s[t],i))}catch(e){}})),o.call(t,s,a,c)},e.attachOriginToPatched(t[n],o)}function J(e,t,r){if(!r||0===r.length)return t;const n=r.filter((t=>t.target===e));if(!n||0===n.length)return t;const i=n[0].ignoreProperties;return t.filter((e=>-1===i.indexOf(e)))}function X(e,t,r,n){e&&C(e,J(e,t,r),n)}function Q(e){return Object.getOwnPropertyNames(e).filter((e=>e.startsWith("on")&&e.length>2)).map((e=>e.substring(2)))}function ee(e,t){if(S&&!I)return;if(Zone[e.symbol("patchEvents")])return;const r=t.__Zone_ignore_on_properties;let n=[];if(A){const e=window;n=n.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const t=U()?[{target:e,ignoreProperties:["error"]}]:[];X(e,Q(e),r?r.concat(t):r,s(e))}n=n.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let e=0;e<n.length;e++){const i=t[n[e]];i&&i.prototype&&X(i.prototype,Q(i.prototype),r)}}Zone.__load_patch("util",((e,t,r)=>{const s=Q(e);r.patchOnProperties=C,r.patchMethod=R,r.bindArguments=_,r.patchMacroTask=L;const u=t.__symbol__("BLACK_LISTED_EVENTS"),h=t.__symbol__("UNPATCHED_EVENTS");e[h]&&(e[u]=e[h]),e[u]&&(t[u]=t[h]=e[u]),r.patchEventPrototype=Z,r.patchEventTarget=K,r.isIEOrEdge=z,r.ObjectDefineProperty=i,r.ObjectGetOwnPropertyDescriptor=n,r.ObjectCreate=o,r.ArraySlice=a,r.patchClass=M,r.wrapWithCurrentZone=g,r.filterProperties=J,r.attachOriginToPatched=N,r._redefineProperty=Object.defineProperty,r.patchCallbacks=Y,r.getGlobalObjects=()=>({globalSources:q,zoneSymbolEventNames:$,eventNames:s,isBrowser:A,isMix:I,isNode:S,TRUE_STR:d,FALSE_STR:f,ZONE_SYMBOL_PREFIX:p,ADD_EVENT_LISTENER_STR:c,REMOVE_EVENT_LISTENER_STR:l})}));const te=y("zoneTask");function re(e,t,r,n){let i=null,s=null;r+=n;const o={};function a(t){const r=t.data;return r.args[0]=function(){return t.invoke.apply(this,arguments)},r.handleId=i.apply(e,r.args),t}function c(t){return s.call(e,t.data.handleId)}i=R(e,t+=n,(r=>function(i,s){if("function"==typeof s[0]){const e={isPeriodic:"Interval"===n,delay:"Timeout"===n||"Interval"===n?s[1]||0:void 0,args:s},r=s[0];s[0]=function(){try{return r.apply(this,arguments)}finally{e.isPeriodic||("number"==typeof e.handleId?delete o[e.handleId]:e.handleId&&(e.handleId[te]=null))}};const i=m(t,s[0],e,a,c);if(!i)return i;const l=i.data.handleId;return"number"==typeof l?o[l]=i:l&&(l[te]=i),l&&l.ref&&l.unref&&"function"==typeof l.ref&&"function"==typeof l.unref&&(i.ref=l.ref.bind(l),i.unref=l.unref.bind(l)),"number"==typeof l||l?l:i}return r.apply(e,s)})),s=R(e,r,(t=>function(r,n){const i=n[0];let s;"number"==typeof i?s=o[i]:(s=i&&i[te],s||(s=i)),s&&"string"==typeof s.type?"notScheduled"!==s.state&&(s.cancelFn&&s.data.isPeriodic||0===s.runCount)&&("number"==typeof i?delete o[i]:i&&(i[te]=null),s.zone.cancelTask(s)):t.apply(e,n)}))}function ne(e,t){if(Zone[t.symbol("patchEventTarget")])return;const{eventNames:r,zoneSymbolEventNames:n,TRUE_STR:i,FALSE_STR:s,ZONE_SYMBOL_PREFIX:o}=t.getGlobalObjects();for(let e=0;e<r.length;e++){const t=r[e],a=o+(t+s),c=o+(t+i);n[t]={},n[t][s]=a,n[t][i]=c}const a=e.EventTarget;return a&&a.prototype?(t.patchEventTarget(e,t,[a&&a.prototype]),!0):void 0}Zone.__load_patch("legacy",(e=>{const t=e[Zone.__symbol__("legacyPatch")];t&&t()})),Zone.__load_patch("queueMicrotask",((e,t,r)=>{r.patchMethod(e,"queueMicrotask",(e=>function(e,r){t.current.scheduleMicroTask("queueMicrotask",r[0])}))})),Zone.__load_patch("timers",(e=>{const t="set",r="clear";re(e,t,r,"Timeout"),re(e,t,r,"Interval"),re(e,t,r,"Immediate")})),Zone.__load_patch("requestAnimationFrame",(e=>{re(e,"request","cancel","AnimationFrame"),re(e,"mozRequest","mozCancel","AnimationFrame"),re(e,"webkitRequest","webkitCancel","AnimationFrame")})),Zone.__load_patch("blocking",((e,t)=>{const r=["alert","prompt","confirm"];for(let n=0;n<r.length;n++)R(e,r[n],((r,n,i)=>function(n,s){return t.current.run(r,e,s,i)}))})),Zone.__load_patch("EventTarget",((e,t,r)=>{!function(e,t){t.patchEventPrototype(e,t)}(e,r),ne(e,r);const n=e.XMLHttpRequestEventTarget;n&&n.prototype&&r.patchEventTarget(e,r,[n.prototype])})),Zone.__load_patch("MutationObserver",((e,t,r)=>{M("MutationObserver"),M("WebKitMutationObserver")})),Zone.__load_patch("IntersectionObserver",((e,t,r)=>{M("IntersectionObserver")})),Zone.__load_patch("FileReader",((e,t,r)=>{M("FileReader")})),Zone.__load_patch("on_property",((e,t,r)=>{ee(r,e)})),Zone.__load_patch("customElements",((e,t,r)=>{!function(e,t){const{isBrowser:r,isMix:n}=t.getGlobalObjects();(r||n)&&e.customElements&&"customElements"in e&&t.patchCallbacks(t,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e,r)})),Zone.__load_patch("XHR",((e,t)=>{!function(e){const c=e.XMLHttpRequest;if(!c)return;const l=c.prototype;let d=l[u],f=l[h];if(!d){const t=e.XMLHttpRequestEventTarget;if(t){const e=t.prototype;d=e[u],f=e[h]}}const p="readystatechange",g="scheduled";function b(e){const n=e.data,o=n.target;o[s]=!1,o[a]=!1;const c=o[i];d||(d=o[u],f=o[h]),c&&f.call(o,p,c);const l=o[i]=()=>{if(o.readyState===o.DONE)if(!n.aborted&&o[s]&&e.state===g){const r=o[t.__symbol__("loadfalse")];if(0!==o.status&&r&&r.length>0){const i=e.invoke;e.invoke=function(){const r=o[t.__symbol__("loadfalse")];for(let t=0;t<r.length;t++)r[t]===e&&r.splice(t,1);n.aborted||e.state!==g||i.call(e)},r.push(e)}else e.invoke()}else n.aborted||!1!==o[s]||(o[a]=!0)};return d.call(o,p,l),o[r]||(o[r]=e),S.apply(o,n.args),o[s]=!0,e}function w(){}function v(e){const t=e.data;return t.aborted=!0,A.apply(t.target,t.args)}const _=R(l,"open",(()=>function(e,t){return e[n]=0==t[2],e[o]=t[1],_.apply(e,t)})),E=y("fetchTaskAborting"),x=y("fetchTaskScheduling"),S=R(l,"send",(()=>function(e,r){if(!0===t.current[x])return S.apply(e,r);if(e[n])return S.apply(e,r);{const t={target:e,url:e[o],isPeriodic:!1,args:r,aborted:!1},n=m("XMLHttpRequest.send",w,t,b,v);e&&!0===e[a]&&!t.aborted&&n.state===g&&n.invoke()}})),A=R(l,"abort",(()=>function(e,n){const i=e[r];if(i&&"string"==typeof i.type){if(null==i.cancelFn||i.data&&i.data.aborted)return;i.zone.cancelTask(i)}else if(!0===t.current[E])return A.apply(e,n)}))}(e);const r=y("xhrTask"),n=y("xhrSync"),i=y("xhrListener"),s=y("xhrScheduled"),o=y("xhrURL"),a=y("xhrErrorBeforeScheduled")})),Zone.__load_patch("geolocation",(e=>{e.navigator&&e.navigator.geolocation&&function(e,t){const r=e.constructor.name;for(let i=0;i<t.length;i++){const s=t[i],o=e[s];if(o){if(!E(n(e,s)))continue;e[s]=(e=>{const t=function(){return e.apply(this,_(arguments,r+"."+s))};return N(t,e),t})(o)}}}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])})),Zone.__load_patch("PromiseRejectionEvent",((e,t)=>{function r(t){return function(r){G(e,t).forEach((n=>{const i=e.PromiseRejectionEvent;if(i){const e=new i(t,{promise:r.promise,reason:r.rejection});n.invoke(e)}}))}}e.PromiseRejectionEvent&&(t[y("unhandledPromiseRejectionHandler")]=r("unhandledrejection"),t[y("rejectionHandledHandler")]=r("rejectionhandled"))}))},9432:()=>{},9895:()=>{},7790:()=>{},3776:()=>{},2978:(e,t,r)=>{const n=r(4548);function i(e){return e.startsWith("int[")?"int256"+e.slice(3):"int"===e?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):"uint"===e?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):"fixed"===e?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):"ufixed"===e?"ufixed128x128":e}function s(e){return Number.parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function o(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[Number.parseInt(t[1],10),Number.parseInt(t[2],10)]}function a(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?""===t[2]?"dynamic":Number.parseInt(t[2],10):null}function c(e){var t=typeof e;if("string"===t||"number"===t)return BigInt(e);if("bigint"===t)return e;throw new Error("Argument is not a number")}function l(e,t){var r,i,u,h;if("address"===e)return l("uint160",c(t));if("bool"===e)return l("uint8",t?1:0);if("string"===e)return l("bytes",new Buffer(t,"utf8"));if(function(e){return e.lastIndexOf("]")===e.length-1}(e)){if(void 0===t.length)throw new Error("Not an array?");if("dynamic"!==(r=a(e))&&0!==r&&t.length>r)throw new Error("Elements exceed array size: "+r);for(h in u=[],e=e.slice(0,e.lastIndexOf("[")),"string"==typeof t&&(t=JSON.parse(t)),t)u.push(l(e,t[h]));if("dynamic"===r){var d=l("uint256",t.length);u.unshift(d)}return Buffer.concat(u)}if("bytes"===e)return t=new Buffer(t),u=Buffer.concat([l("uint256",t.length),t]),t.length%32!=0&&(u=Buffer.concat([u,n.zeros(32-t.length%32)])),u;if(e.startsWith("bytes")){if((r=s(e))<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return n.setLengthRight(t,32)}if(e.startsWith("uint")){if((r=s(e))%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);i=c(t);const o=n.bitLengthFromBigInt(i);if(o>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+o);if(i<0)throw new Error("Supplied uint is negative");return n.bufferBEFromBigInt(i,32)}if(e.startsWith("int")){if((r=s(e))%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);i=c(t);const o=n.bitLengthFromBigInt(i);if(o>r)throw new Error("Supplied int exceeds width: "+r+" vs "+o);const a=n.twosFromBigInt(i,256);return n.bufferBEFromBigInt(a,32)}if(e.startsWith("ufixed")){if(r=o(e),(i=c(t))<0)throw new Error("Supplied ufixed is negative");return l("uint256",i*BigInt(2)**BigInt(r[1]))}if(e.startsWith("fixed"))return r=o(e),l("int256",c(t)*BigInt(2)**BigInt(r[1]));throw new Error("Unsupported or invalid type: "+e)}function u(e){return"string"===e||"bytes"===e||"dynamic"===a(e)}function h(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r,o,a=[],l=0;l<e.length;l++){var u=i(e[l]),h=t[l];if("bytes"===u)a.push(h);else if("string"===u)a.push(new Buffer(h,"utf8"));else if("bool"===u)a.push(new Buffer(h?"01":"00","hex"));else if("address"===u)a.push(n.setLength(h,20));else if(u.startsWith("bytes")){if((r=s(u))<1||r>32)throw new Error("Invalid bytes<N> width: "+r);a.push(n.setLengthRight(h,r))}else if(u.startsWith("uint")){if((r=s(u))%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);o=c(h);const e=n.bitLengthFromBigInt(o);if(e>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+e);a.push(n.bufferBEFromBigInt(o,r/8))}else{if(!u.startsWith("int"))throw new Error("Unsupported or invalid type: "+u);{if((r=s(u))%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);o=c(h);const e=n.bitLengthFromBigInt(o);if(e>r)throw new Error("Supplied int exceeds width: "+r+" vs "+e);const t=n.twosFromBigInt(o,r);a.push(n.bufferBEFromBigInt(t,r/8))}}}return Buffer.concat(a)}e.exports={rawEncode:function(e,t){var r=[],n=[],s=32*e.length;for(var o in e){var a=i(e[o]),c=l(a,t[o]);u(a)?(r.push(l("uint256",s)),n.push(c),s+=c.length):r.push(c)}return Buffer.concat(r.concat(n))},solidityPack:h,soliditySHA3:function(e,t){return n.keccak(h(e,t))}}},6532:(e,t,r)=>{const n=r(4548),i=r(2978),s={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},o={encodeData(e,t,r,s=!0){const o=["bytes32"],a=[this.hashType(e,r)];if(s){const c=(e,t,o)=>{if(void 0!==r[t])return["bytes32",null==o?"0x0000000000000000000000000000000000000000000000000000000000000000":n.keccak(this.encodeData(t,o,r,s))];if(void 0===o)throw new Error(`missing value for field ${e} of type ${t}`);if("bytes"===t)return["bytes32",n.keccak(o)];if("string"===t)return"string"==typeof o&&(o=Buffer.from(o,"utf8")),["bytes32",n.keccak(o)];if(t.lastIndexOf("]")===t.length-1){const r=t.slice(0,t.lastIndexOf("[")),s=o.map((t=>c(e,r,t)));return["bytes32",n.keccak(i.rawEncode(s.map((([e])=>e)),s.map((([,e])=>e))))]}return[t,o]};for(const n of r[e]){const[e,r]=c(n.name,n.type,t[n.name]);o.push(e),a.push(r)}}else for(const i of r[e]){let e=t[i.name];if(void 0!==e)if("bytes"===i.type)o.push("bytes32"),e=n.keccak(e),a.push(e);else if("string"===i.type)o.push("bytes32"),"string"==typeof e&&(e=Buffer.from(e,"utf8")),e=n.keccak(e),a.push(e);else if(void 0!==r[i.type])o.push("bytes32"),e=n.keccak(this.encodeData(i.type,e,r,s)),a.push(e);else{if(i.type.lastIndexOf("]")===i.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");o.push(i.type),a.push(e)}}return i.rawEncode(o,a)},encodeType(e,t){let r="",n=this.findTypeDependencies(e,t).filter((t=>t!==e));n=[e].concat(n.sort());for(const e of n){if(!t[e])throw new Error("No type definition specified: "+e);r+=e+"("+t[e].map((({name:e,type:t})=>t+" "+e)).join(",")+")"}return r},findTypeDependencies(e,t,r=[]){if(e=e.match(/^\w*/)[0],r.includes(e)||void 0===t[e])return r;r.push(e);for(const n of t[e])for(const e of this.findTypeDependencies(n.type,t,r))!r.includes(e)&&r.push(e);return r},hashStruct(e,t,r,i=!0){return n.keccak(this.encodeData(e,t,r,i))},hashType(e,t){return n.keccak(this.encodeType(e,t))},sanitizeData(e){const t={};for(const r in s.properties)e[r]&&(t[r]=e[r]);return t.types&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},hash(e,t=!0){const r=this.sanitizeData(e),i=[Buffer.from("1901","hex")];return i.push(this.hashStruct("EIP712Domain",r.domain,r.types,t)),"EIP712Domain"!==r.primaryType&&i.push(this.hashStruct(r.primaryType,r.message,r.types,t)),n.keccak(Buffer.concat(i))}};e.exports={TYPED_MESSAGE_SCHEMA:s,TypedDataUtils:o,hashForSignTypedDataLegacy:function(e){return function(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!e.length)throw t;const r=e.map((function(e){return"bytes"===e.type?n.toBuffer(e.value):e.value})),s=e.map((function(e){return e.type})),o=e.map((function(e){if(!e.name)throw t;return e.type+" "+e.name}));return i.soliditySHA3(["bytes32","bytes32"],[i.soliditySHA3(new Array(e.length).fill("string"),o),i.soliditySHA3(s,r)])}(e.data)},hashForSignTypedData_v3:function(e){return o.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return o.hash(e.data)}}},4548:(e,t,r)=>{const{keccak_256:n}=r(2955);function i(e){return Buffer.allocUnsafe(e).fill(0)}function s(e,t){let r=e.toString(16);r.length%2!=0&&(r="0"+r);const n=r.match(/.{1,2}/g).map((e=>parseInt(e,16)));for(;n.length<t;)n.unshift(0);return Buffer.from(n)}function o(e,t,r){const n=i(t);return e=a(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)}function a(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if("string"==typeof e)e=c(e)?Buffer.from((t=l(e)).length%2?"0"+t:t,"hex"):Buffer.from(e);else if("number"==typeof e)e=intToBuffer(e);else if(null==e)e=Buffer.allocUnsafe(0);else if("bigint"==typeof e)e=s(e);else{if(!e.toArray)throw new Error("invalid type");e=Buffer.from(e.toArray())}var t;return e}function c(e){return"string"==typeof e&&e.match(/^0x[0-9A-Fa-f]*$/)}function l(e){return"string"==typeof e&&e.startsWith("0x")?e.slice(2):e}e.exports={zeros:i,setLength:o,setLengthRight:function(e,t){return o(e,t,!0)},isHexString:c,stripHexPrefix:l,toBuffer:a,bufferToHex:function(e){return"0x"+(e=a(e)).toString("hex")},keccak:function(e,t){if(e=a(e),t||(t=256),256!==t)throw new Error("unsupported");return Buffer.from(n(new Uint8Array(e)))},bitLengthFromBigInt:function(e){return e.toString(2).length},bufferBEFromBigInt:s,twosFromBigInt:function(e,t){let r;return r=e<0n?(~e&(1n<<BigInt(t))-1n)+1n:e,r&=(1n<<BigInt(t))-1n,r}}},8076:(e,t,r)=>{"use strict";const n=r(793);e.exports=o;const i=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},s={mapHttpRequest:d,mapHttpResponse:d,wrapRequestSerializer:f,wrapResponseSerializer:f,wrapErrorSerializer:f,req:d,res:d,err:function(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}};function o(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||i;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},s=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,n);let d=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(d=!1),"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===e.enabled&&(e.level="silent");const f=e.level||"info",g=Object.create(r);g.log||(g.log=p),Object.defineProperty(g,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(g,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,a(m,g,"error","log"),a(m,g,"fatal","error"),a(m,g,"warn","error"),a(m,g,"info","log"),a(m,g,"debug","log"),a(m,g,"trace","log")}});const m={transmit:t,serialize:s,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:h(e)};return g.levels=o.levels,g.level=f,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=p,g.serializers=n,g._serialize=s,g._stdErrSerialize=d,g.child=function(r,i){if(!r)throw new Error("missing bindings for child Pino");i=i||{},s&&r.serializers&&(i.serializers=r.serializers);const o=i.serializers;if(s&&o){var a=Object.assign({},n,o),h=!0===e.browser.serialize?Object.keys(a):s;delete r.serializers,c([r],h,a,this._stdErrSerialize)}function d(e){this._childLevel=1+(0|e._childLevel),this.error=l(e,r,"error"),this.fatal=l(e,r,"fatal"),this.warn=l(e,r,"warn"),this.info=l(e,r,"info"),this.debug=l(e,r,"debug"),this.trace=l(e,r,"trace"),a&&(this.serializers=a,this._serialize=h),t&&(this._logEvent=u([].concat(e._logEvent.bindings,r)))}return d.prototype=this,new d(this)},t&&(g._logEvent=u()),g}function a(e,t,r,s){const a=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?p:a[r]?a[r]:i[r]||i[s]||p,function(e,t,r){var s;(e.transmit||t[r]!==p)&&(t[r]=(s=t[r],function(){const a=e.timestamp(),l=new Array(arguments.length),h=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var d=0;d<l.length;d++)l[d]=arguments[d];if(e.serialize&&!e.asObject&&c(l,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?s.call(h,function(e,t,r,i){e._serialize&&c(r,e._serialize,e.serializers,e._stdErrSerialize);const s=r.slice();let a=s[0];const l={};i&&(l.time=i),l.level=o.levels.values[t];let u=1+(0|e._childLevel);if(u<1&&(u=1),null!==a&&"object"==typeof a){for(;u--&&"object"==typeof s[0];)Object.assign(l,s.shift());a=s.length?n(s.shift(),s):void 0}else"string"==typeof a&&(a=n(s.shift(),s));return void 0!==a&&(l.msg=a),l}(this,r,l,a)):s.apply(h,l),e.transmit){const n=e.transmit.level||t.level,i=o.levels.values[n],s=o.levels.values[r];if(s<i)return;!function(e,t,r){const n=t.send,i=t.ts,s=t.methodLevel,o=t.methodValue,a=t.val,l=e._logEvent.bindings;c(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return-1===l.indexOf(e)})),e._logEvent.level.label=s,e._logEvent.level.value=o,n(s,e._logEvent,a),e._logEvent=u(l)}(this,{ts:a,methodLevel:r,methodValue:s,transmitLevel:n,transmitValue:o.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},l)}}))}(e,t,r)}function c(e,t,r,n){for(const i in e)if(n&&e[i]instanceof Error)e[i]=o.stdSerializers.err(e[i]);else if("object"==typeof e[i]&&!Array.isArray(e[i]))for(const n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function l(e,t,r){return function(){const n=new Array(1+arguments.length);n[0]=t;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return e[r].apply(this,n)}}function u(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function h(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?g:m}function d(){return{}}function f(e){return e}function p(){}function g(){return!1}function m(){return Date.now()}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=s,o.stdTimeFunctions=Object.assign({},{nullTime:g,epochTime:m,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},9190:(e,t,r)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function i(e,...t){if(!((r=e)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function o(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){i(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{CC:()=>o,DO:()=>i,Fe:()=>n,Ht:()=>a,sd:()=>s})},6013:(e,t,r)=>{"use strict";r.d(t,{TQ:()=>o,ol:()=>a,r9:()=>s});var n=r(9190),i=r(2531);const s=(e,t,r)=>e&t^~e&r,o=(e,t,r)=>e&t^e&r^t&r;class a extends i.Vw{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.O8)(this.buffer)}update(e){(0,n.CC)(this);const{view:t,buffer:r,blockLen:s}=this,o=(e=(0,i.ZJ)(e)).length;for(let n=0;n<o;){const a=Math.min(s-this.pos,o-n);if(a!==s)r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=(0,i.O8)(e);for(;s<=o-n;n+=s)this.process(t,n)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.CC)(this),(0,n.Ht)(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:o}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let e=a;e<s;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+l,a,n)}(r,s-8,BigInt(8*this.length),o),this.process(r,0);const c=(0,i.O8)(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)c.setUint32(4*e,h[e],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}},8226:(e,t,r)=>{"use strict";r.d(t,{sc:()=>l});var n=r(6013),i=r(2531);const s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class c extends n.ol{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)a[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=a[e-15],r=a[e-2],n=(0,i.Ow)(t,7)^(0,i.Ow)(t,18)^t>>>3,s=(0,i.Ow)(r,17)^(0,i.Ow)(r,19)^r>>>10;a[e]=s+a[e-7]+n+a[e-16]|0}let{A:r,B:o,C:c,D:l,E:u,F:h,G:d,H:f}=this;for(let e=0;e<64;e++){const t=f+((0,i.Ow)(u,6)^(0,i.Ow)(u,11)^(0,i.Ow)(u,25))+(0,n.r9)(u,h,d)+s[e]+a[e]|0,p=((0,i.Ow)(r,2)^(0,i.Ow)(r,13)^(0,i.Ow)(r,22))+(0,n.TQ)(r,o,c)|0;f=d,d=h,h=u,u=l+t|0,l=c,c=o,o=r,r=t+p|0}r=r+this.A|0,o=o+this.B|0,c=c+this.C|0,l=l+this.D|0,u=u+this.E|0,h=h+this.F|0,d=d+this.G|0,f=f+this.H|0,this.set(r,o,c,l,u,h,d,f)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const l=(0,i.ld)((()=>new c))},2531:(e,t,r)=>{"use strict";r.d(t,{Vw:()=>g,Fc:()=>u,My:()=>d,Id:()=>p,O8:()=>o,qv:()=>c,po:()=>y,Ow:()=>a,ZJ:()=>f,DH:()=>s,ld:()=>m});const n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var i=r(9190);const s=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),o=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),a=(e,t)=>e<<32-t|e>>>t,c=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])(),l=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function u(e){for(let t=0;t<e.length;t++)e[t]=l(e[t])}const h=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function d(e){(0,i.DO)(e);let t="";for(let r=0;r<e.length;r++)t+=h[e[r]];return t}function f(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),(0,i.DO)(e),e}function p(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];(0,i.DO)(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}class g{clone(){return this._cloneInto()}}function m(e){const t=t=>e().update(f(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function y(e=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));if(n&&"function"==typeof n.randomBytes)return n.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}},2220:(e,t,r)=>{"use strict";r.d(t,{mb:()=>_,Ao:()=>g,vZ:()=>y,pV:()=>q,D8:()=>H,IN:()=>w,jL:()=>p,lH:()=>X,dC:()=>ee}),Symbol();const n=Symbol(),i=Object.getPrototypeOf,s=new WeakMap,o=(e,t=!0)=>{s.set(e,t)},a=e=>"object"==typeof e&&null!==e,c=new WeakMap,l=new WeakSet,[u]=((e=Object.is,t=(e,t)=>new Proxy(e,t),r=e=>a(e)&&!l.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer),u=e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}},h=new WeakMap,d=(e,t,r=u)=>{const n=h.get(e);if((null==n?void 0:n[0])===t)return n[1];const i=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return o(i,!0),h.set(e,[t,i]),Reflect.ownKeys(e).forEach((t=>{if(Object.getOwnPropertyDescriptor(i,t))return;const n=Reflect.get(e,t),s={value:n,enumerable:!0,configurable:!0};if(l.has(n))o(n,!1);else if(n instanceof Promise)delete s.value,s.get=()=>r(n);else if(c.has(n)){const[e,t]=c.get(n);s.value=d(e,t(),r)}Object.defineProperty(i,t,s)})),Object.preventExtensions(i)},f=new WeakMap,p=[1,1],g=o=>{if(!a(o))throw new Error("object required");const u=f.get(o);if(u)return u;let h=p[0];const m=new Set,y=(e,t=++p[0])=>{h!==t&&(h=t,m.forEach((r=>r(e,t))))};let b=p[1];const w=e=>(t,r)=>{const n=[...t];n[1]=[e,...n[1]],y(n,r)},v=new Map,_=e=>{var t;const r=v.get(e);r&&(v.delete(e),null==(t=r[1])||t.call(r))},E=Array.isArray(o)?[]:Object.create(Object.getPrototypeOf(o)),x=t(E,{deleteProperty(e,t){const r=Reflect.get(e,t);_(t);const n=Reflect.deleteProperty(e,t);return n&&y(["delete",[t],r]),n},set(t,o,u,h){const d=Reflect.has(t,o),p=Reflect.get(t,o,h);if(d&&(e(p,u)||f.has(u)&&e(p,f.get(u))))return!0;var b;_(o),a(u)&&(u=(e=>e&&(s.has(e)?s.get(e):i(e)===Object.prototype||i(e)===Array.prototype))(b=u)&&b[n]||null||u);let E=u;if(u instanceof Promise)u.then((e=>{u.status="fulfilled",u.value=e,y(["resolve",[o],e])})).catch((e=>{u.status="rejected",u.reason=e,y(["reject",[o],e])}));else{!c.has(u)&&r(u)&&(E=g(u));const e=!l.has(E)&&c.get(E);e&&((e,t)=>{if(v.has(e))throw new Error("prop listener already exists");if(m.size){const r=t[3](w(e));v.set(e,[t,r])}else v.set(e,[t])})(o,e)}return Reflect.set(t,o,E,h),y(["set",[o],u,p]),!0}});f.set(o,x);const S=[E,(e=++p[1])=>(b===e||m.size||(b=e,v.forEach((([t])=>{const r=t[1](e);r>h&&(h=r)}))),h),d,e=>(m.add(e),1===m.size&&v.forEach((([e,t],r)=>{if(t)throw new Error("remove already exists");const n=e[3](w(r));v.set(r,[e,n])})),()=>{m.delete(e),0===m.size&&v.forEach((([e,t],r)=>{t&&(t(),v.set(r,[e]))}))})];return c.set(x,S),Reflect.ownKeys(o).forEach((e=>{const t=Object.getOwnPropertyDescriptor(o,e);"value"in t&&(x[e]=o[e],delete t.value,delete t.writable),Object.defineProperty(E,e,t)})),x})=>[g,c,l,e,t,r,u,h,d,f,p])();function h(e={}){return u(e)}function d(e,t,r){const n=c.get(e);let i;n||console.warn("Please use proxy object");const s=[],o=n[3];let a=!1;const l=o((e=>{s.push(e),r?t(s.splice(0)):i||(i=Promise.resolve().then((()=>{i=void 0,a&&t(s.splice(0))})))}));return a=!0,()=>{a=!1,l()}}const f=h({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),p={state:f,subscribe:e=>d(f,(()=>e(f))),push(e,t){e!==f.view&&(f.view=e,t&&(f.data=t),f.history.push(e))},reset(e){f.view=e,f.history=[e]},replace(e){f.history.length>1&&(f.history[f.history.length-1]=e,f.view=e)},goBack(){if(f.history.length>1){f.history.pop();const[e]=f.history.slice(-1);f.view=e}},setData(e){f.data=e}},g={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile:()=>"undefined"!=typeof window&&Boolean(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)),isAndroid:()=>g.isMobile()&&navigator.userAgent.toLowerCase().includes("android"),isIos(){const e=navigator.userAgent.toLowerCase();return g.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),isArray:e=>Array.isArray(e)&&e.length>0,isTelegram:()=>"undefined"!=typeof window&&(Boolean(window.TelegramWebviewProxy)||Boolean(window.Telegram)||Boolean(window.TelegramWebviewProxyProto)),formatNativeUrl(e,t,r){if(g.isHttpUrl(e))return this.formatUniversalUrl(e,t,r);let n=e;return n.includes("://")||(n=e.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r),`${n}wc?uri=${encodeURIComponent(t)}`},formatUniversalUrl(e,t,r){if(!g.isHttpUrl(e))return this.formatNativeUrl(e,t,r);let n=e;if(n.startsWith("https://t.me")){const e=Buffer.from(t).toString("base64").replace(/[=]/g,"");n.endsWith("/")&&(n=n.slice(0,-1)),this.setWalletConnectDeepLink(n,r);const i=new URL(n);return i.searchParams.set("startapp",e),i.toString()}return n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r),`${n}wc?uri=${encodeURIComponent(t)}`},wait:async e=>new Promise((t=>{setTimeout(t,e)})),openHref(e,t){const r=this.isTelegram()?"_blank":t;window.open(e,r,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(g.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch(e){console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{const[t]=e.split("?");localStorage.setItem(g.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch(e){console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(g.WALLETCONNECT_DEEPLINK_CHOICE)}catch(e){console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{"undefined"!=typeof localStorage&&localStorage.setItem(g.WCM_VERSION,"2.7.0")}catch(e){console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;const t=null==(e=p.state.data)?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t}},m=h({enabled:"undefined"!=typeof location&&(location.hostname.includes("localhost")||location.protocol.includes("https")),userSessionId:"",events:[],connectedWalletId:void 0}),y={state:m,subscribe:e=>d(m.events,(()=>e(function(e){const t=c.get(e);t||console.warn("Please use proxy object");const[r,n,i]=t;return i(r,n(),void 0)}(m.events[m.events.length-1])))),initialize(){m.enabled&&void 0!==(null==crypto?void 0:crypto.randomUUID)&&(m.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){m.connectedWalletId=e},click(e){if(m.enabled){const t={type:"CLICK",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}},track(e){if(m.enabled){const t={type:"TRACK",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}},view(e){if(m.enabled){const t={type:"VIEW",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}}},b=h({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),w={state:b,subscribe:e=>d(b,(()=>e(b))),setChains(e){b.chains=e},setWalletConnectUri(e){b.walletConnectUri=e},setIsCustomDesktop(e){b.isCustomDesktop=e},setIsCustomMobile(e){b.isCustomMobile=e},setIsDataLoaded(e){b.isDataLoaded=e},setIsUiLoaded(e){b.isUiLoaded=e},setIsAuth(e){b.isAuth=e}},v=h({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),_={state:v,subscribe:e=>d(v,(()=>e(v))),setConfig(e){var t,r;y.initialize(),w.setChains(e.chains),w.setIsAuth(Boolean(e.enableAuthMode)),w.setIsCustomMobile(Boolean(null==(t=e.mobileWallets)?void 0:t.length)),w.setIsCustomDesktop(Boolean(null==(r=e.desktopWallets)?void 0:r.length)),g.setModalVersionInStorage(),Object.assign(v,e)}};var E=Object.defineProperty,x=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const k="https://explorer-api.walletconnect.com",T="wcm",P="js-2.7.0";async function C(e,t){const r=((e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(x)for(var r of x(t))A.call(t,r)&&I(e,r,t[r]);return e})({sdkType:T,sdkVersion:P},t),n=new URL(e,k);return n.searchParams.append("projectId",_.state.projectId),Object.entries(r).forEach((([e,t])=>{t&&n.searchParams.append(e,String(t))})),(await fetch(n)).json()}const O=async e=>C("/w3m/v1/getDesktopListings",e),M=async e=>C("/w3m/v1/getMobileListings",e),R=async e=>C("/w3m/v1/getAllListings",e),L=e=>`${k}/w3m/v1/getWalletImage/${e}?projectId=${_.state.projectId}&sdkType=${T}&sdkVersion=${P}`,N=e=>`${k}/w3m/v1/getAssetImage/${e}?projectId=${_.state.projectId}&sdkType=${T}&sdkVersion=${P}`;var B=Object.defineProperty,D=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,j=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const F=g.isMobile(),$=h({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),q={state:$,async getRecomendedWallets(){const{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=_.state;if("NONE"===e||"ALL"===t&&!e)return $.recomendedWallets;if(g.isArray(e)){const t={recommendedIds:e.join(",")},{listings:r}=await R(t),n=Object.values(r);n.sort(((t,r)=>e.indexOf(t.id)-e.indexOf(r.id))),$.recomendedWallets=n}else{const{chains:e,isAuth:r}=w.state,n=null==e?void 0:e.join(","),i=g.isArray(t),s={page:1,sdks:r?"auth_v1":void 0,entries:g.RECOMMENDED_WALLET_AMOUNT,chains:n,version:2,excludedIds:i?t.join(","):void 0},{listings:o}=F?await M(s):await O(s);$.recomendedWallets=Object.values(o)}return $.recomendedWallets},async getWallets(e){const t=((e,t)=>{for(var r in t||(t={}))U.call(t,r)&&j(e,r,t[r]);if(D)for(var r of D(t))z.call(t,r)&&j(e,r,t[r]);return e})({},e),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=_.state,{recomendedWallets:i}=$;if("ALL"===n)return $.wallets;i.length?t.excludedIds=i.map((e=>e.id)).join(","):g.isArray(r)&&(t.excludedIds=r.join(",")),g.isArray(n)&&(t.excludedIds=[t.excludedIds,n].filter(Boolean).join(",")),w.state.isAuth&&(t.sdks="auth_v1");const{page:s,search:o}=e,{listings:a,total:c}=F?await M(t):await O(t),l=Object.values(a),u=o?"search":"wallets";return $[u]={listings:[...$[u].listings,...l],total:c,page:null!=s?s:1},{listings:l,total:c}},getWalletImageUrl:e=>L(e),getAssetImageUrl:e=>N(e),resetSearch(){$.search={listings:[],total:0,page:1}}},W=h({open:!1}),H={state:W,subscribe:e=>d(W,(()=>e(W))),open:async e=>new Promise((t=>{const{isUiLoaded:r,isDataLoaded:n}=w.state;if(g.removeWalletConnectDeepLink(),w.setWalletConnectUri(null==e?void 0:e.uri),w.setChains(null==e?void 0:e.chains),p.reset("ConnectWallet"),r&&n)W.open=!0,t();else{const e=setInterval((()=>{const r=w.state;r.isUiLoaded&&r.isDataLoaded&&(clearInterval(e),W.open=!0,t())}),200)}})),close(){W.open=!1}};var V=Object.defineProperty,K=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const J=h({themeMode:"undefined"!=typeof matchMedia&&matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}),X={state:J,subscribe:e=>d(J,(()=>e(J))),setThemeConfig(e){const{themeMode:t,themeVariables:r}=e;t&&(J.themeMode=t),r&&(J.themeVariables=((e,t)=>{for(var r in t||(t={}))G.call(t,r)&&Y(e,r,t[r]);if(K)for(var r of K(t))Z.call(t,r)&&Y(e,r,t[r]);return e})({},r))}},Q=h({open:!1,message:"",variant:"success"}),ee={state:Q,subscribe:e=>d(Q,(()=>e(Q))),openToast(e,t){Q.open=!0,Q.message=e,Q.variant=t},closeToast(){Q.open=!1}}},3430:(e,t,r)=>{"use strict";r.r(t),r.d(t,{WcmModal:()=>un,WcmQrCode:()=>mr});const n=window,i=n.ShadowRoot&&(void 0===n.ShadyCSS||n.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class a{constructor(e,t,r){if(this._$cssResult$=!0,r!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(i&&void 0===e){const r=void 0!==t&&1===t.length;r&&(e=o.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&o.set(t,e))}return e}toString(){return this.cssText}}const c=(e,...t)=>{const r=1===e.length?e[0]:t.reduce(((t,r,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[n+1]),e[0]);return new a(r,e,s)},l=i?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return(e=>new a("string"==typeof e?e:e+"",void 0,s))(t)})(e):e;var u;const h=window,d=h.trustedTypes,f=d?d.emptyScript:"",p=h.reactiveElementPolyfillSupport,g={toAttribute(e,t){switch(t){case Boolean:e=e?f:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},m=(e,t)=>t!==e&&(t==t||e==e),y={attribute:!0,type:String,converter:g,reflect:!1,hasChanged:m},b="finalized";class w extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,r)=>{const n=this._$Ep(r,t);void 0!==n&&(this._$Ev.set(n,r),e.push(n))})),e}static createProperty(e,t=y){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const r="symbol"==typeof e?Symbol():"__"+e,n=this.getPropertyDescriptor(e,r,t);void 0!==n&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,r){return{get(){return this[t]},set(n){const i=this[e];this[t]=n,this.requestUpdate(e,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||y}static finalize(){if(this.hasOwnProperty(b))return!1;this[b]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const r of t)this.createProperty(r,e[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const e of r)t.unshift(l(e))}else void 0!==e&&t.push(l(e));return t}static _$Ep(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,r;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(r=e.hostConnected)||void 0===r||r.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{i?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const r=document.createElement("style"),i=n.litNonce;void 0!==i&&r.setAttribute("nonce",i),r.textContent=t.cssText,e.appendChild(r)}))})(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$EO(e,t,r=y){var n;const i=this.constructor._$Ep(e,r);if(void 0!==i&&!0===r.reflect){const s=(void 0!==(null===(n=r.converter)||void 0===n?void 0:n.toAttribute)?r.converter:g).toAttribute(t,r.type);this._$El=e,null==s?this.removeAttribute(i):this.setAttribute(i,s),this._$El=null}}_$AK(e,t){var r;const n=this.constructor,i=n._$Ev.get(e);if(void 0!==i&&this._$El!==i){const e=n.getPropertyOptions(i),s="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(r=e.converter)||void 0===r?void 0:r.fromAttribute)?e.converter:g;this._$El=i,this[i]=s.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,r){let n=!0;void 0!==e&&(((r=r||this.constructor.getPropertyOptions(e)).hasChanged||m)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===r.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,r))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(r)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(r)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}var v;w[b]=!0,w.elementProperties=new Map,w.elementStyles=[],w.shadowRootOptions={mode:"open"},null==p||p({ReactiveElement:w}),(null!==(u=h.reactiveElementVersions)&&void 0!==u?u:h.reactiveElementVersions=[]).push("1.6.3");const _=window,E=_.trustedTypes,x=E?E.createPolicy("lit-html",{createHTML:e=>e}):void 0,S="$lit$",A=`lit$${(Math.random()+"").slice(9)}$`,I="?"+A,k=`<${I}>`,T=document,P=()=>T.createComment(""),C=e=>null===e||"object"!=typeof e&&"function"!=typeof e,O=Array.isArray,M="[ \t\n\f\r]",R=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,L=/-->/g,N=/>/g,B=RegExp(`>|${M}(?:([^\\s"'>=/]+)(${M}*=${M}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),D=/'/g,U=/"/g,z=/^(?:script|style|textarea|title)$/i,j=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),F=j(1),$=j(2),q=Symbol.for("lit-noChange"),W=Symbol.for("lit-nothing"),H=new WeakMap,V=T.createTreeWalker(T,129,null,!1);function K(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==x?x.createHTML(t):t}const G=(e,t)=>{const r=e.length-1,n=[];let i,s=2===t?"<svg>":"",o=R;for(let t=0;t<r;t++){const r=e[t];let a,c,l=-1,u=0;for(;u<r.length&&(o.lastIndex=u,c=o.exec(r),null!==c);)u=o.lastIndex,o===R?"!--"===c[1]?o=L:void 0!==c[1]?o=N:void 0!==c[2]?(z.test(c[2])&&(i=RegExp("</"+c[2],"g")),o=B):void 0!==c[3]&&(o=B):o===B?">"===c[0]?(o=null!=i?i:R,l=-1):void 0===c[1]?l=-2:(l=o.lastIndex-c[2].length,a=c[1],o=void 0===c[3]?B:'"'===c[3]?U:D):o===U||o===D?o=B:o===L||o===N?o=R:(o=B,i=void 0);const h=o===B&&e[t+1].startsWith("/>")?" ":"";s+=o===R?r+k:l>=0?(n.push(a),r.slice(0,l)+S+r.slice(l)+A+h):r+A+(-2===l?(n.push(void 0),t):h)}return[K(e,s+(e[r]||"<?>")+(2===t?"</svg>":"")),n]};class Z{constructor({strings:e,_$litType$:t},r){let n;this.parts=[];let i=0,s=0;const o=e.length-1,a=this.parts,[c,l]=G(e,t);if(this.el=Z.createElement(c,r),V.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(n=V.nextNode())&&a.length<o;){if(1===n.nodeType){if(n.hasAttributes()){const e=[];for(const t of n.getAttributeNames())if(t.endsWith(S)||t.startsWith(A)){const r=l[s++];if(e.push(t),void 0!==r){const e=n.getAttribute(r.toLowerCase()+S).split(A),t=/([.?@])?(.*)/.exec(r);a.push({type:1,index:i,name:t[2],strings:e,ctor:"."===t[1]?ee:"?"===t[1]?re:"@"===t[1]?ne:Q})}else a.push({type:6,index:i})}for(const t of e)n.removeAttribute(t)}if(z.test(n.tagName)){const e=n.textContent.split(A),t=e.length-1;if(t>0){n.textContent=E?E.emptyScript:"";for(let r=0;r<t;r++)n.append(e[r],P()),V.nextNode(),a.push({type:2,index:++i});n.append(e[t],P())}}}else if(8===n.nodeType)if(n.data===I)a.push({type:2,index:i});else{let e=-1;for(;-1!==(e=n.data.indexOf(A,e+1));)a.push({type:7,index:i}),e+=A.length-1}i++}}static createElement(e,t){const r=T.createElement("template");return r.innerHTML=e,r}}function Y(e,t,r=e,n){var i,s,o,a;if(t===q)return t;let c=void 0!==n?null===(i=r._$Co)||void 0===i?void 0:i[n]:r._$Cl;const l=C(t)?void 0:t._$litDirective$;return(null==c?void 0:c.constructor)!==l&&(null===(s=null==c?void 0:c._$AO)||void 0===s||s.call(c,!1),void 0===l?c=void 0:(c=new l(e),c._$AT(e,r,n)),void 0!==n?(null!==(o=(a=r)._$Co)&&void 0!==o?o:a._$Co=[])[n]=c:r._$Cl=c),void 0!==c&&(t=Y(e,c._$AS(e,t.values),c,n)),t}class J{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:r},parts:n}=this._$AD,i=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:T).importNode(r,!0);V.currentNode=i;let s=V.nextNode(),o=0,a=0,c=n[0];for(;void 0!==c;){if(o===c.index){let t;2===c.type?t=new X(s,s.nextSibling,this,e):1===c.type?t=new c.ctor(s,c.name,c.strings,this,e):6===c.type&&(t=new ie(s,this,e)),this._$AV.push(t),c=n[++a]}o!==(null==c?void 0:c.index)&&(s=V.nextNode(),o++)}return V.currentNode=T,i}v(e){let t=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class X{constructor(e,t,r,n){var i;this.type=2,this._$AH=W,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=n,this._$Cp=null===(i=null==n?void 0:n.isConnected)||void 0===i||i}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Y(this,e,t),C(e)?e===W||null==e||""===e?(this._$AH!==W&&this._$AR(),this._$AH=W):e!==this._$AH&&e!==q&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):(e=>O(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==W&&C(this._$AH)?this._$AA.nextSibling.data=e:this.$(T.createTextNode(e)),this._$AH=e}g(e){var t;const{values:r,_$litType$:n}=e,i="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=Z.createElement(K(n.h,n.h[0]),this.options)),n);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===i)this._$AH.v(r);else{const e=new J(i,this),t=e.u(this.options);e.v(r),this.$(t),this._$AH=e}}_$AC(e){let t=H.get(e.strings);return void 0===t&&H.set(e.strings,t=new Z(e)),t}T(e){O(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,n=0;for(const i of e)n===t.length?t.push(r=new X(this.k(P()),this.k(P()),this,this.options)):r=t[n],r._$AI(i),n++;n<t.length&&(this._$AR(r&&r._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var r;for(null===(r=this._$AP)||void 0===r||r.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class Q{constructor(e,t,r,n,i){this.type=1,this._$AH=W,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=i,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=W}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,r,n){const i=this.strings;let s=!1;if(void 0===i)e=Y(this,e,t,0),s=!C(e)||e!==this._$AH&&e!==q,s&&(this._$AH=e);else{const n=e;let o,a;for(e=i[0],o=0;o<i.length-1;o++)a=Y(this,n[r+o],t,o),a===q&&(a=this._$AH[o]),s||(s=!C(a)||a!==this._$AH[o]),a===W?e=W:e!==W&&(e+=(null!=a?a:"")+i[o+1]),this._$AH[o]=a}s&&!n&&this.j(e)}j(e){e===W?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class ee extends Q{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===W?void 0:e}}const te=E?E.emptyScript:"";class re extends Q{constructor(){super(...arguments),this.type=4}j(e){e&&e!==W?this.element.setAttribute(this.name,te):this.element.removeAttribute(this.name)}}class ne extends Q{constructor(e,t,r,n,i){super(e,t,r,n,i),this.type=5}_$AI(e,t=this){var r;if((e=null!==(r=Y(this,e,t,0))&&void 0!==r?r:W)===q)return;const n=this._$AH,i=e===W&&n!==W||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,s=e!==W&&(n===W||i);i&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,r;"function"==typeof this._$AH?this._$AH.call(null!==(r=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==r?r:this.element,e):this._$AH.handleEvent(e)}}class ie{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Y(this,e)}}const se=_.litHtmlPolyfillSupport;var oe,ae;null==se||se(Z,X),(null!==(v=_.litHtmlVersions)&&void 0!==v?v:_.litHtmlVersions=[]).push("2.8.0");class ce extends w{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const r=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=r.firstChild),r}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,r)=>{var n,i;const s=null!==(n=null==r?void 0:r.renderBefore)&&void 0!==n?n:t;let o=s._$litPart$;if(void 0===o){const e=null!==(i=null==r?void 0:r.renderBefore)&&void 0!==i?i:null;s._$litPart$=o=new X(t.insertBefore(P(),e),e,void 0,null!=r?r:{})}return o._$AI(e),o})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return q}}ce.finalized=!0,ce._$litElement$=!0,null===(oe=globalThis.litElementHydrateSupport)||void 0===oe||oe.call(globalThis,{LitElement:ce});const le=globalThis.litElementPolyfillSupport;null==le||le({LitElement:ce}),(null!==(ae=globalThis.litElementVersions)&&void 0!==ae?ae:globalThis.litElementVersions=[]).push("3.3.3");const ue=e=>t=>"function"==typeof t?((e,t)=>(customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:r,elements:n}=t;return{kind:r,elements:n,finisher(t){customElements.define(e,t)}}})(e,t),he=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(r){r.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(r){r.createProperty(t.key,e)}};function de(e){return(t,r)=>void 0!==r?((e,t,r)=>{t.constructor.createProperty(r,e)})(e,t,r):he(e,t)}function fe(e){return de({...e,state:!0})}var pe;null===(pe=window.HTMLSlotElement)||void 0===pe||pe.prototype.assignedElements;class ge{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}const me=(ye=class extends ge{constructor(e){var t;if(super(e),1!==e.type||"class"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){var r,n;if(void 0===this.it){this.it=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&!(null===(r=this.nt)||void 0===r?void 0:r.has(e))&&this.it.add(e);return this.render(t)}const i=e.element.classList;this.it.forEach((e=>{e in t||(i.remove(e),this.it.delete(e))}));for(const e in t){const r=!!t[e];r===this.it.has(e)||(null===(n=this.nt)||void 0===n?void 0:n.has(e))||(r?(i.add(e),this.it.add(e)):(i.remove(e),this.it.delete(e)))}return q}},(...e)=>({_$litDirective$:ye,values:e}));var ye,be=r(2220);const we={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},ve=e=>1e3*e,_e=()=>{},Ee=e=>e;function xe(e,t=!0){if(e&&"finished"!==e.playState)try{e.stop?e.stop():(t&&e.commitStyles(),e.cancel())}catch(e){}}const Se=e=>e(),Ae=(e,t,r=we.duration)=>new Proxy({animations:e.map(Se).filter(Boolean),duration:r,options:t},Ie),Ie={get:(e,t)=>{const r=e.animations[0];switch(t){case"duration":return e.duration;case"currentTime":return((null==r?void 0:r[t])||0)/1e3;case"playbackRate":case"playState":return null==r?void 0:r[t];case"finished":return e.finished||(e.finished=Promise.all(e.animations.map(ke)).catch(_e)),e.finished;case"stop":return()=>{e.animations.forEach((e=>xe(e)))};case"forEachNative":return t=>{e.animations.forEach((r=>t(r,e)))};default:return void 0===(null==r?void 0:r[t])?void 0:()=>e.animations.forEach((e=>e[t]()))}},set:(e,t,r)=>{switch(t){case"currentTime":r=ve(r);case"playbackRate":for(let n=0;n<e.animations.length;n++)e.animations[n][t]=r;return!0}return!1}},ke=e=>e.finished,Te=e=>"object"==typeof e&&Boolean(e.createAnimation),Pe=e=>"number"==typeof e,Ce=e=>Array.isArray(e)&&!Pe(e[0]),Oe=(e,t,r)=>-r*e+r*t+e,Me=(e,t,r)=>t-e==0?1:(r-e)/(t-e);function Re(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const i=Me(0,t,n);e.push(Oe(r,1,i))}}const Le=(e,t,r)=>Math.min(Math.max(r,e),t);const Ne=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function Be(e,t,r,n){if(e===t&&r===n)return Ee;return i=>0===i||1===i?i:Ne(function(e,t,r,n,i){let s,o,a=0;do{o=t+(r-t)/2,s=Ne(o,n,i)-e,s>0?r=o:t=o}while(Math.abs(s)>1e-7&&++a<12);return o}(i,0,1,e,r),t,n)}const De=e=>"function"==typeof e,Ue=e=>Array.isArray(e)&&Pe(e[0]),ze={ease:Be(.25,.1,.25,1),"ease-in":Be(.42,0,1,1),"ease-in-out":Be(.42,0,.58,1),"ease-out":Be(0,0,.58,1)},je=/\((.*?)\)/;function Fe(e){if(De(e))return e;if(Ue(e))return Be(...e);const t=ze[e];if(t)return t;if(e.startsWith("steps")){const t=je.exec(e);if(t){const e=t[1].split(",");return((e,t="end")=>r=>{const n=(r="end"===t?Math.min(r,.999):Math.max(r,.001))*e,i="end"===t?Math.floor(n):Math.ceil(n);return Le(0,1,i/e)})(parseFloat(e[0]),e[1].trim())}}return Ee}class $e{constructor(e,t=[0,1],{easing:r,duration:n=we.duration,delay:i=we.delay,endDelay:s=we.endDelay,repeat:o=we.repeat,offset:a,direction:c="normal",autoplay:l=!0}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=Ee,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),r=r||we.easing,Te(r)){const e=r.createAnimation(t);r=e.easing,t=e.keyframes||t,n=e.duration||n}this.repeat=o,this.easing=Ce(r)?Ee:Fe(r),this.updateDuration(n);const u=function(e,t=function(e){const t=[0];return Re(t,e-1),t}(e.length),r=Ee){const n=e.length,i=n-t.length;return i>0&&Re(t,i),i=>{let s=0;for(;s<n-2&&!(i<t[s+1]);s++);let o=Le(0,1,Me(t[s],t[s+1],i));const a=function(e,t){return Ce(e)?e[((e,t,r)=>{const n=t-0;return((r-0)%n+n)%n+0})(0,e.length,t)]:e}(r,s);return o=a(o),Oe(e[s],e[s+1],o)}}(t,a,Ce(r)?r.map(Fe):Ee);this.tick=t=>{var r;let n=0;n=void 0!==this.pauseTime?this.pauseTime:(t-this.startTime)*this.rate,this.t=n,n/=1e3,n=Math.max(n-i,0),"finished"===this.playState&&void 0===this.pauseTime&&(n=this.totalDuration);const o=n/this.duration;let a=Math.floor(o),l=o%1;!l&&o>=1&&(l=1),1===l&&a--;const h=a%2;("reverse"===c||"alternate"===c&&h||"alternate-reverse"===c&&!h)&&(l=1-l);const d=n>=this.totalDuration?1:Math.min(l,1),f=u(this.easing(d));e(f),void 0===this.pauseTime&&("finished"===this.playState||n>=this.totalDuration+s)?(this.playState="finished",null===(r=this.resolve)||void 0===r||r.call(this,f)):"idle"!==this.playState&&(this.frameRequestId=requestAnimationFrame(this.tick))},l&&this.play()}play(){const e=performance.now();this.playState="running",void 0!==this.pauseTime?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",void 0!==this.frameRequestId&&cancelAnimationFrame(this.frameRequestId),null===(e=this.reject)||void 0===e||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){void 0!==this.pauseTime||0===this.rate?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}class qe{setAnimation(e){this.animation=e,null==e||e.finished.then((()=>this.clearAnimation())).catch((()=>{}))}clearAnimation(){this.animation=this.generator=void 0}}const We=new WeakMap;function He(e){return We.has(e)||We.set(e,{transforms:[],values:new Map}),We.get(e)}const Ve=["","X","Y","Z"],Ke={x:"translateX",y:"translateY",z:"translateZ"},Ge={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:e=>e+"deg"},Ze={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:e=>e+"px"},rotate:Ge,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:Ee},skew:Ge},Ye=new Map,Je=e=>`--motion-${e}`,Xe=["x","y","z"];["translate","scale","rotate","skew"].forEach((e=>{Ve.forEach((t=>{Xe.push(e+t),Ye.set(Je(e+t),Ze[e])}))}));const Qe=(e,t)=>Xe.indexOf(e)-Xe.indexOf(t),et=new Set(Xe),tt=e=>et.has(e),rt=(e,t)=>`${e} ${t}(var(${Je(t)}))`,nt=e=>e.startsWith("--"),it=new Set,st=(e,t)=>document.createElement("div").animate(e,t),ot={cssRegisterProperty:()=>"undefined"!=typeof CSS&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{st({opacity:[1]})}catch(e){return!1}return!0},finished:()=>Boolean(st({opacity:[0,1]},{duration:.001}).finished),linearEasing:()=>{try{st({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}},at={},ct={};for(const e in ot)ct[e]=()=>(void 0===at[e]&&(at[e]=ot[e]()),at[e]);const lt=(e,t)=>De(e)?ct.linearEasing()?`linear(${((e,t)=>{let r="";const n=Math.round(t/.015);for(let t=0;t<n;t++)r+=e(Me(0,n-1,t))+", ";return r.substring(0,r.length-2)})(e,t)})`:we.easing:Ue(e)?ut(e):e,ut=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`;function ht(e){return Ke[e]&&(e=Ke[e]),tt(e)?Je(e):e}const dt=(e,t,r)=>{t=ht(t),nt(t)?e.style.setProperty(t,r):e.style[t]=r};function ft(e,t,r,n={},i){const s=window.__MOTION_DEV_TOOLS_RECORD,o=!1!==n.record&&s;let a,{duration:c=we.duration,delay:l=we.delay,endDelay:u=we.endDelay,repeat:h=we.repeat,easing:d=we.easing,persist:f=!1,direction:p,offset:g,allowWebkitAcceleration:m=!1,autoplay:y=!0}=n;const b=He(e),w=tt(t);let v=ct.waapi();w&&((e,t)=>{Ke[t]&&(t=Ke[t]);const{transforms:r}=He(e);var n,i;i=t,-1===(n=r).indexOf(i)&&n.push(i),e.style.transform=(e=>e.sort(Qe).reduce(rt,"").trim())(r)})(e,t);const _=ht(t),E=function(e,t){return e.has(t)||e.set(t,new qe),e.get(t)}(b.values,_),x=Ye.get(_);return xe(E.animation,!(Te(d)&&E.generator)&&!1!==n.record),()=>{const b=()=>{var t,r;return null!==(r=null!==(t=((e,t)=>{t=ht(t);let r=nt(t)?e.style.getPropertyValue(t):getComputedStyle(e)[t];if(!r&&0!==r){const e=Ye.get(t);e&&(r=e.initialValue)}return r})(e,_))&&void 0!==t?t:null==x?void 0:x.initialValue)&&void 0!==r?r:0};let S=function(e,t){for(let r=0;r<e.length;r++)null===e[r]&&(e[r]=r?e[r-1]:t());return e}((e=>Array.isArray(e)?e:[e])(r),b);const A=function(e,t){var r;let n=(null==t?void 0:t.toDefaultUnit)||Ee;const i=e[e.length-1];if("string"==typeof i){const e=(null===(r=i.match(/(-?[\d.]+)([a-z%]*)/))||void 0===r?void 0:r[2])||"";e&&(n=t=>t+e)}return n}(S,x);if(Te(d)){const e=d.createAnimation(S,"opacity"!==t,b,_,E);d=e.easing,S=e.keyframes||S,c=e.duration||c}if(nt(_)&&(ct.cssRegisterProperty()?function(e){if(!it.has(e)){it.add(e);try{const{syntax:t,initialValue:r}=Ye.has(e)?Ye.get(e):{};CSS.registerProperty({name:e,inherits:!1,syntax:t,initialValue:r})}catch(e){}}}(_):v=!1),w&&!ct.linearEasing()&&(De(d)||Ce(d)&&d.some(De))&&(v=!1),v){x&&(S=S.map((e=>Pe(e)?x.toDefaultUnit(e):e))),1!==S.length||ct.partialKeyframes()&&!o||S.unshift(b());const t={delay:ve(l),duration:ve(c),endDelay:ve(u),easing:Ce(d)?void 0:lt(d,c),direction:p,iterations:h+1,fill:"both"};a=e.animate({[_]:S,offset:g,easing:Ce(d)?d.map((e=>lt(e,c))):void 0},t),a.finished||(a.finished=new Promise(((e,t)=>{a.onfinish=e,a.oncancel=t})));const r=S[S.length-1];a.finished.then((()=>{f||(dt(e,_,r),a.cancel())})).catch(_e),m||(a.playbackRate=1.000001)}else if(i&&w)S=S.map((e=>"string"==typeof e?parseFloat(e):e)),1===S.length&&S.unshift(parseFloat(b())),a=new i((t=>{dt(e,_,A?A(t):t)}),S,Object.assign(Object.assign({},n),{duration:c,easing:d}));else{const t=S[S.length-1];dt(e,_,x&&Pe(t)?x.toDefaultUnit(t):t)}return o&&s(e,t,S,{duration:c,delay:l,easing:d,repeat:h,offset:g},"motion-one"),E.setAnimation(a),a&&!y&&a.pause(),a}}const pt=(e,t)=>e[t]?Object.assign(Object.assign({},e),e[t]):Object.assign({},e);function gt(e,t,r){return De(e)?e(t,r):e}const mt=(yt=$e,function(e,t,r={}){const n=(e=function(e){return"string"==typeof e?e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}(e)).length;Boolean(n),Boolean(t);const i=[];for(let s=0;s<n;s++){const o=e[s];for(const e in t){const a=pt(r,e);a.delay=gt(a.delay,s,n);const c=ft(o,e,t[e],a,yt);i.push(c)}}return Ae(i,r,r.duration)});var yt;function bt(e,t={}){return Ae([()=>{const r=new $e(e,[0,1],t);return r.finished.catch((()=>{})),r}],t,t.duration)}function wt(e,t,r){return(De(e)?bt:mt)(e,t,r)}const vt=e=>null!=e?e:W;var _t=r(7583),Et=Object.defineProperty,xt=Object.getOwnPropertySymbols,St=Object.prototype.hasOwnProperty,At=Object.prototype.propertyIsEnumerable,It=(e,t,r)=>t in e?Et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,kt=(e,t)=>{for(var r in t||(t={}))St.call(t,r)&&It(e,r,t[r]);if(xt)for(var r of xt(t))At.call(t,r)&&It(e,r,t[r]);return e};const Tt={getPreset:e=>({"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}[e]),setTheme(){const e=document.querySelector(":root"),{themeVariables:t}=be.lH.state;if(e){const r=kt(kt(kt({},function(){var e;const t={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[null!=(e=be.lH.state.themeMode)?e:"dark"];return{"--wcm-color-fg-1":t.foreground[1],"--wcm-color-fg-2":t.foreground[2],"--wcm-color-fg-3":t.foreground[3],"--wcm-color-bg-1":t.background[1],"--wcm-color-bg-2":t.background[2],"--wcm-color-bg-3":t.background[3],"--wcm-color-overlay":t.overlay}}()),{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}),t);Object.entries(r).forEach((([t,r])=>e.style.setProperty(t,r)))}},globalCss:c`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},Pt=c`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var Ct=Object.defineProperty,Ot=Object.getOwnPropertyDescriptor,Mt=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?Ot(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&Ct(t,r,s),s};let Rt=class extends ce{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const e={"wcm-icon-left":void 0!==this.iconLeft,"wcm-icon-right":void 0!==this.iconRight,"wcm-ghost":"ghost"===this.variant,"wcm-outline":"outline"===this.variant};let t="inverse";return"ghost"===this.variant&&(t="secondary"),"outline"===this.variant&&(t="accent"),F`<button class="${me(e)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${t}"><slot></slot></wcm-text>${this.iconRight}</button>`}};Rt.styles=[Tt.globalCss,Pt],Mt([de({type:Boolean})],Rt.prototype,"disabled",2),Mt([de()],Rt.prototype,"iconLeft",2),Mt([de()],Rt.prototype,"iconRight",2),Mt([de()],Rt.prototype,"onClick",2),Mt([de()],Rt.prototype,"variant",2),Rt=Mt([ue("wcm-button")],Rt);const Lt=c`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var Nt=Object.defineProperty,Bt=Object.getOwnPropertyDescriptor,Dt=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?Bt(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&Nt(t,r,s),s};let Ut=class extends ce{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const e={"wcm-secondary":"secondary"===this.variant};return F`<button ?disabled="${this.disabled}" class="${me(e)}"><slot></slot></button>`}};Ut.styles=[Tt.globalCss,Lt],Dt([de({type:Boolean})],Ut.prototype,"disabled",2),Dt([de()],Ut.prototype,"variant",2),Ut=Dt([ue("wcm-button-big")],Ut);const zt=c`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;Object.defineProperty,Object.getOwnPropertyDescriptor;let jt=class extends ce{render(){return F`<div><slot></slot></div>`}};jt.styles=[Tt.globalCss,zt],jt=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-info-footer")],jt);const Ft={CROSS_ICON:$`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:$`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:$`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:$`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:$`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:$`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:$`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:$`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:$`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:$`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:$`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:$`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:$`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:$`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:$`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:$`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:$`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:$`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},$t=c`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;Object.defineProperty,Object.getOwnPropertyDescriptor;let qt=class extends ce{render(){return F`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${Ft.WALLET_CONNECT_LOGO} <button @click="${be.D8.close}">${Ft.CROSS_ICON}</button></div>`}};qt.styles=[Tt.globalCss,$t],qt=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-modal-backcard")],qt);const Wt=c`main{padding:20px;padding-top:0;width:100%}`;Object.defineProperty,Object.getOwnPropertyDescriptor;let Ht=class extends ce{render(){return F`<main><slot></slot></main>`}};Ht.styles=[Tt.globalCss,Wt],Ht=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-modal-content")],Ht);const Vt=c`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;Object.defineProperty,Object.getOwnPropertyDescriptor;let Kt=class extends ce{render(){return F`<footer><slot></slot></footer>`}};Kt.styles=[Tt.globalCss,Vt],Kt=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-modal-footer")],Kt);const Gt=c`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var Zt=Object.defineProperty,Yt=Object.getOwnPropertyDescriptor,Jt=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?Yt(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&Zt(t,r,s),s};let Xt=class extends ce{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return F`<button class="wcm-back-btn" @click="${be.jL.goBack}">${Ft.BACK_ICON}</button>`}actionBtnTemplate(){return F`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const e={"wcm-border":this.border},t=be.jL.state.history.length>1,r=this.title?F`<wcm-text variant="big-bold">${this.title}</wcm-text>`:F`<slot></slot>`;return F`<header class="${me(e)}">${t?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};Xt.styles=[Tt.globalCss,Gt],Jt([de()],Xt.prototype,"title",2),Jt([de()],Xt.prototype,"onAction",2),Jt([de()],Xt.prototype,"actionIcon",2),Jt([de({type:Boolean})],Xt.prototype,"border",2),Xt=Jt([ue("wcm-modal-header")],Xt);const Qt={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(e,t){const r=e.renderRoot.querySelector(t);if(!r)throw new Error(`${t} not found`);return r},getWalletIcon({id:e,image_id:t}){const{walletImages:r}=be.mb.state;return(null==r?void 0:r[e])?r[e]:t?be.pV.getWalletImageUrl(t):""},getWalletName:(e,t=!1)=>t&&e.length>8?`${e.substring(0,8)}..`:e,isMobileAnimation:()=>window.innerWidth<=Qt.MOBILE_BREAKPOINT,async preloadImage(e){const t=new Promise(((t,r)=>{const n=new Image;n.onload=t,n.onerror=r,n.crossOrigin="anonymous",n.src=e}));return Promise.race([t,be.Ao.wait(3e3)])},getErrorMessage:e=>e instanceof Error?e.message:"Unknown Error",debounce(e,t=500){let r;return(...n)=>{r&&clearTimeout(r),r=setTimeout((function(){e(...n)}),t)}},handleMobileLinking(e,t="_self"){const{walletConnectUri:r}=be.IN.state,{mobile:n,name:i}=e,s=null==n?void 0:n.native,o=null==n?void 0:n.universal;Qt.setRecentWallet(e),r&&function(e){if(s){const r=be.Ao.formatNativeUrl(s,e,i);be.Ao.openHref(r,t)}else if(o){const r=be.Ao.formatUniversalUrl(o,e,i);be.Ao.openHref(r,t)}}(r)},handleAndroidLinking(){const{walletConnectUri:e}=be.IN.state;e&&(be.Ao.setWalletConnectAndroidDeepLink(e),be.Ao.openHref(e,be.Ao.isTelegram()?"_blank":"_self"))},async handleUriCopy(){const{walletConnectUri:e}=be.IN.state;if(e)try{await navigator.clipboard.writeText(e),be.dC.openToast("Link copied","success")}catch(e){be.dC.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:e}=be.mb.state,t=Object.values(null!=e?e:{});return Object.values(t)},truncate:(e,t=8)=>e.length<=t?e:`${e.substring(0,4)}...${e.substring(e.length-4)}`,setRecentWallet(e){try{localStorage.setItem(Qt.WCM_RECENT_WALLET_DATA,JSON.stringify(e))}catch(e){console.info("Unable to set recent wallet")}},getRecentWallet(){try{const e=localStorage.getItem(Qt.WCM_RECENT_WALLET_DATA);return e?JSON.parse(e):void 0}catch(e){console.info("Unable to get recent wallet")}},caseSafeIncludes:(e,t)=>e.toUpperCase().includes(t.toUpperCase()),openWalletExplorerUrl(){be.Ao.openHref(Qt.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:e,mobile:t}=be.Ao.getWalletRouterData(),r=Boolean(null==e?void 0:e.native),n=Boolean(null==e?void 0:e.universal);return{isDesktop:r,isMobile:Boolean(null==t?void 0:t.native)||Boolean(null==t?void 0:t.universal),isWeb:n}},goToConnectingView(e){be.jL.setData({Wallet:e});const t=be.Ao.isMobile(),{isDesktop:r,isWeb:n,isMobile:i}=Qt.getCachedRouterWalletPlatforms();t?i?(be.jL.push("MobileConnecting"),!be.Ao.isAndroid()&&be.Ao.isTelegram()&&this.handleMobileLinking(e,"_blank")):n?be.jL.push("WebConnecting"):be.jL.push("InstallWallet"):r?be.jL.push("DesktopConnecting"):n?be.jL.push("WebConnecting"):i?be.jL.push("MobileQrcodeConnecting"):be.jL.push("InstallWallet")}},er=c`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var tr=Object.defineProperty,rr=Object.getOwnPropertyDescriptor,nr=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?rr(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&tr(t,r,s),s};let ir=class extends ce{constructor(){super(),this.view=be.jL.state.view,this.prevView=be.jL.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=be.jL.subscribe((e=>{this.view!==e.view&&this.onChangeRoute()}))}firstUpdated(){this.resizeObserver=new ResizeObserver((([e])=>{const t=`${e.contentRect.height}px`;"0px"!==this.oldHeight&&wt(this.routerEl,{height:[this.oldHeight,t]},{duration:.2}),this.oldHeight=t})),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var e,t;null==(e=this.unsubscribe)||e.call(this),null==(t=this.resizeObserver)||t.disconnect()}get routerEl(){return Qt.getShadowRootElement(this,".wcm-router")}get contentEl(){return Qt.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return F`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return F`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return F`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return F`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return F`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return F`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return F`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return F`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return F`<div>Not Found</div>`}}async onChangeRoute(){await wt(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=be.jL.state.view,wt(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return F`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};ir.styles=[Tt.globalCss,er],nr([fe()],ir.prototype,"view",2),nr([fe()],ir.prototype,"prevView",2),ir=nr([ue("wcm-modal-router")],ir);const sr=c`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var or=Object.defineProperty,ar=Object.getOwnPropertyDescriptor,cr=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?ar(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&or(t,r,s),s};let lr=class extends ce{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=be.dC.subscribe((e=>{e.open?(this.open=!0,this.timeout=setTimeout((()=>be.dC.closeToast()),2200)):(this.open=!1,clearTimeout(this.timeout))}))}disconnectedCallback(){var e;null==(e=this.unsubscribe)||e.call(this),clearTimeout(this.timeout),be.dC.closeToast()}render(){const{message:e,variant:t}=be.dC.state,r={"wcm-success":"success"===t,"wcm-error":"error"===t};return this.open?F`<div class="${me(r)}">${"success"===t?Ft.CHECKMARK_ICON:null} ${"error"===t?Ft.CROSS_ICON:null}<wcm-text variant="small-regular">${e}</wcm-text></div>`:null}};function ur(e,t,r){return e!==t&&(e-t<0?t-e:e-t)<=r+.1}lr.styles=[Tt.globalCss,sr],cr([fe()],lr.prototype,"open",2),lr=cr([ue("wcm-modal-toast")],lr);const hr={generate(e,t,r){const n="#141414",i=[],s=function(e){const t=Array.prototype.slice.call(_t.create(e,{errorCorrectionLevel:"Q"}).modules.data,0),r=Math.sqrt(t.length);return t.reduce(((e,t,n)=>(n%r==0?e.push([t]):e[e.length-1].push(t))&&e),[])}(e),o=t/s.length,a=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];a.forEach((({x:e,y:t})=>{const r=(s.length-7)*o*e,c=(s.length-7)*o*t;for(let e=0;e<a.length;e+=1){const t=o*(7-2*e);i.push($`<rect fill="${e%2==0?n:"#ffffff"}" height="${t}" rx="${.45*t}" ry="${.45*t}" width="${t}" x="${r+o*e}" y="${c+o*e}">`)}}));const c=Math.floor((r+25)/o),l=s.length/2-c/2,u=s.length/2+c/2-1,h=[];s.forEach(((e,t)=>{e.forEach(((e,r)=>{if(s[t][r]&&!(t<7&&r<7||t>s.length-8&&r<7||t<7&&r>s.length-8||t>l&&t<u&&r>l&&r<u)){const e=t*o+o/2,n=r*o+o/2;h.push([e,n])}}))}));const d={};return h.forEach((([e,t])=>{d[e]?d[e].push(t):d[e]=[t]})),Object.entries(d).map((([e,t])=>{const r=t.filter((e=>t.every((t=>!ur(e,t,o)))));return[Number(e),r]})).forEach((([e,t])=>{t.forEach((t=>{i.push($`<circle cx="${e}" cy="${t}" fill="${n}" r="${o/2.5}">`)}))})),Object.entries(d).filter((([e,t])=>t.length>1)).map((([e,t])=>{const r=t.filter((e=>t.some((t=>ur(e,t,o)))));return[Number(e),r]})).map((([e,t])=>{t.sort(((e,t)=>e<t?-1:1));const r=[];for(const e of t){const t=r.find((t=>t.some((t=>ur(e,t,o)))));t?t.push(e):r.push([e])}return[e,r.map((e=>[e[0],e[e.length-1]]))]})).forEach((([e,t])=>{t.forEach((([t,r])=>{i.push($`<line x1="${e}" x2="${e}" y1="${t}" y2="${r}" stroke="${n}" stroke-width="${o/1.25}" stroke-linecap="round">`)}))})),i}},dr=c`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var fr=Object.defineProperty,pr=Object.getOwnPropertyDescriptor,gr=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?pr(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&fr(t,r,s),s};let mr=class extends ce{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const e="light"===be.lH.state.themeMode?this.size:this.size-36;return $`<svg height="${e}" width="${e}">${hr.generate(this.uri,e,e/4)}</svg>`}render(){const e={"wcm-dark":"dark"===be.lH.state.themeMode};return F`<div style="${`width: ${this.size}px`}" class="${me(e)}">${this.walletId||this.imageUrl?F`<wcm-wallet-image walletId="${vt(this.walletId)}" imageId="${vt(this.imageId)}" imageUrl="${vt(this.imageUrl)}"></wcm-wallet-image>`:Ft.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};mr.styles=[Tt.globalCss,dr],gr([de()],mr.prototype,"uri",2),gr([de({type:Number})],mr.prototype,"size",2),gr([de()],mr.prototype,"imageId",2),gr([de()],mr.prototype,"walletId",2),gr([de()],mr.prototype,"imageUrl",2),mr=gr([ue("wcm-qrcode")],mr);const yr=c`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var br=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,vr=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?wr(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&br(t,r,s),s};let _r=class extends ce{constructor(){super(...arguments),this.onChange=()=>null}render(){return F`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${Ft.SEARCH_ICON}`}};_r.styles=[Tt.globalCss,yr],vr([de()],_r.prototype,"onChange",2),_r=vr([ue("wcm-search-input")],_r);const Er=c`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;Object.defineProperty,Object.getOwnPropertyDescriptor;let xr=class extends ce{render(){return F`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};xr.styles=[Tt.globalCss,Er],xr=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-spinner")],xr);const Sr=c`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var Ar=Object.defineProperty,Ir=Object.getOwnPropertyDescriptor,kr=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?Ir(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&Ar(t,r,s),s};let Tr=class extends ce{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const e={"wcm-big-bold":"big-bold"===this.variant,"wcm-medium-regular":"medium-regular"===this.variant,"wcm-small-regular":"small-regular"===this.variant,"wcm-small-thin":"small-thin"===this.variant,"wcm-xsmall-regular":"xsmall-regular"===this.variant,"wcm-xsmall-bold":"xsmall-bold"===this.variant,"wcm-color-primary":"primary"===this.color,"wcm-color-secondary":"secondary"===this.color,"wcm-color-tertiary":"tertiary"===this.color,"wcm-color-inverse":"inverse"===this.color,"wcm-color-accnt":"accent"===this.color,"wcm-color-error":"error"===this.color};return F`<span><slot class="${me(e)}"></slot></span>`}};Tr.styles=[Tt.globalCss,Sr],kr([de()],Tr.prototype,"variant",2),kr([de()],Tr.prototype,"color",2),Tr=kr([ue("wcm-text")],Tr);const Pr=c`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var Cr=Object.defineProperty,Or=Object.getOwnPropertyDescriptor,Mr=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?Or(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&Cr(t,r,s),s};let Rr=class extends ce{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?F`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?F`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){be.vZ.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var e;return F`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${vt(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${null!=(e=this.label)?e:Qt.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};Rr.styles=[Tt.globalCss,Pr],Mr([de()],Rr.prototype,"onClick",2),Mr([de()],Rr.prototype,"name",2),Mr([de()],Rr.prototype,"walletId",2),Mr([de()],Rr.prototype,"label",2),Mr([de()],Rr.prototype,"imageId",2),Mr([de({type:Boolean})],Rr.prototype,"installed",2),Mr([de({type:Boolean})],Rr.prototype,"recent",2),Rr=Mr([ue("wcm-wallet-button")],Rr);const Lr=c`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var Nr=Object.defineProperty,Br=Object.getOwnPropertyDescriptor,Dr=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?Br(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&Nr(t,r,s),s};let Ur=class extends ce{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var e;const t=(null==(e=this.imageUrl)?void 0:e.length)?this.imageUrl:Qt.getWalletIcon({id:this.walletId,image_id:this.imageId});return F`${t.length?F`<div><img crossorigin="anonymous" src="${t}" alt="${this.id}"></div>`:Ft.WALLET_PLACEHOLDER}`}};Ur.styles=[Tt.globalCss,Lr],Dr([de()],Ur.prototype,"walletId",2),Dr([de()],Ur.prototype,"imageId",2),Dr([de()],Ur.prototype,"imageUrl",2),Ur=Dr([ue("wcm-wallet-image")],Ur);var zr=Object.defineProperty,jr=Object.getOwnPropertyDescriptor,Fr=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?jr(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&zr(t,r,s),s};let $r=class extends ce{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(e){try{(null==e?void 0:e.length)&&await Promise.all(e.map((async e=>Qt.preloadImage(e))))}catch(t){console.info("Unsuccessful attempt at preloading some images",e)}}async preloadListings(){if(be.mb.state.enableExplorer){await be.pV.getRecomendedWallets(),be.IN.setIsDataLoaded(!0);const{recomendedWallets:e}=be.pV.state,t=e.map((e=>Qt.getWalletIcon(e)));await this.loadImages(t)}else be.IN.setIsDataLoaded(!0)}async preloadCustomImages(){const e=Qt.getCustomImageUrls();await this.loadImages(e)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(e){console.error(e),be.dC.openToast("Failed preloading","error")}}};Fr([fe()],$r.prototype,"preload",2),$r=Fr([ue("wcm-explorer-context")],$r);Object.defineProperty,Object.getOwnPropertyDescriptor;let qr=class extends ce{constructor(){super(),this.unsubscribeTheme=void 0,Tt.setTheme(),this.unsubscribeTheme=be.lH.subscribe(Tt.setTheme)}disconnectedCallback(){var e;null==(e=this.unsubscribeTheme)||e.call(this)}};qr=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-theme-context")],qr);const Wr=c`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;Object.defineProperty,Object.getOwnPropertyDescriptor;let Hr=class extends ce{onGoToQrcode(){be.jL.push("Qrcode")}render(){const{recomendedWallets:e}=be.pV.state,t=[...e,...e],r=2*be.Ao.RECOMMENDED_WALLET_AMOUNT;return F`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${Ft.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${Ft.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map(((e,r)=>{const n=t[r%t.length];return n?F`<wcm-wallet-image walletId="${n.id}" imageId="${n.image_id}"></wcm-wallet-image>`:Ft.WALLET_PLACEHOLDER}))}</div><wcm-button-big @click="${Qt.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};Hr.styles=[Tt.globalCss,Wr],Hr=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-android-wallet-selection")],Hr);const Vr=c`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var Kr=Object.defineProperty,Gr=Object.getOwnPropertyDescriptor,Zr=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?Gr(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&Kr(t,r,s),s};let Yr=class extends ce{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var e,t;const r=null!=(t=null==(e=be.lH.state.themeVariables)?void 0:e["--wcm-wallet-icon-large-border-radius"])?t:Tt.getPreset("--wcm-wallet-icon-large-border-radius");let n=0;return n=r.includes("%")?.88*parseInt(r,10):parseInt(r,10),n*=1.17,F`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${n}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${317-1.57*n}" stroke-dashoffset="${425-1.8*n}"></use></svg>`}render(){const e={"wcm-error":this.isError,"wcm-stale":this.isStale};return F`<div class="${me(e)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${vt(this.walletId)}" imageId="${vt(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};Yr.styles=[Tt.globalCss,Vr],Zr([de()],Yr.prototype,"walletId",2),Zr([de()],Yr.prototype,"imageId",2),Zr([de({type:Boolean})],Yr.prototype,"isError",2),Zr([de({type:Boolean})],Yr.prototype,"isStale",2),Zr([de()],Yr.prototype,"label",2),Yr=Zr([ue("wcm-connector-waiting")],Yr);const Jr={manualWallets(){var e,t;const{mobileWallets:r,desktopWallets:n}=be.mb.state,i=null==(e=Jr.recentWallet())?void 0:e.id,s=be.Ao.isMobile()?r:n,o=null==s?void 0:s.filter((e=>i!==e.id));return null!=(t=be.Ao.isMobile()?null==o?void 0:o.map((({id:e,name:t,links:r})=>({id:e,name:t,mobile:r,links:r}))):null==o?void 0:o.map((({id:e,name:t,links:r})=>({id:e,name:t,desktop:r,links:r}))))?t:[]},recentWallet:()=>Qt.getRecentWallet(),recomendedWallets(e=!1){var t;const r=e||null==(t=Jr.recentWallet())?void 0:t.id,{recomendedWallets:n}=be.pV.state;return n.filter((e=>r!==e.id))}},Xr={onConnecting(e){Qt.goToConnectingView(e)},manualWalletsTemplate(){return Jr.manualWallets().map((e=>F`<wcm-wallet-button walletId="${e.id}" name="${e.name}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`))},recomendedWalletsTemplate(e=!1){return Jr.recomendedWallets(e).map((e=>F`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`))},recentWalletTemplate(){const e=Jr.recentWallet();if(e)return F`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${vt(e.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`}},Qr=c`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;Object.defineProperty,Object.getOwnPropertyDescriptor;let en=class extends ce{render(){const{explorerExcludedWalletIds:e,enableExplorer:t}=be.mb.state,r="ALL"!==e&&t,n=Xr.manualWalletsTemplate(),i=Xr.recomendedWalletsTemplate();let s=[Xr.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>4||r;let a=[];a=o?s.slice(0,3):s;const c=Boolean(a.length);return F`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${Qt.handleUriCopy}" .actionIcon="${Ft.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${Ft.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${Ft.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${c?F`<wcm-modal-footer><div class="wcm-desktop-title">${Ft.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${o?F`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};en.styles=[Tt.globalCss,Qr],en=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-desktop-wallet-selection")],en);const tn=c`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;Object.defineProperty,Object.getOwnPropertyDescriptor;let rn=class extends ce{render(){const{termsOfServiceUrl:e,privacyPolicyUrl:t}=be.mb.state;return(null!=e?e:t)?F`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${e?F`<a href="${e}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${e&&t?"and":null} ${t?F`<a href="${t}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};rn.styles=[Tt.globalCss,tn],rn=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-legal-notice")],rn);const nn=c`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;Object.defineProperty,Object.getOwnPropertyDescriptor;let sn=class extends ce{onQrcode(){be.jL.push("Qrcode")}render(){const{explorerExcludedWalletIds:e,enableExplorer:t}=be.mb.state,r="ALL"!==e&&t,n=Xr.manualWalletsTemplate(),i=Xr.recomendedWalletsTemplate();let s=[Xr.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>8||r;let a=[];a=o?s.slice(0,7):s;const c=Boolean(a.length);return F`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${Ft.QRCODE_ICON}"></wcm-modal-header>${c?F`<wcm-modal-content><div>${a} ${o?F`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};sn.styles=[Tt.globalCss,nn],sn=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-mobile-wallet-selection")],sn);const on=c`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var an=Object.defineProperty,cn=Object.getOwnPropertyDescriptor,ln=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?cn(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&an(t,r,s),s};let un=class extends ce{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=be.D8.subscribe((e=>{e.open?this.onOpenModalEvent():this.onCloseModalEvent()}))}disconnectedCallback(){var e;null==(e=this.unsubscribeModal)||e.call(this)}get overlayEl(){return Qt.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return Qt.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(e){if(document.querySelector("body"))if(e){const e=document.getElementById("wcm-styles");null==e||e.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(e){e.target===e.currentTarget&&be.D8.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout((async()=>{const e=Qt.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]};await Promise.all([wt(this.overlayEl,{opacity:[0,1]},{delay:.1,duration:.2}).finished,wt(this.containerEl,e,{delay:.1,duration:.2}).finished]),this.active=!0}),0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const e=Qt.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]};await Promise.all([wt(this.overlayEl,{opacity:[1,0]},{duration:.2}).finished,wt(this.containerEl,e,{duration:.2}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",(e=>{var t;"Escape"===e.key?be.D8.close():"Tab"===e.key&&((null==(t=e.target)?void 0:t.tagName.includes("wcm-"))||this.containerEl.focus())}),this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var e;null==(e=this.abortController)||e.abort(),this.abortController=void 0}render(){const e={"wcm-overlay":!0,"wcm-active":this.active};return F`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${me(e)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?F`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};un.styles=[Tt.globalCss,on],ln([fe()],un.prototype,"open",2),ln([fe()],un.prototype,"active",2),un=ln([ue("wcm-modal")],un);const hn=c`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var dn=Object.defineProperty,fn=Object.getOwnPropertyDescriptor,pn=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?fn(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&dn(t,r,s),s};let gn=class extends ce{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){be.Ao.isMobile()?be.jL.replace("MobileConnecting"):be.jL.replace("MobileQrcodeConnecting")}onDesktop(){be.jL.replace("DesktopConnecting")}onWeb(){be.jL.replace("WebConnecting")}render(){return F`<div>${this.isRetry?F`<slot></slot>`:null} ${this.isMobile?F`<wcm-button .onClick="${this.onMobile}" .iconLeft="${Ft.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?F`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${Ft.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?F`<wcm-button .onClick="${this.onWeb}" .iconLeft="${Ft.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};gn.styles=[Tt.globalCss,hn],pn([de({type:Boolean})],gn.prototype,"isMobile",2),pn([de({type:Boolean})],gn.prototype,"isDesktop",2),pn([de({type:Boolean})],gn.prototype,"isWeb",2),pn([de({type:Boolean})],gn.prototype,"isRetry",2),gn=pn([ue("wcm-platform-selection")],gn);const mn=c`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;Object.defineProperty,Object.getOwnPropertyDescriptor;let yn=class extends ce{onClick(){be.jL.push("WalletExplorer")}render(){const{recomendedWallets:e}=be.pV.state,t=[...e,...Jr.manualWallets()].reverse().slice(0,4);return F`<button @click="${this.onClick}"><div class="wcm-icons">${t.map((e=>{const t=Qt.getWalletIcon(e);if(t)return F`<img crossorigin="anonymous" src="${t}">`;const r=Qt.getWalletIcon({id:e.id});return r?F`<img crossorigin="anonymous" src="${r}">`:Ft.WALLET_PLACEHOLDER}))} ${[...Array(4-t.length)].map((()=>Ft.WALLET_PLACEHOLDER))}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};yn.styles=[Tt.globalCss,mn],yn=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-view-all-wallets-button")],yn);const bn=c`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var wn=Object.defineProperty,vn=Object.getOwnPropertyDescriptor,_n=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?vn(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&wn(t,r,s),s};let En=class extends ce{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout((()=>{const{walletConnectUri:e}=be.IN.state;this.uri=e}),0)}get overlayEl(){return Qt.getShadowRootElement(this,".wcm-qr-container")}render(){return F`<div class="wcm-qr-container">${this.uri?F`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${vt(this.walletId)}" imageId="${vt(this.imageId)}"></wcm-qrcode>`:F`<wcm-spinner></wcm-spinner>`}</div>`}};En.styles=[Tt.globalCss,bn],_n([de()],En.prototype,"walletId",2),_n([de()],En.prototype,"imageId",2),_n([fe()],En.prototype,"uri",2),En=_n([ue("wcm-walletconnect-qr")],En);Object.defineProperty,Object.getOwnPropertyDescriptor;let xn=class extends ce{viewTemplate(){return be.Ao.isAndroid()&&!be.Ao.isTelegram()?F`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:be.Ao.isMobile()?F`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:F`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return F`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};xn.styles=[Tt.globalCss],xn=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-connect-wallet-view")],xn);const Sn=c`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var An=Object.defineProperty,In=Object.getOwnPropertyDescriptor,kn=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?In(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&An(t,r,s),s};let Tn=class extends ce{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(e){const{desktop:t,name:r}=be.Ao.getWalletRouterData(),n=null==t?void 0:t.native,i=null==t?void 0:t.universal;if(n){const t=be.Ao.formatNativeUrl(n,e,r);be.Ao.openHref(t,"_self")}else if(i){const t=be.Ao.formatUniversalUrl(i,e,r);be.Ao.openHref(t,"_blank")}}openDesktopApp(){const{walletConnectUri:e}=be.IN.state,t=be.Ao.getWalletRouterData();Qt.setRecentWallet(t),e&&this.onFormatAndRedirect(e)}render(){const{name:e,id:t,image_id:r}=be.Ao.getWalletRouterData(),{isMobile:n,isWeb:i}=Qt.getCachedRouterWalletPlatforms();return F`<wcm-modal-header title="${e}" .onAction="${Qt.handleUriCopy}" .actionIcon="${Ft.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${t}" imageId="${vt(r)}" label="${`Continue in ${e}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${e} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${Ft.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Tn.styles=[Tt.globalCss,Sn],kn([fe()],Tn.prototype,"isError",2),Tn=kn([ue("wcm-desktop-connecting-view")],Tn);const Pn=c`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;Object.defineProperty,Object.getOwnPropertyDescriptor;let Cn=class extends ce{onInstall(e){e&&be.Ao.openHref(e,"_blank")}render(){const{name:e,id:t,image_id:r,homepage:n}=be.Ao.getWalletRouterData();return F`<wcm-modal-header title="${e}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${t}" imageId="${vt(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${e} to continue. If multiple browser extensions are installed, disable non ${e} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(n)}" .iconLeft="${Ft.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};Cn.styles=[Tt.globalCss,Pn],Cn=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-install-wallet-view")],Cn);const On=c`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var Mn=Object.defineProperty,Rn=Object.getOwnPropertyDescriptor,Ln=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?Rn(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&Mn(t,r,s),s};let Nn=class extends ce{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(e,t=!1){const{mobile:r,name:n}=be.Ao.getWalletRouterData(),i=null==r?void 0:r.native,s=null==r?void 0:r.universal,o=be.Ao.isTelegram()?"_blank":"_self";if(e=be.Ao.isTelegram()&&be.Ao.isAndroid()?encodeURIComponent(e):e,i&&!t){const t=be.Ao.formatNativeUrl(i,e,n);be.Ao.openHref(t,o)}else if(s){const t=be.Ao.formatUniversalUrl(s,e,n);be.Ao.openHref(t,o)}}openMobileApp(e=!1){const{walletConnectUri:t}=be.IN.state,r=be.Ao.getWalletRouterData();t&&this.onFormatAndRedirect(t,e),Qt.setRecentWallet(r)}onGoToAppStore(e){e&&be.Ao.openHref(e,"_blank")}render(){const{name:e,id:t,image_id:r,app:n,mobile:i}=be.Ao.getWalletRouterData(),{isWeb:s}=Qt.getCachedRouterWalletPlatforms(),o=null==n?void 0:n.ios,a=null==i?void 0:i.universal;return F`<wcm-modal-header title="${e}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${t}" imageId="${vt(r)}" label="Tap 'Open' to continue" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${Ft.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?F`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${t}" imageId="${vt(r)}"></wcm-wallet-image><wcm-text>${`Get ${e}`}</wcm-text></div><wcm-button .iconRight="${Ft.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};Nn.styles=[Tt.globalCss,On],Ln([fe()],Nn.prototype,"isError",2),Nn=Ln([ue("wcm-mobile-connecting-view")],Nn);const Bn=c`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;Object.defineProperty,Object.getOwnPropertyDescriptor;let Dn=class extends ce{render(){const{name:e,id:t,image_id:r}=be.Ao.getWalletRouterData(),{isDesktop:n,isWeb:i}=Qt.getCachedRouterWalletPlatforms();return F`<wcm-modal-header title="${e}" .onAction="${Qt.handleUriCopy}" .actionIcon="${Ft.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${t}" imageId="${vt(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${e} app`}</wcm-text><wcm-platform-selection .isDesktop="${n}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};Dn.styles=[Tt.globalCss,Bn],Dn=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-mobile-qr-connecting-view")],Dn);Object.defineProperty,Object.getOwnPropertyDescriptor;let Un=class extends ce{render(){return F`<wcm-modal-header title="Scan the code" .onAction="${Qt.handleUriCopy}" .actionIcon="${Ft.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};Un.styles=[Tt.globalCss],Un=((e,t)=>{for(var r,n=t,i=e.length-1;i>=0;i--)(r=e[i])&&(n=r(n)||n);return n})([ue("wcm-qrcode-view")],Un);const zn=c`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var jn=Object.defineProperty,Fn=Object.getOwnPropertyDescriptor,$n=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?Fn(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&jn(t,r,s),s};let qn=class extends ce{constructor(){super(...arguments),this.loading=!be.pV.state.wallets.listings.length,this.firstFetch=!be.pV.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=Qt.debounce((e=>{e.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=e,be.pV.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),be.pV.resetSearch())}))}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var e;null==(e=this.intersectionObserver)||e.disconnect()}get placeholderEl(){return Qt.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver((([e])=>{!e.isIntersecting||this.search&&this.firstFetch||this.fetchWallets()})),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:e,search:t}=be.pV.state,{listings:r,total:n}=this.search?t:e;return n<=40||r.length>=n}async fetchWallets(){var e;const{wallets:t,search:r}=be.pV.state,{listings:n,total:i,page:s}=this.search?r:t;if(!this.endReached&&(this.firstFetch||i>40&&n.length<i))try{this.loading=!0;const t=null==(e=be.IN.state.chains)?void 0:e.join(","),{listings:r}=await be.pV.getWallets({page:this.firstFetch?1:s+1,entries:40,search:this.search,version:2,chains:t}),n=r.map((e=>Qt.getWalletIcon(e)));await Promise.all([...n.map((async e=>Qt.preloadImage(e))),be.Ao.wait(300)]),this.endReached=this.isLastPage()}catch(e){console.error(e),be.dC.openToast(Qt.getErrorMessage(e),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(e){be.Ao.isAndroid()?Qt.handleMobileLinking(e):Qt.goToConnectingView(e)}onSearchChange(e){const{value:t}=e.target;this.searchDebounce(t)}render(){const{wallets:e,search:t}=be.pV.state,{listings:r}=this.search?t:e,n=this.loading&&!r.length,i=this.search.length>=3;let s=Xr.manualWalletsTemplate(),o=Xr.recomendedWalletsTemplate(!0);i&&(s=s.filter((({values:e})=>Qt.caseSafeIncludes(e[0],this.search))),o=o.filter((({values:e})=>Qt.caseSafeIncludes(e[0],this.search))));const a=!this.loading&&!r.length&&!o.length,c={"wcm-loading":n,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return F`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${me(c)}"><div class="wcm-grid">${n?null:s} ${n?null:o} ${n?null:r.map((e=>F`${e?F`<wcm-wallet-button imageId="${e.image_id}" name="${e.name}" walletId="${e.id}" .onClick="${()=>this.onConnect(e)}"></wcm-wallet-button>`:null}`))}</div><div class="wcm-placeholder-block">${a?F`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?F`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};qn.styles=[Tt.globalCss,zn],$n([fe()],qn.prototype,"loading",2),$n([fe()],qn.prototype,"firstFetch",2),$n([fe()],qn.prototype,"search",2),$n([fe()],qn.prototype,"endReached",2),qn=$n([ue("wcm-wallet-explorer-view")],qn);const Wn=c`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var Hn=Object.defineProperty,Vn=Object.getOwnPropertyDescriptor,Kn=(e,t,r,n)=>{for(var i,s=n>1?void 0:n?Vn(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&Hn(t,r,s),s};let Gn=class extends ce{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(e){const{desktop:t,name:r}=be.Ao.getWalletRouterData(),n=null==t?void 0:t.universal;if(n){const t=be.Ao.formatUniversalUrl(n,e,r);be.Ao.openHref(t,"_blank")}}openWebWallet(){const{walletConnectUri:e}=be.IN.state,t=be.Ao.getWalletRouterData();Qt.setRecentWallet(t),e&&this.onFormatAndRedirect(e)}render(){const{name:e,id:t,image_id:r}=be.Ao.getWalletRouterData(),{isMobile:n,isDesktop:i}=Qt.getCachedRouterWalletPlatforms(),s=be.Ao.isMobile();return F`<wcm-modal-header title="${e}" .onAction="${Qt.handleUriCopy}" .actionIcon="${Ft.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${t}" imageId="${vt(r)}" label="${`Continue in ${e}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${e} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isDesktop="${!s&&i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${Ft.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Gn.styles=[Tt.globalCss,Wn],Kn([fe()],Gn.prototype,"isError",2),Gn=Kn([ue("wcm-web-connecting-view")],Gn)},940:(e,t,r)=>{"use strict";r.d(t,{WalletConnectModal:()=>i});var n=r(2220);class i{constructor(e){this.openModal=n.D8.open,this.closeModal=n.D8.close,this.subscribeModal=n.D8.subscribe,this.setTheme=n.lH.setThemeConfig,n.lH.setThemeConfig(e),n.mb.setConfig(e),this.initUi()}async initUi(){if("undefined"!=typeof window){await Promise.resolve().then(r.bind(r,3430));const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),n.IN.setIsUiLoaded(!0)}}}},7559:e=>{"use strict";e.exports={rE:"6.6.1"}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.amdO={},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};r.r(e),r.d(e,{identity:()=>uo});var t={};r.r(t),r.d(t,{base2:()=>ho});var n={};r.r(n),r.d(n,{base8:()=>fo});var i={};r.r(i),r.d(i,{base10:()=>po});var s={};r.r(s),r.d(s,{base16:()=>go,base16upper:()=>mo});var o={};r.r(o),r.d(o,{base32:()=>yo,base32hex:()=>_o,base32hexpad:()=>xo,base32hexpadupper:()=>So,base32hexupper:()=>Eo,base32pad:()=>wo,base32padupper:()=>vo,base32upper:()=>bo,base32z:()=>Ao});var a={};r.r(a),r.d(a,{base36:()=>Io,base36upper:()=>ko});var c={};r.r(c),r.d(c,{base58btc:()=>To,base58flickr:()=>Po});var l={};r.r(l),r.d(l,{base64:()=>Co,base64pad:()=>Oo,base64url:()=>Mo,base64urlpad:()=>Ro});var u={};r.r(u),r.d(u,{base256emoji:()=>Do});var h={};r.r(h),r.d(h,{sha256:()=>aa,sha512:()=>ca});var d={};r.r(d),r.d(d,{identity:()=>ua});var f={};r.r(f),r.d(f,{code:()=>da,decode:()=>pa,encode:()=>fa,name:()=>ha});var p={};r.r(p),r.d(p,{code:()=>ba,decode:()=>va,encode:()=>wa,name:()=>ya});var g=r(5606),m=(r(8216),r(8287));window.global=window,window.process=g,window.Buffer=m.Buffer;const y={production:!0,eth:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0xc48A358a5B6fCe52B873373031C53FB9c63E2850",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x2328Ee20fA271073328DC94e52Dd5b61aa0C91A7"},bsc:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0xc48A358a5B6fCe52B873373031C53FB9c63E2850",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},heco:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0x50188692d5549386d102642036bab916b998c814",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},arbitrum:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0xc48A358a5B6fCe52B873373031C53FB9c63E2850",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},polygon:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0xc48A358a5B6fCe52B873373031C53FB9c63E2850",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x36abc668b1C71c5cFb585Eb4457B3fBbA66bdCf5"},avalanche:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0xc48A358a5B6fCe52B873373031C53FB9c63E2850",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},fantom:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0xc48A358a5B6fCe52B873373031C53FB9c63E2850",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},linea:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0xc48A358a5B6fCe52B873373031C53FB9c63E2850",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},optimism:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0xc48A358a5B6fCe52B873373031C53FB9c63E2850",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},base:{deBridgeGateAddress:"0xc1656B63D9EEBa6d114f6bE19565177893e5bCBF",signatureVerifier:"0x2a3e72eD893b5958690e16c3BBe1BD92137b6250",batchBalanceAddress:"0xc48A358a5B6fCe52B873373031C53FB9c63E2850",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},neon:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0x2Df71B54A835648C0A0f6bc7470ee46400AaaAbe",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},gnosis:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x8244d6Ffe0695B30b2bAD424683Ee3bc534Ea464",batchBalanceAddress:"0xc48A358a5B6fCe52B873373031C53FB9c63E2850",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},metis:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0xc48A358a5B6fCe52B873373031C53FB9c63E2850",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},lightLink:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0xc48A358a5B6fCe52B873373031C53FB9c63E2850",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},bitrock:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0xc48A358a5B6fCe52B873373031C53FB9c63E2850",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},sonic:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0xc48A358a5B6fCe52B873373031C53FB9c63E2850",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},crossfi:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0x9b5649BeA128e778aE7A5B8d5Af96746C44e5DD2",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},cronos:{deBridgeGateAddress:"0xa706DaF168865b0b334ef8Ca2418F5AAC55a4b16",signatureVerifier:"0x9EB190eCB72D22cE75de332F0D38C31211aa0CfC",batchBalanceAddress:"0x4b575f05e83973262248a1229ddF0F24cf5018eB",preSwapAddress:"0xE59cD1f9867B051fa7e6Ba692521EfbF8C301387",subscriptionAddress:"0x0000000000000000000000000000000000000000"},abstract:{deBridgeGateAddress:"0xa706DaF168865b0b334ef8Ca2418F5AAC55a4b16",signatureVerifier:"0x9EB190eCB72D22cE75de332F0D38C31211aa0CfC",batchBalanceAddress:"0x4b575f05e83973262248a1229ddF0F24cf5018eB",preSwapAddress:"0xE59cD1f9867B051fa7e6Ba692521EfbF8C301387",subscriptionAddress:"0x0000000000000000000000000000000000000000"},berachain:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0xFCf83648b8cDeF62e5d03319a6f1FCE16e4D6A59",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},story:{deBridgeGateAddress:"0x43dE2d77BF8027e25dBD179B491e8d64f38398aA",signatureVerifier:"0x949b3B3c098348b879C9e4F15cecc8046d9C8A8c",batchBalanceAddress:"0xFCf83648b8cDeF62e5d03319a6f1FCE16e4D6A59",preSwapAddress:"0x663dc15d3c1ac63ff12e45ab68fea3f0a883c251",subscriptionAddress:"0x0000000000000000000000000000000000000000"},inviteAddress:"0x941f514A3D30123Dd2FB1A99e7771CD8cEcCa9F4",remoteServiceBaseUrl:"https://api.debridge.finance",defaultChainId:1,supportedChains:[1,10,56,128,137,42161,43114,250,7565164,59144,8453,245022934,100,1890,1088,7171,998,146,4158,388,2741,80094,1514],dePortChains:[1,10,56,137,42161,43114,250,7565164,59144,8453,245022934,100,1088,146,388,2741,80094,1514],deSwapChains:[1,10,56,137,42161,43114,250,7565164,245022934,100,1088,998,146,388,2741,80094,1514],pmmChains:[1,10,56,137,42161,43114,250,7565164,59144,8453,245022934,100,1088,998,146,388,2741,80094,1514],widgetChains:[1,10,56,137,42161,43114,250,7565164,59144,8453,245022934,100,1088,7171,998,146,4158,388,2741,80094,1514],widgetChainsDePort:[1,10,56,137,42161,43114,250,7565164,8453,245022934,100,1088,7171,146,4158,388,2741,80094,1514],explorerOrders:[1,10,56,137,42161,43114,250,7565164,59144,8453,245022934,100,1890,1088,7171,146,4158,388,2741,80094,1514],explorerTransactions:[1,10,56,128,137,42161,43114,250,7565164,59144,8453,245022934,100,1890,1088,7171,146,4158,388,2741,80094,1514],supportedAppChains:[1,10,56,128,137,42161,43114,250,7565164,59144,8453,245022934,100,1088,7171,146,4158,388,2741,80094,1514],isMainnet:!0,defaultMinDebridgeConfirmations:8,whiteListEnabled:!1,recommendExecutionFee:.001,recommendedExecutionFeeMultiplier:1.3,infuraKey:"deec1f0db8aa4960882206b0ef38e4a8",sentry:{dsn:"https://09c681dbcc9af08bca284b948fd1d21a@sentry-ui.debridge.finance/5",tracingOrigins:["https://app.debridge.finance"]},solanaProgramms:{programId:"DEbrdGj3HsRsAzx6uH4MKyREKxVAfBydijLUF3ygsFfh",settingsProgramId:"DeSetTwWhjZq6Pz9Kfdo1KoS5NqtsM6G8ERbX4SSCSft",debug:!0,cluster:"mainnet-beta",rpcUrl:"https://solana-rpc.debridge.finance/"},supportedWallets:["METAMASK","COINBASEWALLET","WALLETCONNECT","ONEINCHWALLET","GNOSIS","Brave Wallet","UNSTOPPABLEDOMAINS","Frontier","PHANTOM","Solflare","Salmon","Glow","Trust Wallet","SolflareMetamask","Fordefi","Fordefi Solana","PHANTOM EVM","Backpack","Backpack EVM","Brave Wallet","Brave","Browser Wallet EVM","Browser Wallet Solana","Trust","RABBY","Coinbase Wallet","BitgetEVM","Bitget","WalletConnect","CoreEVM"],crossChainApi:"https://deswap.debridge.finance/v1.0",googleKey:"AIzaSyC91wuGwVwVkEdThEvppfwmKOKoyDwA4Hs",receivingForwarderAddress:"0x413dddce3d0ead2489648e482d192a7758c2b1b4",parentUrlHeaderWidget:"Parent-Url-Widget",previousUrl:"Previous-Url",enableSentry:!0,enablePermit:!0,unstoppabledomains:{clientID:"117aac0e-cbc6-4c41-a837-6ee553103f89",redirectUri:"http://localhost:4200/"},supportedNFTChains:[1,56,137,42161,43114],nftBridgeAddress:"0xD132698c56B03131c64e48732690249DD50562A1",moralisApiKey:"wHK0DRTI4dQyvwn3LxMYEeBC3eiR4NQgAHYWCgm83ltQc4te9xes98mVV8eLBu8z",affiliateCodes:[],dln:{enableContractsCache:!0,addresses:{1:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},56:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},128:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},137:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},42161:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},43114:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},250:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},59144:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},7565164:{dlnSourceAddress:"src5qyZHqTqecJV4aY6Cb6zDZLMDzrDKKezs22MPHr4",dlnDestinationAddress:"dst5MGcFPoBeREFAA5E3tU5ij8m5uVYwkzkSAbsLbNo",deBridge:"DEbrdGj3HsRsAzx6uH4MKyREKxVAfBydijLUF3ygsFfh",deBridgeSettings:"DeSetTwWhjZq6Pz9Kfdo1KoS5NqtsM6G8ERbX4SSCSft"},8453:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},10:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},245022934:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},100:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},1088:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},1890:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},7171:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},146:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},388:{dlnSourceAddress:"0xA13771CAbd2e44dcA8DeA846cc954D1FbAc0623b",dlnDestinationAddress:"0x422C63dc43E8e98a73c608138fCB69C3eCe1eE47"},2741:{dlnSourceAddress:"0xA13771CAbd2e44dcA8DeA846cc954D1FbAc0623b",dlnDestinationAddress:"0x422C63dc43E8e98a73c608138fCB69C3eCe1eE47"},80094:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},4158:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"},1514:{dlnSourceAddress:"0xeF4fB24aD0916217251F553c0596F8Edc630EB66",dlnDestinationAddress:"0xE7351Fd770A37282b91D153Ee690B63579D6dd7f"}}},pmmServiceBaseUrl:"https://stats-api.dln.trade",pointsServiceBaseUrl:"https://points-api-td.debridge.finance",cacheTimeoutForPrices:1e4,ensResolverAddress:"0x3671aE578E63FdF66ad4F3E12CC0c0d71Ac7510C",checkNodeStatusDelay:6e4,disableAutoConnectWallet:!1,enableSignTerms:!0,noderealKey:"6ebc8f6453ac408f93e414f192be8db3",arweaveBaseUrl:"https://arweave-api.debridge.finance/api",inviteCode:4850,dlnBaseUrl:"https://app.dln.trade",deBridgeBaseUrl:"https://app.debridge.finance",shareLink:"https://debridge.finance",walletConnectProjectId:"95557055208ff76c831c3ffa9eaa72ab",enableWalletChangeChainEvent:!1,enableCreationLimitOrdersWithPreswap:!1,googleAnalyticsTag:"",txTracker:"https://monitoring-ui.debridge.io",solanaCallDataExecutor:"exe59FS5cojZkPJVDFDV8RnXCC7wd6yoBjsUtqH7Zai",enableSolanaBufferAmount:!0,configuration:"testing",tradingView:{sources:{dexGuru:{key:"7sC0BnqXUkh3HmmNVBUbpYrNelD9jitZ_eXeIi7ga-k",host:"https://api.dev.dex.guru",delay:1e4},birdeye:{key:"68f835271a3b4d33933a20bb20d1cae3"}}},bannerDomain:"app.debridge.finance",birdeye:{key:"68f835271a3b4d33933a20bb20d1cae3",url:"https://public-api.birdeye.so"},app:"DESWAP",targetPriorityLamports:1e6,hyperliquidAddress:"0x2Df1c51E09aECF9cacB7bc98cB1742757f163dF7",signalrURL:"https://signalr.debridge.finance/signalrHub",maxPriorityLamportsPerTransaction:3e8,minPriorityLamportsPerTransaction:1e4};var b,w,v;!function(e){e[e.EVM=1]="EVM",e[e.SOLANA=2]="SOLANA"}(b||(b={})),function(e){e[e.Ethereum=1]="Ethereum",e[e.BSC=56]="BSC",e[e.Heco=128]="Heco",e[e.Polygon=137]="Polygon",e[e.Arbitrum=42161]="Arbitrum",e[e.Avalanche=43114]="Avalanche",e[e.Solana=7565164]="Solana",e[e.Fantom=250]="Fantom",e[e.Linea=59144]="Linea",e[e.Optimism=10]="Optimism",e[e.Base=8453]="Base",e[e.Neon=245022934]="Neon",e[e.Gnosis=100]="Gnosis",e[e.Metis=1088]="Metis",e[e.LightLink=1890]="LightLink",e[e.Bitrock=7171]="Bitrock",e[e.Hyperliquid=998]="Hyperliquid",e[e.Sonic=146]="Sonic",e[e.CrossFi=4158]="CrossFi",e[e.CronosZkEVM=388]="CronosZkEVM",e[e.Abstract=2741]="Abstract",e[e.Berachain=80094]="Berachain",e[e.Story=1514]="Story"}(w||(w={})),function(e){e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.CUSTOM="custom"}(v||(v={}));var _=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,E=Math.ceil,x=Math.floor,S="[BigNumber Error] ",A=S+"Number primitive has more than 15 significant digits: ",I=1e14,k=14,T=9007199254740991,P=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],C=1e7,O=1e9;function M(e){var t=0|e;return e>0||e===t?t:t-1}function R(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=k-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function L(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,c=e.e,l=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==l,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>l^r?1:-1;for(a=(c=i.length)<(l=s.length)?c:l,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==l?0:c>l^r?1:-1}function N(e,t,r,n){if(e<t||e>r||e!==x(e))throw Error(S+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function B(e){var t=e.c.length-1;return M(e.e/k)==t&&e.c[t]%2!=0}function D(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function U(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var z=function e(t){var r,n,i,s,o,a,c,l,u,h,d=W.prototype={constructor:W,toString:null,valueOf:null},f=new W(1),p=20,g=4,m=-7,y=21,b=-1e7,w=1e7,v=!1,z=1,j=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},$="0123456789abcdefghijklmnopqrstuvwxyz",q=!0;function W(e,t){var r,s,o,a,c,l,u,h,d=this;if(!(d instanceof W))return new W(e,t);if(null==t){if(e&&!0===e._isBigNumber)return d.s=e.s,void(!e.c||e.e>w?d.c=d.e=null:e.e<b?d.c=[d.e=0]:(d.e=e.e,d.c=e.c.slice()));if((l="number"==typeof e)&&0*e==0){if(d.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,c=e;c>=10;c/=10,a++);return void(a>w?d.c=d.e=null:(d.e=a,d.c=[e]))}h=String(e)}else{if(!_.test(h=String(e)))return i(d,h,l);d.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(a=h.indexOf("."))>-1&&(h=h.replace(".","")),(c=h.search(/e/i))>0?(a<0&&(a=c),a+=+h.slice(c+1),h=h.substring(0,c)):a<0&&(a=h.length)}else{if(N(t,2,$.length,"Base"),10==t&&q)return G(d=new W(e),p+d.e+1,g);if(h=String(e),l="number"==typeof e){if(0*e!=0)return i(d,h,l,t);if(d.s=1/e<0?(h=h.slice(1),-1):1,W.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(A+e)}else d.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(r=$.slice(0,t),a=c=0,u=h.length;c<u;c++)if(r.indexOf(s=h.charAt(c))<0){if("."==s){if(c>a){a=u;continue}}else if(!o&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){o=!0,c=-1,a=0;continue}return i(d,String(e),l,t)}l=!1,(a=(h=n(h,t,10,d.s)).indexOf("."))>-1?h=h.replace(".",""):a=h.length}for(c=0;48===h.charCodeAt(c);c++);for(u=h.length;48===h.charCodeAt(--u););if(h=h.slice(c,++u)){if(u-=c,l&&W.DEBUG&&u>15&&(e>T||e!==x(e)))throw Error(A+d.s*e);if((a=a-c-1)>w)d.c=d.e=null;else if(a<b)d.c=[d.e=0];else{if(d.e=a,d.c=[],c=(a+1)%k,a<0&&(c+=k),c<u){for(c&&d.c.push(+h.slice(0,c)),u-=k;c<u;)d.c.push(+h.slice(c,c+=k));c=k-(h=h.slice(c)).length}else c-=u;for(;c--;h+="0");d.c.push(+h)}}else d.c=[d.e=0]}function H(e,t,r,n){var i,s,o,a,c;if(null==r?r=g:N(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)c=R(e.c),c=1==n||2==n&&(o<=m||o>=y)?D(c,o):U(c,o,"0");else if(s=(e=G(new W(e),t,r)).e,a=(c=R(e.c)).length,1==n||2==n&&(t<=s||s<=m)){for(;a<t;c+="0",a++);c=D(c,s)}else if(t-=o,c=U(c,s,"0"),s+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=s-a)>0)for(s+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function V(e,t){for(var r,n,i=1,s=new W(e[0]);i<e.length;i++)(!(n=new W(e[i])).s||(r=L(s,n))===t||0===r&&s.s===t)&&(s=n);return s}function K(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*k-1)>w?e.c=e.e=null:r<b?e.c=[e.e=0]:(e.e=r,e.c=t),e}function G(e,t,r,n){var i,s,o,a,c,l,u,h=e.c,d=P;if(h){e:{for(i=1,a=h[0];a>=10;a/=10,i++);if((s=t-i)<0)s+=k,o=t,c=h[l=0],u=x(c/d[i-o-1]%10);else if((l=E((s+1)/k))>=h.length){if(!n)break e;for(;h.length<=l;h.push(0));c=u=0,i=1,o=(s%=k)-k+1}else{for(c=a=h[l],i=1;a>=10;a/=10,i++);u=(o=(s%=k)-k+i)<0?0:x(c/d[i-o-1]%10)}if(n=n||t<0||null!=h[l+1]||(o<0?c:c%d[i-o-1]),n=r<4?(u||n)&&(0==r||r==(e.s<0?3:2)):u>5||5==u&&(4==r||n||6==r&&(s>0?o>0?c/d[i-o]:0:h[l-1])%10&1||r==(e.s<0?8:7)),t<1||!h[0])return h.length=0,n?(t-=e.e+1,h[0]=d[(k-t%k)%k],e.e=-t||0):h[0]=e.e=0,e;if(0==s?(h.length=l,a=1,l--):(h.length=l+1,a=d[k-s],h[l]=o>0?x(c/d[i-o]%d[o])*a:0),n)for(;;){if(0==l){for(s=1,o=h[0];o>=10;o/=10,s++);for(o=h[0]+=a,a=1;o>=10;o/=10,a++);s!=a&&(e.e++,h[0]==I&&(h[0]=1));break}if(h[l]+=a,h[l]!=I)break;h[l--]=0,a=1}for(s=h.length;0===h[--s];h.pop());}e.e>w?e.c=e.e=null:e.e<b&&(e.c=[e.e=0])}return e}function Z(e){var t,r=e.e;return null===r?e.toString():(t=R(e.c),t=r<=m||r>=y?D(t,r):U(t,r,"0"),e.s<0?"-"+t:t)}return W.clone=e,W.ROUND_UP=0,W.ROUND_DOWN=1,W.ROUND_CEIL=2,W.ROUND_FLOOR=3,W.ROUND_HALF_UP=4,W.ROUND_HALF_DOWN=5,W.ROUND_HALF_EVEN=6,W.ROUND_HALF_CEIL=7,W.ROUND_HALF_FLOOR=8,W.EUCLID=9,W.config=W.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(S+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(N(r=e[t],0,O,t),p=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(N(r=e[t],0,8,t),g=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(N(r[0],-O,0,t),N(r[1],0,O,t),m=r[0],y=r[1]):(N(r,-O,O,t),m=-(y=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)N(r[0],-O,-1,t),N(r[1],1,O,t),b=r[0],w=r[1];else{if(N(r,-O,O,t),!r)throw Error(S+t+" cannot be zero: "+r);b=-(w=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(S+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw v=!r,Error(S+"crypto unavailable");v=r}else v=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(N(r=e[t],0,9,t),z=r),e.hasOwnProperty(t="POW_PRECISION")&&(N(r=e[t],0,O,t),j=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(S+t+" not an object: "+r);F=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(S+t+" invalid: "+r);q="0123456789"==r.slice(0,10),$=r}}return{DECIMAL_PLACES:p,ROUNDING_MODE:g,EXPONENTIAL_AT:[m,y],RANGE:[b,w],CRYPTO:v,MODULO_MODE:z,POW_PRECISION:j,FORMAT:F,ALPHABET:$}},W.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!W.DEBUG)return!0;var t,r,n=e.c,i=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===s||-1===s)&&i>=-O&&i<=O&&i===x(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%k)<1&&(t+=k),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=I||r!==x(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(S+"Invalid BigNumber: "+e)},W.maximum=W.max=function(){return V(arguments,-1)},W.minimum=W.min=function(){return V(arguments,1)},W.random=(s=9007199254740992,o=Math.random()*s&2097151?function(){return x(Math.random()*s)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,i,s,a=0,c=[],l=new W(f);if(null==e?e=p:N(e,0,O),i=E(e/k),v)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));a<i;)(s=131072*t[a]+(t[a+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[a]=r[0],t[a+1]=r[1]):(c.push(s%1e14),a+=2);a=i/2}else{if(!crypto.randomBytes)throw v=!1,Error(S+"crypto unavailable");for(t=crypto.randomBytes(i*=7);a<i;)(s=281474976710656*(31&t[a])+1099511627776*t[a+1]+4294967296*t[a+2]+16777216*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(c.push(s%1e14),a+=7);a=i/7}if(!v)for(;a<i;)(s=o())<9e15&&(c[a++]=s%1e14);for(i=c[--a],e%=k,i&&e&&(s=P[k-e],c[a]=x(i/s)*s);0===c[a];c.pop(),a--);if(a<0)c=[n=0];else{for(n=-1;0===c[0];c.splice(0,1),n-=k);for(a=1,s=c[0];s>=10;s/=10,a++);a<k&&(n-=k-a)}return l.e=n,l.c=c,l}),W.sum=function(){for(var e=1,t=arguments,r=new W(t[0]);e<t.length;)r=r.plus(t[e++]);return r},n=function(){var e="0123456789";function t(e,t,r,n){for(var i,s,o=[0],a=0,c=e.length;a<c;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(n,i,s,o,a){var c,l,u,h,d,f,m,y,b=n.indexOf("."),w=p,v=g;for(b>=0&&(h=j,j=0,n=n.replace(".",""),f=(y=new W(i)).pow(n.length-b),j=h,y.c=t(U(R(f.c),f.e,"0"),10,s,e),y.e=y.c.length),u=h=(m=t(n,i,s,a?(c=$,e):(c=e,$))).length;0==m[--h];m.pop());if(!m[0])return c.charAt(0);if(b<0?--u:(f.c=m,f.e=u,f.s=o,m=(f=r(f,y,w,v,s)).c,d=f.r,u=f.e),b=m[l=u+w+1],h=s/2,d=d||l<0||null!=m[l+1],d=v<4?(null!=b||d)&&(0==v||v==(f.s<0?3:2)):b>h||b==h&&(4==v||d||6==v&&1&m[l-1]||v==(f.s<0?8:7)),l<1||!m[0])n=d?U(c.charAt(1),-w,c.charAt(0)):c.charAt(0);else{if(m.length=l,d)for(--s;++m[--l]>s;)m[l]=0,l||(++u,m=[1].concat(m));for(h=m.length;!m[--h];);for(b=0,n="";b<=h;n+=c.charAt(m[b++]));n=U(n,u,c.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,s,o,a=0,c=e.length,l=t%C,u=t/C|0;for(e=e.slice();c--;)a=((i=l*(s=e[c]%C)+(n=u*s+(o=e[c]/C|0)*l)%C*C+a)/r|0)+(n/C|0)+u*o,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,s,o,a){var c,l,u,h,d,f,p,g,m,y,b,w,v,_,E,S,A,T=n.s==i.s?1:-1,P=n.c,C=i.c;if(!(P&&P[0]&&C&&C[0]))return new W(n.s&&i.s&&(P?!C||P[0]!=C[0]:C)?P&&0==P[0]||!C?0*T:T/0:NaN);for(m=(g=new W(T)).c=[],T=s+(l=n.e-i.e)+1,a||(a=I,l=M(n.e/k)-M(i.e/k),T=T/k|0),u=0;C[u]==(P[u]||0);u++);if(C[u]>(P[u]||0)&&l--,T<0)m.push(1),h=!0;else{for(_=P.length,S=C.length,u=0,T+=2,(d=x(a/(C[0]+1)))>1&&(C=e(C,d,a),P=e(P,d,a),S=C.length,_=P.length),v=S,b=(y=P.slice(0,S)).length;b<S;y[b++]=0);A=C.slice(),A=[0].concat(A),E=C[0],C[1]>=a/2&&E++;do{if(d=0,(c=t(C,y,S,b))<0){if(w=y[0],S!=b&&(w=w*a+(y[1]||0)),(d=x(w/E))>1)for(d>=a&&(d=a-1),p=(f=e(C,d,a)).length,b=y.length;1==t(f,y,p,b);)d--,r(f,S<p?A:C,p,a),p=f.length,c=1;else 0==d&&(c=d=1),p=(f=C.slice()).length;if(p<b&&(f=[0].concat(f)),r(y,f,b,a),b=y.length,-1==c)for(;t(C,y,S,b)<1;)d++,r(y,S<b?A:C,b,a),b=y.length}else 0===c&&(d++,y=[0]);m[u++]=d,y[0]?y[b++]=P[v]||0:(y=[P[v]],b=1)}while((v++<_||null!=y[0])&&T--);h=null!=y[0],m[0]||m.splice(0,1)}if(a==I){for(u=1,T=m[0];T>=10;T/=10,u++);G(g,s+(g.e=u+l*k-1)+1,o,h)}else g.e=l,g.r=+h;return g}}(),a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,c=/^([^.]+)\.$/,l=/^\.([^.]+)$/,u=/^-?(Infinity|NaN)$/,h=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(e,t,r,n){var i,s=r?t:t.replace(h,"");if(u.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(a,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(c,"$1").replace(l,"0.$1")),t!=s))return new W(s,i);if(W.DEBUG)throw Error(S+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},d.absoluteValue=d.abs=function(){var e=new W(this);return e.s<0&&(e.s=1),e},d.comparedTo=function(e,t){return L(this,new W(e,t))},d.decimalPlaces=d.dp=function(e,t){var r,n,i,s=this;if(null!=e)return N(e,0,O),null==t?t=g:N(t,0,8),G(new W(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-M(this.e/k))*k,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},d.dividedBy=d.div=function(e,t){return r(this,new W(e,t),p,g)},d.dividedToIntegerBy=d.idiv=function(e,t){return r(this,new W(e,t),0,1)},d.exponentiatedBy=d.pow=function(e,t){var r,n,i,s,o,a,c,l,u=this;if((e=new W(e)).c&&!e.isInteger())throw Error(S+"Exponent not an integer: "+Z(e));if(null!=t&&(t=new W(t)),o=e.e>14,!u.c||!u.c[0]||1==u.c[0]&&!u.e&&1==u.c.length||!e.c||!e.c[0])return l=new W(Math.pow(+Z(u),o?e.s*(2-B(e)):+Z(e))),t?l.mod(t):l;if(a=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new W(NaN);(n=!a&&u.isInteger()&&t.isInteger())&&(u=u.mod(t))}else{if(e.e>9&&(u.e>0||u.e<-1||(0==u.e?u.c[0]>1||o&&u.c[1]>=24e7:u.c[0]<8e13||o&&u.c[0]<=9999975e7)))return s=u.s<0&&B(e)?-0:0,u.e>-1&&(s=1/s),new W(a?1/s:s);j&&(s=E(j/k+2))}for(o?(r=new W(.5),a&&(e.s=1),c=B(e)):c=(i=Math.abs(+Z(e)))%2,l=new W(f);;){if(c){if(!(l=l.times(u)).c)break;s?l.c.length>s&&(l.c.length=s):n&&(l=l.mod(t))}if(i){if(0===(i=x(i/2)))break;c=i%2}else if(G(e=e.times(r),e.e+1,1),e.e>14)c=B(e);else{if(0==(i=+Z(e)))break;c=i%2}u=u.times(u),s?u.c&&u.c.length>s&&(u.c.length=s):n&&(u=u.mod(t))}return n?l:(a&&(l=f.div(l)),t?l.mod(t):s?G(l,j,g,void 0):l)},d.integerValue=function(e){var t=new W(this);return null==e?e=g:N(e,0,8),G(t,t.e+1,e)},d.isEqualTo=d.eq=function(e,t){return 0===L(this,new W(e,t))},d.isFinite=function(){return!!this.c},d.isGreaterThan=d.gt=function(e,t){return L(this,new W(e,t))>0},d.isGreaterThanOrEqualTo=d.gte=function(e,t){return 1===(t=L(this,new W(e,t)))||0===t},d.isInteger=function(){return!!this.c&&M(this.e/k)>this.c.length-2},d.isLessThan=d.lt=function(e,t){return L(this,new W(e,t))<0},d.isLessThanOrEqualTo=d.lte=function(e,t){return-1===(t=L(this,new W(e,t)))||0===t},d.isNaN=function(){return!this.s},d.isNegative=function(){return this.s<0},d.isPositive=function(){return this.s>0},d.isZero=function(){return!!this.c&&0==this.c[0]},d.minus=function(e,t){var r,n,i,s,o=this,a=o.s;if(t=(e=new W(e,t)).s,!a||!t)return new W(NaN);if(a!=t)return e.s=-t,o.plus(e);var c=o.e/k,l=e.e/k,u=o.c,h=e.c;if(!c||!l){if(!u||!h)return u?(e.s=-t,e):new W(h?o:NaN);if(!u[0]||!h[0])return h[0]?(e.s=-t,e):new W(u[0]?o:3==g?-0:0)}if(c=M(c),l=M(l),u=u.slice(),a=c-l){for((s=a<0)?(a=-a,i=u):(l=c,i=h),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(s=(a=u.length)<(t=h.length))?a:t,a=t=0;t<n;t++)if(u[t]!=h[t]){s=u[t]<h[t];break}if(s&&(i=u,u=h,h=i,e.s=-e.s),(t=(n=h.length)-(r=u.length))>0)for(;t--;u[r++]=0);for(t=I-1;n>a;){if(u[--n]<h[n]){for(r=n;r&&!u[--r];u[r]=t);--u[r],u[n]+=I}u[n]-=h[n]}for(;0==u[0];u.splice(0,1),--l);return u[0]?K(e,u,l):(e.s=3==g?-1:1,e.c=[e.e=0],e)},d.modulo=d.mod=function(e,t){var n,i,s=this;return e=new W(e,t),!s.c||!e.s||e.c&&!e.c[0]?new W(NaN):!e.c||s.c&&!s.c[0]?new W(s):(9==z?(i=e.s,e.s=1,n=r(s,e,0,3),e.s=i,n.s*=i):n=r(s,e,0,z),(e=s.minus(n.times(e))).c[0]||1!=z||(e.s=s.s),e)},d.multipliedBy=d.times=function(e,t){var r,n,i,s,o,a,c,l,u,h,d,f,p,g,m,y=this,b=y.c,w=(e=new W(e,t)).c;if(!(b&&w&&b[0]&&w[0]))return!y.s||!e.s||b&&!b[0]&&!w||w&&!w[0]&&!b?e.c=e.e=e.s=null:(e.s*=y.s,b&&w?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=M(y.e/k)+M(e.e/k),e.s*=y.s,(c=b.length)<(h=w.length)&&(p=b,b=w,w=p,i=c,c=h,h=i),i=c+h,p=[];i--;p.push(0));for(g=I,m=C,i=h;--i>=0;){for(r=0,d=w[i]%m,f=w[i]/m|0,s=i+(o=c);s>i;)r=((l=d*(l=b[--o]%m)+(a=f*l+(u=b[o]/m|0)*d)%m*m+p[s]+r)/g|0)+(a/m|0)+f*u,p[s--]=l%g;p[s]=r}return r?++n:p.splice(0,1),K(e,p,n)},d.negated=function(){var e=new W(this);return e.s=-e.s||null,e},d.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new W(e,t)).s,!i||!t)return new W(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/k,o=e.e/k,a=n.c,c=e.c;if(!s||!o){if(!a||!c)return new W(i/0);if(!a[0]||!c[0])return c[0]?e:new W(a[0]?n:0*i)}if(s=M(s),o=M(o),a=a.slice(),i=s-o){for(i>0?(o=s,r=c):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=c.length)<0&&(r=c,c=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+c[t]+i)/I|0,a[t]=I===a[t]?0:a[t]%I;return i&&(a=[i].concat(a),++o),K(e,a,o)},d.precision=d.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return N(e,1,O),null==t?t=g:N(t,0,8),G(new W(s),e,t);if(!(r=s.c))return null;if(n=(i=r.length-1)*k+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},d.shiftedBy=function(e){return N(e,-9007199254740991,T),this.times("1e"+e)},d.squareRoot=d.sqrt=function(){var e,t,n,i,s,o=this,a=o.c,c=o.s,l=o.e,u=p+4,h=new W("0.5");if(1!==c||!a||!a[0])return new W(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(c=Math.sqrt(+Z(o)))||c==1/0?(((t=R(a)).length+l)%2==0&&(t+="0"),c=Math.sqrt(+t),l=M((l+1)/2)-(l<0||l%2),n=new W(t=c==1/0?"5e"+l:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+l)):n=new W(c+""),n.c[0])for((c=(l=n.e)+u)<3&&(c=0);;)if(s=n,n=h.times(s.plus(r(o,s,u,1))),R(s.c).slice(0,c)===(t=R(n.c)).slice(0,c)){if(n.e<l&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(G(n,n.e+p+2,1),e=!n.times(n).eq(o));break}if(!i&&(G(s,s.e+p+2,0),s.times(s).eq(o))){n=s;break}u+=4,c+=4,i=1}return G(n,n.e+p+1,g,e)},d.toExponential=function(e,t){return null!=e&&(N(e,0,O),e++),H(this,e,t,1)},d.toFixed=function(e,t){return null!=e&&(N(e,0,O),e=e+this.e+1),H(this,e,t)},d.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=F;else if("object"!=typeof r)throw Error(S+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var s,o=n.split("."),a=+r.groupSize,c=+r.secondaryGroupSize,l=r.groupSeparator||"",u=o[0],h=o[1],d=i.s<0,f=d?u.slice(1):u,p=f.length;if(c&&(s=a,a=c,c=s,p-=s),a>0&&p>0){for(s=p%a||a,u=f.substr(0,s);s<p;s+=a)u+=l+f.substr(s,a);c>0&&(u+=l+f.slice(s)),d&&(u="-"+u)}n=h?u+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):u}return(r.prefix||"")+n+(r.suffix||"")},d.toFraction=function(e){var t,n,i,s,o,a,c,l,u,h,d,p,m=this,y=m.c;if(null!=e&&(!(c=new W(e)).isInteger()&&(c.c||1!==c.s)||c.lt(f)))throw Error(S+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+Z(c));if(!y)return new W(m);for(t=new W(f),u=n=new W(f),i=l=new W(f),p=R(y),o=t.e=p.length-m.e-1,t.c[0]=P[(a=o%k)<0?k+a:a],e=!e||c.comparedTo(t)>0?o>0?t:u:c,a=w,w=1/0,c=new W(p),l.c[0]=0;h=r(c,t,0,1),1!=(s=n.plus(h.times(i))).comparedTo(e);)n=i,i=s,u=l.plus(h.times(s=u)),l=s,t=c.minus(h.times(s=t)),c=s;return s=r(e.minus(n),i,0,1),l=l.plus(s.times(u)),n=n.plus(s.times(i)),l.s=u.s=m.s,d=r(u,i,o*=2,g).minus(m).abs().comparedTo(r(l,n,o,g).minus(m).abs())<1?[u,i]:[l,n],w=a,d},d.toNumber=function(){return+Z(this)},d.toPrecision=function(e,t){return null!=e&&N(e,1,O),H(this,e,t,2)},d.toString=function(e){var t,r=this,i=r.s,s=r.e;return null===s?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=s<=m||s>=y?D(R(r.c),s):U(R(r.c),s,"0"):10===e&&q?t=U(R((r=G(new W(r),p+s+1,g)).c),r.e,"0"):(N(e,2,$.length,"Base"),t=n(U(R(r.c),s,"0"),10,e,i,!0)),i<0&&r.c[0]&&(t="-"+t)),t},d.valueOf=d.toJSON=function(){return Z(this)},d._isBigNumber=!0,d[Symbol.toStringTag]="BigNumber",d[Symbol.for("nodejs.util.inspect.custom")]=d.valueOf,null!=t&&W.set(t),W}();const j=z,F=.55,$=[{name:"Ethereum",type:b.EVM,chainId:w.Ethereum,disable:!1,canLoadTokenList:!0,colorForAnalytics:"#32AEF4",canDeployToken:!0,chainIdHex:"0x1",img:"/assets/images/chain/eth.svg",color:"#5065E4",isMainnet:!0,minBlockConfirmation:12,explorerName:"Etherscan",explorerTx:"https://etherscan.io/tx/",explorerAddress:"https://etherscan.io/address/",explorerToken:"https://etherscan.io/token/",weth:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",altToken:{chainId:w.Ethereum,address:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",symbol:"USDC",decimals:6,name:"USD Coin",logoURI:"https://tokens.1inch.io/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48.png",eip2612:!0,domainVersion:"2"},oneInchAllowed:!0,supportsEIP1559:!0,canSwapToSameChain:!0,defaultGasLimit:25e4,gasRecommendedExecutionFeeMultiplier:(e,t)=>e<25e9?1.3*t:e<3e10?1.2*t:e<5e10?1.1*t:t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>{const i=t.dividedBy(10);return e===v.LOW?(n=.1,r=t):e===v.MEDIUM?(n=.2,r=t.plus(i)):e===v.HIGH&&(n=.3,r=t.plus(i.multipliedBy(2))),{maxPriorityFee:n,maxFeePerGas:r.toNumber()}},networkParams:{chainId:"0x1",chainName:"Ethereum",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18,logoURI:"/assets/images/chain/eth.svg"},rpcUrls:[],defaultGasPrice:50,defaultRpcUrl:"https://rpc.ankr.com/eth",signatureVerifier:y.eth.signatureVerifier,batchBalanceAddress:y.eth.batchBalanceAddress,deBridgeGateAddress:y.eth.deBridgeGateAddress,subscriptionAddress:y.eth.subscriptionAddress,preSwapAddress:y.eth.preSwapAddress,estimatedTime:"< 2.5 min",gasLimitsSwap:71e4,blockExplorerUrls:[]},customTokens:[],stableCoins:[],customTokensDeport:[]},{name:"BNB Chain",type:b.EVM,chainId:w.BSC,canDeployToken:!0,disable:!1,canLoadTokenList:!0,chainIdHex:"0x38",colorForAnalytics:"#DC7941",img:"/assets/images/chain/bnb.svg",color:"#F3BA2F",isMainnet:!0,minBlockConfirmation:12,canSwapToSameChain:!0,explorerName:"BscScan",defaultGasLimit:25e4,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.2*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>{const i=j.max(t,5);return{maxPriorityFee:n,maxFeePerGas:(e===v.HIGH?i.plus(2):e===v.MEDIUM?i.plus(1):i).toNumber()}},explorerTx:"https://bscscan.com/tx/",explorerAddress:"https://bscscan.com/address/",explorerToken:"https://bscscan.com/token/",weth:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",altToken:{chainId:w.BSC,address:"0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d",symbol:"USDC",decimals:18,name:"USD Coin",logoURI:"https://tokens.1inch.io/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48.png"},supportsEIP1559:!1,oneInchAllowed:!0,networkParams:{chainId:"0x38",chainName:"BNB Chain Mainnet",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18,logoURI:"/assets/images/chain/bnb.svg"},defaultGasPrice:5,rpcUrls:["https://bsc-dataseed1.ninicoin.io","https://bsc-dataseed1.defibit.io","https://bsc-dataseed.binance.org"],defaultRpcUrl:"https://bsc-dataseed.binance.org/",signatureVerifier:y.bsc.signatureVerifier,batchBalanceAddress:y.bsc.batchBalanceAddress,deBridgeGateAddress:y.bsc.deBridgeGateAddress,subscriptionAddress:y.bsc.subscriptionAddress,preSwapAddress:y.bsc.preSwapAddress,estimatedTime:"< 1 min",gasLimitsSwap:5e5,blockExplorerUrls:["https://bscscan.com/"]},customTokens:[],stableCoins:[],customTokensDeport:[]},{name:"Heco",type:b.EVM,chainId:w.Heco,disable:!0,chainIdHex:"0x80",colorForAnalytics:"#4FC17D",img:"/assets/images/chain/heco.svg",canDeployToken:!0,color:"#3E4AA6",isMainnet:!0,defaultGasLimit:25e4,oneInchAllowed:!1,gasRecommendedExecutionFeeMultiplier:(e,t)=>2*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.MEDIUM?r=t.multipliedBy(2):e===v.HIGH&&(r=t.multipliedBy(3)),{maxPriorityFee:r.multipliedBy(F).toNumber(),maxFeePerGas:r.toNumber()}),minBlockConfirmation:12,canSwapToSameChain:!0,explorerName:"HecoInfo",explorerTx:"https://hecoinfo.com/tx/",explorerAddress:"https://hecoinfo.com/address/",explorerToken:"https://hecoinfo.com/token/",weth:"0x5545153CCFcA01fbd7Dd11C0b23ba694D9509A6F",supportsEIP1559:!0,networkParams:{chainId:"0x80",chainName:"Huobi ECO Chain Mainnet",gasLimitsSwap:25e5,nativeCurrency:{name:"HT",symbol:"HT",decimals:18,logoURI:"/assets/images/chain/heco.svg"},defaultGasPrice:3,rpcUrls:["https://http-mainnet-node.huobichain.com"],defaultRpcUrl:"https://http-mainnet-node.huobichain.com",signatureVerifier:y.heco.signatureVerifier,batchBalanceAddress:y.heco.batchBalanceAddress,deBridgeGateAddress:y.heco.deBridgeGateAddress,subscriptionAddress:y.heco.subscriptionAddress,preSwapAddress:y.heco.preSwapAddress,blockExplorerUrls:["https://hecoinfo.com"]},customTokens:[],stableCoins:[],customTokensDeport:[]},{type:b.EVM,name:"Polygon",chainId:w.Polygon,chainIdHex:"0x89",disable:!1,canLoadTokenList:!0,canDeployToken:!0,colorForAnalytics:"#7254A5",img:"/assets/images/chain/polygon.svg",color:"#A46DFF",isMainnet:!0,defaultGasLimit:25e4,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.5*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.LOW&&(r=t.multipliedBy(1.1)),e===v.MEDIUM?r=t.multipliedBy(1.4):e===v.HIGH&&(r=t.multipliedBy(2)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()}),minBlockConfirmation:256,canSwapToSameChain:!0,explorerName:"Polygonscan",explorerTx:"https://polygonscan.com/tx/",explorerAddress:"https://polygonscan.com/address/",explorerToken:"https://polygonscan.com/token/",weth:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",altToken:{chainId:w.Polygon,address:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",symbol:"USDC_1",decimals:6,name:"USD Coin (PoS)",logoURI:"https://tokens.1inch.io/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48.png"},supportsEIP1559:!1,oneInchAllowed:!0,networkParams:{chainId:"0x89",chainName:"POLYGON",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18,logoURI:"/assets/images/chain/polygon.svg"},defaultGasPrice:200,rpcUrls:["https://polygon-mainnet.public.blastapi.io"],defaultRpcUrl:"https://polygon-mainnet.public.blastapi.io",signatureVerifier:y.polygon.signatureVerifier,batchBalanceAddress:y.polygon.batchBalanceAddress,deBridgeGateAddress:y.polygon.deBridgeGateAddress,subscriptionAddress:y.polygon.subscriptionAddress,preSwapAddress:y.polygon.preSwapAddress,estimatedTime:"< 13 min",gasLimitsSwap:5e5,blockExplorerUrls:["https://polygonscan.com"]},customTokens:[],stableCoins:[],customTokensDeport:[]},{type:b.EVM,name:"Arbitrum",chainId:w.Arbitrum,chainIdHex:"0xa4b1",disable:!1,canLoadTokenList:!0,canDeployToken:!0,img:"/assets/images/chain/arbitrum.svg",nativeTokenFromEthereum:!0,color:"#12AAFF",colorForAnalytics:"#9DCCED",isMainnet:!0,minBlockConfirmation:12,canSwapToSameChain:!0,defaultGasLimit:14e5,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.1*t,getDeployTokenGasLimit:e=>25e5+2e5*e,getClaimGasLimit:e=>15e5+2e5*e,getGasSettings:(e,t,r,n)=>({maxPriorityFee:n,maxFeePerGas:r.toNumber()}),explorerName:"Arbiscan",explorerTx:"https://arbiscan.io/tx/",explorerAddress:"https://arbiscan.io/address/",explorerToken:"https://arbiscan.io/token/",weth:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",altToken:{address:"0xaf88d065e77c8cc2239327c5edb3a432268e5831",symbol:"USDC",decimals:6,name:"USD Coin",logoURI:"https://tokens.1inch.io/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48.png",eip2612:!0,chainId:w.Arbitrum},supportsEIP1559:!0,oneInchAllowed:!0,networkParams:{chainId:"0xa4b1",chainName:"ARBITRUM",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18,logoURI:"/assets/images/chain/arbitrum.svg"},defaultGasPrice:.7,rpcUrls:["https://arb1.arbitrum.io/rpc"],defaultRpcUrl:"https://arb1.arbitrum.io/rpc",signatureVerifier:y.arbitrum.signatureVerifier,batchBalanceAddress:y.arbitrum.batchBalanceAddress,subscriptionAddress:y.arbitrum.subscriptionAddress,deBridgeGateAddress:y.arbitrum.deBridgeGateAddress,preSwapAddress:y.arbitrum.preSwapAddress,estimatedTime:"< 1 min",gasLimitsSwap:12e6,blockExplorerUrls:["https://arbiscan.io"]},customTokens:[],stableCoins:[],customTokensDeport:[]},{type:b.EVM,name:"Avalanche",chainId:w.Avalanche,chainIdHex:"0xA86A",colorForAnalytics:"#CC2B4A",disable:!1,canLoadTokenList:!0,canDeployToken:!0,img:"/assets/images/chain/avalanche.svg",color:"#E84142",isMainnet:!0,defaultGasLimit:25e4,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.1*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.MEDIUM?r=t.multipliedBy(1.2):e===v.HIGH&&(r=t.multipliedBy(1.4)),{maxPriorityFee:r.multipliedBy(F).toNumber(),maxFeePerGas:r.toNumber()}),minBlockConfirmation:12,canSwapToSameChain:!0,explorerName:"Snowtrace",explorerTx:"https://snowtrace.io/tx/",explorerAddress:"https://snowtrace.io/address/",explorerToken:"https://snowtrace.io/token/",weth:"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7",altToken:{address:"0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e",symbol:"USDC",decimals:6,name:"USD Coin",logoURI:"https://tokens.1inch.io/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48.png",chainId:w.Avalanche},supportsEIP1559:!0,oneInchAllowed:!0,networkParams:{chainId:"0xA86A",chainName:"AVALANCHE",nativeCurrency:{name:"AVAX",symbol:"AVAX",decimals:18,logoURI:"/assets/images/chain/avalanche.svg"},defaultGasPrice:100,rpcUrls:["https://api.avax.network/ext/bc/C/rpc"],defaultRpcUrl:"https://api.avax.network/ext/bc/C/rpc",signatureVerifier:y.avalanche.signatureVerifier,batchBalanceAddress:y.avalanche.batchBalanceAddress,deBridgeGateAddress:y.avalanche.deBridgeGateAddress,subscriptionAddress:y.avalanche.subscriptionAddress,preSwapAddress:y.avalanche.preSwapAddress,estimatedTime:"< 1 min",gasLimitsSwap:5e5,blockExplorerUrls:["https://snowtrace.io"]},customTokens:[],stableCoins:[],customTokensDeport:[]},{name:"Solana",type:b.SOLANA,chainId:w.Solana,chainIdHex:"0x736f6c",weth:"So11111111111111111111111111111111111111112",canDeployToken:!0,disable:!1,canLoadTokenList:!0,colorForAnalytics:"#DC1FFF",img:"/assets/images/chain/solana.svg",color:"#A25AE7",isMainnet:!0,minBlockConfirmation:12,canSwapToSameChain:!0,defaultGasLimit:0,oneInchAllowed:!1,gasRecommendedExecutionFeeMultiplier:(e,t)=>t,getDeployTokenGasLimit:e=>0,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>({maxPriorityFee:n,maxFeePerGas:r.toNumber()}),explorerName:"Solscan",explorerTx:"https://solscan.io/tx/",explorerAddress:"https://solscan.io/address/",explorerToken:"https://solscan.io/token/",networkParams:{chainId:"0x736f6c",chainName:"Solana",gasLimitsSwap:0,nativeCurrency:{name:"SOL",symbol:"SOL",decimals:9,logoURI:"/assets/images/chain/solana.svg"},rpcUrls:[],defaultRpcUrl:y.solanaProgramms.rpcUrl,estimatedTime:"< 1 min",blockExplorerUrls:[]},customTokens:[],altToken:{symbol:"USDC",name:"USD Coin",decimals:6,address:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png",chainId:w.Solana},stableCoins:[],customTokensDeport:[]},{name:"Fantom",chainId:w.Fantom,type:b.EVM,chainIdHex:"0xFA",disable:!1,canLoadTokenList:!0,colorForAnalytics:"#02759B",img:"/assets/images/chain/fantom.svg",color:"#13b5ec",isMainnet:!0,canDeployToken:!0,minBlockConfirmation:12,canSwapToSameChain:!0,explorerName:"FTMScan",defaultGasLimit:25e4,gasRecommendedExecutionFeeMultiplier:(e,t)=>t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.MEDIUM?r=t.isLessThan(250)?t.multipliedBy(2):t.multipliedBy(1.5):e===v.HIGH&&(r=t.isLessThan(500)?t.multipliedBy(3):t.multipliedBy(2)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()}),explorerTx:"https://ftmscan.com/tx/",explorerAddress:"https://ftmscan.com/address/",explorerToken:"https://ftmscan.com/token/",weth:"0x21be370D5312f44cB42ce377BC9b8a0cEF1A4C83",altToken:{address:"0x04068DA6C83AFCFA0e13ba15A6696662335D5B75",symbol:"USDC",decimals:6,name:"USD Coin",logoURI:"https://tokens.1inch.io/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48.png",chainId:w.Fantom},supportsEIP1559:!1,oneInchAllowed:!0,networkParams:{chainId:"0xFA",chainName:"Fantom Opera",gasLimitsSwap:25e5,nativeCurrency:{name:"FTM",symbol:"FTM",decimals:18,logoURI:"/assets/images/chain/fantom.svg"},defaultGasPrice:1e3,rpcUrls:["https://rpc.ftm.tools/"],defaultRpcUrl:"https://rpc.ftm.tools/",signatureVerifier:y.fantom.signatureVerifier,batchBalanceAddress:y.fantom.batchBalanceAddress,deBridgeGateAddress:y.fantom.deBridgeGateAddress,subscriptionAddress:y.fantom.subscriptionAddress,preSwapAddress:y.fantom.preSwapAddress,estimatedTime:"< 1 min",blockExplorerUrls:["https://ftmscan.com/"]},customTokens:[],stableCoins:[],customTokensDeport:[]},{name:"Linea",chainId:w.Linea,type:b.EVM,chainIdHex:"0xe708",colorForAnalytics:"#61e9ff",disable:!1,canLoadTokenList:!0,img:"/assets/images/chain/linea.svg",color:"#64d2ff",canDeployToken:!1,isMainnet:!0,minBlockConfirmation:12,canSwapToSameChain:!0,nativeTokenFromEthereum:!0,defaultGasLimit:25e4,gasRecommendedExecutionFeeMultiplier:(e,t)=>t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(v.LOW,e===v.MEDIUM?r=t.multipliedBy(1.1):e===v.HIGH&&(r=t.multipliedBy(1.2)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()}),disableForTokensPrices:!0,explorerName:"LineaScan",explorerTx:"https://lineascan.build/tx/",explorerAddress:"https://lineascan.build/address/",explorerToken:"https://lineascan.build/token/",weth:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",altToken:{chainId:w.Linea,address:"0x176211869cA2b568f2A7D4EE941E073a821EE1ff",name:"USDC",symbol:"USDC",decimals:6,logoURI:"https://s2.coinmarketcap.com/static/img/coins/64x64/3408.png"},supportsEIP1559:!1,oneInchAllowed:!1,networkParams:{chainId:"0xe708",chainName:"Linea",gasLimitsSwap:25e4,nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18,logoURI:"/assets/images/chain/eth.svg"},defaultGasPrice:5,rpcUrls:["https://rpc.linea.build/"],defaultRpcUrl:"https://rpc.linea.build/",signatureVerifier:y.linea.signatureVerifier,batchBalanceAddress:y.linea.batchBalanceAddress,deBridgeGateAddress:y.linea.deBridgeGateAddress,subscriptionAddress:y.linea.subscriptionAddress,preSwapAddress:y.linea.preSwapAddress,estimatedTime:"< 1 min",blockExplorerUrls:["https://lineascan.build/"]},customTokens:[{chainId:w.Linea,address:"0x176211869cA2b568f2A7D4EE941E073a821EE1ff",name:"USDC",symbol:"USDC",decimals:6,logoURI:"https://s2.coinmarketcap.com/static/img/coins/64x64/3408.png"}],customTokensDeport:[{chainId:w.Linea,address:"0xe5D7C2a44FfDDf6b295A15c148167daaAf5Cf34f",name:"WETH",symbol:"WETH",decimals:18},{chainId:w.Linea,address:"0x176211869cA2b568f2A7D4EE941E073a821EE1ff",name:"USDC",symbol:"USDC",decimals:6,logoURI:"https://s2.coinmarketcap.com/static/img/coins/64x64/3408.png"}],stableCoins:["0x176211869cA2b568f2A7D4EE941E073a821EE1ff"]},{name:"Optimism",chainId:w.Optimism,type:b.EVM,chainIdHex:"0xa",colorForAnalytics:"#FF0421",disable:!1,canLoadTokenList:!0,img:"/assets/images/chain/optimism.svg",color:"#FF0420",canDeployToken:!0,isMainnet:!0,minBlockConfirmation:12,canSwapToSameChain:!0,nativeTokenFromEthereum:!0,defaultGasLimit:25e4,gasRecommendedExecutionFeeMultiplier:(e,t)=>t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(v.LOW,e===v.MEDIUM?r=t.multipliedBy(1.1):e===v.HIGH&&(r=t.multipliedBy(1.2)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()}),disableForTokensPrices:!0,explorerName:"Optimism Explorer",explorerTx:"https://optimistic.etherscan.io/tx/",explorerAddress:"https://optimistic.etherscan.io/address/",explorerToken:"https://optimistic.etherscan.io/token/",weth:"0x4200000000000000000000000000000000000006",altToken:{address:"0x7f5c764cbc14f9669b88837ca1490cca17c31607",symbol:"USDC.e",decimals:6,name:"USD Coin",logoURI:"https://tokens.1inch.io/0x7f5c764cbc14f9669b88837ca1490cca17c31607.png",chainId:w.Optimism},supportsEIP1559:!1,oneInchAllowed:!0,networkParams:{chainId:"0xa",chainName:"optimism",gasLimitsSwap:25e4,nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18,logoURI:"/assets/images/chain/eth.svg"},defaultGasPrice:1,rpcUrls:["https://mainnet.optimism.io/"],defaultRpcUrl:"https://mainnet.optimism.io/",signatureVerifier:y.optimism.signatureVerifier,batchBalanceAddress:y.optimism.batchBalanceAddress,deBridgeGateAddress:y.optimism.deBridgeGateAddress,subscriptionAddress:y.optimism.subscriptionAddress,preSwapAddress:y.optimism.preSwapAddress,estimatedTime:"< 1 min",blockExplorerUrls:["https://optimistic.etherscan.io/"]},customTokens:[],stableCoins:[],customTokensDeport:[]},{name:"Base",chainId:w.Base,type:b.EVM,chainIdHex:"0x2105",colorForAnalytics:"#0052FF",disable:!1,canLoadTokenList:!0,img:"/assets/images/chain/base.svg",color:"#3F7BFC",canDeployToken:!0,isMainnet:!0,minBlockConfirmation:12,canSwapToSameChain:!0,nativeTokenFromEthereum:!0,defaultGasLimit:25e4,blockedTokens:["0x614747c53cb1636b4b962e15e1d66d3214621100"],gasRecommendedExecutionFeeMultiplier:(e,t)=>t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(v.LOW,e===v.MEDIUM?r=t.multipliedBy(1.1):e===v.HIGH&&(r=t.multipliedBy(1.2)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()}),disableForTokensPrices:!0,explorerName:"BaseScan",explorerTx:"https://basescan.org/tx/",explorerAddress:"https://basescan.org/address/",explorerToken:"https://basescan.org/token/",weth:"0x4200000000000000000000000000000000000006",altToken:{address:"0xd9aaec86b65d86f6a7b5b1b0c42ffa531710b6ca",symbol:"USDbC",decimals:6,name:"USD Base Coin",logoURI:"https://tokens.1inch.io/0xd9aaec86b65d86f6a7b5b1b0c42ffa531710b6ca.png",chainId:w.Base},supportsEIP1559:!1,oneInchAllowed:!0,networkParams:{chainId:"0x2105",chainName:"base",gasLimitsSwap:25e4,nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18,logoURI:"/assets/images/chain/eth.svg"},defaultGasPrice:1,rpcUrls:["https://mainnet.base.org/"],defaultRpcUrl:"https://mainnet.base.org/",signatureVerifier:y.base.signatureVerifier,batchBalanceAddress:y.base.batchBalanceAddress,deBridgeGateAddress:y.base.deBridgeGateAddress,subscriptionAddress:y.base.subscriptionAddress,preSwapAddress:y.base.preSwapAddress,estimatedTime:"< 1 min",blockExplorerUrls:["https://basescan.org/"]},customTokens:[],stableCoins:["0xd9aaec86b65d86f6a7b5b1b0c42ffa531710b6ca"],customTokensDeport:[]},{name:"Hyperliquid",type:b.EVM,chainId:w.Hyperliquid,likeChainId:w.Arbitrum,disable:!1,hideBalances:!1,hideAddresses:!0,canLoadTokenList:!1,disableAddToWallet:!0,hideNativeCurrencyInWidgetBuilder:!0,onlyMarketMode:!0,colorForAnalytics:"#32AEF4",canDeployToken:!1,chainIdHex:"0x",img:"/assets/images/chain/hyperliquid.svg",color:"#5065E4",isMainnet:!0,minBlockConfirmation:12,explorerName:"Arbiscan",explorerTx:"https://arbiscan.io/tx/",explorerAddress:"https://arbiscan.io/address/",explorerToken:"https://arbiscan.io/token/",altToken:{name:"USDC",symbol:"USDC",decimals:6,logoURI:"/assets/images/usdc.png",address:"0xaf88d065e77c8cc2239327c5edb3a432268e5831",chainId:w.Arbitrum},oneInchAllowed:!1,supportsEIP1559:!1,canSwapToSameChain:!1,defaultGasLimit:14e5,networkParams:{chainId:"0xa4b1",chainName:"ARBITRUM",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18,logoURI:"/assets/images/chain/arbitrum.svg"},defaultGasPrice:.7,rpcUrls:["https://arb1.arbitrum.io/rpc"],defaultRpcUrl:"https://arb1.arbitrum.io/rpc",signatureVerifier:y.arbitrum.signatureVerifier,batchBalanceAddress:y.arbitrum.batchBalanceAddress,subscriptionAddress:y.arbitrum.subscriptionAddress,deBridgeGateAddress:y.arbitrum.deBridgeGateAddress,preSwapAddress:y.arbitrum.preSwapAddress,estimatedTime:"< 1 min",gasLimitsSwap:12e6,blockExplorerUrls:["https://arbiscan.io"]},customTokens:[],stableCoins:["0xaf88d065e77c8cc2239327c5edb3a432268e5831"],customTokensDeport:[],gasRecommendedExecutionFeeMultiplier:(e,t)=>1.1*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.MEDIUM?r=t.multipliedBy(1.2):e===v.HIGH&&(r=t.multipliedBy(1.4)),{maxPriorityFee:r.multipliedBy(F).toNumber(),maxFeePerGas:r.toNumber()})},{type:b.EVM,name:"Neon",chainId:w.Neon,chainIdHex:"0xE9AC0D6",canDeployToken:!0,colorForAnalytics:"#13CC7E",img:"/assets/images/chain/neon.svg",disable:!1,canLoadTokenList:!0,color:"#A46DFF",isMainnet:!0,defaultGasLimit:25e4,subscriptionId:100000001,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.5*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.LOW&&(r=t.multipliedBy(1.05)),e===v.MEDIUM?r=t.multipliedBy(1.1):e===v.HIGH&&(r=t.multipliedBy(1.2)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()}),minBlockConfirmation:32,canSwapToSameChain:!1,explorerName:"Neonscan",explorerTx:"https://neonscan.org/tx/",explorerAddress:"https://neonscan.org/address/",explorerToken:"https://neonscan.org/token/",weth:"0x202c35e517fa803b537565c40f0a6965d7204609",altToken:{address:"0xEA6B04272f9f62F997F666F07D3a974134f7FFb9",name:"USDC",symbol:"USDC",decimals:6,logoURI:"https://s2.coinmarketcap.com/static/img/coins/64x64/3408.png",chainId:w.Neon},supportsEIP1559:!1,oneInchAllowed:!0,networkParams:{chainId:"0xE9AC0D6",chainName:"Neon",nativeCurrency:{name:"NEON",symbol:"NEON",decimals:18,logoURI:"/assets/images/chain/neon.svg"},defaultGasPrice:200,rpcUrls:["https://neon-proxy-mainnet.solana.p2p.org"],defaultRpcUrl:"https://neon-proxy-mainnet.solana.p2p.org",signatureVerifier:y.neon.signatureVerifier,batchBalanceAddress:y.neon.batchBalanceAddress,deBridgeGateAddress:y.neon.deBridgeGateAddress,preSwapAddress:y.neon.preSwapAddress,estimatedTime:"< 13 min",gasLimitsSwap:5e5,blockExplorerUrls:["https://neonscan.org"]},customTokens:[],stableCoins:[],customTokensDeport:[]},{type:b.EVM,name:"Gnosis",chainId:w.Gnosis,chainIdHex:"0x64",canDeployToken:!0,colorForAnalytics:"#0d8e74",img:"/assets/images/chain/gnosis.svg",color:"#0d8e74",defaultGasLimit:25e4,subscriptionId:100000002,minBlockConfirmation:12,canSwapToSameChain:!0,explorerName:"Gnosisscan",explorerTx:"https://gnosisscan.io/tx/",explorerAddress:"https://gnosisscan.io/address/",explorerToken:"https://gnosisscan.io/token/",disable:!1,canLoadTokenList:!0,weth:"0xe91d153e0b41518a2ce8dd3d7944fa863463a97d",altToken:{address:"0x2a22f9c3b484c3629090feed35f17ff8f88f76f0",symbol:"USDC.e",decimals:6,name:"USDC.e (Gnosis)",logoURI:"https://tokens.debridge.finance/Logo/100000002/0x2a22f9c3b484c3629090feed35f17ff8f88f76f0/small/token-logo.png",eip2612:!0,chainId:w.Gnosis},supportsEIP1559:!1,oneInchAllowed:!0,networkParams:{chainId:"0x64",chainName:"Gnosis",nativeCurrency:{name:"xDAI",symbol:"xDAI",decimals:18,logoURI:"/assets/images/chain/gnosis.svg"},defaultGasPrice:1,rpcUrls:["https://rpc.ankr.com/gnosis"],defaultRpcUrl:"https://rpc.ankr.com/gnosis",signatureVerifier:y.gnosis.signatureVerifier,batchBalanceAddress:y.gnosis.batchBalanceAddress,deBridgeGateAddress:y.gnosis.deBridgeGateAddress,preSwapAddress:y.gnosis.preSwapAddress,estimatedTime:"< 13 min",gasLimitsSwap:5e5,blockExplorerUrls:["https://gnosisscan.io"]},customTokens:[],stableCoins:[],customTokensDeport:[],isMainnet:!0,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.5*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.LOW&&(r=t.multipliedBy(1.05)),e===v.MEDIUM?r=t.multipliedBy(1.1):e===v.HIGH&&(r=t.multipliedBy(1.2)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()})},{type:b.EVM,name:"LightLink",chainId:w.LightLink,chainIdHex:"0x762",canDeployToken:!0,colorForAnalytics:"#6a81ff",img:"/assets/images/chain/lightlink.svg",color:"#6a81ff",defaultGasLimit:25e4,subscriptionId:100000003,minBlockConfirmation:12,canSwapToSameChain:!1,explorerName:"LightLink Phoenix Mainnet explorer",disable:!1,canLoadTokenList:!0,explorerTx:"https://phoenix.lightlink.io/tx/",explorerAddress:"https://phoenix.lightlink.io/address/",explorerToken:"https://phoenix.lightlink.io/token/",weth:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",altToken:{address:"0x18fB38404DADeE1727Be4b805c5b242B5413Fa40",name:"USDC",symbol:"USDC",decimals:6,logoURI:"https://s2.coinmarketcap.com/static/img/coins/64x64/3408.png",chainId:w.LightLink},supportsEIP1559:!1,oneInchAllowed:!1,networkParams:{chainId:"0x762",chainName:"LightLink",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18,logoURI:"/assets/images/chain/lightlink.svg"},defaultGasPrice:1,rpcUrls:["https://replicator.phoenix.lightlink.io/rpc/v1"],defaultRpcUrl:"https://replicator.phoenix.lightlink.io/rpc/v1",signatureVerifier:y.lightLink.signatureVerifier,batchBalanceAddress:y.lightLink.batchBalanceAddress,deBridgeGateAddress:y.lightLink.deBridgeGateAddress,preSwapAddress:y.lightLink.preSwapAddress,estimatedTime:"< 13 min",gasLimitsSwap:5e5,blockExplorerUrls:["https://phoenix.lightlink.io"]},customTokens:[],stableCoins:[],customTokensDeport:[],isMainnet:!0,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.5*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.LOW&&(r=t.multipliedBy(1.05)),e===v.MEDIUM?r=t.multipliedBy(1.1):e===v.HIGH&&(r=t.multipliedBy(1.2)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()})},{type:b.EVM,name:"Metis",chainId:w.Metis,chainIdHex:"0x440",canDeployToken:!0,disable:!1,canLoadTokenList:!0,colorForAnalytics:"#008EAF",img:"/assets/images/chain/metis.svg",color:"#00D2FF",defaultGasLimit:25e4,subscriptionId:100000004,minBlockConfirmation:12,canSwapToSameChain:!0,explorerName:"Metis Explorer",explorerTx:"https://explorer.metis.io/tx/",explorerAddress:"https://explorer.metis.io/address/",explorerToken:"https://explorer.metis.io/token/",weth:"0x75cb093E4D61d2A2e65D8e0BBb01DE8d89b53481",altToken:{address:"0xEA32A96608495e54156Ae48931A7c20f0dcc1a21",name:"USDC",symbol:"USDC",decimals:6,logoURI:"https://s2.coinmarketcap.com/static/img/coins/64x64/3408.png",chainId:w.Metis},supportsEIP1559:!1,oneInchAllowed:!1,networkParams:{chainId:"0x440",chainName:"Metis",nativeCurrency:{name:"METIS",symbol:"METIS",decimals:18,logoURI:"/assets/images/chain/metis.svg"},defaultGasPrice:1,rpcUrls:["https://metis-mainnet.public.blastapi.io/"],defaultRpcUrl:"https://metis-mainnet.public.blastapi.io/",signatureVerifier:y.metis.signatureVerifier,batchBalanceAddress:y.metis.batchBalanceAddress,deBridgeGateAddress:y.metis.deBridgeGateAddress,preSwapAddress:y.metis.preSwapAddress,estimatedTime:"< 3 min",gasLimitsSwap:5e5,blockExplorerUrls:["https://explorer.metis.io"]},customTokens:[],stableCoins:[],customTokensDeport:[],isMainnet:!0,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.5*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.LOW&&(r=t.multipliedBy(1.05)),e===v.MEDIUM?r=t.multipliedBy(1.1):e===v.HIGH&&(r=t.multipliedBy(1.2)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()})},{type:b.EVM,name:"Bitrock",chainId:w.Bitrock,chainIdHex:"0x1c03",canDeployToken:!0,color:"#2e8e6f",disable:!1,canLoadTokenList:!0,colorForAnalytics:"#15f5ba",img:"/assets/images/chain/bitrock.svg",defaultGasLimit:25e4,subscriptionId:100000005,minBlockConfirmation:12,canSwapToSameChain:!0,explorerName:"Bitrock Explorer",explorerTx:"https://explorer.bit-rock.io/tx/",explorerAddress:"https://explorer.bit-rock.io/address/",explorerToken:"https://explorer.bit-rock.io/token/",weth:"0x413f0E3A440abA7A15137F4278121450416882d5",altToken:{address:"0xD647a6E1F898c39bA594443c19De0872EA935310",name:"USDB",symbol:"USDB",decimals:6,logoURI:"https://s2.coinmarketcap.com/static/img/coins/64x64/29599.png",chainId:w.Bitrock},supportsEIP1559:!1,oneInchAllowed:!1,networkParams:{chainId:"0x1c03",chainName:"Bitrock",nativeCurrency:{name:"BROCK",symbol:"BROCK",decimals:18,logoURI:"/assets/images/chain/bitrock.svg"},defaultGasPrice:.01,rpcUrls:["https://connect.bit-rock.io/"],defaultRpcUrl:"https://connect.bit-rock.io/",signatureVerifier:y.bitrock.signatureVerifier,batchBalanceAddress:y.bitrock.batchBalanceAddress,deBridgeGateAddress:y.bitrock.deBridgeGateAddress,preSwapAddress:y.bitrock.preSwapAddress,estimatedTime:"< 1 min",gasLimitsSwap:5e5,blockExplorerUrls:["https://explorer.bit-rock.io/"]},customTokens:[],stableCoins:[],customTokensDeport:[],isMainnet:!0,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.5*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.LOW&&(r=t.multipliedBy(1.5)),e===v.MEDIUM?r=t.multipliedBy(2):e===v.HIGH&&(r=t.multipliedBy(3)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()})},{type:b.EVM,name:"Sonic",chainId:w.Sonic,chainIdHex:"0x92",canDeployToken:!0,canLoadTokenList:!0,disable:!1,colorForAnalytics:"#FFCB67",img:"https://cdn.debridge.finance/images/sonic.svg",color:"#FE9A4C",defaultGasLimit:25e4,subscriptionId:100000014,minBlockConfirmation:12,canSwapToSameChain:!0,explorerName:"SonicScan",explorerTx:"https://sonicscan.org/tx/",explorerAddress:"https://sonicscan.org/address/",explorerToken:"https://sonicscan.org/token/",weth:"0x039e2fB66102314Ce7b64Ce5Ce3E5183bc94aD38",altToken:{address:"0x29219dd400f2bf60e5a23d13be72b486d4038894",name:"USDC",symbol:"USDC",decimals:6,logoURI:"https://tokens.1inch.io/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48.png",chainId:w.Sonic},supportsEIP1559:!1,oneInchAllowed:!1,networkParams:{chainId:"0x92",chainName:"Sonic",nativeCurrency:{name:"Sonic",symbol:"S",decimals:18,logoURI:"https://cdn.debridge.finance/images/sonic.svg"},defaultGasPrice:1,rpcUrls:["https://rpc.soniclabs.com"],defaultRpcUrl:"https://rpc.soniclabs.com",signatureVerifier:y.sonic.signatureVerifier,batchBalanceAddress:y.sonic.batchBalanceAddress,deBridgeGateAddress:y.sonic.deBridgeGateAddress,preSwapAddress:y.sonic.preSwapAddress,estimatedTime:"< 1 min",gasLimitsSwap:25e5,blockExplorerUrls:["https://sonicscan.org/"]},customTokens:[],stableCoins:[],customTokensDeport:[],isMainnet:!0,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.5*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.LOW&&(r=t.multipliedBy(1.5)),e===v.MEDIUM?r=t.multipliedBy(2):e===v.HIGH&&(r=t.multipliedBy(3)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()})},{type:b.EVM,name:"CrossFi",chainId:w.CrossFi,chainIdHex:"0x103e",canDeployToken:!0,color:"#0cc2ff",disable:!1,canLoadTokenList:!0,colorForAnalytics:"#6222F6",img:"https://cdn.debridge.finance/images/crossfi.svg",defaultGasLimit:25e4,subscriptionId:100000006,minBlockConfirmation:12,canSwapToSameChain:!1,explorerName:"XFI Explorer",explorerTx:"https://xfiscan.com/tx/",explorerAddress:"https://xfiscan.com/address/",explorerToken:"https://xfiscan.com/token/",weth:"0xC537D12bd626B135B251cCa43283EFF69eC109c4",altToken:{address:"0x",name:"",symbol:"",decimals:6,logoURI:"",chainId:w.CrossFi},supportsEIP1559:!1,oneInchAllowed:!1,networkParams:{chainId:"0x103e",chainName:"CrossFi",nativeCurrency:{name:"XFI",symbol:"XFI",decimals:18,logoURI:"https://cdn.debridge.finance/images/crossfi.svg"},defaultGasPrice:1,rpcUrls:["https://rpc.mainnet.ms/"],defaultRpcUrl:"https://rpc.mainnet.ms/",signatureVerifier:y.crossfi.signatureVerifier,batchBalanceAddress:y.crossfi.batchBalanceAddress,deBridgeGateAddress:y.crossfi.deBridgeGateAddress,preSwapAddress:y.crossfi.preSwapAddress,estimatedTime:"< 1 min",gasLimitsSwap:5e5,blockExplorerUrls:["https://xfiscan.com/"]},customTokens:[],stableCoins:[],customTokensDeport:[],isMainnet:!0,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.5*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.LOW&&(r=t.multipliedBy(1.5)),e===v.MEDIUM?r=t.multipliedBy(2):e===v.HIGH&&(r=t.multipliedBy(3)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()})},{type:b.EVM,name:"Cronos zkEVM",chainId:w.CronosZkEVM,chainIdHex:"0x184",canDeployToken:!0,canLoadTokenList:!0,disable:!1,colorForAnalytics:"#5077F6",img:"https://cdn.debridge.finance/images/zkevm.svg",color:"#159DFF",defaultGasLimit:25e4,subscriptionId:100000010,minBlockConfirmation:12,canSwapToSameChain:!1,explorerName:"Cronos zkEVM Explorer",explorerTx:"https://explorer.zkevm.cronos.org/tx/",explorerAddress:"https://explorer.zkevm.cronos.org/address/",explorerToken:"https://explorer.zkevm.cronos.org/token/",weth:"0xc1bf55ee54e16229d9b369a5502bfe5fc9f20b6d",altToken:{address:"0xaa5b845F8C9c047779bEDf64829601d8B264076c",name:"USDC",symbol:"USDC",decimals:6,logoURI:"https://tokens.1inch.io/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48.png",chainId:w.CronosZkEVM},supportsEIP1559:!1,oneInchAllowed:!1,networkParams:{chainId:"0x184",chainName:"Cronos",nativeCurrency:{name:"Cronos zkEVM CRO",symbol:"zkCRO",decimals:18,logoURI:"https://cdn.debridge.finance/images/zkevm.svg"},defaultGasPrice:1,rpcUrls:["https://mainnet.zkevm.cronos.org"],defaultRpcUrl:"https://mainnet.zkevm.cronos.org",signatureVerifier:y.cronos.signatureVerifier,batchBalanceAddress:y.cronos.batchBalanceAddress,deBridgeGateAddress:y.cronos.deBridgeGateAddress,preSwapAddress:y.cronos.preSwapAddress,estimatedTime:"< 2 min",gasLimitsSwap:25e5,blockExplorerUrls:["https://explorer.zkevm.cronos.org/"]},customTokens:[],stableCoins:[],customTokensDeport:[],isMainnet:!0,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.5*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.LOW&&(r=t.multipliedBy(1.5)),e===v.MEDIUM?r=t.multipliedBy(2):e===v.HIGH&&(r=t.multipliedBy(3)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()})},{type:b.EVM,name:"Abstract",chainId:w.Abstract,chainIdHex:"0xab5",canDeployToken:!0,disable:!1,canLoadTokenList:!0,colorForAnalytics:"#18d45a",img:"https://cdn.debridge.finance/images/abstract.svg",color:"#18D47B",defaultGasLimit:25e4,subscriptionId:100000017,minBlockConfirmation:12,canSwapToSameChain:!1,explorerName:"Abstract Explorer",explorerTx:"https://abscan.org/tx/",explorerAddress:"https://abscan.org/address/",explorerToken:"https://abscan.org/token/",weth:"0x3439153EB7AF838Ad19d56E1571FBD09333C2809",altToken:{address:"0x84A71ccD554Cc1b02749b35d22F684CC8ec987e1",name:"USDC",symbol:"USDC",decimals:6,logoURI:"https://tokens.1inch.io/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48.png",chainId:w.Abstract},supportsEIP1559:!1,oneInchAllowed:!1,networkParams:{chainId:"0xab5",chainName:"Abstract",nativeCurrency:{name:"Ethereum",symbol:"ETH",decimals:18,logoURI:"/assets/images/chain/eth.svg"},defaultGasPrice:1,rpcUrls:["https://abstract-rpc.debridge.finance"],defaultRpcUrl:"https://abstract-rpc.debridge.finance",signatureVerifier:y.abstract.signatureVerifier,batchBalanceAddress:y.abstract.batchBalanceAddress,deBridgeGateAddress:y.abstract.deBridgeGateAddress,preSwapAddress:y.abstract.preSwapAddress,estimatedTime:"120",gasLimitsSwap:5e5,blockExplorerUrls:["https://abscan.org/"]},customTokens:[],stableCoins:[],customTokensDeport:[],isMainnet:!0,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.5*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.LOW&&(r=t.multipliedBy(1.5)),e===v.MEDIUM?r=t.multipliedBy(2):e===v.HIGH&&(r=t.multipliedBy(3)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()})},{type:b.EVM,name:"Berachain",chainId:w.Berachain,chainIdHex:"0x138de",canDeployToken:!0,disable:!1,canLoadTokenList:!0,hideNativeCurrencyInDeSwap:!0,img:"https://cdn.debridge.finance/images/berachain.svg",color:"#814625",colorForAnalytics:"#814625",defaultGasLimit:25e4,subscriptionId:100000020,minBlockConfirmation:12,canSwapToSameChain:!1,explorerName:"Berachain Explorer",explorerTx:"https://berascan.com/tx/",explorerAddress:"https://berascan.com/address/",explorerToken:"https://berascan.com/token/",weth:"0x6969696969696969696969696969696969696969",altToken:{address:"0x549943e04f40284185054145c6E4e9568C1D3241",name:"USDC",symbol:"USDC",decimals:6,logoURI:"https://tokens.1inch.io/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48.png",chainId:w.Berachain},supportsEIP1559:!1,oneInchAllowed:!1,networkParams:{chainId:"0x138de",chainName:"Berachain",nativeCurrency:{name:"BERA",symbol:"BERA",decimals:18,logoURI:"https://cdn.debridge.finance/images/bera.svg"},defaultGasPrice:1,rpcUrls:["https://rpc.berachain.com"],defaultRpcUrl:"https://rpc.berachain.com",signatureVerifier:y.berachain.signatureVerifier,batchBalanceAddress:y.berachain.batchBalanceAddress,deBridgeGateAddress:y.berachain.deBridgeGateAddress,preSwapAddress:y.berachain.preSwapAddress,estimatedTime:"120",gasLimitsSwap:5e5,blockExplorerUrls:["https://berascan.com/"]},customTokens:[],stableCoins:[],customTokensDeport:[],isMainnet:!0,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.5*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.LOW&&(r=t.multipliedBy(1.5)),e===v.MEDIUM?r=t.multipliedBy(2):e===v.HIGH&&(r=t.multipliedBy(3)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()}),filterTokenForModalInDeswap:e=>!["","0x6969696969696969696969696969696969696969"].includes(e?.toLowerCase())},{type:b.EVM,name:"Story",chainId:w.Story,chainIdHex:"0x5ea",canDeployToken:!0,disable:!1,hideNativeCurrencyInDeSwap:!0,hideNativeCurrencyInWidgetBuilder:!0,canLoadTokenList:!0,img:"https://cdn.debridge.finance/images/story.svg",color:"#829DC9",colorForAnalytics:"#BDB4E8",defaultGasLimit:25e4,subscriptionId:100000013,minBlockConfirmation:12,canSwapToSameChain:!1,explorerName:"Story Explorer",explorerTx:"https://storyscan.xyz/tx/",explorerAddress:"https://storyscan.xyz/address/",explorerToken:"https://storyscan.xyz/token/",weth:"0x1514000000000000000000000000000000000000",altToken:{address:"0xF1815bd50389c46847f0Bda824eC8da914045D14",name:"USDC",symbol:"USDC",decimals:6,logoURI:"/assets/images/usdc.png",chainId:w.Story},supportsEIP1559:!1,oneInchAllowed:!1,networkParams:{chainId:"0x5ea",chainName:"Story",nativeCurrency:{name:"IP",symbol:"IP",decimals:18,logoURI:"https://cdn.debridge.finance/images/ip_token.svg"},defaultGasPrice:.05,rpcUrls:["https://Homer.storyrpc.io"],defaultRpcUrl:"https://Homer.storyrpc.io",signatureVerifier:y.story.signatureVerifier,batchBalanceAddress:y.story.batchBalanceAddress,deBridgeGateAddress:y.story.deBridgeGateAddress,preSwapAddress:y.story.preSwapAddress,estimatedTime:"15s",gasLimitsSwap:5e5,blockExplorerUrls:["https://storyscan.xyz/"]},customTokens:[],filterTokenForModalInDeswap:e=>!["","0x1514000000000000000000000000000000000000"].includes(e?.toLowerCase()),stableCoins:[],customTokensDeport:[],isMainnet:!0,gasRecommendedExecutionFeeMultiplier:(e,t)=>1.5*t,getDeployTokenGasLimit:e=>6e5+2e4*e,getClaimGasLimit:e=>13e4+2e4*e,getGasSettings:(e,t,r,n)=>(e===v.LOW&&(r=t.multipliedBy(1.5)),e===v.MEDIUM?r=t.multipliedBy(2):e===v.HIGH&&(r=t.multipliedBy(3)),{maxPriorityFee:n,maxFeePerGas:r.toNumber()})}],q=$;var W;!function(e){e[e.EVM=1]="EVM",e[e.SOLANA=2]="SOLANA"}(W||(W={}));class H{constructor(){this.evmNetworkIds=this.getAll().filter((e=>e.type==W.EVM)).map((e=>e.id))}isEVMChain(e){return this.evmNetworkIds.includes(e)}getAll(){return H.cache||(H.cache=q.filter((e=>y.supportedChains.includes(e.chainId))).map((e=>({img:e.img,id:e.chainId,label:e.name,currencySymbol:e.networkParams.nativeCurrency.name,networkParams:e.networkParams,chainIdHex:e.chainIdHex,type:e.type,altToken:e.altToken,coingecko:e.coingecko,explorerName:e.explorerName,explorerTx:e.explorerTx,explorerAddress:e.explorerAddress,explorerToken:e.explorerToken,oneInchAllowed:e.oneInchAllowed,estimatedTime:e.networkParams.estimatedTime,supportsEIP1559:e.supportsEIP1559,color:e.color,canSwapToSameChain:e.canSwapToSameChain,colorForAnalytics:e.colorForAnalytics,canDeployToken:e.canDeployToken,customTokens:e.customTokens||[],nativeTokenFromEthereum:!!e.nativeTokenFromEthereum,disableForTokensPrices:!!e.disableForTokensPrices}))))}getChain(e){return this.getAll().find((t=>t.id===e))}getDeSwapNetworks(){return this.getAll().filter((e=>y.deSwapChains.includes(e.id)))}getDePortNetworks(){return this.getAll().filter((e=>y.dePortChains.includes(e.id)))}getPmmNetworks(){return this.getAll().filter((e=>y.pmmChains.includes(e.id)))}getNFTNetworks(){return this.getAll().filter((e=>y.supportedNFTChains.includes(e.id)))}getWidgetNetworks(){return this.getAll().filter((e=>y.widgetChains.includes(e.id)))}getWidgetDePortNetworks(){return this.getAll().filter((e=>y.widgetChainsDePort.includes(e.id)))}getExplorerChains(){return this.getAll().filter((e=>y.explorerTransactions.includes(e.id)))}getExplorerOrdersChains(){return this.getAll().filter((e=>y.explorerOrders.includes(e.id)))}}var V=function(e,t){return V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},V(e,t)};function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}V(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function G(e,t){var r,n,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function Z(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function J(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function X(e){return this instanceof X?(this.v=e,this):new X(e)}function Q(e){return"function"==typeof e}function ee(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var te=ee((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function re(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var ne=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,r,n,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var o=Z(s),a=o.next();!a.done;a=o.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else s.remove(this);var c=this.initialTeardown;if(Q(c))try{c()}catch(e){i=e instanceof te?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var u=Z(l),h=u.next();!h.done;h=u.next()){var d=h.value;try{oe(d)}catch(e){i=null!=i?i:[],e instanceof te?i=J(J([],Y(i)),Y(e.errors)):i.push(e)}}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}if(i)throw new te(i)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)oe(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&re(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&re(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e;var t}(),ie=ne.EMPTY;function se(e){return e instanceof ne||e&&"closed"in e&&Q(e.remove)&&Q(e.add)&&Q(e.unsubscribe)}function oe(e){Q(e)?e():e.unsubscribe()}var ae=null,ce=null,le=void 0,ue=!1,he=!1,de={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=de.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,J([e,t],Y(r))):setTimeout.apply(void 0,J([e,t],Y(r)))},clearTimeout:function(e){var t=de.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function fe(e){de.setTimeout((function(){if(!ae)throw e;ae(e)}))}function pe(){}var ge=me("C",void 0,void 0);function me(e,t,r){return{kind:e,value:t,error:r}}var ye=null;function be(e){if(ue){var t=!ye;if(t&&(ye={errorThrown:!1,error:null}),e(),t){var r=ye,n=r.errorThrown,i=r.error;if(ye=null,n)throw i}}else e()}var we=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,se(t)&&t.add(r)):r.destination=Ie,r}return K(t,e),t.create=function(e,t,r){return new xe(e,t,r)},t.prototype.next=function(e){this.isStopped?Ae(function(e){return me("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Ae(me("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Ae(ge,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(ne),ve=Function.prototype.bind;function _e(e,t){return ve.call(e,t)}var Ee=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Se(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Se(e)}else Se(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Se(e)}},e}(),xe=function(e){function t(t,r,n){var i,s,o=e.call(this)||this;return Q(t)||!t?i={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:o&&he?((s=Object.create(t)).unsubscribe=function(){return o.unsubscribe()},i={next:t.next&&_e(t.next,s),error:t.error&&_e(t.error,s),complete:t.complete&&_e(t.complete,s)}):i=t,o.destination=new Ee(i),o}return K(t,e),t}(we);function Se(e){ue?function(e){ue&&ye&&(ye.errorThrown=!0,ye.error=e)}(e):fe(e)}function Ae(e,t){var r=ce;r&&de.setTimeout((function(){return r(e,t)}))}var Ie={closed:!0,next:pe,error:function(e){throw e},complete:pe},ke="function"==typeof Symbol&&Symbol.observable||"@@observable";function Te(e){return e}var Pe=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,i=this,s=(n=e)&&n instanceof we||function(e){return e&&Q(e.next)&&Q(e.error)&&Q(e.complete)}(n)&&se(n)?e:new xe(e,t,r);return be((function(){var e=i,t=e.operator,r=e.source;s.add(t?t.call(s,r):r?i._subscribe(s):i._trySubscribe(s))})),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=Ce(t))((function(t,n){var i=new xe({next:function(t){try{e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:t});r.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[ke]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===(r=e).length?Te:1===r.length?r[0]:function(e){return r.reduce((function(e,t){return t(e)}),e)})(this);var r},e.prototype.toPromise=function(e){var t=this;return new(e=Ce(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function Ce(e){var t;return null!==(t=null!=e?e:le)&&void 0!==t?t:Promise}var Oe,Me,Re=ee((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Le=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return K(t,e),t.prototype.lift=function(e){var t=new Ne(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Re},t.prototype.next=function(e){var t=this;be((function(){var r,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=Z(t.currentObservers),s=i.next();!s.done;s=i.next())s.value.next(e)}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}}))},t.prototype.error=function(e){var t=this;be((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}}))},t.prototype.complete=function(){var e=this;be((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this,n=r.hasError,i=r.isStopped,s=r.observers;return n||i?ie:(this.currentObservers=null,s.push(e),new ne((function(){t.currentObservers=null,re(s,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,n=t.thrownError,i=t.isStopped;r?e.error(n):i&&e.complete()},t.prototype.asObservable=function(){var e=new Pe;return e.source=this,e},t.create=function(e,t){return new Ne(e,t)},t}(Pe),Ne=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return K(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:ie},t}(Le);class Be{constructor(e){this.walletId=e,this.accountChanged$=new Le,this.chainChanged$=new Le,this.disconnect$=new Le,this.error$=new Le,this.netWorkService=new H,this.provider=null}getNetworkType(){return W.EVM}get accountChanged(){return this.accountChanged$.asObservable()}get disconnected(){return this.disconnect$.asObservable()}get error(){return this.error$.asObservable()}get chainChanged(){return this.chainChanged$.asObservable()}getAccounts(){return this.handle("eth_accounts")}async getAccount(){return(await this.getAccounts()||[""])[0]}requestAccounts(){return this.handle("eth_requestAccounts")}async sendAsync(e){return new Promise((async(t,r)=>{const n=(e,n)=>{e?r(e):n.error?(console.error(n.error),r(n.error)):t(n?.result||n)},i=this.provider.provider?.provider||this.provider.provider||this.provider;i.getUncheckedSigner?i.send(e.method,e.params).then((e=>t(e))).catch((e=>r(e))):i.sendAsync?i.sendAsync(e,n):i.send(e,n).catch((n=>{if("Hardhat Network doesn't support JSON-RPC params sent as an object"!==n.message)throw n;i.send(e.method,e.params).then((e=>t(e))).catch((e=>r(e)))}))}))}handle(e,t){return this.provider.request({method:e,params:t})}request(e,t){return this.handle(e,t)}setProvider(e){this.provider=e,this.provider&&"function"==typeof e.on&&(e.on("accountsChanged",(e=>{this.accountChanged$.next(e)})),e.on("disconnect",(()=>{this.disconnect$.next()})),e.on("chainChanged",(e=>{this.chainChanged$.next(e)})))}}!function(e){e.Metamask="METAMASK",e.WalletConnect="WALLETCONNECT",e.Coinbase="COINBASEWALLET",e.Phantom="PHANTOM",e.Coin98="COIN98",e.Xdefi="XDEFI",e.OneInch="ONEINCHWALLET",e.Rabby="RABBY",e.GNOSIS="GNOSIS",e.UNSTOPPABLEDOMAINS="UNSTOPPABLEDOMAINS",e.TrustWallet="Trust Wallet",e.ExternalEvmWallet="External Evm Wallet",e.ExternalSolanaWallet="External Solana Wallet",e.SolflareMetamask="SolflareMetamask",e.FordefiSolana="Fordefi Solana",e.PhantomEVM="PHANTOM EVM",e.BackpackEVM="Backpack EVM",e.BackpackSolana="Backpack",e.BrowserWalletEVM="Browser Wallet EVM",e.BrowserWalletSolana="Browser Wallet Solana",e.BraveSolana="Brave",e.Solflare="Solflare",e.BitgetEVM="BitgetEVM",e.CoreEVM="CoreEVM"}(Oe||(Oe={})),function(e){e.CONNECT_ERROR="CONNECT_ERROR",e.NEED_CONNECT="NEED_CONNECT",e.WALLET_NOT_FOUND="WALLET_NOT_FOUND",e.WALLET_NOT_UNSWERED="WALLET_NOT_UNSWERED",e.WALLET_ALREAY_PROCESSING="WALLET_ALREAY_PROCESSING",e.NOT_SUPPORT_CHAIN="NOT_SUPPORT_CHAIN",e.NEED_CONFIRM_PREVIOUS_REQUEST="NEED_CONFIRM_PREVIOUS_REQUEST",e.USER_REJECTED="USER_REJECTED",e.NOT_FOUND_CONTRACT="NOT_FOUND_CONTRACT",e.TOKEN_NOT_FOUND="TOKEN_NOT_FOUND",e.TIMEOUT="TIMEOUT",e.TRANSACTION_EXPIRED="TRANSACTION_EXPIRED",e.CANT_CHANGE_CHAIN="CANT_CHANGE_CHAIN",e.UNKNOWN_CHAIN="UNKNOWN_CHAIN",e.RPC_NODE_UNSYNC="RPC_NODE_UNSYNC",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.TRANSACTION_WAS_NOT_MINED_50_BLOCKS="TRANSACTION_WAS_NOT_MINED_50_BLOCKS",e.SIGNATURES_NOT_SAVE="SIGNATURES_NOT_SAVE",e.CREATE_ORDER_INVALID_QUERY_PARAMETERS="INVALID_QUERY_PARAMETERS",e.CREATE_ORDER_SOURCE_AND_DESTINATION_CHAINS_ARE_EQUAL="SOURCE_AND_DESTINATION_CHAINS_ARE_EQUAL",e.IMPOSSIBLE_ROUTE="IMPOSSIBLE_ROUTE",e.CREATE_ORDER_INCLUDED_GAS_FEE_NOT_COVERED_BY_INPUT_AMOUNT="INCLUDED_GAS_FEE_NOT_COVERED_BY_INPUT_AMOUNT",e.CREATE_ORDER_INCLUDED_GAS_FEE_CANNOT_BE_ESTIMATED_FOR_TRANSACTION_BUNDLE="INCLUDED_GAS_FEE_CANNOT_BE_ESTIMATED_FOR_TRANSACTION_BUNDLE",e.CREATE_ORDER_CONNECTOR_1INCH_RETURNED_ERROR="CONNECTOR_1INCH_RETURNED_ERROR",e.CREATE_ORDER_INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.CREATE_ORDER_INTERNAL_SDK_ERROR="INTERNAL_SDK_ERROR",e.CREATE_ORDER_ERROR_LOW_GIVE_AMOUNT="ERROR_LOW_GIVE_AMOUNT",e.CREATE_ORDER_AFFILIATE_FEE_RECIPIENT_NOT_SET="CREATE_ORDER_AFFILIATE_FEE_RECIPIENT_NOT_SET",e.CREATE_ORDER_AFFILIATE_FEE_PERCENT_NOT_SET="CREATE_ORDER_AFFILIATE_FEE_PERCENT_NOT_SET",e.CREATE_ORDER_ESTIMATION_FAILED="CREATE_ORDER_ESTIMATION_FAILED",e.CREATE_ORDER_SENDER_ADDRESS_EMPTY="CREATE_ORDER_SENDER_ADDRESS_EMPTY",e.CREATE_ORDER_UNSUPPORTED_TOKEN_IN="CREATE_ORDER_UNSUPPORTED_TOKEN_IN",e.CREATE_ORDER_UNSUPPORTED_TOKEN_OUT="CREATE_ORDER_UNSUPPORTED_TOKEN_OUT",e.CREATE_ORDER_UNABLE_TO_ESTIMATE_ORDER_FULFILLMENT="UNABLE_TO_ESTIMATE_ORDER_FULFILLMENT",e.CREATE_ORDER_HUGE_AMOUNT="HUGE_AMOUNT",e.EXTERNAL_CALL_ERROR="EXTERNAL_CALL_ERROR",e.NEED_UPDATE_WALLET="NEED_UPDATE_WALLET",e.NO_SUBMISSION_INFO="NO_SUBMISSION_INFO",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.GET_CREATE_ORDER_TX_ERROR="GET_CREATE_ORDER_TX_ERROR",e.ERROR_NETWORK_CONFIG="ERROR_NETWORK_CONFIG",e.ORDER_IS_NOT_PROFITABLE="ORDER_IS_NOT_PROFITABLE",e.WRONG_ACCOUNT="WRONG_ACCOUNT",e.WRONG_NETWORK="WRONG_NETWORK",e.SOLANA_TX_NOT_FINALIZED="SOLANA_TX_NOT_FINALIZED",e.UNEXPECTED_GIVE_STATUS="UNEXPECTED_GIVE_STATUS",e.TRANSACTION_FAILED="TRANSACTION_FAILED",e.EXCALLDATA_EXECUTED="EXCALLDATA_EXECUTED",e.EXCALLDATA_CANT_EXECUTE_NOW="EXCALLDATA_CANT_EXECUTE_NOW",e.ERROR_GET_PRICE="ERROR_GET_PRICE",e.TRANSFER_AMOUNT_EXCEEDS_BALANCE="TRANSFER_AMOUNT_EXCEEDS_BALANCE",e.TRANSFER_AMOUNT_EXCEEDS_ALLOWANCE="TRANSFER_AMOUNT_EXCEEDS_ALLOWANCE",e.WALLET_RPC_NODE_ERROR="WALLET_RPC_NODE_ERROR",e.NOT_ENOUGH_BALANCE="NOT_ENOUGH_BALANCE",e.ERROR_GET_MAX_BALANCE="ERROR_GET_MAX_BALANCE",e.SLIPPAGE_TOLERANCE_EXCEEDED="SLIPPAGE_TOLERANCE_EXCEEDED",e.MAX_TARGET_PRIORITY_LAMPORTS="MAX_TARGET_PRIORITY_LAMPORTS",e.TRANSACTION_REVERTED="TRANSACTION_REVERTED",e.SOLANA_IS_CONGESTED="SOLANA_IS_CONGESTED",e.SIMULATION_TX_ERROR="SIMULATION_TX_ERROR",e.ROUTING_ERROR="ROUTING_ERROR",e.ROUTING_ERROR_FROM_USDC="ROUTING_ERROR_FROM_USDC",e.NEED_APPROVE="NEED_APPROVE",e.TRANSFER_TO_CONTRACT="TRANSFER_TO_CONTRACT",e.TERMS_SIGN_ERROR="TERMS_SIGN_ERROR",e.APPROVE_ERROR="APPROVE_ERROR",e.ORDER_VALIATION_ERROR="ORDER_VALIATION_ERROR",e.SOLANA_IS_CONGESTED_WITH_ULTRA_PRIOPRITY="SOLANA_IS_CONGESTED_WITH_ULTRA_PRIOPRITY",e.ERROR_TOKEN_DECIMALS="ERROR_TOKEN_DECIMALS",e.SAME_CHAINS="SAME_CHAINS",e.WRONG_ACCOUNT_HYPER_LIQUID="WRONG_ACCOUNT_HYPER_LIQUID",e.WALLET_ACCOUNT_IS_CONTRACT="WALLET_ACCOUNT_IS_CONTRACT",e.WRONG_TOKEN="WRONG_TOKEN",e.WRONG_TARGET_TOKEN="WRONG_TARGET_TOKEN",e.WRONG_RECEIVER="WRONG_RECEIVER",e.WRONG_AMOUNT="WRONG_AMOUNT",e.WRONG_WALLET_TYPE="WRONG_WALLET_TYPE",e.NETWORK_DOES_NOT_MATCH="NETWORK_DOES_NOT_MATCH",e.CANT_CALCULATE_ID="CANT_CALCULATE_ID",e.WRONG_WITHDRAW_STATUS="WRONG_WITHDRAW_STATUS",e.INVALID_ADDRESS_ERROR="INVALID_ADDRESS_ERROR",e.UNSUPPORTED_DST_CHAIN_TOKEN_OUT="UNSUPPORTED_DST_CHAIN_TOKEN_OUT",e.INSTRUCTION_ERROR="INSTRUCTION_ERROR",e.ACCOUNT_NOT_FOUND="ACCOUNT_NOT_FOUND",e.FIND_ROUTING_ERROR="FIND_ROUTING_ERROR"}(Me||(Me={}));class De extends Error{constructor(e,t){super(e),this.type=e,this.params=t}toString(){return this.type}get error(){return this}get message(){return this.toString()}}function Ue(){return!window.deBridge.disableLogs}class ze extends Be{constructor(e){super(Oe.ExternalEvmWallet),this.setProvider(e)}async connect(e){try{Ue()&&console.log("ExternalEvmWalletService::connect connect to wallet from widget"),await this.getAccount()}catch(e){throw new De(Me.CONNECT_ERROR)}}async disconnect(){Ue()&&console.log("ExternalEvmWalletService::disconnect disconnect wallet from widget")}}var je=function(e){function t(t,r,n,i,s,o){var a=e.call(this,t)||this;return a.onFinalize=s,a.shouldUnsubscribe=o,a._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return K(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(we),Fe="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function $e(e){if(e instanceof Pe)return e;if(null!=e){if(function(e){return Q(e[ke])}(e))return i=e,new Pe((function(e){var t=i[ke]();if(Q(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}(e))return function(e){return new Pe((function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()}))}(e);if(Q(null==(n=e)?void 0:n.then))return r=e,new Pe((function(e){r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,fe)}));if(function(e){return Symbol.asyncIterator&&Q(null==e?void 0:e[Symbol.asyncIterator])}(e))return qe(e);if(function(e){return Q(null==e?void 0:e[Fe])}(e))return t=e,new Pe((function(e){var r,n;try{for(var i=Z(t),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}e.complete()}));if(function(e){return Q(null==e?void 0:e.getReader)}(e))return qe(function(e){return function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",(function(e){return function(t){return Promise.resolve(t).then(e,l)}})),n[Symbol.asyncIterator]=function(){return this},n;function o(e,t){i[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))},t&&(n[e]=t(n[e])))}function a(e,t){try{!function(e){e.value instanceof X?Promise.resolve(e.value.v).then(c,l):u(s[0][2],e)}(i[e](t))}catch(e){u(s[0][3],e)}}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,(function(){var t,r,n;return G(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,X(t.read())];case 3:return r=i.sent(),n=r.value,r.done?[4,X(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,X(n)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,r,n,i;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function qe(e){return new Pe((function(t){(function(e,t){var r,n,i,s;return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var o,a;return G(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),r=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=Z(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}(e),c.label=1;case 1:return[4,r.next()];case 2:if((n=c.sent()).done)return[3,4];if(o=n.value,t.next(o),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(s=r.return)?[4,s.call(r)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function We(e){return t=function(t,r){$e(e).subscribe(new je(r,(function(){return r.complete()}),pe,void 0,void 0)),!r.closed&&t.subscribe(r)},function(e){if(function(e){return Q(null==e?void 0:e.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")};var t}class He{constructor(e,t){this.scope=e,this.module=t}storeObject(e,t){this.setItem(e,JSON.stringify(t))}loadObject(e){const t=this.getItem(e);return t?JSON.parse(t):void 0}setItem(e,t){localStorage.setItem(this.scopedKey(e),t)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){const e=this.scopedKey(""),t=[];for(let r=0;r<localStorage.length;r++){const n=localStorage.key(r);"string"==typeof n&&n.startsWith(e)&&t.push(n)}t.forEach((e=>localStorage.removeItem(e)))}scopedKey(e){return`-${this.scope}${this.module?`:${this.module}`:""}:${e}`}static clearAll(){new He("CBWSDK").clear(),new He("walletlink").clear()}}const Ve=-32602,Ke=-32603,Ge=4001,Ze=4100,Ye=4200,Je=4900,Xe={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}},Qe="Unspecified error message.";function et(e,t=Qe){if(e&&Number.isInteger(e)){const t=e.toString();if(nt(Xe,t))return Xe[t].message;if(tt(e))return"Unspecified server error."}return t}function tt(e){return e>=-32099&&e<=-32e3}function rt(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function nt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function it(e,t){return"object"==typeof e&&null!==e&&t in e&&"string"==typeof e[t]}const st=e=>dt(Ve,e),ot=e=>dt(Ke,e),at=e=>ft(Ge,e),ct=e=>ft(Ze,e),lt=e=>ft(Ye,e),ut=e=>ft(Je,e),ht=e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new mt(t,r,n)};function dt(e,t){const[r,n]=pt(t);return new gt(e,r||et(e),n)}function ft(e,t){const[r,n]=pt(t);return new mt(e,r||et(e),n)}function pt(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}class gt extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}}class mt extends gt{constructor(e,t,r){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}function yt(e){return Math.floor(e)}const bt=/^[0-9]*$/,wt=/^[a-f0-9]*$/;function vt(e){return _t(crypto.getRandomValues(new Uint8Array(e)))}function _t(e){return[...e].map((e=>e.toString(16).padStart(2,"0"))).join("")}function Et(e){return new Uint8Array(e.match(/.{1,2}/g).map((e=>Number.parseInt(e,16))))}function xt(e,t=!1){const r=e.toString("hex");return t?`0x${r}`:r}function St(e){return xt(Rt(e),!0)}function At(e){return e.toString(10)}function It(e){return`0x${BigInt(e).toString(16)}`}function kt(e){return e.startsWith("0x")||e.startsWith("0X")}function Tt(e){return kt(e)?e.slice(2):e}function Pt(e){return kt(e)?`0x${e.slice(2)}`:`0x${e}`}function Ct(e){if("string"!=typeof e)return!1;const t=Tt(e).toLowerCase();return wt.test(t)}function Ot(e,t=!1){let r=function(e,t=!1){if("string"==typeof e){const r=Tt(e).toLowerCase();if(wt.test(r))return t?`0x${r}`:r}throw st(`"${String(e)}" is not a hexadecimal string`)}(e,!1);return r.length%2==1&&(r=`0${r}`),t?`0x${r}`:r}function Mt(e){if("string"==typeof e){const t=Tt(e).toLowerCase();if(Ct(t)&&40===t.length)return Pt(t)}throw st(`Invalid Ethereum address: ${String(e)}`)}function Rt(e){if(Buffer.isBuffer(e))return e;if("string"==typeof e){if(Ct(e)){const t=Ot(e,!1);return Buffer.from(t,"hex")}return Buffer.from(e,"utf8")}throw st(`Not binary data: ${String(e)}`)}function Lt(e){if("number"==typeof e&&Number.isInteger(e))return yt(e);if("string"==typeof e){if(bt.test(e))return yt(Number(e));if(Ct(e))return yt(Number(BigInt(Ot(e,!0))))}throw st(`Not an integer: ${String(e)}`)}function Nt(e){if(null!==e&&("bigint"==typeof e||function(e){if(null==e||"function"!=typeof e.constructor)return!1;const{constructor:t}=e;return"function"==typeof t.config&&"number"==typeof t.EUCLID}(e)))return BigInt(e.toString(10));if("number"==typeof e)return BigInt(Lt(e));if("string"==typeof e){if(bt.test(e))return BigInt(e);if(Ct(e))return BigInt(Ot(e,!0))}throw st(`Not an integer: ${String(e)}`)}function Bt(e){if("string"==typeof e)return JSON.parse(e);if("object"==typeof e)return e;throw st(`Not a JSON string or an object: ${String(e)}`)}function Dt(){const e=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:t,host:r}=document.location,n=e?e.getAttribute("href"):null;return!n||n.startsWith("javascript:")||n.startsWith("vbscript:")?`${t}//${r}/favicon.ico`:n.startsWith("http://")||n.startsWith("https://")||n.startsWith("data:")?n:n.startsWith("//")?t+n:`${t}//${r}${n}`}function Ut(e){switch(e){case"public":return"spki";case"private":return"pkcs8"}}async function zt(e,t){const r=Ut(e),n=await crypto.subtle.exportKey(r,t);return _t(new Uint8Array(n))}async function jt(e,t){const r=Ut(e),n=Et(t).buffer;return await crypto.subtle.importKey(r,new Uint8Array(n),{name:"ECDH",namedCurve:"P-256"},!0,"private"===e?["deriveKey"]:[])}const Ft={storageKey:"ownPrivateKey",keyType:"private"},$t={storageKey:"ownPublicKey",keyType:"public"},qt={storageKey:"peerPublicKey",keyType:"public"};class Wt{constructor(){this.storage=new He("CBWSDK","SCWKeyManager"),this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(e){this.sharedSecret=null,this.peerPublicKey=e,await this.storeKey(qt,e),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,this.storage.removeItem($t.storageKey),this.storage.removeItem(Ft.storageKey),this.storage.removeItem(qt.storageKey)}async generateKeyPair(){const e=await async function(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}();this.ownPrivateKey=e.privateKey,this.ownPublicKey=e.publicKey,await this.storeKey(Ft,e.privateKey),await this.storeKey($t,e.publicKey)}async loadKeysIfNeeded(){if(null===this.ownPrivateKey&&(this.ownPrivateKey=await this.loadKey(Ft)),null===this.ownPublicKey&&(this.ownPublicKey=await this.loadKey($t)),null!==this.ownPrivateKey&&null!==this.ownPublicKey||await this.generateKeyPair(),null===this.peerPublicKey&&(this.peerPublicKey=await this.loadKey(qt)),null===this.sharedSecret){if(null===this.ownPrivateKey||null===this.peerPublicKey)return;this.sharedSecret=await async function(e,t){return crypto.subtle.deriveKey({name:"ECDH",public:t},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}(this.ownPrivateKey,this.peerPublicKey)}}async loadKey(e){const t=this.storage.getItem(e.storageKey);return t?jt(e.keyType,t):null}async storeKey(e,t){const r=await zt(e.keyType,t);this.storage.setItem(e.storageKey,r)}}const Ht="4.2.4",Vt="@coinbase/wallet-sdk";async function Kt(e,t){const r=Object.assign(Object.assign({},e),{jsonrpc:"2.0",id:crypto.randomUUID()}),n=await window.fetch(t,{method:"POST",body:JSON.stringify(r),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":Ht,"X-Cbw-Sdk-Platform":Vt}}),{result:i,error:s}=await n.json();if(s)throw s;return i}const Gt="accounts",Zt="activeChain",Yt="availableChains",Jt="walletCapabilities";class Xt{constructor(e){var t,r,n;this.metadata=e.metadata,this.communicator=e.communicator,this.callback=e.callback,this.keyManager=new Wt,this.storage=new He("CBWSDK","SCWStateManager"),this.accounts=null!==(t=this.storage.loadObject(Gt))&&void 0!==t?t:[],this.chain=this.storage.loadObject(Zt)||{id:null!==(n=null===(r=e.metadata.appChainIds)||void 0===r?void 0:r[0])&&void 0!==n?n:1},this.handshake=this.handshake.bind(this),this.request=this.request.bind(this),this.createRequestMessage=this.createRequestMessage.bind(this),this.decryptResponseMessage=this.decryptResponseMessage.bind(this)}async handshake(e){var t,r;const n=await this.createRequestMessage({handshake:{method:e.method,params:Object.assign({},this.metadata,null!==(t=e.params)&&void 0!==t?t:{})}}),i=await this.communicator.postRequestAndWaitForResponse(n);if("failure"in i.content)throw i.content.failure;const s=await jt("public",i.sender);await this.keyManager.setPeerPublicKey(s);const o=(await this.decryptResponseMessage(i)).result;if("error"in o)throw o.error;const a=o.value;this.accounts=a,this.storage.storeObject(Gt,a),null===(r=this.callback)||void 0===r||r.call(this,"accountsChanged",a)}async request(e){var t;if(0===this.accounts.length)throw ct();switch(e.method){case"eth_requestAccounts":return null===(t=this.callback)||void 0===t||t.call(this,"connect",{chainId:It(this.chain.id)}),this.accounts;case"eth_accounts":return this.accounts;case"eth_coinbase":return this.accounts[0];case"net_version":return this.chain.id;case"eth_chainId":return It(this.chain.id);case"wallet_getCapabilities":return this.storage.loadObject(Jt);case"wallet_switchEthereumChain":return this.handleSwitchChainRequest(e);case"eth_ecRecover":case"personal_sign":case"personal_ecRecover":case"eth_signTransaction":case"eth_sendTransaction":case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"wallet_sendCalls":case"wallet_showCallsStatus":case"wallet_grantPermissions":return this.sendRequestToPopup(e);default:if(!this.chain.rpcUrl)throw ot("No RPC URL set for chain");return Kt(e,this.chain.rpcUrl)}}async sendRequestToPopup(e){var t,r;await(null===(r=(t=this.communicator).waitForPopupLoaded)||void 0===r?void 0:r.call(t));const n=await this.sendEncryptedRequest(e),i=(await this.decryptResponseMessage(n)).result;if("error"in i)throw i.error;return i.value}async cleanup(){var e,t;this.storage.clear(),await this.keyManager.clear(),this.accounts=[],this.chain={id:null!==(t=null===(e=this.metadata.appChainIds)||void 0===e?void 0:e[0])&&void 0!==t?t:1}}async handleSwitchChainRequest(e){var t;const r=e.params;if(!r||!(null===(t=r[0])||void 0===t?void 0:t.chainId))throw st();const n=Lt(r[0].chainId);if(this.updateChain(n))return null;const i=await this.sendRequestToPopup(e);return null===i&&this.updateChain(n),i}async sendEncryptedRequest(e){const t=await this.keyManager.getSharedSecret();if(!t)throw ct("No valid session found, try requestAccounts before other methods");const r=await async function(e,t){return async function(e,t){const r=crypto.getRandomValues(new Uint8Array(12));return{iv:r,cipherText:await crypto.subtle.encrypt({name:"AES-GCM",iv:r},e,(new TextEncoder).encode(t))}}(t,JSON.stringify(e,((e,t)=>{if(!(t instanceof Error))return t;const r=t;return Object.assign(Object.assign({},r.code?{code:r.code}:{}),{message:r.message})})))}({action:e,chainId:this.chain.id},t),n=await this.createRequestMessage({encrypted:r});return this.communicator.postRequestAndWaitForResponse(n)}async createRequestMessage(e){const t=await zt("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),sender:t,content:e,timestamp:new Date}}async decryptResponseMessage(e){var t,r;const n=e.content;if("failure"in n)throw n.failure;const i=await this.keyManager.getSharedSecret();if(!i)throw ct("Invalid session");const s=await async function(e,t){return JSON.parse(await async function(e,{iv:t,cipherText:r}){const n=await crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r);return(new TextDecoder).decode(n)}(t,e))}(n.encrypted,i),o=null===(t=s.data)||void 0===t?void 0:t.chains;if(o){const e=Object.entries(o).map((([e,t])=>({id:Number(e),rpcUrl:t})));this.storage.storeObject(Yt,e),this.updateChain(this.chain.id,e)}const a=null===(r=s.data)||void 0===r?void 0:r.capabilities;return a&&this.storage.storeObject(Jt,a),s}updateChain(e,t){var r;const n=null!=t?t:this.storage.loadObject(Yt),i=null==n?void 0:n.find((t=>t.id===e));return!!i&&(i!==this.chain&&(this.chain=i,this.storage.storeObject(Zt,i),null===(r=this.callback)||void 0===r||r.call(this,"chainChanged",It(i.id))),!0)}}var Qt=r(6532);const er="Addresses";function tr(e){return void 0!==e.errorMessage}class rr{constructor(e){this.secret=e}async encrypt(e){const t=this.secret;if(64!==t.length)throw Error("secret must be 256 bits");const r=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.importKey("raw",Et(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),i=new TextEncoder,s=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,i.encode(e)),o=s.slice(s.byteLength-16),a=s.slice(0,s.byteLength-16),c=new Uint8Array(o),l=new Uint8Array(a);return _t(new Uint8Array([...r,...c,...l]))}async decrypt(e){const t=this.secret;if(64!==t.length)throw Error("secret must be 256 bits");return new Promise(((r,n)=>{!async function(){const i=await crypto.subtle.importKey("raw",Et(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=Et(e),o=s.slice(0,12),a=s.slice(12,28),c=s.slice(28),l=new Uint8Array([...c,...a]),u={name:"AES-GCM",iv:new Uint8Array(o)};try{const e=await window.crypto.subtle.decrypt(u,i,l),t=new TextDecoder;r(t.decode(e))}catch(e){n(e)}}()}))}}class nr{constructor(e,t,r){this.linkAPIUrl=e,this.sessionId=t;const n=`${t}:${r}`;this.auth=`Basic ${btoa(n)}`}async markUnseenEventsAsSeen(e){return Promise.all(e.map((e=>fetch(`${this.linkAPIUrl}/events/${e.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}})))).catch((e=>console.error("Unabled to mark event as failed:",e)))}async fetchUnseenEvents(){var e;const t=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(t.ok){const{events:r,error:n}=await t.json();if(n)throw new Error(`Check unseen events failed: ${n}`);const i=null!==(e=null==r?void 0:r.filter((e=>"Web3Response"===e.event)).map((e=>({type:"Event",sessionId:this.sessionId,eventId:e.id,event:e.event,data:e.data}))))&&void 0!==e?e:[];return this.markUnseenEventsAsSeen(i),i}throw new Error(`Check unseen events failed: ${t.status}`)}}var ir;!function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED"}(ir||(ir={}));class sr{setConnectionStateListener(e){this.connectionStateListener=e}setIncomingDataListener(e){this.incomingDataListener=e}constructor(e,t=WebSocket){this.WebSocketClass=t,this.webSocket=null,this.pendingData=[],this.url=e.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw new Error("webSocket object is not null");return new Promise(((e,t)=>{var r;let n;try{this.webSocket=n=new this.WebSocketClass(this.url)}catch(e){return void t(e)}null===(r=this.connectionStateListener)||void 0===r||r.call(this,ir.CONNECTING),n.onclose=e=>{var r;this.clearWebSocket(),t(new Error(`websocket error ${e.code}: ${e.reason}`)),null===(r=this.connectionStateListener)||void 0===r||r.call(this,ir.DISCONNECTED)},n.onopen=t=>{var r;e(),null===(r=this.connectionStateListener)||void 0===r||r.call(this,ir.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach((e=>this.sendData(e))),this.pendingData=[])},n.onmessage=e=>{var t,r;if("h"===e.data)null===(t=this.incomingDataListener)||void 0===t||t.call(this,{type:"Heartbeat"});else try{const t=JSON.parse(e.data);null===(r=this.incomingDataListener)||void 0===r||r.call(this,t)}catch(e){}}}))}disconnect(){var e;const{webSocket:t}=this;if(t){this.clearWebSocket(),null===(e=this.connectionStateListener)||void 0===e||e.call(this,ir.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{t.close()}catch(e){}}}sendData(e){const{webSocket:t}=this;if(!t)return this.pendingData.push(e),void this.connect();t.send(e)}clearWebSocket(){const{webSocket:e}=this;e&&(this.webSocket=null,e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null)}}class or{constructor({session:e,linkAPIUrl:t,listener:r}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=yt(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=e=>{if(!e)return;const t=new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",t=>e.JsonRpcUrl&&this.handleChainUpdated(t,e.JsonRpcUrl)]]);t.forEach(((t,r)=>{const n=e[r];void 0!==n&&t(n)}))},this.handleDestroyed=e=>{var t;"1"===e&&(null===(t=this.listener)||void 0===t||t.resetAndReload())},this.handleAccountUpdated=async e=>{var t;const r=await this.cipher.decrypt(e);null===(t=this.listener)||void 0===t||t.accountUpdated(r)},this.handleMetadataUpdated=async(e,t)=>{var r;const n=await this.cipher.decrypt(t);null===(r=this.listener)||void 0===r||r.metadataUpdated(e,n)},this.handleWalletUsernameUpdated=async e=>{this.handleMetadataUpdated("walletUsername",e)},this.handleAppVersionUpdated=async e=>{this.handleMetadataUpdated("AppVersion",e)},this.handleChainUpdated=async(e,t)=>{var r;const n=await this.cipher.decrypt(e),i=await this.cipher.decrypt(t);null===(r=this.listener)||void 0===r||r.chainUpdated(n,i)},this.session=e,this.cipher=new rr(e.secret),this.listener=r;const n=new sr(`${t}/rpc`,WebSocket);n.setConnectionStateListener((async e=>{let t=!1;switch(e){case ir.DISCONNECTED:if(!this.destroyed){const e=async()=>{await new Promise((e=>setTimeout(e,5e3))),this.destroyed||n.connect().catch((()=>{e()}))};e()}break;case ir.CONNECTED:t=await this.handleConnected(),this.updateLastHeartbeat(),setInterval((()=>{this.heartbeat()}),1e4),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();case ir.CONNECTING:}this.connected!==t&&(this.connected=t)})),n.setIncomingDataListener((e=>{var t;switch(e.type){case"Heartbeat":return void this.updateLastHeartbeat();case"IsLinkedOK":case"Linked":{const t="IsLinkedOK"===e.type?e.linked:void 0;this.linked=t||e.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":this.handleSessionMetadataUpdated(e.metadata);break;case"Event":this.handleIncomingEvent(e)}void 0!==e.id&&(null===(t=this.requestResolutions.get(e.id))||void 0===t||t(e))})),this.ws=n,this.http=new nr(t,e.id,e.key)}connect(){if(this.destroyed)throw new Error("instance is destroyed");this.ws.connect()}async destroy(){this.destroyed||(await this.makeRequest({type:"SetSessionConfig",id:yt(this.nextReqId++),sessionId:this.session.id,metadata:{__destroyed:"1"}},{timeout:1e3}),this.destroyed=!0,this.ws.disconnect(),this.listener=void 0)}get connected(){return this._connected}set connected(e){this._connected=e}get linked(){return this._linked}set linked(e){var t,r;this._linked=e,e&&(null===(t=this.onceLinked)||void 0===t||t.call(this)),null===(r=this.listener)||void 0===r||r.linkedUpdated(e)}setOnceLinked(e){return new Promise((t=>{this.linked?e().then(t):this.onceLinked=()=>{e().then(t),this.onceLinked=void 0}}))}async handleIncomingEvent(e){var t;if("Event"!==e.type||"Web3Response"!==e.event)return;const r=await this.cipher.decrypt(e.data),n=JSON.parse(r);if("WEB3_RESPONSE"!==n.type)return;const{id:i,response:s}=n;null===(t=this.listener)||void 0===t||t.handleWeb3ResponseMessage(i,s)}async checkUnseenEvents(){if(this.connected){await new Promise((e=>setTimeout(e,250)));try{await this.fetchUnseenEventsAPI()}catch(e){console.error("Unable to check for unseen events",e)}}else this.shouldFetchUnseenEventsOnConnect=!0}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1,(await this.http.fetchUnseenEvents()).forEach((e=>this.handleIncomingEvent(e)))}async publishEvent(e,t,r=!1){const n=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},t),{origin:location.origin,location:location.href,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),i={type:"PublishEvent",id:yt(this.nextReqId++),sessionId:this.session.id,event:e,data:n,callWebhook:r};return this.setOnceLinked((async()=>{const e=await this.makeRequest(i);if("Fail"===e.type)throw new Error(e.error||"failed to publish event");return e.eventId}))}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>2e4)this.ws.disconnect();else try{this.ws.sendData("h")}catch(e){}}async makeRequest(e,t={timeout:6e4}){const r=e.id;let n;return this.sendData(e),Promise.race([new Promise(((e,i)=>{n=window.setTimeout((()=>{i(new Error(`request ${r} timed out`))}),t.timeout)})),new Promise((e=>{this.requestResolutions.set(r,(t=>{clearTimeout(n),e(t),this.requestResolutions.delete(r)}))}))])}async handleConnected(){return"Fail"!==(await this.makeRequest({type:"HostSession",id:yt(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key})).type&&(this.sendData({type:"IsLinked",id:yt(this.nextReqId++),sessionId:this.session.id}),this.sendData({type:"GetSessionConfig",id:yt(this.nextReqId++),sessionId:this.session.id}),!0)}}class ar{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const e=this._nextRequestId,t=Pt(e.toString(16));return this.callbacks.get(t)&&this.callbacks.delete(t),e}}var cr=r(8226),lr=r(2531);const ur="session:id",hr="session:secret",dr="session:linked";class fr{constructor(e,t,r,n=!1){this.storage=e,this.id=t,this.secret=r,this.key=(0,lr.My)((0,cr.sc)(`${t}, ${r} WalletLink`)),this._linked=!!n}static create(e){const t=vt(16),r=vt(32);return new fr(e,t,r).save()}static load(e){const t=e.getItem(ur),r=e.getItem(dr),n=e.getItem(hr);return t&&n?new fr(e,t,n,"1"===r):null}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this.storage.setItem(ur,this.id),this.storage.setItem(hr,this.secret),this.persistLinked(),this}persistLinked(){this.storage.setItem(dr,this._linked?"1":"0")}}function pr(){var e,t;return null!==(t=null===(e=null===window||void 0===window?void 0:window.matchMedia)||void 0===e?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)&&void 0!==t&&t}function gr(){const e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode('@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}')),document.documentElement.appendChild(e)}function mr(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=mr(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function yr(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=mr(e))&&(n&&(n+=" "),n+=t);return n}var br,wr,vr,_r,Er,xr,Sr,Ar,Ir,kr,Tr,Pr={},Cr=[],Or=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Mr=Array.isArray;function Rr(e,t){for(var r in t)e[r]=t[r];return e}function Lr(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Nr(e,t,r){var n,i,s,o={};for(s in t)"key"==s?n=t[s]:"ref"==s?i=t[s]:o[s]=t[s];if(arguments.length>2&&(o.children=arguments.length>3?br.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===o[s]&&(o[s]=e.defaultProps[s]);return Br(e,o,n,i,null)}function Br(e,t,r,n,i){var s={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==i?++vr:i,__i:-1,__u:0};return null==i&&null!=wr.vnode&&wr.vnode(s),s}function Dr(e){return e.children}function Ur(e,t){this.props=e,this.context=t}function zr(e,t){if(null==t)return e.__?zr(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?zr(e):null}function jr(e){var t,r;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e){e.__e=e.__c.base=r.__e;break}return jr(e)}}function Fr(e){(!e.__d&&(e.__d=!0)&&_r.push(e)&&!$r.__r++||Er!==wr.debounceRendering)&&((Er=wr.debounceRendering)||xr)($r)}function $r(){var e,t,r,n,i,s,o,a;for(_r.sort(Sr);e=_r.shift();)e.__d&&(t=_r.length,n=void 0,s=(i=(r=e).__v).__e,o=[],a=[],r.__P&&((n=Rr({},i)).__v=i.__v+1,wr.vnode&&wr.vnode(n),Yr(r.__P,n,i,r.__n,r.__P.namespaceURI,32&i.__u?[s]:null,o,null==s?zr(i):s,!!(32&i.__u),a),n.__v=i.__v,n.__.__k[n.__i]=n,Jr(o,n,a),n.__e!=s&&jr(n)),_r.length>t&&_r.sort(Sr));$r.__r=0}function qr(e,t,r,n,i,s,o,a,c,l,u){var h,d,f,p,g,m,y=n&&n.__k||Cr,b=t.length;for(c=Wr(r,t,y,c),h=0;h<b;h++)null!=(f=r.__k[h])&&(d=-1===f.__i?Pr:y[f.__i]||Pr,f.__i=h,m=Yr(e,f,d,i,s,o,a,c,l,u),p=f.__e,f.ref&&d.ref!=f.ref&&(d.ref&&Qr(d.ref,null,f),u.push(f.ref,f.__c||p,f)),null==g&&null!=p&&(g=p),4&f.__u||d.__k===f.__k?c=Hr(f,c,e):"function"==typeof f.type&&void 0!==m?c=m:p&&(c=p.nextSibling),f.__u&=-7);return r.__e=g,c}function Wr(e,t,r,n){var i,s,o,a,c,l=t.length,u=r.length,h=u,d=0;for(e.__k=[],i=0;i<l;i++)null!=(s=t[i])&&"boolean"!=typeof s&&"function"!=typeof s?(a=i+d,(s=e.__k[i]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?Br(null,s,null,null,null):Mr(s)?Br(Dr,{children:s},null,null,null):void 0===s.constructor&&s.__b>0?Br(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,o=null,-1!==(c=s.__i=Vr(s,r,a,h))&&(h--,(o=r[c])&&(o.__u|=2)),null==o||null===o.__v?(-1==c&&d--,"function"!=typeof s.type&&(s.__u|=4)):c!==a&&(c==a-1?d--:c==a+1?d++:(c>a?d--:d++,s.__u|=4))):s=e.__k[i]=null;if(h)for(i=0;i<u;i++)null!=(o=r[i])&&!(2&o.__u)&&(o.__e==n&&(n=zr(o)),en(o,o));return n}function Hr(e,t,r){var n,i;if("function"==typeof e.type){for(n=e.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=e,t=Hr(n[i],t,r));return t}e.__e!=t&&(t&&e.type&&!r.contains(t)&&(t=zr(e)),r.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function Vr(e,t,r,n){var i=e.key,s=e.type,o=r-1,a=r+1,c=t[r];if(null===c||c&&i==c.key&&s===c.type&&!(2&c.__u))return r;if(("function"!=typeof s||s===Dr||i)&&n>(null==c||2&c.__u?0:1))for(;o>=0||a<t.length;){if(o>=0){if((c=t[o])&&!(2&c.__u)&&i==c.key&&s===c.type)return o;o--}if(a<t.length){if((c=t[a])&&!(2&c.__u)&&i==c.key&&s===c.type)return a;a++}}return-1}function Kr(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||Or.test(t)?r:r+"px"}function Gr(e,t,r,n,i){var s;e:if("style"===t)if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||Kr(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||Kr(e.style,t,r[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(Ar,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=r,r?n?r.u=n.u:(r.u=Ir,e.addEventListener(t,s?Tr:kr,s)):e.removeEventListener(t,s?Tr:kr,s);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==r?"":r))}}function Zr(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.t)t.t=Ir++;else if(t.t<r.u)return;return r(wr.event?wr.event(t):t)}}}function Yr(e,t,r,n,i,s,o,a,c,l){var u,h,d,f,p,g,m,y,b,w,v,_,E,x,S,A,I,k=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(c=!!(32&r.__u),s=[a=t.__e=r.__e]),(u=wr.__b)&&u(t);e:if("function"==typeof k)try{if(y=t.props,b="prototype"in k&&k.prototype.render,w=(u=k.contextType)&&n[u.__c],v=u?w?w.props.value:u.__:n,r.__c?m=(h=t.__c=r.__c).__=h.__E:(b?t.__c=h=new k(y,v):(t.__c=h=new Ur(y,v),h.constructor=k,h.render=tn),w&&w.sub(h),h.props=y,h.state||(h.state={}),h.context=v,h.__n=n,d=h.__d=!0,h.__h=[],h._sb=[]),b&&null==h.__s&&(h.__s=h.state),b&&null!=k.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=Rr({},h.__s)),Rr(h.__s,k.getDerivedStateFromProps(y,h.__s))),f=h.props,p=h.state,h.__v=t,d)b&&null==k.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),b&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(b&&null==k.getDerivedStateFromProps&&y!==f&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(y,v),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(y,h.__s,v)||t.__v===r.__v)){for(t.__v!==r.__v&&(h.props=y,h.state=h.__s,h.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some((function(e){e&&(e.__=t)})),_=0;_<h._sb.length;_++)h.__h.push(h._sb[_]);h._sb=[],h.__h.length&&o.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(y,h.__s,v),b&&null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(f,p,g)}))}if(h.context=v,h.props=y,h.__P=e,h.__e=!1,E=wr.__r,x=0,b){for(h.state=h.__s,h.__d=!1,E&&E(t),u=h.render(h.props,h.state,h.context),S=0;S<h._sb.length;S++)h.__h.push(h._sb[S]);h._sb=[]}else do{h.__d=!1,E&&E(t),u=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++x<25);h.state=h.__s,null!=h.getChildContext&&(n=Rr(Rr({},n),h.getChildContext())),b&&!d&&null!=h.getSnapshotBeforeUpdate&&(g=h.getSnapshotBeforeUpdate(f,p)),a=qr(e,Mr(A=null!=u&&u.type===Dr&&null==u.key?u.props.children:u)?A:[A],t,r,n,i,s,o,a,c,l),h.base=t.__e,t.__u&=-161,h.__h.length&&o.push(h),m&&(h.__E=h.__=null)}catch(e){if(t.__v=null,c||null!=s)if(e.then){for(t.__u|=c?160:128;a&&8===a.nodeType&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,t.__e=a}else for(I=s.length;I--;)Lr(s[I]);else t.__e=r.__e,t.__k=r.__k;wr.__e(e,t,r)}else null==s&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):a=t.__e=Xr(r.__e,t,r,n,i,s,o,c,l);return(u=wr.diffed)&&u(t),128&t.__u?void 0:a}function Jr(e,t,r){for(var n=0;n<r.length;n++)Qr(r[n],r[++n],r[++n]);wr.__c&&wr.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){wr.__e(e,t.__v)}}))}function Xr(e,t,r,n,i,s,o,a,c){var l,u,h,d,f,p,g,m=r.props,y=t.props,b=t.type;if("svg"===b?i="http://www.w3.org/2000/svg":"math"===b?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=s)for(l=0;l<s.length;l++)if((f=s[l])&&"setAttribute"in f==!!b&&(b?f.localName===b:3===f.nodeType)){e=f,s[l]=null;break}if(null==e){if(null===b)return document.createTextNode(y);e=document.createElementNS(i,b,y.is&&y),a&&(wr.__m&&wr.__m(t,s),a=!1),s=null}if(null===b)m===y||a&&e.data===y||(e.data=y);else{if(s=s&&br.call(e.childNodes),m=r.props||Pr,!a&&null!=s)for(m={},l=0;l<e.attributes.length;l++)m[(f=e.attributes[l]).name]=f.value;for(l in m)if(f=m[l],"children"==l);else if("dangerouslySetInnerHTML"==l)h=f;else if(!(l in y)){if("value"==l&&"defaultValue"in y||"checked"==l&&"defaultChecked"in y)continue;Gr(e,l,null,f,i)}for(l in y)f=y[l],"children"==l?d=f:"dangerouslySetInnerHTML"==l?u=f:"value"==l?p=f:"checked"==l?g=f:a&&"function"!=typeof f||m[l]===f||Gr(e,l,f,m[l],i);if(u)a||h&&(u.__html===h.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(h&&(e.innerHTML=""),qr(e,Mr(d)?d:[d],t,r,n,"foreignObject"===b?"http://www.w3.org/1999/xhtml":i,s,o,s?s[0]:r.__k&&zr(r,0),a,c),null!=s)for(l=s.length;l--;)Lr(s[l]);a||(l="value","progress"===b&&null==p?e.removeAttribute("value"):void 0!==p&&(p!==e[l]||"progress"===b&&!p||"option"===b&&p!==m[l])&&Gr(e,l,p,m[l],i),l="checked",void 0!==g&&g!==e[l]&&Gr(e,l,g,m[l],i))}return e}function Qr(e,t,r){try{if("function"==typeof e){var n="function"==typeof e.__u;n&&e.__u(),n&&null==t||(e.__u=e(t))}else e.current=t}catch(e){wr.__e(e,r)}}function en(e,t,r){var n,i;if(wr.unmount&&wr.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||Qr(n,null,t)),null!=(n=e.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(e){wr.__e(e,t)}n.base=n.__P=null}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&en(n[i],t,r||"function"!=typeof e.type);r||Lr(e.__e),e.__c=e.__=e.__e=void 0}function tn(e,t,r){return this.constructor(e,r)}function rn(e,t,r){var n,i,s,o;t===document&&(t=document.documentElement),wr.__&&wr.__(e,t),i=(n="function"==typeof r)?null:r&&r.__k||t.__k,s=[],o=[],Yr(t,e=(!n&&r||t).__k=Nr(Dr,null,[e]),i||Pr,Pr,t.namespaceURI,!n&&r?[r]:i?null:t.firstChild?br.call(t.childNodes):null,s,!n&&r?r:i?i.__e:t.firstChild,n,o),Jr(s,e,o)}br=Cr.slice,wr={__e:function(e,t,r,n){for(var i,s,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&null!=s.getDerivedStateFromError&&(i.setState(s.getDerivedStateFromError(e)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),o=i.__d),o)return i.__E=i}catch(t){e=t}throw e}},vr=0,Ur.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Rr({},this.state),"function"==typeof e&&(e=e(Rr({},r),this.props)),e&&Rr(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),Fr(this))},Ur.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Fr(this))},Ur.prototype.render=Dr,_r=[],xr="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Sr=function(e,t){return e.__v.__b-t.__v.__b},$r.__r=0,Ar=/(PointerCapture)$|Capture$/i,Ir=0,kr=Zr(!1),Tr=Zr(!0);var nn,sn,on,an,cn=0,ln=[],un=wr,hn=un.__b,dn=un.__r,fn=un.diffed,pn=un.__c,gn=un.unmount,mn=un.__;function yn(e,t){un.__h&&un.__h(sn,e,cn||t),cn=0;var r=sn.__H||(sn.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function bn(e){return cn=1,function(e,t){var r=yn(nn++,2);if(r.t=e,!r.__c&&(r.__=[Sn(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=sn,!sn.u)){var n=function(e,t,n){if(!r.__c.__H)return!0;var s=r.__c.__H.__.filter((function(e){return!!e.__c}));if(s.every((function(e){return!e.__N})))return!i||i.call(this,e,t,n);var o=r.__c.props!==e;return s.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}})),i&&i.call(this,e,t,n)||o};sn.u=!0;var i=sn.shouldComponentUpdate,s=sn.componentWillUpdate;sn.componentWillUpdate=function(e,t,r){if(this.__e){var o=i;i=void 0,n(e,t,r),i=o}s&&s.call(this,e,t,r)},sn.shouldComponentUpdate=n}return r.__N||r.__}(Sn,e)}function wn(){for(var e;e=ln.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(En),e.__H.__h.forEach(xn),e.__H.__h=[]}catch(t){e.__H.__h=[],un.__e(t,e.__v)}}un.__b=function(e){sn=null,hn&&hn(e)},un.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),mn&&mn(e,t)},un.__r=function(e){dn&&dn(e),nn=0;var t=(sn=e.__c).__H;t&&(on===sn?(t.__h=[],sn.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0}))):(t.__h.forEach(En),t.__h.forEach(xn),t.__h=[],nn=0)),on=sn},un.diffed=function(e){fn&&fn(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==ln.push(t)&&an===un.requestAnimationFrame||((an=un.requestAnimationFrame)||_n)(wn)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.i=void 0}))),on=sn=null},un.__c=function(e,t){t.some((function(e){try{e.__h.forEach(En),e.__h=e.__h.filter((function(e){return!e.__||xn(e)}))}catch(r){t.some((function(e){e.__h&&(e.__h=[])})),t=[],un.__e(r,e.__v)}})),pn&&pn(e,t)},un.unmount=function(e){gn&&gn(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach((function(e){try{En(e)}catch(e){t=e}})),r.__H=void 0,t&&un.__e(t,r.__v))};var vn="function"==typeof requestAnimationFrame;function _n(e){var t,r=function(){clearTimeout(n),vn&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);vn&&(t=requestAnimationFrame(r))}function En(e){var t=sn,r=e.__c;"function"==typeof r&&(e.__c=void 0,r()),sn=t}function xn(e){var t=sn;e.__c=e.__(),sn=t}function Sn(e,t){return"function"==typeof t?t(e):t}class An{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=pr()}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",e.appendChild(this.root),this.render()}presentItem(e){const t=this.nextItemKey++;return this.items.set(t,e),this.render(),()=>{this.items.delete(t),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&rn(Nr("div",null,Nr(In,{darkMode:this.darkMode},Array.from(this.items.entries()).map((([e,t])=>Nr(kn,Object.assign({},t,{key:e})))))),this.root)}}const In=e=>Nr("div",{class:yr("-cbwsdk-snackbar-container")},Nr("style",null,".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}"),Nr("div",{class:"-cbwsdk-snackbar"},e.children)),kn=({autoExpand:e,message:t,menuItems:r})=>{const[n,i]=bn(!0),[s,o]=bn(null!=e&&e);return function(e,t){var r=yn(nn++,3);!un.__s&&function(e,t){return!e||e.length!==t.length||t.some((function(t,r){return t!==e[r]}))}(r.__H,t)&&(r.__=()=>{const e=[window.setTimeout((()=>{i(!1)}),1),window.setTimeout((()=>{o(!0)}),1e4)];return()=>{e.forEach(window.clearTimeout)}},r.i=t,sn.__H.__h.push(r))}(),Nr("div",{class:yr("-cbwsdk-snackbar-instance",n&&"-cbwsdk-snackbar-instance-hidden",s&&"-cbwsdk-snackbar-instance-expanded")},Nr("div",{class:"-cbwsdk-snackbar-instance-header",onClick:()=>{o(!s)}},Nr("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",Nr("div",{class:"-cbwsdk-snackbar-instance-header-message"},t),Nr("div",{class:"-gear-container"},!s&&Nr("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Nr("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),Nr("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=",class:"-gear-icon",title:"Expand"}))),r&&r.length>0&&Nr("div",{class:"-cbwsdk-snackbar-instance-menu"},r.map(((e,t)=>Nr("div",{class:yr("-cbwsdk-snackbar-instance-menu-item",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:e.onClick,key:t},Nr("svg",{width:e.svgWidth,height:e.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Nr("path",{"fill-rule":e.defaultFillRule,"clip-rule":e.defaultClipRule,d:e.path,fill:"#AAAAAA"})),Nr("span",{class:yr("-cbwsdk-snackbar-instance-menu-item-info",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},e.info))))))};class Tn{constructor(){this.attached=!1,this.snackbar=new An}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const e=document.documentElement,t=document.createElement("div");t.className="-cbwsdk-css-reset",e.appendChild(t),this.snackbar.attach(t),this.attached=!0,gr()}showConnecting(e){let t;return t=e.isUnlinkedErrorState?{autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:{message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(t)}}class Pn{constructor(){this.root=null,this.darkMode=pr()}attach(){const e=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",e.appendChild(this.root),gr()}present(e){this.render(e)}clear(){this.render(null)}render(e){this.root&&(rn(null,this.root),e&&rn(Nr(Cn,Object.assign({},e,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root))}}const Cn=({title:e,buttonText:t,darkMode:r,onButtonClick:n,onDismiss:i})=>{const s=r?"dark":"light";return Nr(In,{darkMode:r},Nr("div",{class:"-cbwsdk-redirect-dialog"},Nr("style",null,".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}"),Nr("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:i}),Nr("div",{class:yr("-cbwsdk-redirect-dialog-box",s)},Nr("p",null,e),Nr("button",{onClick:n},t))))},On="https://www.walletlink.org";class Mn{constructor(){this.attached=!1,this.redirectDialog=new Pn}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}redirectToCoinbaseWallet(e){const t=new URL("https://go.cb-w.com/walletlink");t.searchParams.append("redirect_url",function(){try{return function(){try{return null!==window.frameElement}catch(e){return!1}}()&&window.top?window.top.location:window.location}catch(e){return window.location}}().href),e&&t.searchParams.append("wl_url",e);const r=document.createElement("a");r.target="cbw-opener",r.href=t.href,r.rel="noreferrer noopener",r.click()}openCoinbaseWalletDeeplink(e){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(e)}}),setTimeout((()=>{this.redirectToCoinbaseWallet(e)}),99)}showConnecting(e){return()=>{this.redirectDialog.clear()}}}class Rn{constructor(e){var t;this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.isMobileWeb=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(null===(t=null===window||void 0===window?void 0:window.navigator)||void 0===t?void 0:t.userAgent),this.linkedUpdated=e=>{this.isLinked=e;const t=this.storage.getItem(er);if(e&&(this._session.linked=e),this.isUnlinkedErrorState=!1,t){const r=t.split(" "),n="true"===this.storage.getItem("IsStandaloneSigning");""===r[0]||e||!this._session.linked||n||(this.isUnlinkedErrorState=!0)}},this.metadataUpdated=(e,t)=>{this.storage.setItem(e,t)},this.chainUpdated=(e,t)=>{this.chainCallbackParams.chainId===e&&this.chainCallbackParams.jsonRpcUrl===t||(this.chainCallbackParams={chainId:e,jsonRpcUrl:t},this.chainCallback&&this.chainCallback(t,Number.parseInt(e,10)))},this.accountUpdated=e=>{this.accountsCallback&&this.accountsCallback([e]),Rn.accountRequestCallbackIds.size>0&&(Array.from(Rn.accountRequestCallbackIds.values()).forEach((t=>{this.invokeCallback(t,{method:"requestEthereumAccounts",result:[e]})})),Rn.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage,this.metadata=e.metadata,this.accountsCallback=e.accountsCallback,this.chainCallback=e.chainCallback;const{session:r,ui:n,connection:i}=this.subscribe();this._session=r,this.connection=i,this.relayEventManager=new ar,this.ui=n,this.ui.attach()}subscribe(){const e=fr.load(this.storage)||fr.create(this.storage),{linkAPIUrl:t}=this,r=new or({session:e,linkAPIUrl:t,listener:this}),n=this.isMobileWeb?new Mn:new Tn;return r.connect(),{session:e,ui:n,connection:r}}resetAndReload(){this.connection.destroy().then((()=>{const e=fr.load(this.storage);(null==e?void 0:e.id)===this._session.id&&He.clearAll(),document.location.reload()})).catch((e=>{}))}signEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:At(e.weiValue),data:xt(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?At(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?At(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?At(e.gasPriceInWei):null,gasLimit:e.gasLimit?At(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:At(e.weiValue),data:xt(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?At(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?At(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?At(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?At(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,t){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:xt(e,!0),chainId:t}})}getWalletLinkSession(){return this._session}sendRequest(e){let t=null;const r=vt(8),n=n=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,e.method,n),null==t||t()};return new Promise(((i,s)=>{t=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:n,onResetConnection:this.resetAndReload}),this.relayEventManager.callbacks.set(r,(e=>{if(null==t||t(),tr(e))return s(new Error(e.errorMessage));i(e)})),this.publishWeb3RequestEvent(r,e)}))}publishWeb3RequestEvent(e,t){const r={type:"WEB3_REQUEST",id:e,request:t};this.publishEvent("Web3Request",r,!0).then((e=>{})).catch((e=>{this.handleWeb3ResponseMessage(r.id,{method:t.method,errorMessage:e.message})})),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(t.method)}openCoinbaseWalletDeeplink(e){if(this.ui instanceof Mn)switch(e){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",(()=>{window.addEventListener("focus",(()=>{this.connection.checkUnseenEvents()}),{once:!0})}),{once:!0}),this.ui.openCoinbaseWalletDeeplink()}}publishWeb3RequestCanceledEvent(e){const t={type:"WEB3_REQUEST_CANCELED",id:e};this.publishEvent("Web3RequestCanceled",t,!1).then()}publishEvent(e,t,r){return this.connection.publishEvent(e,t,r)}handleWeb3ResponseMessage(e,t){if("requestEthereumAccounts"===t.method)return Rn.accountRequestCallbackIds.forEach((e=>this.invokeCallback(e,t))),void Rn.accountRequestCallbackIds.clear();this.invokeCallback(e,t)}handleErrorResponse(e,t,r){var n;const i=null!==(n=null==r?void 0:r.message)&&void 0!==n?n:"Unspecified error message.";this.handleWeb3ResponseMessage(e,{method:t,errorMessage:i})}invokeCallback(e,t){const r=this.relayEventManager.callbacks.get(e);r&&(r(t),this.relayEventManager.callbacks.delete(e))}requestEthereumAccounts(){const{appName:e,appLogoUrl:t}=this.metadata,r={method:"requestEthereumAccounts",params:{appName:e,appLogoUrl:t}},n=vt(8);return new Promise(((e,t)=>{this.relayEventManager.callbacks.set(n,(r=>{if(tr(r))return t(new Error(r.errorMessage));e(r)})),Rn.accountRequestCallbackIds.add(n),this.publishWeb3RequestEvent(n,r)}))}watchAsset(e,t,r,n,i,s){const o={method:"watchAsset",params:{type:e,options:{address:t,symbol:r,decimals:n,image:i},chainId:s}};let a=null;const c=vt(8);return a=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:e=>{this.publishWeb3RequestCanceledEvent(c),this.handleErrorResponse(c,o.method,e),null==a||a()},onResetConnection:this.resetAndReload}),new Promise(((e,t)=>{this.relayEventManager.callbacks.set(c,(r=>{if(null==a||a(),tr(r))return t(new Error(r.errorMessage));e(r)})),this.publishWeb3RequestEvent(c,o)}))}addEthereumChain(e,t,r,n,i,s){const o={method:"addEthereumChain",params:{chainId:e,rpcUrls:t,blockExplorerUrls:n,chainName:i,iconUrls:r,nativeCurrency:s}};let a=null;const c=vt(8);return a=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:e=>{this.publishWeb3RequestCanceledEvent(c),this.handleErrorResponse(c,o.method,e),null==a||a()},onResetConnection:this.resetAndReload}),new Promise(((e,t)=>{this.relayEventManager.callbacks.set(c,(r=>{if(null==a||a(),tr(r))return t(new Error(r.errorMessage));e(r)})),this.publishWeb3RequestEvent(c,o)}))}switchEthereumChain(e,t){const r={method:"switchEthereumChain",params:Object.assign({chainId:e},{address:t})};let n=null;const i=vt(8);return n=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:e=>{this.publishWeb3RequestCanceledEvent(i),this.handleErrorResponse(i,r.method,e),null==n||n()},onResetConnection:this.resetAndReload}),new Promise(((e,t)=>{this.relayEventManager.callbacks.set(i,(r=>(null==n||n(),tr(r)&&r.errorCode?t(ht({code:r.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."})):tr(r)?t(new Error(r.errorMessage)):void e(r)))),this.publishWeb3RequestEvent(i,r)}))}}Rn.accountRequestCallbackIds=new Set;const Ln="DefaultChainId",Nn="DefaultJsonRpcUrl";class Bn{constructor(e){this._relay=null,this._addresses=[],this.metadata=e.metadata,this._storage=new He("walletlink",On),this.callback=e.callback||null;const t=this._storage.getItem(er);if(t){const e=t.split(" ");""!==e[0]&&(this._addresses=e.map((e=>Mt(e))))}this.initializeRelay()}getSession(){const e=this.initializeRelay(),{id:t,secret:r}=e.getWalletLinkSession();return{id:t,secret:r}}async handshake(){await this._eth_requestAccounts()}get selectedAddress(){return this._addresses[0]||void 0}get jsonRpcUrl(){var e;return null!==(e=this._storage.getItem(Nn))&&void 0!==e?e:void 0}set jsonRpcUrl(e){this._storage.setItem(Nn,e)}updateProviderInfo(e,t){var r;this.jsonRpcUrl=e;const n=this.getChainId();this._storage.setItem(Ln,t.toString(10)),Lt(t)!==n&&(null===(r=this.callback)||void 0===r||r.call(this,"chainChanged",It(t)))}async watchAsset(e){const t=Array.isArray(e)?e[0]:e;if(!t.type)throw st("Type is required");if("ERC20"!==(null==t?void 0:t.type))throw st(`Asset of type '${t.type}' is not supported`);if(!(null==t?void 0:t.options))throw st("Options are required");if(!(null==t?void 0:t.options.address))throw st("Address is required");const r=this.getChainId(),{address:n,symbol:i,image:s,decimals:o}=t.options,a=this.initializeRelay(),c=await a.watchAsset(t.type,n,i,o,s,null==r?void 0:r.toString());return!tr(c)&&!!c.result}async addEthereumChain(e){var t,r;const n=e[0];if(0===(null===(t=n.rpcUrls)||void 0===t?void 0:t.length))throw st("please pass in at least 1 rpcUrl");if(!n.chainName||""===n.chainName.trim())throw st("chainName is a required field");if(!n.nativeCurrency)throw st("nativeCurrency is a required field");const i=Number.parseInt(n.chainId,16);if(i===this.getChainId())return!1;const s=this.initializeRelay(),{rpcUrls:o=[],blockExplorerUrls:a=[],chainName:c,iconUrls:l=[],nativeCurrency:u}=n,h=await s.addEthereumChain(i.toString(),o,l,a,c,u);if(tr(h))return!1;if(!0===(null===(r=h.result)||void 0===r?void 0:r.isApproved))return this.updateProviderInfo(o[0],i),null;throw ot("unable to add ethereum chain")}async switchEthereumChain(e){const t=e[0],r=Number.parseInt(t.chainId,16),n=this.initializeRelay(),i=await n.switchEthereumChain(r.toString(10),this.selectedAddress||void 0);if(tr(i))throw i;const s=i.result;return s.isApproved&&s.rpcUrl.length>0&&this.updateProviderInfo(s.rpcUrl,r),null}async cleanup(){this.callback=null,this._relay&&this._relay.resetAndReload(),this._storage.clear()}_setAddresses(e,t){var r;if(!Array.isArray(e))throw new Error("addresses is not an array");const n=e.map((e=>Mt(e)));JSON.stringify(n)!==JSON.stringify(this._addresses)&&(this._addresses=n,null===(r=this.callback)||void 0===r||r.call(this,"accountsChanged",n),this._storage.setItem(er,n.join(" ")))}async request(e){const t=e.params||[];switch(e.method){case"eth_accounts":return[...this._addresses];case"eth_coinbase":return this.selectedAddress||null;case"net_version":return this.getChainId().toString(10);case"eth_chainId":return It(this.getChainId());case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_ecRecover":case"personal_ecRecover":return this.ecRecover(e);case"personal_sign":return this.personalSign(e);case"eth_signTransaction":return this._eth_signTransaction(t);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(t);case"eth_sendTransaction":return this._eth_sendTransaction(t);case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":return this.signTypedData(e);case"wallet_addEthereumChain":return this.addEthereumChain(t);case"wallet_switchEthereumChain":return this.switchEthereumChain(t);case"wallet_watchAsset":return this.watchAsset(t);default:if(!this.jsonRpcUrl)throw ot("No RPC URL set for chain");return Kt(e,this.jsonRpcUrl)}}_ensureKnownAddress(e){const t=Mt(e);if(!this._addresses.map((e=>Mt(e))).includes(t))throw new Error("Unknown Ethereum address")}_prepareTransactionParams(e){const t=e.from?Mt(e.from):this.selectedAddress;if(!t)throw new Error("Ethereum address is unavailable");return this._ensureKnownAddress(t),{fromAddress:t,toAddress:e.to?Mt(e.to):null,weiValue:null!=e.value?Nt(e.value):BigInt(0),data:e.data?Rt(e.data):Buffer.alloc(0),nonce:null!=e.nonce?Lt(e.nonce):null,gasPriceInWei:null!=e.gasPrice?Nt(e.gasPrice):null,maxFeePerGas:null!=e.maxFeePerGas?Nt(e.maxFeePerGas):null,maxPriorityFeePerGas:null!=e.maxPriorityFeePerGas?Nt(e.maxPriorityFeePerGas):null,gasLimit:null!=e.gas?Nt(e.gas):null,chainId:e.chainId?Lt(e.chainId):this.getChainId()}}async ecRecover(e){const{method:t,params:r}=e;if(!Array.isArray(r))throw st();const n=this.initializeRelay(),i=await n.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:St(r[0]),signature:St(r[1]),addPrefix:"personal_ecRecover"===t}});if(tr(i))throw i;return i.result}getChainId(){var e;return Number.parseInt(null!==(e=this._storage.getItem(Ln))&&void 0!==e?e:"1",10)}async _eth_requestAccounts(){var e,t;if(this._addresses.length>0)return null===(e=this.callback)||void 0===e||e.call(this,"connect",{chainId:It(this.getChainId())}),this._addresses;const r=this.initializeRelay(),n=await r.requestEthereumAccounts();if(tr(n))throw n;if(!n.result)throw new Error("accounts received is empty");return this._setAddresses(n.result),null===(t=this.callback)||void 0===t||t.call(this,"connect",{chainId:It(this.getChainId())}),this._addresses}async personalSign({params:e}){if(!Array.isArray(e))throw st();const t=e[1],r=e[0];this._ensureKnownAddress(t);const n=this.initializeRelay(),i=await n.sendRequest({method:"signEthereumMessage",params:{address:Mt(t),message:St(r),addPrefix:!0,typedDataJson:null}});if(tr(i))throw i;return i.result}async _eth_signTransaction(e){const t=this._prepareTransactionParams(e[0]||{}),r=this.initializeRelay(),n=await r.signEthereumTransaction(t);if(tr(n))throw n;return n.result}async _eth_sendRawTransaction(e){const t=Rt(e[0]),r=this.initializeRelay(),n=await r.submitEthereumTransaction(t,this.getChainId());if(tr(n))throw n;return n.result}async _eth_sendTransaction(e){const t=this._prepareTransactionParams(e[0]||{}),r=this.initializeRelay(),n=await r.signAndSubmitEthereumTransaction(t);if(tr(n))throw n;return n.result}async signTypedData(e){const{method:t,params:r}=e;if(!Array.isArray(r))throw st();const n=r["eth_signTypedData_v1"===t?1:0],i=r["eth_signTypedData_v1"===t?0:1];this._ensureKnownAddress(n);const s=this.initializeRelay(),o=await s.sendRequest({method:"signEthereumMessage",params:{address:Mt(n),message:(a=i,xt({eth_signTypedData_v1:Qt.hashForSignTypedDataLegacy,eth_signTypedData_v3:Qt.hashForSignTypedData_v3,eth_signTypedData_v4:Qt.hashForSignTypedData_v4,eth_signTypedData:Qt.hashForSignTypedData_v4}[t]({data:Bt(a)}),!0)),typedDataJson:JSON.stringify(i,null,2),addPrefix:!1}});var a;if(tr(o))throw o;return o.result}initializeRelay(){return this._relay||(this._relay=new Rn({linkAPIUrl:On,storage:this._storage,metadata:this.metadata,accountsCallback:this._setAddresses.bind(this),chainCallback:this.updateProviderInfo.bind(this)})),this._relay}}const Dn="SignerType",Un=new He("CBWSDK","SignerConfigurator");const{checkCrossOriginOpenerPolicy:zn,getCrossOriginOpenerPolicy:jn}=(()=>{let e;return{getCrossOriginOpenerPolicy:()=>void 0===e?"undefined":e,checkCrossOriginOpenerPolicy:async()=>{if("undefined"!=typeof window)try{const t=`${window.location.origin}${window.location.pathname}`,r=await fetch(t,{method:"HEAD"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=r.headers.get("Cross-Origin-Opener-Policy");e=null!=n?n:"null","same-origin"===e&&console.error("Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.\n\nPlease see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information.")}catch(t){console.error("Error checking Cross-Origin-Opener-Policy:",t.message),e="error"}else e="non-browser-env"}}})();class Fn{constructor({url:e="https://keys.coinbase.com/connect",metadata:t,preference:r}){this.popup=null,this.listeners=new Map,this.postMessage=async e=>{(await this.waitForPopupLoaded()).postMessage(e,this.url.origin)},this.postRequestAndWaitForResponse=async e=>{const t=this.onMessage((({requestId:t})=>t===e.id));return this.postMessage(e),await t},this.onMessage=async e=>new Promise(((t,r)=>{const n=r=>{if(r.origin!==this.url.origin)return;const i=r.data;e(i)&&(t(i),window.removeEventListener("message",n),this.listeners.delete(n))};window.addEventListener("message",n),this.listeners.set(n,{reject:r})})),this.disconnect=()=>{var e;(e=this.popup)&&!e.closed&&e.close(),this.popup=null,this.listeners.forEach((({reject:e},t)=>{e(at("Request rejected")),window.removeEventListener("message",t)})),this.listeners.clear()},this.waitForPopupLoaded=async()=>this.popup&&!this.popup.closed?(this.popup.focus(),this.popup):(this.popup=function(e){const t=(window.innerWidth-420)/2+window.screenX,r=(window.innerHeight-540)/2+window.screenY;!function(e){const t={sdkName:Vt,sdkVersion:Ht,origin:window.location.origin,coop:jn()};for(const[r,n]of Object.entries(t))e.searchParams.append(r,n.toString())}(e);const n=window.open(e,"Smart Wallet",`width=420, height=540, left=${t}, top=${r}`);if(null==n||n.focus(),!n)throw ot("Pop up window failed to open");return n}(this.url),this.onMessage((({event:e})=>"PopupUnload"===e)).then(this.disconnect).catch((()=>{})),this.onMessage((({event:e})=>"PopupLoaded"===e)).then((e=>{this.postMessage({requestId:e.id,data:{version:Ht,metadata:this.metadata,preference:this.preference,location:window.location.toString()}})})).then((()=>{if(!this.popup)throw ot();return this.popup}))),this.url=new URL(e),this.metadata=t,this.preference=r}}function $n(e){const t=function(e,{shouldIncludeStack:t=!1}={}){const r={};if(e&&"object"==typeof e&&!Array.isArray(e)&&nt(e,"code")&&function(e){if(!Number.isInteger(e))return!1;const t=e.toString();return!!Xe[t]||!!tt(e)}(e.code)){const t=e;r.code=t.code,t.message&&"string"==typeof t.message?(r.message=t.message,nt(t,"data")&&(r.data=t.data)):(r.message=et(r.code),r.data={originalError:rt(e)})}else r.code=Ke,r.message=it(e,"message")?e.message:Qe,r.data={originalError:rt(e)};return t&&(r.stack=it(e,"stack")?e.stack:void 0),r}(function(e){var t;if("string"==typeof e)return{message:e,code:Ke};if(tr(e)){const r=e.errorMessage,n=null!==(t=e.errorCode)&&void 0!==t?t:r.match(/(denied|rejected)/i)?Ge:void 0;return Object.assign(Object.assign({},e),{message:r,code:n,data:{method:e.method}})}return e}(e),{shouldIncludeStack:!0}),r=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");return r.searchParams.set("version",Ht),r.searchParams.set("code",t.code.toString()),r.searchParams.set("message",t.message),Object.assign(Object.assign({},t),{docUrl:r.href})}var qn=r(1075);class Wn extends qn{}class Hn extends Wn{constructor(e){var{metadata:t}=e,r=e.preference,{keysUrl:n}=r,i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(r,["keysUrl"]);super(),this.signer=null,this.isCoinbaseWallet=!0,this.metadata=t,this.preference=i,this.communicator=new Fn({url:n,metadata:t,preference:i});const s=Un.getItem(Dn);s&&(this.signer=this.initSigner(s))}async request(e){try{if(function(e){if(!e||"object"!=typeof e||Array.isArray(e))throw st({message:"Expected a single, non-array, object argument.",data:e});const{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw st({message:"'args.method' must be a non-empty string.",data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw st({message:"'args.params' must be an object or array if provided.",data:e});switch(t){case"eth_sign":case"eth_signTypedData_v2":case"eth_subscribe":case"eth_unsubscribe":throw lt()}}(e),!this.signer)switch(e.method){case"eth_requestAccounts":{const t=await this.requestSignerSelection(e),r=this.initSigner(t);await r.handshake(e),this.signer=r,function(e){Un.setItem(Dn,e)}(t);break}case"net_version":return 1;case"eth_chainId":return It(1);default:throw ct("Must call 'eth_requestAccounts' before other methods")}return this.signer.request(e)}catch(e){const{code:t}=e;return t===Ze&&this.disconnect(),Promise.reject($n(e))}}async enable(){return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),await this.request({method:"eth_requestAccounts"})}async disconnect(){var e;await(null===(e=this.signer)||void 0===e?void 0:e.cleanup()),this.signer=null,He.clearAll(),this.emit("disconnect",ut("User initiated disconnection"))}requestSignerSelection(e){return async function(e){const{communicator:t,metadata:r,handshakeRequest:n,callback:i}=e;(async function(e,t,r){await e.onMessage((({event:e})=>"WalletLinkSessionRequest"===e));const n=new Bn({metadata:t,callback:r});e.postMessage({event:"WalletLinkUpdate",data:{session:n.getSession()}}),await n.handshake(),e.postMessage({event:"WalletLinkUpdate",data:{connected:!0}})})(t,r,i).catch((()=>{}));const s={id:crypto.randomUUID(),event:"selectSignerType",data:Object.assign(Object.assign({},e.preference),{handshakeRequest:n})},{data:o}=await t.postRequestAndWaitForResponse(s);return o}({communicator:this.communicator,preference:this.preference,metadata:this.metadata,handshakeRequest:e,callback:this.emit.bind(this)})}initSigner(e){return function(e){const{signerType:t,metadata:r,communicator:n,callback:i}=e;switch(t){case"scw":return new Xt({metadata:r,callback:i,communicator:n});case"walletlink":return new Bn({metadata:r,callback:i})}}({signerType:e,metadata:this.metadata,communicator:this.communicator,callback:this.emit.bind(this)})}}const Vn=class{constructor(e){this.metadata={appName:e.appName||"Dapp",appLogoUrl:e.appLogoUrl||Dt(),appChainIds:e.appChainIds||[]},this.storeLatestVersion(),zn()}makeWeb3Provider(e={options:"all"}){var t;!function(e){if(e){if(!["all","smartWalletOnly","eoaOnly"].includes(e.options))throw new Error(`Invalid options: ${e.options}`);if(e.attribution&&void 0!==e.attribution.auto&&void 0!==e.attribution.dataSuffix)throw new Error("Attribution cannot contain both auto and dataSuffix properties")}}(e);const r={metadata:this.metadata,preference:e};return null!==(t=function({metadata:e,preference:t}){var r,n;const{appName:i,appLogoUrl:s,appChainIds:o}=e;if("smartWalletOnly"!==t.options){const e=globalThis.coinbaseWalletExtension;if(e)return null===(r=e.setAppInfo)||void 0===r||r.call(e,i,s,o,t),e}const a=function(){var e,t;try{const r=globalThis;return null!==(e=r.ethereum)&&void 0!==e?e:null===(t=r.top)||void 0===t?void 0:t.ethereum}catch(e){return}}();if(null==a?void 0:a.isCoinbaseBrowser)return null===(n=a.setAppInfo)||void 0===n||n.call(a,i,s,o,t),a}(r))&&void 0!==t?t:new Hn(r)}getCoinbaseWalletLogo(e,t=240){return((e,t)=>{let r;switch(e){case"standard":default:return r=t,`data:image/svg+xml,%3Csvg width='${t}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return r=t,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${t}' height='${r}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return r=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return r=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return r=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return r=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`}})(e,t)}storeLatestVersion(){new He("CBWSDK").setItem("VERSION",Ht)}};var Kn=r(1975),Gn=r.n(Kn);class Zn extends Be{constructor(){super(Oe.Coinbase)}async connect(e){Ue()&&console.log("CoinbaseWalletService::connect connect to wallet from widget");let t=null;try{const e=await this.detectEthereumProvider(500,2);t=this.findProvider(e)}catch(e){}if(!t?.isCoinbaseWallet)try{const e=new Vn({appName:"deBridge Finance"});t=e?.walletExtension;const r=e.makeWeb3Provider();await r.request({method:"eth_requestAccounts"}),t||(t=r)}catch(e){throw new De(Me.CONNECT_ERROR,{walletId:this.walletId})}try{if(!t)throw new De(Me.CONNECT_ERROR,{walletId:this.walletId});this.setProvider(t),await t.enable()}catch(e){throw new De(Me.CONNECT_ERROR,{walletId:this.walletId})}}async disconnect(){if(this.provider?.disconnect)try{await this.provider.disconnect()}catch(e){Ue()&&console.error("CoinbaseWalletService::disconnect",e)}this.setProvider(null)}async detectEthereumProvider(e,t){if(t<=0)return null;do{const t=await Gn()({timeout:e});if(t)return t}while(--t);return null}findProvider(e){const t=e?.providers||[e];return t.length>1?t.find((e=>e.isCoinbaseWallet)):e}}const Yn=4001,Jn=(BigInt("18446744073709551615"),w.Arbitrum,w.Avalanche,w.Base,w.BSC,w.Ethereum,w.Linea,w.Optimism,w.Polygon,w.Solana,w.Neon,w.Metis,w.Gnosis,w.LightLink,w.Fantom,w.Sonic,w.Bitrock,w.Heco,w.Hyperliquid,w.CrossFi,w.CronosZkEVM,w.Abstract,w.Berachain,w.Story,[]);var Xn;function Qn(e){return Jn.find((t=>t.info.name==e))?.provider||null}window.addEventListener("eip6963:announceProvider",(e=>{Jn.find((t=>t.info.uuid==e.detail.info.uuid))||Jn.push(e.detail)})),window.dispatchEvent(new Event("eip6963:requestProvider")),function(e){e.Metamask="MetaMask",e.Phantom="Phantom",e.Rabby="Rabby Wallet",e.Trust="Trust Wallet",e.Backpack="Backpack",e.CoreEVM="Core"}(Xn||(Xn={}));class ei extends Be{constructor(){super(Oe.Metamask)}async disconnect(){if(this.provider?.disconnect)try{await this.provider.disconnect()}catch(e){Ue()&&console.error("MetamaskWalletService::disconnect",e)}this.setProvider(null)}async connect(e){Ue()&&console.log("MetamaskWalletService::connect connect to wallet from widget");let t=await this.detectEthereumProvider(500,2);if(t||(t=window?.web3?.currentProvider),!t)throw new De(Me.CONNECT_ERROR,{walletId:this.walletId});const r=this.findProvider(t);if(!r)throw new De(Me.CONNECT_ERROR,{walletId:this.walletId});return this.setProvider(r),new Promise((async(t,r)=>{try{const n=setTimeout((()=>{t()}),5e3),i=await this.getAccount();if(clearTimeout(n),!i)try{!e&&await this.requestAccounts()}catch(e){e.code===Yn?r(new De(Me.USER_REJECTED)):-32002===e.code&&r(new De(Me.WALLET_ALREAY_PROCESSING))}Ue()&&console.log("MetamaskWalletService::connect resolve"),t()}catch(e){-32002===e.code?r(new De(Me.WALLET_ALREAY_PROCESSING)):r(e)}}))}async detectEthereumProvider(e,t){const r=Qn(Xn.Metamask);if(r)return Ue()&&console.log("MetamaskWalletService::detectEthereumProvider provider from eip6963"),r;if(t<=0)return null;do{const t=await Gn()({timeout:e});if(t)return t}while(--t);return null}findProvider(e){return(e?.providers||[e]).find((e=>e?.isMetaMask))||e}}var ti=r(7007),ri=r.n(ti),ni=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},ii=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},si=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},oi=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},ai=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},ci=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},li=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ui=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],hi=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function di(e){var t=function(e){return""!==e&&ui.reduce((function(t,r){var n=r[0],i=r[1];if(t)return t;var s=i.exec(e);return!!s&&[n,s]}),!1)}(e);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new ai;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=ni(ni([],i,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-i.length),!0)):i=[];var s=i.join("."),o=function(e){for(var t=0,r=hi.length;t<r;t++){var n=hi[t],i=n[0];if(n[1].exec(e))return i}return null}(e),a=li.exec(e);return a&&a[1]?new oi(r,s,o,a[1]):new ii(r,s,o)}var fi=r(8900),pi=r(2939),gi=r(9454);let mi=!1,yi=!1;const bi={debug:1,default:2,info:2,warning:3,error:4,off:5};let wi=bi.default,vi=null;const _i=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Ei,xi;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Ei||(Ei={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(xi||(xi={}));const Si="0123456789abcdef";class Ai{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==bi[r]&&this.throwArgumentError("invalid log level name","logLevel",e),wi>bi[r]||console.log.apply(console,t)}debug(...e){this._log(Ai.levels.DEBUG,e)}info(...e){this._log(Ai.levels.INFO,e)}warn(...e){this._log(Ai.levels.WARNING,e)}makeError(e,t,r){if(yi)return this.makeError("censored error",t,{});t||(t=Ai.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach((e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=Si[t[e]>>4],r+=Si[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}})),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let s="";switch(t){case xi.NUMERIC_FAULT:{s="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":s+="-"+t;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result"}break}case xi.CALL_EXCEPTION:case xi.INSUFFICIENT_FUNDS:case xi.MISSING_NEW:case xi.NONCE_EXPIRED:case xi.REPLACEMENT_UNDERPRICED:case xi.TRANSACTION_REPLACED:case xi.UNPREDICTABLE_GAS_LIMIT:s=t}s&&(e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const o=new Error(e);return o.reason=i,o.code=t,Object.keys(r).forEach((function(e){o[e]=r[e]})),o}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Ai.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),_i&&this.throwError("platform missing String.prototype.normalize",Ai.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_i})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Ai.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Ai.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Ai.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Ai.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Ai.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Ai.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Ai.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return vi||(vi=new Ai("logger/5.7.0")),vi}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Ai.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),mi){if(!e)return;this.globalLogger().throwError("error censorship permanent",Ai.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}yi=!!e,mi=!!t}static setLogLevel(e){const t=bi[e.toLowerCase()];null!=t?wi=t:Ai.globalLogger().warn("invalid log level - "+e)}static from(e){return new Ai(e)}}Ai.errors=xi,Ai.levels=Ei;const Ii=new Ai("bytes/5.7.0");function ki(e){return!!e.toHexString}function Ti(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Ti(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Pi(e){return"number"==typeof e&&e==e&&e%1==0}function Ci(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!Pi(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!Pi(r)||r<0||r>=256)return!1}return!0}function Oi(e,t){if(t||(t={}),"number"==typeof e){Ii.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),Ti(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),ki(e)&&(e=e.toHexString()),Mi(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":Ii.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return Ti(new Uint8Array(n))}return Ci(e)?Ti(new Uint8Array(e)):Ii.throwArgumentError("invalid arrayify value","value",e)}function Mi(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const Ri="0123456789abcdef";function Li(e,t){if(t||(t={}),"number"==typeof e){Ii.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=Ri[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),ki(e))return e.toHexString();if(Mi(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Ii.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Ci(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=Ri[(240&n)>>4]+Ri[15&n]}return t}return Ii.throwArgumentError("invalid hexlify value","value",e)}function Ni(e,t,r){return"string"!=typeof e?e=Li(e):(!Mi(e)||e.length%2)&&Ii.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function Bi(e,t){for("string"!=typeof e?e=Li(e):Mi(e)||Ii.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&Ii.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function Di(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Mi(r=e)&&!(r.length%2)||Ci(r)){let r=Oi(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=Li(r.slice(0,32)),t.s=Li(r.slice(32,64))):65===r.length?(t.r=Li(r.slice(0,32)),t.s=Li(r.slice(32,64)),t.v=r[64]):Ii.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:Ii.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=Li(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const r=function(e,t){(e=Oi(e)).length>t&&Ii.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),Ti(r)}(Oi(t._vs),32);t._vs=Li(r);const n=r[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&Ii.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const i=Li(r);null==t.s?t.s=i:t.s!==i&&Ii.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?Ii.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&Ii.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&Mi(t.r)?t.r=Bi(t.r,32):Ii.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&Mi(t.s)?t.s=Bi(t.s,32):Ii.throwArgumentError("signature missing or invalid s","signature",e);const r=Oi(t.s);r[0]>=128&&Ii.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const n=Li(r);t._vs&&(Mi(t._vs)||Ii.throwArgumentError("signature invalid _vs","signature",e),t._vs=Bi(t._vs,32)),null==t._vs?t._vs=n:t._vs!==n&&Ii.throwArgumentError("signature _vs mismatch v and s","signature",e)}var r;return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}var Ui=r(1176),zi=r.n(Ui);function ji(e){return"0x"+zi().keccak_256(Oi(e))}const Fi=new Ai("strings/5.7.0");var $i,qi;function Wi(e,t,r,n,i){if(e===qi.BAD_PREFIX||e===qi.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===qi.OVERRUN?r.length-t-1:0}function Hi(e,t=$i.current){t!=$i.current&&(Fi.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){t++;const i=e.charCodeAt(t);if(t>=e.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const s=65536+((1023&n)<<10)+(1023&i);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return Oi(r)}function Vi(e){return"string"==typeof e&&(e=Hi(e)),ji(function(e){const t=e.map((e=>Oi(e))),r=t.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(r);return t.reduce(((e,t)=>(n.set(t,e),e+t.length)),0),Ti(n)}([Hi("Ethereum Signed Message:\n"),Hi(String(e.length)),e]))}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}($i||($i={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(qi||(qi={})),Object.freeze({error:function(e,t,r,n,i){return Fi.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:Wi,replace:function(e,t,r,n,i){return e===qi.OVERLONG?(n.push(i),0):(n.push(65533),Wi(e,t,r))}});var Ki=r(9404),Gi=r.n(Ki),Zi=Gi().BN;new Ai("bignumber/5.7.0");const Yi=new Ai("address/5.7.0");function Ji(e){Mi(e,20)||Yi.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);const n=Oi(ji(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const Xi={};for(let e=0;e<10;e++)Xi[String(e)]=String(e);for(let e=0;e<26;e++)Xi[String.fromCharCode(65+e)]=String(10+e);const Qi=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function es(e){let t=null;if("string"!=typeof e&&Yi.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=Ji(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&Yi.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>Xi[e])).join("");for(;t.length>=Qi;){let e=t.substring(0,Qi);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e)&&Yi.throwArgumentError("bad icap checksum","address",e),r=e.substring(4),t=new Zi(r,36).toString(16);t.length<40;)t="0"+t;t=Ji("0x"+t)}else Yi.throwArgumentError("invalid address","address",e);var r;return t}var ts=r(7952),rs=r.n(ts);function ns(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},e(r,r.exports),r.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self&&self;var is=ss;function ss(e,t){if(!e)throw new Error(t||"Assertion failed")}ss.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var os=ns((function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),s=i>>8,o=255&i;s?r.push(s,o):r.push(o)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}})),as=ns((function(e,t){var r=t;r.assert=is,r.toArray=os.toArray,r.zero2=os.zero2,r.toHex=os.toHex,r.encode=os.encode,r.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,s=e.clone(),o=0;o<n.length;o++){var a,c=s.andln(i-1);s.isOdd()?(a=c>(i>>1)-1?(i>>1)-c:c,s.isubn(a)):a=0,n[o]=a,s.iushrn(1)}return n},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,s=0;e.cmpn(-i)>0||t.cmpn(-s)>0;){var o,a,c=e.andln(3)+i&3,l=t.andln(3)+s&3;3===c&&(c=-1),3===l&&(l=-1),o=1&c?3!=(n=e.andln(7)+i&7)&&5!==n||2!==l?c:-c:0,r[0].push(o),a=1&l?3!=(n=t.andln(7)+s&7)&&5!==n||2!==c?l:-l:0,r[1].push(a),2*i===o+1&&(i=1-i),2*s===a+1&&(s=1-s),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new(Gi())(e,"hex","le")}})),cs=as.getNAF,ls=as.getJSF,us=as.assert;function hs(e,t){this.type=e,this.p=new(Gi())(t.p,16),this.red=t.prime?Gi().red(t.prime):Gi().mont(this.p),this.zero=new(Gi())(0).toRed(this.red),this.one=new(Gi())(1).toRed(this.red),this.two=new(Gi())(2).toRed(this.red),this.n=t.n&&new(Gi())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ds=hs;function fs(e,t){this.curve=e,this.type=t,this.precomputed=null}hs.prototype.point=function(){throw new Error("Not implemented")},hs.prototype.validate=function(){throw new Error("Not implemented")},hs.prototype._fixedNafMul=function(e,t){us(e.precomputed);var r=e._getDoubles(),n=cs(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var s,o,a=[];for(s=0;s<n.length;s+=r.step){o=0;for(var c=s+r.step-1;c>=s;c--)o=(o<<1)+n[c];a.push(o)}for(var l=this.jpoint(null,null,null),u=this.jpoint(null,null,null),h=i;h>0;h--){for(s=0;s<a.length;s++)(o=a[s])===h?u=u.mixedAdd(r.points[s]):o===-h&&(u=u.mixedAdd(r.points[s].neg()));l=l.add(u)}return l.toP()},hs.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=cs(t,r,this._bitLength),o=this.jpoint(null,null,null),a=s.length-1;a>=0;a--){for(var c=0;a>=0&&0===s[a];a--)c++;if(a>=0&&c++,o=o.dblp(c),a<0)break;var l=s[a];us(0!==l),o="affine"===e.type?l>0?o.mixedAdd(i[l-1>>1]):o.mixedAdd(i[-l-1>>1].neg()):l>0?o.add(i[l-1>>1]):o.add(i[-l-1>>1].neg())}return"affine"===e.type?o.toP():o},hs.prototype._wnafMulAdd=function(e,t,r,n,i){var s,o,a,c=this._wnafT1,l=this._wnafT2,u=this._wnafT3,h=0;for(s=0;s<n;s++){var d=(a=t[s])._getNAFPoints(e);c[s]=d.wnd,l[s]=d.points}for(s=n-1;s>=1;s-=2){var f=s-1,p=s;if(1===c[f]&&1===c[p]){var g=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(g[1]=t[f].add(t[p]),g[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(g[1]=t[f].toJ().mixedAdd(t[p]),g[2]=t[f].add(t[p].neg())):(g[1]=t[f].toJ().mixedAdd(t[p]),g[2]=t[f].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],y=ls(r[f],r[p]);for(h=Math.max(y[0].length,h),u[f]=new Array(h),u[p]=new Array(h),o=0;o<h;o++){var b=0|y[0][o],w=0|y[1][o];u[f][o]=m[3*(b+1)+(w+1)],u[p][o]=0,l[f]=g}}else u[f]=cs(r[f],c[f],this._bitLength),u[p]=cs(r[p],c[p],this._bitLength),h=Math.max(u[f].length,h),h=Math.max(u[p].length,h)}var v=this.jpoint(null,null,null),_=this._wnafT4;for(s=h;s>=0;s--){for(var E=0;s>=0;){var x=!0;for(o=0;o<n;o++)_[o]=0|u[o][s],0!==_[o]&&(x=!1);if(!x)break;E++,s--}if(s>=0&&E++,v=v.dblp(E),s<0)break;for(o=0;o<n;o++){var S=_[o];0!==S&&(S>0?a=l[o][S-1>>1]:S<0&&(a=l[o][-S-1>>1].neg()),v="affine"===a.type?v.mixedAdd(a):v.add(a))}}for(s=0;s<n;s++)l[s]=null;return i?v:v.toP()},hs.BasePoint=fs,fs.prototype.eq=function(){throw new Error("Not implemented")},fs.prototype.validate=function(){return this.curve.validate(this)},hs.prototype.decodePoint=function(e,t){e=as.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?us(e[e.length-1]%2==0):7===e[0]&&us(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},fs.prototype.encodeCompressed=function(e){return this.encode(e,!0)},fs.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},fs.prototype.encode=function(e,t){return as.encode(this._encode(t),e)},fs.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},fs.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},fs.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var s=0;s<e;s++)n=n.dbl();r.push(n)}return{step:e,points:r}},fs.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},fs.prototype._getBeta=function(){return null},fs.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var ps=ns((function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),gs=as.assert;function ms(e){ds.call(this,"short",e),this.a=new(Gi())(e.a,16).toRed(this.red),this.b=new(Gi())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}ps(ms,ds);var ys=ms;function bs(e,t,r,n){ds.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(Gi())(t,16),this.y=new(Gi())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function ws(e,t,r,n){ds.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(Gi())(0)):(this.x=new(Gi())(t,16),this.y=new(Gi())(r,16),this.z=new(Gi())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ms.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new(Gi())(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new(Gi())(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],gs(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new(Gi())(e.a,16),b:new(Gi())(e.b,16)}})):this._getEndoBasis(r)}}},ms.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:Gi().mont(e),r=new(Gi())(2).toRed(t).redInvm(),n=r.redNeg(),i=new(Gi())(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},ms.prototype._getEndoBasis=function(e){for(var t,r,n,i,s,o,a,c,l,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,d=this.n.clone(),f=new(Gi())(1),p=new(Gi())(0),g=new(Gi())(0),m=new(Gi())(1),y=0;0!==h.cmpn(0);){var b=d.div(h);c=d.sub(b.mul(h)),l=g.sub(b.mul(f));var w=m.sub(b.mul(p));if(!n&&c.cmp(u)<0)t=a.neg(),r=f,n=c.neg(),i=l;else if(n&&2==++y)break;a=c,d=h,h=c,g=f,f=l,m=p,p=w}s=c.neg(),o=l;var v=n.sqr().add(i.sqr());return s.sqr().add(o.sqr()).cmp(v)>=0&&(s=t,o=r),n.negative&&(n=n.neg(),i=i.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:n,b:i},{a:s,b:o}]},ms.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),o=i.mul(r.a),a=s.mul(n.a),c=i.mul(r.b),l=s.mul(n.b);return{k1:e.sub(o).sub(a),k2:c.add(l).neg()}},ms.prototype.pointFromX=function(e,t){(e=new(Gi())(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},ms.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},ms.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(t[s]),a=e[s],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),n[2*s]=a,n[2*s+1]=c,i[2*s]=o.k1,i[2*s+1]=o.k2}for(var l=this._wnafMulAdd(1,n,i,2*s,r),u=0;u<2*s;u++)n[u]=null,i[u]=null;return l},ps(bs,ds.BasePoint),ms.prototype.point=function(e,t,r){return new bs(this,e,t,r)},ms.prototype.pointFromJSON=function(e,t){return bs.fromJSON(this,e,t)},bs.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},bs.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},bs.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var s=t[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(i))}},n},bs.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},bs.prototype.isInfinity=function(){return this.inf},bs.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},bs.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),s=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},bs.prototype.getX=function(){return this.x.fromRed()},bs.prototype.getY=function(){return this.y.fromRed()},bs.prototype.mul=function(e){return e=new(Gi())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},bs.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},bs.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},bs.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},bs.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},bs.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},ps(ws,ds.BasePoint),ms.prototype.jpoint=function(e,t,r){return new ws(this,e,t,r)},ws.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},ws.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},ws.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),s=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=s.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),h=n.redMul(l),d=c.redSqr().redIAdd(u).redISub(h).redISub(h),f=c.redMul(h.redISub(d)).redISub(s.redMul(u)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,f,p)},ws.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,s=e.y.redMul(t).redMul(this.z),o=r.redSub(n),a=i.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),l=c.redMul(o),u=r.redMul(c),h=a.redSqr().redIAdd(l).redISub(u).redISub(u),d=a.redMul(u.redISub(h)).redISub(i.redMul(l)),f=this.z.redMul(o);return this.curve.jpoint(h,d,f)},ws.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,s=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),l=o.redAdd(o);for(t=0;t<e;t++){var u=s.redSqr(),h=l.redSqr(),d=h.redSqr(),f=u.redAdd(u).redIAdd(u).redIAdd(n.redMul(c)),p=s.redMul(h),g=f.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),y=f.redMul(m);y=y.redIAdd(y).redISub(d);var b=l.redMul(a);t+1<e&&(c=c.redMul(d)),s=g,a=b,l=y}return this.curve.jpoint(s,l.redMul(i),a)},ws.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},ws.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(o).redISub(o),l=s.redIAdd(s);l=(l=l.redIAdd(l)).redIAdd(l),e=c,t=a.redMul(o.redISub(c)).redISub(l),r=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),f=this.x.redAdd(h).redSqr().redISub(u).redISub(d);f=f.redIAdd(f);var p=u.redAdd(u).redIAdd(u),g=p.redSqr(),m=d.redIAdd(d);m=(m=m.redIAdd(m)).redIAdd(m),e=g.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},ws.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);e=c;var l=s.redIAdd(s);l=(l=l.redIAdd(l)).redIAdd(l),t=a.redMul(o.redISub(c)).redISub(l),r=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),h=this.y.redSqr(),d=this.x.redMul(h),f=this.x.redSub(u).redMul(this.x.redAdd(u));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),g=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(u);var m=h.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=f.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},ws.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),s=t.redSqr(),o=r.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(i)),c=t.redAdd(t),l=(c=c.redIAdd(c)).redMul(o),u=a.redSqr().redISub(l.redAdd(l)),h=l.redISub(u),d=o.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=a.redMul(h).redISub(d),p=r.redAdd(r).redMul(n);return this.curve.jpoint(u,f,p)},ws.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),s=i.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var l=i.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(c),u=t.redMul(l);u=(u=u.redIAdd(u)).redIAdd(u);var h=this.x.redMul(a).redISub(u);h=(h=h.redIAdd(h)).redIAdd(h);var d=this.y.redMul(l.redMul(c.redISub(l)).redISub(o.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,d,f)},ws.prototype.mul=function(e,t){return e=new(Gi())(e,t),this.curve._wnafMul(this,e)},ws.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},ws.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},ws.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},ws.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var vs=ns((function(e,t){var r=t;r.base=ds,r.short=ys,r.mont=null,r.edwards=null})),_s=ns((function(e,t){var r,n=t,i=as.assert;function s(e){"short"===e.type?this.curve=new vs.short(e):"edwards"===e.type?this.curve=new vs.edwards(e):this.curve=new vs.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new s(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=s,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:rs().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:rs().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:rs().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:rs().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:rs().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:rs().sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:rs().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(e){r=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:rs().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function Es(e){if(!(this instanceof Es))return new Es(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=os.toArray(e.entropy,e.entropyEnc||"hex"),r=os.toArray(e.nonce,e.nonceEnc||"hex"),n=os.toArray(e.pers,e.persEnc||"hex");is(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var xs=Es;Es.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Es.prototype._hmac=function(){return new(rs().hmac)(this.hash,this.K)},Es.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Es.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=os.toArray(e,t),r=os.toArray(r,n),is(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},Es.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=os.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,e);return this._update(r),this._reseed++,os.encode(s,t)};var Ss=as.assert;function As(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Is=As;As.fromPublic=function(e,t,r){return t instanceof As?t:new As(e,{pub:t,pubEnc:r})},As.fromPrivate=function(e,t,r){return t instanceof As?t:new As(e,{priv:t,privEnc:r})},As.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},As.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},As.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},As.prototype._importPrivate=function(e,t){this.priv=new(Gi())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},As.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?Ss(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Ss(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},As.prototype.derive=function(e){return e.validate()||Ss(e.validate(),"public point not validated"),e.mul(this.priv).getX()},As.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},As.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},As.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var ks=as.assert;function Ts(e,t){if(e instanceof Ts)return e;this._importDER(e,t)||(ks(e.r&&e.s,"Signature without r or s"),this.r=new(Gi())(e.r,16),this.s=new(Gi())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var Ps=Ts;function Cs(){this.place=0}function Os(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,s=0,o=t.place;s<n;s++,o++)i<<=8,i|=e[o],i>>>=0;return!(i<=127)&&(t.place=o,i)}function Ms(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function Rs(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}Ts.prototype._importDER=function(e,t){e=as.toArray(e,t);var r=new Cs;if(48!==e[r.place++])return!1;var n=Os(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=Os(e,r);if(!1===i)return!1;var s=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var o=Os(e,r);if(!1===o)return!1;if(e.length!==o+r.place)return!1;var a=e.slice(r.place,o+r.place);if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new(Gi())(s),this.s=new(Gi())(a),this.recoveryParam=null,!0},Ts.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=Ms(t),r=Ms(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];Rs(n,t.length),(n=n.concat(t)).push(2),Rs(n,r.length);var i=n.concat(r),s=[48];return Rs(s,i.length),s=s.concat(i),as.encode(s,e)};var Ls=function(){throw new Error("unsupported")},Ns=as.assert;function Bs(e){if(!(this instanceof Bs))return new Bs(e);"string"==typeof e&&(Ns(Object.prototype.hasOwnProperty.call(_s,e),"Unknown curve "+e),e=_s[e]),e instanceof _s.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Ds=Bs;Bs.prototype.keyPair=function(e){return new Is(this,e)},Bs.prototype.keyFromPrivate=function(e,t){return Is.fromPrivate(this,e,t)},Bs.prototype.keyFromPublic=function(e,t){return Is.fromPublic(this,e,t)},Bs.prototype.genKeyPair=function(e){e||(e={});for(var t=new xs({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Ls(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(Gi())(2));;){var i=new(Gi())(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Bs.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Bs.prototype.sign=function(e,t,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new(Gi())(e,16));for(var i=this.n.byteLength(),s=t.getPrivate().toArray("be",i),o=e.toArray("be",i),a=new xs({hash:this.hash,entropy:s,nonce:o,pers:n.pers,persEnc:n.persEnc||"utf8"}),c=this.n.sub(new(Gi())(1)),l=0;;l++){var u=n.k?n.k(l):new(Gi())(a.generate(this.n.byteLength()));if(!((u=this._truncateToN(u,!0)).cmpn(1)<=0||u.cmp(c)>=0)){var h=this.g.mul(u);if(!h.isInfinity()){var d=h.getX(),f=d.umod(this.n);if(0!==f.cmpn(0)){var p=u.invm(this.n).mul(f.mul(t.getPrivate()).iadd(e));if(0!==(p=p.umod(this.n)).cmpn(0)){var g=(h.getY().isOdd()?1:0)|(0!==d.cmp(f)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),g^=1),new Ps({r:f,s:p,recoveryParam:g})}}}}}},Bs.prototype.verify=function(e,t,r,n){e=this._truncateToN(new(Gi())(e,16)),r=this.keyFromPublic(r,n);var i=(t=new Ps(t,"hex")).r,s=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,a=s.invm(this.n),c=a.mul(e).umod(this.n),l=a.mul(i).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(c,r.getPublic(),l)).isInfinity()&&o.eqXToP(i):!(o=this.g.mulAdd(c,r.getPublic(),l)).isInfinity()&&0===o.getX().umod(this.n).cmp(i)},Bs.prototype.recoverPubKey=function(e,t,r,n){Ns((3&r)===r,"The recovery param is more than two bits"),t=new Ps(t,n);var i=this.n,s=new(Gi())(e),o=t.r,a=t.s,c=1&r,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");o=l?this.curve.pointFromX(o.add(this.curve.n),c):this.curve.pointFromX(o,c);var u=t.r.invm(i),h=i.sub(s).mul(u).umod(i),d=a.mul(u).umod(i);return this.g.mulAdd(h,o,d)},Bs.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new Ps(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch(e){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Us=ns((function(e,t){var r=t;r.version="6.5.4",r.utils=as,r.rand=function(){throw new Error("unsupported")},r.curve=vs,r.curves=_s,r.ec=Ds,r.eddsa=null})),zs=Us.ec;function js(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}new Ai("properties/5.7.0");const Fs=new Ai("signing-key/5.7.0");let $s=null;function qs(){return $s||($s=new zs("secp256k1")),$s}class Ws{constructor(e){js(this,"curve","secp256k1"),js(this,"privateKey",Li(e)),32!==function(e){if("string"!=typeof e)e=Li(e);else if(!Mi(e)||e.length%2)return null;return(e.length-2)/2}(this.privateKey)&&Fs.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=qs().keyFromPrivate(Oi(this.privateKey));js(this,"publicKey","0x"+t.getPublic(!1,"hex")),js(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),js(this,"_isSigningKey",!0)}_addPoint(e){const t=qs().keyFromPublic(Oi(this.publicKey)),r=qs().keyFromPublic(Oi(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=qs().keyFromPrivate(Oi(this.privateKey)),r=Oi(e);32!==r.length&&Fs.throwArgumentError("bad digest length","digest",e);const n=t.sign(r,{canonical:!0});return Di({recoveryParam:n.recoveryParam,r:Bi("0x"+n.r.toString(16),32),s:Bi("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=qs().keyFromPrivate(Oi(this.privateKey)),r=qs().keyFromPublic(Oi(Hs(e)));return Bi("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function Hs(e,t){const r=Oi(e);if(32===r.length){const e=new Ws(r);return t?"0x"+qs().keyFromPrivate(r).getPublic(!0,"hex"):e.publicKey}return 33===r.length?t?Li(r):"0x"+qs().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+qs().keyFromPublic(r).getPublic(!0,"hex"):Li(r):Fs.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Vs;new Ai("transactions/5.7.0"),function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(Vs||(Vs={}));var Ks=r(1612),Gs=r(6804),Zs=r(7052),Ys=r(204),Js=r(774);function Xs(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function Qs(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=Xs(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}const eo=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*l+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<i)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*u+1>>>0,l=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*l[f]>>>0,l[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var p=o-n;p!==o&&0===l[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}},to=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class ro{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class no{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return so(this,e)}}class io{constructor(e){this.decoders=e}or(e){return so(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const so=(e,t)=>new io({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class oo{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new ro(e,t,r),this.decoder=new no(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ao=({name:e,prefix:t,encode:r,decode:n})=>new oo(e,t,r,n),co=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=eo(r,t);return ao({prefix:e,name:t,encode:n,decode:e=>to(i(e))})},lo=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>ao({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),uo=ao({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),ho=lo({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),fo=lo({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),po=co({prefix:"9",name:"base10",alphabet:"0123456789"}),go=lo({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),mo=lo({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),yo=lo({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),bo=lo({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),wo=lo({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vo=lo({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_o=lo({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Eo=lo({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),xo=lo({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),So=lo({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ao=lo({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Io=co({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ko=co({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),To=co({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Po=co({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Co=lo({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Oo=lo({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Mo=lo({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ro=lo({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Lo=Array.from("   "),No=Lo.reduce(((e,t,r)=>(e[r]=t,e)),[]),Bo=Lo.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),Do=ao({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+No[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Bo[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var Uo=128,zo=-128,jo=Math.pow(2,31),Fo=128,$o=127,qo=Math.pow(2,7),Wo=Math.pow(2,14),Ho=Math.pow(2,21),Vo=Math.pow(2,28),Ko=Math.pow(2,35),Go=Math.pow(2,42),Zo=Math.pow(2,49),Yo=Math.pow(2,56),Jo=Math.pow(2,63),Xo={encode:function e(t,r,n){r=r||[];for(var i=n=n||0;t>=jo;)r[n++]=255&t|Uo,t/=128;for(;t&zo;)r[n++]=255&t|Uo,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},decode:function e(t,r){var n,i=0,s=(r=r||0,0),o=r,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(n&$o)<<s:(n&$o)*Math.pow(2,s),s+=7}while(n>=Fo);return e.bytes=o-r,i},encodingLength:function(e){return e<qo?1:e<Wo?2:e<Ho?3:e<Vo?4:e<Ko?5:e<Go?6:e<Zo?7:e<Yo?8:e<Jo?9:10}};const Qo=Xo,ea=(e,t,r=0)=>(Qo.encode(e,t,r),t),ta=e=>Qo.encodingLength(e),ra=(e,t)=>{const r=t.byteLength,n=ta(e),i=n+ta(r),s=new Uint8Array(i+r);return ea(e,s,0),ea(r,s,n),s.set(t,i),new na(e,r,t,s)};class na{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const ia=({name:e,code:t,encode:r})=>new sa(e,t,r);class sa{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ra(this.code,t):t.then((e=>ra(this.code,e)))}throw Error("Unknown type, must be binary type")}}const oa=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),aa=ia({name:"sha2-256",code:18,encode:oa("SHA-256")}),ca=ia({name:"sha2-512",code:19,encode:oa("SHA-512")}),la=to,ua={code:0,name:"identity",encode:la,digest:e=>ra(0,la(e))},ha="raw",da=85,fa=e=>to(e),pa=e=>to(e),ga=new TextEncoder,ma=new TextDecoder,ya="json",ba=512,wa=e=>ga.encode(JSON.stringify(e)),va=e=>JSON.parse(ma.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const _a={...e,...t,...n,...i,...s,...o,...a,...c,...l,...u};function Ea(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const xa=Ea("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Sa=Ea("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=Xs((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Aa={utf8:xa,"utf-8":xa,hex:_a.base16,latin1:Sa,ascii:Sa,binary:Sa,..._a};function Ia(e,t="utf8"){const r=Aa[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}function ka(e,t="utf8"){const r=Aa[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}var Ta=r(4112),Pa=r(4904);const Ca=".",Oa="base64url",Ma="utf8",Ra="utf8",La="did",Na="key",Ba="base58btc";function Da(e){if("string"!=typeof e)throw new Error("Cannot safe json parse value of type "+typeof e);try{return(e=>{const t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))})(e)}catch(t){return e}}function Ua(e){return"string"==typeof e?e:(t=e,JSON.stringify(t,((e,t)=>"bigint"==typeof t?t.toString()+"n":t))||"");var t}function za(e){return Da(ka(Ia(e,Oa),Ma))}function ja(e){return ka(Ia(Ua(e),Ma),Oa)}function Fa(e){const t="z"+ka(Qs([Ia("K36",Ba),e]),Ba);return[La,Na,t].join(":")}function $a(e){const t=e.split(Ca);return{header:za(t[0]),payload:za(t[1]),signature:Ia(t[2],Oa),data:Ia(t.slice(0,2).join(Ca),Ra)}}function qa(e=(0,Zs.randomBytes)(32)){return Pa.K(e)}r(5665);const Wa={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};function Ha(e){const[t,r]=e.split(":");return{namespace:t,reference:r}}function Va(e,t=[]){const r=[];return Object.keys(e).forEach((n=>{if(t.length&&!t.includes(n))return;const i=e[n];r.push(...i.accounts)})),r}function Ka(e,t){return e.includes(":")?[e]:t.chains||[]}const Ga="react-native",Za="browser",Ya="js";function Ja(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Xa(){return!(0,pi.getDocument)()&&!!(0,pi.getNavigator)()&&"ReactNative"===navigator.product}function Qa(){return!Ja()&&!!(0,pi.getNavigator)()&&!!(0,pi.getDocument)()}function ec(){return Xa()?Ga:Ja()?"node":Qa()?Za:"unknown"}function tc(){var e;try{return Xa()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Application)<"u"?null==(e=r.g.Application)?void 0:e.applicationId:void 0}catch{return}}function rc(){return(0,gi.g)()||{name:"",description:"",url:"",icons:[""]}}function nc(e,t,n){const i=function(){if(ec()===Ga&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"){const{OS:e,Version:t}=r.g.Platform;return[e,t].join("-")}const e=t?di(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new ci:"undefined"!=typeof navigator?di(navigator.userAgent):"undefined"!=typeof process&&process.version?new si(process.version.slice(1)):null;var t;if(null===e)return"unknown";const n=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[n,e.name,e.version].join("-"):[n,e.version].join("-")}(),s=function(){var e;const t=ec();return t===Za?[t,(null==(e=(0,pi.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[Ya,n].join("-"),i,s].join("/")}function ic(e,t){return e.filter((e=>t.includes(e))).length===e.length}function sc(e){return Object.fromEntries(e.entries())}function oc(e){return new Map(Object.entries(e))}function ac(e=fi.FIVE_MINUTES,t){const r=(0,fi.toMiliseconds)(e||fi.FIVE_MINUTES);let n,i,s,o;return{resolve:e=>{s&&n&&(clearTimeout(s),n(e),o=Promise.resolve(e))},reject:e=>{s&&i&&(clearTimeout(s),i(e))},done:()=>new Promise(((e,a)=>{if(o)return e(o);s=setTimeout((()=>{const e=new Error(t);o=Promise.reject(e),a(e)}),r),n=e,i=a}))}}function cc(e,t,r){return new Promise((async(n,i)=>{const s=setTimeout((()=>i(new Error(r))),t);try{n(await e)}catch(e){i(e)}clearTimeout(s)}))}function lc(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function uc(e){const[t,r]=e.split(":"),n={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)n.topic=r;else{if("id"!==t||!Number.isInteger(Number(r)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);n.id=Number(r)}return n}function hc(e,t){return(0,fi.fromMiliseconds)((t||Date.now())+(0,fi.toMiliseconds)(e))}function dc(e){return Date.now()>=(0,fi.toMiliseconds)(e)}function fc(e,t){return`${e}${t?`:${t}`:""}`}function pc(e=[],t=[]){return[...new Set([...e,...t])]}function gc(e,t){if(!e.includes(t))return null;const r=e.split(/([&,?,=])/),n=r.indexOf(t);return r[n+2]}function mc(){return typeof crypto<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function yc(){return typeof process<"u"&&"true"===process.env.IS_VITEST}function bc(e){return Buffer.from(e,"base64").toString("utf-8")}async function wc(e,t,r,n,i,s){switch(r.t){case"eip191":return function(e,t,r){return function(e,t){return function(e){return es(Ni(ji(Ni(Hs(e),1)),12))}(function(e,t){const r=Di(t),n={r:Oi(r.r),s:Oi(r.s)};return"0x"+qs().recoverPubKey(Oi(e),n,r.recoveryParam).encode("hex",!1)}(Oi(e),t))}(Vi(t),r).toLowerCase()===e.toLowerCase()}(e,t,r.s);case"eip1271":return await async function(e,t,r,n,i,s){const o=Ha(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const o="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",c="0000000000000000000000000000000000000000000000000000000000000041",l=r.substring(2),u=o+Vi(t).substring(2)+a+c+l,h=await fetch(`${s||"https://rpc.walletconnect.org/v1"}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:u},"latest"]})}),{result:d}=await h.json();return!!d&&d.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}(e,t,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}var vc=Object.defineProperty,_c=Object.defineProperties,Ec=Object.getOwnPropertyDescriptors,xc=Object.getOwnPropertySymbols,Sc=Object.prototype.hasOwnProperty,Ac=Object.prototype.propertyIsEnumerable,Ic=(e,t,r)=>t in e?vc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const kc=e=>e?.split(":"),Tc=e=>{const t=e&&kc(e);if(t)return t[2]+":"+t[3]},Pc=e=>{const t=e&&kc(e);if(t)return t.pop()};async function Cc(e){const{cacao:t,projectId:r}=e,{s:n,p:i}=t,s=Oc(i,i.iss),o=Pc(i.iss);return await wc(o,s,n,Tc(i.iss),r)}const Oc=(e,t)=>{const r=`${e.domain} wants you to sign in with your Ethereum account:`,n=Pc(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=e.statement||void 0;const s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${(e=>{const t=e&&kc(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]})(t)}`,c=`Nonce: ${e.nonce}`,l=`Issued At: ${e.iat}`,u=e.exp?`Expiration Time: ${e.exp}`:void 0,h=e.nbf?`Not Before: ${e.nbf}`:void 0,d=e.requestId?`Request ID: ${e.requestId}`:void 0,f=e.resources?`Resources:${e.resources.map((e=>`\n- ${e}`)).join("")}`:void 0,p=zc(e.resources);return p&&(i=function(e="",t){Mc(t);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;const n=[];let i=0;return Object.keys(t.att).forEach((e=>{const r=Object.keys(t.att[e]).map((e=>({ability:e.split("/")[0],action:e.split("/")[1]})));r.sort(((e,t)=>e.action.localeCompare(t.action)));const s={};r.forEach((e=>{s[e.ability]||(s[e.ability]=[]),s[e.ability].push(e.action)}));const o=Object.keys(s).map((t=>(i++,`(${i}) '${t}': '${s[t].join("', '")}' for '${e}'.`)));n.push(o.join(", ").replace(".,","."))})),`${e?e+" ":""}${r}${n.join(" ")}`}(i,Nc(p))),[r,n,"",i,"",s,o,a,c,l,u,h,d,f].filter((e=>null!=e)).join("\n")};function Mc(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(null==t||!t.length)throw new Error("No resources found in `att` property");t.forEach((t=>{const r=e.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if("object"!=typeof r)throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach((e=>{const t=r[e];if(!Array.isArray(t))throw new Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw new Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach((t=>{if("object"!=typeof t)throw new Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)}))}))}))}function Rc(e,t,r={}){t=t?.sort(((e,t)=>e.localeCompare(t)));const n=t.map((t=>({[`${e}/${t}`]:[r]})));return Object.assign({},...n)}function Lc(e){return Mc(e),`urn:recap:${function(e){return Buffer.from(JSON.stringify(e)).toString("base64")}(e).replace(/=/g,"")}`}function Nc(e){const t=function(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}(e.replace("urn:recap:",""));return Mc(t),t}function Bc(e,t){const r=function(e,t){Mc(e),Mc(t);const r=Object.keys(e.att).concat(Object.keys(t.att)).sort(((e,t)=>e.localeCompare(t))),n={att:{}};return r.forEach((r=>{var i,s;Object.keys((null==(i=e.att)?void 0:i[r])||{}).concat(Object.keys((null==(s=t.att)?void 0:s[r])||{})).sort(((e,t)=>e.localeCompare(t))).forEach((i=>{var s,o;n.att[r]=((e,t)=>_c(e,Ec(t)))(((e,t)=>{for(var r in t||(t={}))Sc.call(t,r)&&Ic(e,r,t[r]);if(xc)for(var r of xc(t))Ac.call(t,r)&&Ic(e,r,t[r]);return e})({},n.att[r]),{[i]:(null==(s=e.att[r])?void 0:s[i])||(null==(o=t.att[r])?void 0:o[i])})}))})),n}(Nc(e),Nc(t));return Lc(r)}function Dc(e){var t;const r=Nc(e);Mc(r);const n=null==(t=r.att)?void 0:t.eip155;return n?Object.keys(n).map((e=>e.split("/")[1])):[]}function Uc(e){const t=Nc(e);Mc(t);const r=[];return Object.values(t.att).forEach((e=>{Object.values(e).forEach((e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)}))})),[...new Set(r.flat())]}function zc(e){if(!e)return;const t=e?.[e.length-1];return function(e){return e&&e.includes("urn:recap:")}(t)?t:void 0}const jc="base10",Fc="base16",$c="base64pad",qc="base64url",Wc="utf8";function Hc(){return ka((0,Zs.randomBytes)(32),Fc)}function Vc(e){return ka((0,Ys.tW)(Ia(e,Fc)),Fc)}function Kc(e){return ka((0,Ys.tW)(Ia(e,Wc)),Fc)}function Gc(e){return Ia(`${e}`,jc)}function Zc(e){return Number(ka(e,jc))}function Yc(e){const{encoding:t=$c}=e;if(2===Zc(e.type))return ka(Qs([e.type,e.sealed]),t);if(1===Zc(e.type)){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ka(Qs([e.type,e.senderPublicKey,e.iv,e.sealed]),t)}return ka(Qs([e.type,e.iv,e.sealed]),t)}function Jc(e){const{encoded:t,encoding:r=$c}=e,n=Ia(t,r),i=n.slice(0,1);if(1===Zc(i)){const e=33,t=e+12,r=n.slice(1,e),s=n.slice(e,t);return{type:i,sealed:n.slice(t),iv:s,senderPublicKey:r}}if(2===Zc(i))return{type:i,sealed:n.slice(1),iv:(0,Zs.randomBytes)(12)};const s=n.slice(1,13);return{type:i,sealed:n.slice(13),iv:s}}function Xc(e){const t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function Qc(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function el(e){return 2===e.type}function tl(e){return e?.relay||{protocol:"irn"}}function rl(e){const t=Wa[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function nl(e,t="-"){const r={},n="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(n)){const i=t.replace(n,""),s=e[t];r[i]=s}})),r}function il(e){if(!e.includes("wc:")){const t=bc(e);null!=t&&t.includes("wc:")&&(e=t)}const t=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),r=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,t),i=e.substring(t+1,r).split("@"),s=typeof r<"u"?e.substring(r):"",o=new URLSearchParams(s),a={};o.forEach(((e,t)=>{a[t]=e}));const c="string"==typeof a.methods?a.methods.split(","):void 0;return{protocol:n,topic:sl(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:nl(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function sl(e){return e.startsWith("//")?e.substring(2):e}function ol(e){const t=new URLSearchParams,r=function(e,t="-"){const r={};return Object.keys(e).forEach((n=>{const i="relay"+t+n;e[n]&&(r[i]=e[n])})),r}(e.relay);Object.keys(r).sort().forEach((e=>{t.set(e,r[e])})),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const n=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${n}`}function al(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}function cl(e){const t=[];return e.forEach((e=>{const[r,n]=e.split(":");t.push(`${r}:${n}`)})),t}function ll(e){return e.includes(":")}function ul(e){return ll(e)?e.split(":")[0]:e}function hl(e,t){t=t.map((e=>e.replace("did:pkh:","")));const r=function(e){const t={};return e?.forEach((e=>{const[r,n]=e.split(":");t[r]||(t[r]={accounts:[],chains:[],events:[]}),t[r].accounts.push(e),t[r].chains.push(`${r}:${n}`)})),t}(t);for(const[t,n]of Object.entries(r))n.methods?n.methods=pc(n.methods,e):n.methods=e,n.events=["chainChanged","accountsChanged"];return r}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const dl={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},fl={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function pl(e,t){const{message:r,code:n}=fl[e];return{message:t?`${r} ${t}`:r,code:n}}function gl(e,t){const{message:r,code:n}=dl[e];return{message:t?`${r} ${t}`:r,code:n}}function ml(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function yl(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function bl(e){return typeof e>"u"}function wl(e,t){return!(!t||!bl(e))||"string"==typeof e&&!!e.trim().length}function vl(e,t){return!(!t||!bl(e))||"number"==typeof e&&!isNaN(e)}function _l(e){return!(!wl(e,!1)||!e.includes(":"))&&2===e.split(":").length}function El(e){let t=!0;return ml(e)?e.length&&(t=e.every((e=>wl(e,!1)))):t=!1,t}function xl(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const n=function(e,t){let r=null;return El(e?.methods)?El(e?.events)||(r=gl("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=gl("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}(e,`${t}, namespace`);n&&(r=n)})),r}function Sl(e,t){let r=null;if(e&&yl(e)){const n=xl(e,t);n&&(r=n);const i=function(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const n=function(e,t){let r=null;return ml(e)?e.forEach((e=>{r||function(e){if(wl(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&_l(e)}}return!1}(e)||(r=gl("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):r=gl("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}(e?.accounts,`${t} namespace`);n&&(r=n)})),r}(e,t);i&&(r=i)}else r=pl("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Al(e){return wl(e.protocol,!0)}function Il(e){return typeof e<"u"&&null!==typeof e}function kl(e,t){return!(!_l(t)||!function(e){const t=[];return Object.values(e).forEach((e=>{t.push(...cl(e.accounts))})),t}(e).includes(t))}function Tl(e,t,r){let n=null;const i=function(e){const t={};return Object.keys(e).forEach((r=>{var n;r.includes(":")?t[r]=e[r]:null==(n=e[r].chains)||n.forEach((n=>{t[n]={methods:e[r].methods,events:e[r].events}}))})),t}(e),s=function(e){const t={};return Object.keys(e).forEach((r=>{if(r.includes(":"))t[r]=e[r];else{const n=cl(e[r].accounts);n?.forEach((n=>{t[n]={accounts:e[r].accounts.filter((e=>e.includes(`${n}:`))),methods:e[r].methods,events:e[r].events}}))}})),t}(t),o=Object.keys(i),a=Object.keys(s),c=Pl(Object.keys(e)),l=Pl(Object.keys(t)),u=c.filter((e=>!l.includes(e)));return u.length&&(n=pl("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${u.toString()}\n      Received: ${Object.keys(t).toString()}`)),ic(o,a)||(n=pl("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||n)return;const i=cl(t[e].accounts);i.includes(e)||(n=pl("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${i.toString()}`))})),o.forEach((e=>{n||(ic(i[e].methods,s[e].methods)?ic(i[e].events,s[e].events)||(n=pl("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):n=pl("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))})),n}function Pl(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function Cl(){const e=ec();return new Promise((t=>{switch(e){case Za:t(Qa()&&navigator?.onLine);break;case Ga:t(async function(){if(Xa()&&typeof r.g<"u"&&null!=r.g&&r.g.NetInfo){const e=await(null==r.g?void 0:r.g.NetInfo.fetch());return e?.isConnected}return!0}());break;default:t(!0)}}))}const Ol={};class Ml{static get(e){return Ol[e]}static set(e,t){Ol[e]=t}static delete(e){delete Ol[e]}}class Rl{}class Ll extends Rl{constructor(e){super()}}const Nl=fi.FIVE_SECONDS,Bl="heartbeat_pulse";class Dl extends Ll{constructor(e){super(e),this.events=new ti.EventEmitter,this.interval=Nl,this.interval=e?.interval||Nl}static async init(e){const t=new Dl(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval((()=>this.pulse()),(0,fi.toMiliseconds)(this.interval))}pulse(){this.events.emit(Bl)}}const Ul=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,zl=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,jl=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Fl(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function $l(e,t={}){if("string"!=typeof e)return e;const r=e.trim();if('"'===e[0]&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const e=r.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if("undefined"===e)return;if("null"===e)return null;if("nan"===e)return Number.NaN;if("infinity"===e)return Number.POSITIVE_INFINITY;if("-infinity"===e)return Number.NEGATIVE_INFINITY}if(!jl.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(Ul.test(e)||zl.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,Fl)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function ql(e,...t){try{return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}var r}function Wl(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return Wl(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Hl(){if("undefined"==typeof Buffer)throw new TypeError("[unstorage] Buffer is not supported!")}const Vl="base64:";function Kl(e){return e?e.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function Gl(...e){return Kl(e.join(":"))}function Zl(e){return(e=Kl(e))?e+":":""}const Yl=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function Jl(e,t,r){return e.watch?e.watch(((e,n)=>t(e,r+n))):()=>{}}async function Xl(e){"function"==typeof e.dispose&&await ql(e.dispose)}function Ql(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function eu(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=Ql(r);return(e,r)=>n.then((n=>r(n.transaction(t,e).objectStore(t))))}let tu;function ru(){return tu||(tu=eu("keyval-store","keyval")),tu}function nu(e,t=ru()){return t("readonly",(t=>Ql(t.get(e))))}var iu=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",r=e=>t+e;let n;return e.dbName&&e.storeName&&(n=eu(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await nu(r(e),n)>"u"),getItem:async e=>await nu(r(e),n)??null,setItem:(e,t)=>function(e,t,r=ru()){return r("readwrite",(r=>(r.put(t,e),Ql(r.transaction))))}(r(e),t,n),removeItem:e=>function(e,t=ru()){return t("readwrite",(t=>(t.delete(e),Ql(t.transaction))))}(r(e),n),getKeys:()=>function(e=ru()){return e("readonly",(e=>{if(e.getAllKeys)return Ql(e.getAllKeys());const t=[];return function(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},Ql(e.transaction)}(e,(e=>t.push(e.key))).then((()=>t))}))}(n),clear:()=>function(e=ru()){return e("readwrite",(e=>(e.clear(),Ql(e.transaction))))}(n)}};class su{constructor(){this.indexedDb=function(e={}){const t={mounts:{"":e.driver||Yl()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(const r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},n=(e,r)=>t.mountpoints.filter((t=>t.startsWith(e)||r&&e.startsWith(t))).map((r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]}))),i=(e,r)=>{if(t.watching){r=Kl(r);for(const n of t.watchListeners)n(e,r)}},s=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},o=(e,t,n)=>{const i=new Map,s=e=>{let t=i.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},i.set(e.base,t)),t};for(const n of e){const e="string"==typeof n,i=Kl(e?n:n.key),o=e?void 0:n.value,a=e||!n.options?t:{...t,...n.options},c=r(i);s(c).items.push({key:i,value:o,relativeKey:c.relativeKey,options:a})}return Promise.all([...i.values()].map((e=>n(e)))).then((e=>e.flat()))},a={hasItem(e,t={}){e=Kl(e);const{relativeKey:n,driver:i}=r(e);return ql(i.hasItem,n,t)},getItem(e,t={}){e=Kl(e);const{relativeKey:n,driver:i}=r(e);return ql(i.getItem,n,t).then((e=>$l(e)))},getItems:(e,t)=>o(e,t,(e=>e.driver.getItems?ql(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:Gl(e.base,t.key),value:$l(t.value)}))))):Promise.all(e.items.map((t=>ql(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:$l(e)})))))))),getItemRaw(e,t={}){e=Kl(e);const{relativeKey:n,driver:i}=r(e);return i.getItemRaw?ql(i.getItemRaw,n,t):ql(i.getItem,n,t).then((e=>function(e){return"string"!=typeof e?e:e.startsWith(Vl)?(Hl(),Buffer.from(e.slice(7),"base64")):e}(e)))},async setItem(e,t,n={}){if(void 0===t)return a.removeItem(e);e=Kl(e);const{relativeKey:s,driver:o}=r(e);o.setItem&&(await ql(o.setItem,s,Wl(t),n),o.watch||i("update",e))},async setItems(e,t){await o(e,t,(async e=>{if(e.driver.setItems)return ql(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:Wl(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>ql(e.driver.setItem,t.relativeKey,Wl(t.value),t.options))))}))},async setItemRaw(e,t,n={}){if(void 0===t)return a.removeItem(e,n);e=Kl(e);const{relativeKey:s,driver:o}=r(e);if(o.setItemRaw)await ql(o.setItemRaw,s,t,n);else{if(!o.setItem)return;await ql(o.setItem,s,function(e){if("string"==typeof e)return e;Hl();const t=Buffer.from(e).toString("base64");return Vl+t}(t),n)}o.watch||i("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=Kl(e);const{relativeKey:n,driver:s}=r(e);s.removeItem&&(await ql(s.removeItem,n,t),(t.removeMeta||t.removeMata)&&await ql(s.removeItem,n+"$",t),s.watch||i("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=Kl(e);const{relativeKey:n,driver:i}=r(e),s=Object.create(null);if(i.getMeta&&Object.assign(s,await ql(i.getMeta,n,t)),!t.nativeOnly){const e=await ql(i.getItem,n+"$",t).then((e=>$l(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=Zl(e);const r=n(e,!0);let i=[];const s=[];for(const e of r){const r=await ql(e.driver.getKeys,e.relativeBase,t);for(const t of r){const r=e.mountpoint+Kl(t);i.some((e=>r.startsWith(e)))||s.push(r)}i=[e.mountpoint,...i.filter((t=>!t.startsWith(e.mountpoint)))]}return e?s.filter((t=>t.startsWith(e)&&"$"!==t[t.length-1])):s.filter((e=>"$"!==e[e.length-1]))},async clear(e,t={}){e=Zl(e),await Promise.all(n(e,!1).map((async e=>{if(e.driver.clear)return ql(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const r=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(r.map((r=>e.driver.removeItem(r,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>Xl(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await Jl(t.mounts[e],i,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await s()}),async unwatch(){t.watchListeners=[],await s()},mount(e,r){if((e=Zl(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=r,t.watching&&Promise.resolve(Jl(r,i,e)).then((r=>{t.unwatch[e]=r})).catch(console.error),a},async unmount(e,r=!0){(e=Zl(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e](),delete t.unwatch[e]),r&&await Xl(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=Kl(e)+":";const t=r(e);return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>(e=Kl(e),n(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))),keys:(e,t={})=>a.getKeys(e,t),get:(e,t={})=>a.getItem(e,t),set:(e,t,r={})=>a.setItem(e,t,r),has:(e,t={})=>a.hasItem(e,t),del:(e,t={})=>a.removeItem(e,t),remove:(e,t={})=>a.removeItem(e,t)};return a}({driver:iu({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((e=>[e.key,e.value]))}async getItem(e){const t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,Ua(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof r.g<"u"?r.g:typeof self<"u"?self:{},au={exports:{}};function cu(e){var t;return[e[0],Da(null!=(t=e[1])?t:"")]}!function(){let e;function t(){}e=t,e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){const e=this;Object.keys(e).forEach((function(t){e[t]=void 0,delete e[t]}))},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),typeof ou<"u"&&ou.localStorage?au.exports=ou.localStorage:typeof window<"u"&&window.localStorage?au.exports=window.localStorage:au.exports=new t}();class lu{constructor(){this.localStorage=au.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(cu)}async getItem(e){const t=this.localStorage.getItem(e);if(null!==t)return Da(t)}async setItem(e,t){this.localStorage.setItem(e,Ua(t))}async removeItem(e){this.localStorage.removeItem(e)}}class uu{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const e=new lu;this.storage=e;try{(async(e,t,r)=>{const n="wc_storage_version",i=await t.getItem(n);if(i&&i>=1)return void r(t);const s=await e.getKeys();if(!s.length)return void r(t);const o=[];for(;s.length;){const r=s.shift();if(!r)continue;const n=r.toLowerCase();if(n.includes("wc@")||n.includes("walletconnect")||n.includes("wc_")||n.includes("wallet_connect")){const n=await e.getItem(r);await t.setItem(r,n),o.push(r)}}await t.setItem(n,1),r(t),(async(e,t)=>{t.length&&t.forEach((async t=>{await e.removeItem(t)}))})(e,o)})(e,new su,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise((e=>{const t=setInterval((()=>{this.initialized&&(clearInterval(t),e())}),20)}))}}var hu=r(8076),du=r.n(hu);const fu="custom_context";class pu{constructor(e){this.nodeValue=e,this.sizeInBytes=(new TextEncoder).encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class gu{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new pu(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}}class mu{constructor(e,t=1024e3){this.level=e??"error",this.levelValue=hu.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new gu(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===hu.levels.values.error?console.error(e):t===hu.levels.values.warn?console.warn(e):t===hu.levels.values.debug?console.debug(e):t===hu.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Ua({timestamp:(new Date).toISOString(),log:e}));const t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new gu(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(Ua({extraMetadata:e})),new Blob(t,{type:"application/json"})}}class yu{constructor(e,t=1024e3){this.baseChunkLogger=new mu(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${(new Date).toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}}class bu{constructor(e,t=1024e3){this.baseChunkLogger=new mu(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var wu=Object.defineProperty,vu=Object.defineProperties,_u=Object.getOwnPropertyDescriptors,Eu=Object.getOwnPropertySymbols,xu=Object.prototype.hasOwnProperty,Su=Object.prototype.propertyIsEnumerable,Au=(e,t,r)=>t in e?wu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Iu=(e,t)=>{for(var r in t||(t={}))xu.call(t,r)&&Au(e,r,t[r]);if(Eu)for(var r of Eu(t))Su.call(t,r)&&Au(e,r,t[r]);return e},ku=(e,t)=>vu(e,_u(t));function Tu(e){return ku(Iu({},e),{level:e?.level||"info"})}function Pu(e,t=fu){let r="";return r=typeof e.bindings>"u"?function(e,t=fu){return e[t]||""}(e,t):e.bindings().context||"",r}function Cu(e,t,r=fu){const n=function(e,t,r=fu){const n=Pu(e,r);return n.trim()?`${n}/${t}`:t}(e,t,r);return function(e,t,r=fu){return e[r]=t,e}(e.child({context:n}),n,r)}class Ou extends Rl{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class Mu extends Rl{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class Ru{constructor(e,t){this.logger=e,this.core=t}}class Lu extends Rl{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Nu extends Rl{constructor(e){super()}}class Bu{constructor(e,t,r,n){this.core=e,this.logger=t,this.name=r}}class Du extends Rl{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Uu extends Rl{constructor(e,t){super(),this.core=e,this.logger=t}}class zu{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class ju{constructor(e,t){this.projectId=e,this.logger=t}}class Fu{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}ri();class $u{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}ti.EventEmitter;class qu{constructor(e){this.client=e}}const Wu="PARSE_ERROR",Hu="INVALID_REQUEST",Vu="METHOD_NOT_FOUND",Ku="INVALID_PARAMS",Gu="INTERNAL_ERROR",Zu="SERVER_ERROR",Yu=[-32700,-32600,-32601,-32602,-32603],Ju={[Wu]:{code:-32700,message:"Parse error"},[Hu]:{code:-32600,message:"Invalid Request"},[Vu]:{code:-32601,message:"Method not found"},[Ku]:{code:-32602,message:"Invalid params"},[Gu]:{code:-32603,message:"Internal error"},[Zu]:{code:-32e3,message:"Server error"}},Xu=Zu;function Qu(e){return Object.keys(Ju).includes(e)?Ju[e]:Ju[Xu]}function eh(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}var th=r(5682);function rh(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function nh(e=6){return BigInt(rh(e))}function ih(e,t,r){return{id:r||rh(),jsonrpc:"2.0",method:e,params:t}}function sh(e,t){return{id:e,jsonrpc:"2.0",result:t}}function oh(e,t,r){return{id:e,jsonrpc:"2.0",error:ah(t,r)}}function ah(e,t){return void 0===e?Qu(Gu):("string"==typeof e&&(e=Object.assign(Object.assign({},Qu(Zu)),{message:e})),void 0!==t&&(e.data=t),r=e.code,Yu.includes(r)&&(e=function(e){return Object.values(Ju).find((t=>t.code===e))||Ju[Xu]}(e.code)),e);var r}class ch{}class lh extends ch{constructor(){super()}}class uh extends lh{constructor(e){super()}}function hh(e,t){const r=function(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==r&&new RegExp(t).test(r)}function dh(e){return hh(e,"^https?:")}function fh(e){return hh(e,"^wss?:")}function ph(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function gh(e){return ph(e)&&"method"in e}function mh(e){return ph(e)&&(yh(e)||bh(e))}function yh(e){return"result"in e}function bh(e){return"error"in e}class wh extends uh{constructor(e){super(e),this.events=new ti.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(ih(e.method,e.params||[],e.id||nh().toString()),t)}async requestStrict(e,t){return new Promise((async(r,n)=>{if(!this.connection.connected)try{await this.open()}catch(e){n(e)}this.events.on(`${e.id}`,(e=>{bh(e)?n(e.error):r(e.result)}));try{await this.connection.send(e,t)}catch(e){n(e)}}))}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),mh(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const vh=e=>e.split("?")[0],_h=typeof WebSocket<"u"?WebSocket:typeof r.g<"u"&&typeof r.g.WebSocket<"u"?r.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:r(7276);class Eh{constructor(e){if(this.url=e,this.events=new ti.EventEmitter,this.registering=!1,!fh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise(((e,t)=>{typeof this.socket>"u"?t(new Error("Connection already closed")):(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close())}))}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ua(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!fh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(new Error("WebSocket connection is missing or invalid"));e(this.socket)}))}))}return this.url=e,this.registering=!0,new Promise(((t,n)=>{const i=(0,th.isReactNative)()?void 0:{rejectUnauthorized:(o=e,!new RegExp("wss?://localhost(:d{2,5})?").test(o))},s=new _h(e,[],i);var o;typeof WebSocket<"u"||typeof r.g<"u"&&typeof r.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?s.onerror=e=>{const t=e;n(this.emitError(t.error))}:s.on("error",(e=>{n(this.emitError(e))})),s.onopen=()=>{this.onOpen(s),t(s)}}))}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?Da(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),n=oh(e,r.message||r.toString());this.events.emit("payload",n)}parseError(e,t=this.url){return eh(e,vh(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${vh(this.url)}`));return this.events.emit("register_error",t),t}}var xh=r(8142),Sh=r.n(xh),Ah=r(7499);const Ih="core",kh=`wc@2:${Ih}:`,Th={database:":memory:"},Ph="client_ed25519_seed",Ch=fi.ONE_DAY,Oh=fi.SIX_HOURS,Mh="wss://relay.walletconnect.org",Rh="relayer_message",Lh="relayer_message_ack",Nh="relayer_connection_stalled",Bh="relayer_publish",Dh="payload",Uh="connect",zh="disconnect",jh="error",Fh="2.17.5",$h={link_mode:"link_mode",relay:"relay"},qh="WALLETCONNECT_LINK_MODE_APPS",Wh="subscription_created",Hh="subscription_deleted",Vh=1e3*fi.FIVE_SECONDS,Kh={wc_pairingDelete:{req:{ttl:fi.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:fi.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:fi.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:fi.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:fi.ONE_DAY,prompt:!1,tag:0},res:{ttl:fi.ONE_DAY,prompt:!1,tag:0}}},Gh="pairing_create",Zh="pairing_delete",Yh="history_created",Jh="history_updated",Xh="history_deleted",Qh="expirer_created",ed="expirer_deleted",td="expirer_expired",rd="https://verify.walletconnect.org",nd=rd,id=`${nd}/v3`,sd=["https://verify.walletconnect.com",rd],od="malformed_pairing_uri",ad="session_approve_started";var cd=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*l+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<i)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*u+1>>>0,l=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*l[f]>>>0,l[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var p=o-n;p!==o&&0===l[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const ld=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class ud{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class hd{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return fd(this,e)}}class dd{constructor(e){this.decoders=e}or(e){return fd(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const fd=(e,t)=>new dd({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class pd{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new ud(e,t,r),this.decoder=new hd(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const gd=({name:e,prefix:t,encode:r,decode:n})=>new pd(e,t,r,n),md=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=cd(r,t);return gd({prefix:e,name:t,encode:n,decode:e=>ld(i(e))})},yd=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>gd({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),bd=gd({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var wd=Object.freeze({__proto__:null,identity:bd});const vd=yd({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var _d=Object.freeze({__proto__:null,base2:vd});const Ed=yd({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var xd=Object.freeze({__proto__:null,base8:Ed});const Sd=md({prefix:"9",name:"base10",alphabet:"0123456789"});var Ad=Object.freeze({__proto__:null,base10:Sd});const Id=yd({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),kd=yd({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Td=Object.freeze({__proto__:null,base16:Id,base16upper:kd});const Pd=yd({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Cd=yd({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Od=yd({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Md=yd({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Rd=yd({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ld=yd({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Nd=yd({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Bd=yd({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Dd=yd({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ud=Object.freeze({__proto__:null,base32:Pd,base32upper:Cd,base32pad:Od,base32padupper:Md,base32hex:Rd,base32hexupper:Ld,base32hexpad:Nd,base32hexpadupper:Bd,base32z:Dd});const zd=md({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),jd=md({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Fd=Object.freeze({__proto__:null,base36:zd,base36upper:jd});const $d=md({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),qd=md({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Wd=Object.freeze({__proto__:null,base58btc:$d,base58flickr:qd});const Hd=yd({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Vd=yd({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Kd=yd({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Gd=yd({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Zd=Object.freeze({__proto__:null,base64:Hd,base64pad:Vd,base64url:Kd,base64urlpad:Gd});const Yd=Array.from("   "),Jd=Yd.reduce(((e,t,r)=>(e[r]=t,e)),[]),Xd=Yd.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),Qd=gd({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+Jd[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Xd[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var ef=Object.freeze({__proto__:null,base256emoji:Qd}),tf=128,rf=-128,nf=Math.pow(2,31),sf=Math.pow(2,7),of=Math.pow(2,14),af=Math.pow(2,21),cf=Math.pow(2,28),lf=Math.pow(2,35),uf=Math.pow(2,42),hf=Math.pow(2,49),df=Math.pow(2,56),ff=Math.pow(2,63),pf=function e(t,r,n){r=r||[];for(var i=n=n||0;t>=nf;)r[n++]=255&t|tf,t/=128;for(;t&rf;)r[n++]=255&t|tf,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},gf=function(e){return e<sf?1:e<of?2:e<af?3:e<cf?4:e<lf?5:e<uf?6:e<hf?7:e<df?8:e<ff?9:10};const mf=(e,t,r=0)=>(pf(e,t,r),t),yf=e=>gf(e),bf=(e,t)=>{const r=t.byteLength,n=yf(e),i=n+yf(r),s=new Uint8Array(i+r);return mf(e,s,0),mf(r,s,n),s.set(t,i),new wf(e,r,t,s)};class wf{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const vf=({name:e,code:t,encode:r})=>new _f(e,t,r);class _f{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?bf(this.code,t):t.then((e=>bf(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Ef=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),xf=vf({name:"sha2-256",code:18,encode:Ef("SHA-256")}),Sf=vf({name:"sha2-512",code:19,encode:Ef("SHA-512")});Object.freeze({__proto__:null,sha256:xf,sha512:Sf});const Af=ld,If={code:0,name:"identity",encode:Af,digest:e=>bf(0,Af(e))};Object.freeze({__proto__:null,identity:If}),new TextEncoder,new TextDecoder;const kf={...wd,..._d,...xd,...Ad,...Td,...Ud,...Fd,...Wd,...Zd,...ef};function Tf(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Pf=Tf("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Cf=Tf("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Of={utf8:Pf,"utf-8":Pf,hex:kf.base16,latin1:Cf,ascii:Cf,binary:Cf,...kf};class Mf{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=kh,this.init=async()=>{if(!this.initialized){const e=await this.getKeyChain();typeof e<"u"&&(this.keychain=e),this.initialized=!0}},this.has=e=>(this.isInitialized(),this.keychain.has(e)),this.set=async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()},this.get=e=>{this.isInitialized();const t=this.keychain.get(e);if(typeof t>"u"){const{message:t}=pl("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t},this.del=async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()},this.core=e,this.logger=Cu(t,this.name)}get context(){return Pu(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,sc(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?oc(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=pl("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Rf{constructor(e,t,r){this.core=e,this.logger=t,this.name="crypto",this.randomSessionIdentifier=Hc(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=e=>(this.isInitialized(),this.keychain.has(e)),this.getClientId=async()=>(this.isInitialized(),Fa(qa(await this.getClientSeed()).publicKey)),this.generateKeyPair=()=>{this.isInitialized();const e=function(){const e=Js.TZ();return{privateKey:ka(e.secretKey,Fc),publicKey:ka(e.publicKey,Fc)}}();return this.setPrivateKey(e.publicKey,e.privateKey)},this.signJWT=async e=>{this.isInitialized();const t=qa(await this.getClientSeed()),r=this.randomSessionIdentifier,n=Ch;return await async function(e,t,r,n,i=(0,fi.fromMiliseconds)(Date.now())){const s={alg:"EdDSA",typ:"JWT"},o={iss:Fa(n.publicKey),sub:e,aud:t,iat:i,exp:i+r},a=Ia([ja((c={header:s,payload:o}).header),ja(c.payload)].join(Ca),Ra);var c;return function(e){return[ja(e.header),ja(e.payload),(t=e.signature,ka(t,Oa))].join(Ca);var t}({header:s,payload:o,signature:Pa._S(n.secretKey,a)})}(r,e,n,t)},this.generateSharedKey=(e,t,r)=>{this.isInitialized();const n=function(e,t){const r=Js.Tc(Ia(e,Fc),Ia(t,Fc),!0);return ka(new Gs.i(Ys.aD,r).expand(32),Fc)}(this.getPrivateKey(e),t);return this.setSymKey(n,r)},this.setSymKey=async(e,t)=>{this.isInitialized();const r=t||Vc(e);return await this.keychain.set(r,e),r},this.deleteKeyPair=async e=>{this.isInitialized(),await this.keychain.del(e)},this.deleteSymKey=async e=>{this.isInitialized(),await this.keychain.del(e)},this.encode=async(e,t,r)=>{this.isInitialized();const n=Xc(r),i=Ua(t);if(el(n))return function(e,t){const r=Gc(2),n=(0,Zs.randomBytes)(12);return Yc({type:r,sealed:Ia(e,Wc),iv:n,encoding:t})}(i,r?.encoding);if(Qc(n)){const t=n.senderPublicKey,r=n.receiverPublicKey;e=await this.generateSharedKey(t,r)}const s=this.getSymKey(e),{type:o,senderPublicKey:a}=n;return function(e){const t=Gc(typeof e.type<"u"?e.type:0);if(1===Zc(t)&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?Ia(e.senderPublicKey,Fc):void 0,n=typeof e.iv<"u"?Ia(e.iv,Fc):(0,Zs.randomBytes)(12);return Yc({type:t,sealed:new Ks.g6(Ia(e.symKey,Fc)).seal(n,Ia(e.message,Wc)),iv:n,senderPublicKey:r,encoding:e.encoding})}({type:o,symKey:s,message:i,senderPublicKey:a,encoding:r?.encoding})},this.decode=async(e,t,r)=>{this.isInitialized();const n=function(e,t){const r=Jc({encoded:e,encoding:t?.encoding});return Xc({type:Zc(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?ka(r.senderPublicKey,Fc):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(el(n)){const e=function(e,t){const{sealed:r}=Jc({encoded:e,encoding:t});return ka(r,Wc)}(t,r?.encoding);return Da(e)}if(Qc(n)){const t=n.receiverPublicKey,r=n.senderPublicKey;e=await this.generateSharedKey(t,r)}try{const n=function(e){const t=new Ks.g6(Ia(e.symKey,Fc)),{sealed:r,iv:n}=Jc({encoded:e.encoded,encoding:e?.encoding}),i=t.open(n,r);if(null===i)throw new Error("Failed to decrypt");return ka(i,Wc)}({symKey:this.getSymKey(e),encoded:t,encoding:r?.encoding});return Da(n)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}},this.getPayloadType=(e,t=$c)=>Zc(Jc({encoded:e,encoding:t}).type),this.getPayloadSenderPublicKey=(e,t=$c)=>{const r=Jc({encoded:e,encoding:t});return r.senderPublicKey?ka(r.senderPublicKey,Fc):void 0},this.core=e,this.logger=Cu(t,this.name),this.keychain=r||new Mf(this.core,this.logger)}get context(){return Pu(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Ph)}catch{e=Hc(),await this.keychain.set(Ph,e)}return function(e,t="utf8"){const r=Of[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=pl("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Lf extends Ru{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=kh,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const e=await this.getRelayerMessages();typeof e<"u"&&(this.messages=e),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}},this.set=async(e,t)=>{this.isInitialized();const r=Kc(t);let n=this.messages.get(e);return typeof n>"u"&&(n={}),typeof n[r]<"u"||(n[r]=t,this.messages.set(e,n),await this.persist()),r},this.get=e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t},this.has=(e,t)=>(this.isInitialized(),typeof this.get(e)[Kc(t)]<"u"),this.del=async e=>{this.isInitialized(),this.messages.delete(e),await this.persist()},this.logger=Cu(e,this.name),this.core=t}get context(){return Pu(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,sc(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?oc(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=pl("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Nf=Object.defineProperty,Bf=Object.defineProperties,Df=Object.getOwnPropertyDescriptors,Uf=Object.getOwnPropertySymbols,zf=Object.prototype.hasOwnProperty,jf=Object.prototype.propertyIsEnumerable,Ff=(e,t,r)=>t in e?Nf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$f=(e,t)=>{for(var r in t||(t={}))zf.call(t,r)&&Ff(e,r,t[r]);if(Uf)for(var r of Uf(t))jf.call(t,r)&&Ff(e,r,t[r]);return e},qf=(e,t)=>Bf(e,Df(t));class Wf extends Lu{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new ti.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,fi.toMiliseconds)(fi.ONE_MINUTE),this.initialPublishTimeout=(0,fi.toMiliseconds)(15*fi.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(e,t,r)=>{var n;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});const i=r?.ttl||Oh,s=tl(r),o=r?.prompt||!1,a=r?.tag||0,c=r?.id||nh().toString(),l={topic:e,message:t,opts:{ttl:i,relay:s,prompt:o,tag:a,id:c,attestation:r?.attestation}},u=`Failed to publish payload, please try again. id:${c} tag:${a}`;try{const n=new Promise((async n=>{const s=({id:e})=>{l.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(Bh,s),n(l))};this.relayer.events.on(Bh,s);const u=cc(new Promise(((n,s)=>{this.rpcPublish({topic:e,message:t,ttl:i,prompt:o,tag:a,id:c,attestation:r?.attestation}).then(n).catch((e=>{this.logger.warn(e,e?.message),s(e)}))})),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${c} tag:${a}`);try{await u,this.events.removeListener(Bh,s)}catch(e){this.queue.set(c,qf($f({},l),{attempt:1})),this.logger.warn(e,e?.message)}}));this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:r}}),await cc(n,this.publishTimeout,u)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(n=r?.internal)&&n.throwOnFailedPublish)throw e}finally{this.queue.delete(c)}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.relayer=e,this.logger=Cu(t,this.name),this.registerEventListeners()}get context(){return Pu(this.logger)}async rpcPublish(e){var t,r,n,i;const{topic:s,message:o,ttl:a=Oh,prompt:c,tag:l,id:u,attestation:h}=e,d={method:rl(tl().protocol).publish,params:{topic:s,message:o,ttl:a,prompt:c,tag:l,attestation:h},id:u};bl(null==(t=d.params)?void 0:t.prompt)&&(null==(r=d.params)||delete r.prompt),bl(null==(n=d.params)?void 0:n.tag)&&(null==(i=d.params)||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:d});const f=await this.relayer.request(d);return this.relayer.events.emit(Bh,e),this.logger.debug("Successfully Published Payload"),f}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async(e,t)=>{const r=e.attempt+1;this.queue.set(t,qf($f({},e),{attempt:r}));const{topic:n,message:i,opts:s,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish({topic:n,message:i,ttl:s.ttl,prompt:s.prompt,tag:s.tag,id:s.id,attestation:o}),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)}))}registerEventListeners(){this.relayer.core.heartbeat.on(Bl,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(Nh);this.checkQueue()})),this.relayer.on(Lh,(e=>{this.removeRequestFromQueue(e.id.toString())}))}}class Hf{constructor(){this.map=new Map,this.set=(e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const n=r.filter((e=>e!==t));n.length?this.map.set(e,n):this.map.delete(e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Vf=Object.defineProperty,Kf=Object.defineProperties,Gf=Object.getOwnPropertyDescriptors,Zf=Object.getOwnPropertySymbols,Yf=Object.prototype.hasOwnProperty,Jf=Object.prototype.propertyIsEnumerable,Xf=(e,t,r)=>t in e?Vf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Qf=(e,t)=>{for(var r in t||(t={}))Yf.call(t,r)&&Xf(e,r,t[r]);if(Zf)for(var r of Zf(t))Jf.call(t,r)&&Xf(e,r,t[r]);return e},ep=(e,t)=>Kf(e,Gf(t));class tp extends Du{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new Hf,this.events=new ti.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=kh,this.subscribeTimeout=(0,fi.toMiliseconds)(fi.ONE_MINUTE),this.initialSubscribeTimeout=(0,fi.toMiliseconds)(15*fi.ONE_SECOND),this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{const r=tl(t),n={topic:e,relay:r,transportType:t?.transportType};this.pending.set(e,n);const i=await this.rpcSubscribe(e,r,t);return"string"==typeof i&&(this.onSubscribe(i,n),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),i}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}},this.unsubscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),typeof t?.id<"u"?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)},this.isSubscribed=async e=>{if(this.topics.includes(e))return!0;const t=`${this.pendingSubscriptionWatchLabel}_${e}`;return await new Promise(((r,n)=>{const i=new fi.Watch;i.start(t);const s=setInterval((()=>{(!this.pending.has(e)&&this.topics.includes(e)||this.cached.some((t=>t.topic===e)))&&(clearInterval(s),i.stop(t),r(!0)),i.elapsed(t)>=Vh&&(clearInterval(s),i.stop(t),n(new Error("Subscription resolution timeout")))}),this.pollingInterval)})).catch((()=>!1))},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{await this.restore(),await this.onRestart()},this.checkPending=async()=>{if(!(0!==this.pending.size||this.initialized&&this.relayer.connected))return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)},this.registerEventListeners=()=>{this.relayer.core.heartbeat.on(Bl,(async()=>{await this.checkPending()})),this.events.on(Wh,(async e=>{const t=Wh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(Hh,(async e=>{const t=Hh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))},this.relayer=e,this.logger=Cu(t,this.name),this.clientId=""}get context(){return Pu(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map((async r=>await this.unsubscribeById(e,r,t))))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const n=tl(r);await this.rpcUnsubscribe(e,t,n);const i=gl("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var n;r?.transportType===$h.relay&&await this.restartToComplete();const i={method:rl(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const s=null==(n=r?.internal)?void 0:n.throwOnFailedPublish;try{const t=this.getSubscriptionId(e);if(r?.transportType===$h.link_mode)return setTimeout((()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch((e=>this.logger.warn(e)))}),(0,fi.toMiliseconds)(fi.ONE_SECOND)),t;const n=new Promise((async t=>{const r=n=>{n.topic===e&&(this.events.removeListener(Wh,r),t(n.id))};this.events.on(Wh,r);try{const n=await cc(new Promise(((e,t)=>{this.relayer.request(i).catch((e=>{this.logger.warn(e,e?.message),t(e)})).then(e)})),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Wh,r),t(n)}catch{}})),o=await cc(n,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!o&&s)throw new Error(`Subscribing to ${e} failed, please try again`);return o?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Nh),s)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t={method:rl(e[0].relay.protocol).batchSubscribe,params:{topics:e.map((e=>e.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await cc(new Promise((e=>{this.relayer.request(t).catch((e=>this.logger.warn(e))).then(e)})),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Nh)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t={method:rl(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map((e=>e.topic))}};let r;this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{r=await await cc(new Promise(((e,r)=>{this.relayer.request(t).catch((e=>{this.logger.warn(e),r(e)})).then(e)})),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Nh)}return r}rpcUnsubscribe(e,t,r){const n={method:rl(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,t){this.setSubscription(e,ep(Qf({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((e=>{this.setSubscription(e.id,Qf({},e)),this.pending.delete(e.topic)}))}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Qf({},t)),this.topicMap.set(t.topic,e),this.events.emit(Wh,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:t}=pl("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Hh,ep(Qf({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit("subscription_sync")}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit("subscription_resubscribed")}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:e}=pl("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(e.map((e=>ep(Qf({},e),{id:this.getSubscriptionId(e.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await function(e){return new Promise((t=>setTimeout(t,e)))}((0,fi.toMiliseconds)(fi.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=pl("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen()}getSubscriptionId(e){return Kc(e+this.clientId)}}var rp=Object.defineProperty,np=Object.getOwnPropertySymbols,ip=Object.prototype.hasOwnProperty,sp=Object.prototype.propertyIsEnumerable,op=(e,t,r)=>t in e?rp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ap=(e,t)=>{for(var r in t||(t={}))ip.call(t,r)&&op(e,r,t[r]);if(np)for(var r of np(t))sp.call(t,r)&&op(e,r,t[r]);return e};class cp extends Nu{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new ti.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1,this.heartBeatTimeout=(0,fi.toMiliseconds)(fi.THIRTY_SECONDS+fi.FIVE_SECONDS),this.requestsInFlight=[],this.connectTimeout=(0,fi.toMiliseconds)(15*fi.ONE_SECOND),this.request=async e=>{var t,r;this.logger.debug("Publishing Request Payload");const n=e.id||nh().toString();await this.toEstablishConnection();try{this.logger.trace({id:n,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");const i=`${n}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(i);const s=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter((e=>e!==i)),s}catch(e){throw this.logger.debug(`Failed to Publish Request: ${n}`),e}},this.resetPingTimeout=()=>{if(Ja())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout((()=>{var e,t,r;this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)||r.terminate()}),this.heartBeatTimeout)}catch(e){this.logger.warn(e,e?.message)}},this.onPayloadHandler=e=>{this.onProviderPayload(e),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit("relayer_connect")},this.onDisconnectHandler=()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()},this.onProviderErrorHandler=e=>{this.logger.fatal(e,`Fatal socket error: ${e?.message}`),this.events.emit("relayer_error",e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Dh,this.onPayloadHandler),this.provider.on(Uh,this.onConnectHandler),this.provider.on(zh,this.onDisconnectHandler),this.provider.on(jh,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?Cu(e.logger,this.name):du()(Tu({level:e.logger||"error"})),this.messages=new Lf(this.logger,e.core),this.subscriber=new tp(this,this.logger),this.publisher=new Wf(this,this.logger),this.relayUrl=e?.relayUrl||Mh,this.projectId=e.projectId,Xa()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"&&"android"===(null==r.g?void 0:r.g.Platform.OS)?this.packageName=tc():Xa()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"&&"ios"===(null==r.g?void 0:r.g.Platform.OS)&&(this.bundleId=tc()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return Pu(this.logger)}get connected(){var e,t,r;return 1===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)}get connecting(){var e,t,r;return 0===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:$h.relay})}async subscribe(e,t){var r,n,i;this.isInitialized(),(null==t||!t.transportType||"relay"===t?.transportType)&&await this.toEstablishConnection();const s=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(n=t?.internal)?void 0:n.throwOnFailedPublish);let o,a=(null==(i=this.subscriber.topicMap.get(e))?void 0:i[0])||"";const c=t=>{t.topic===e&&(this.subscriber.off(Wh,c),o())};return await Promise.all([new Promise((e=>{o=e,this.subscriber.on(Wh,c)})),new Promise((async(r,n)=>{a=await this.subscriber.subscribe(e,ap({internal:{throwOnFailedPublish:s}},t)).catch((e=>{s&&n(e)}))||a,r()}))]),a}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await cc(this.provider.disconnect(),2e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise((async(t,r)=>{await this.connect(e).then(t).catch(r).finally((()=>{this.connectPromise=void 0}))})),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Cl())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(0===e?.length)return void this.logger.trace("Batch message events is empty. Ignoring...");const t=e.sort(((e,t)=>e.publishedAt-t.publishedAt));this.logger.debug(`Batch of ${t.length} message events sorted`);for(const e of t)try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const e={topic:r,expiry:hc(fi.FIVE_MINUTES),relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,e)}this.events.emit(Rh,e),await this.recordMessageEvent(e)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(zh,r),await cc(new Promise(((e,t)=>{this.provider.connect().then(e).catch(t)})),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch((e=>{t(e)})).finally((()=>{this.provider.off(zh,r),clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0})),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(zh,r),await this.subscriber.start().then(e).catch(t).finally((()=>{this.provider.off(zh,r)}))})),this.hasExperiencedNetworkDisruption=!1,e()}))}catch(e){await this.subscriber.stop();const t=e;this.logger.warn({},t.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise((e=>setTimeout(e,(0,fi.toMiliseconds)(1*t)))),t++}}startPingTimeout(){var e,t,r,n,i;if(Ja())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(i=null==(n=null==(r=this.provider)?void 0:r.connection)?void 0:n.socket)||i.on("ping",(()=>{this.resetPingTimeout()}))),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new wh(new Eh(function({protocol:e,version:t,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u={auth:i,ua:nc(e,t,n),projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},h=function(e,t){const r=new URLSearchParams(e);for(const e of Object.keys(t).sort())if(t.hasOwnProperty(e)){const n=t[e];void 0!==n&&r.set(e,n)}return r.toString()}(l[1]||"",u);return l[0]+"?"+h}({sdkVersion:Fh,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:r}=e;await this.messages.set(t,r)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.warn(`Ignoring message for non-subscribed topic ${t}`),!0;const n=this.messages.has(t,r);return n&&this.logger.warn(`Ignoring duplicate message: ${r}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),gh(e)){if(!e.method.endsWith("_subscription"))return;const t=e.params,{topic:r,message:n,publishedAt:i,attestation:s}=t.data,o={topic:r,message:n,publishedAt:i,transportType:$h.relay,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(ap({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else mh(e)&&this.events.emit(Lh,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Rh,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=sh(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(Dh,this.onPayloadHandler),this.provider.off(Uh,this.onConnectHandler),this.provider.off(zh,this.onDisconnectHandler),this.provider.off(jh,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Cl();!function(e){switch(ec()){case Za:!function(e){!Xa()&&Qa()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case Ga:!function(e){Xa()&&typeof r.g<"u"&&null!=r.g&&r.g.NetInfo&&r.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}(e)}}((async t=>{e!==t&&(e=t,t?await this.transportOpen().catch((e=>this.logger.error(e,e?.message))):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}))}async onProviderDisconnect(){await this.subscriber.stop(),clearTimeout(this.pingTimeout),this.events.emit("relayer_disconnect"),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||this.connectPromise||(this.reconnectTimeout=setTimeout((async()=>{clearTimeout(this.reconnectTimeout),await this.transportOpen().catch((e=>this.logger.error(e,e?.message)))}),(0,fi.toMiliseconds)(.1))))}isInitialized(){if(!this.initialized){const{message:e}=pl("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.transportOpen()}}var lp=Object.defineProperty,up=Object.getOwnPropertySymbols,hp=Object.prototype.hasOwnProperty,dp=Object.prototype.propertyIsEnumerable,fp=(e,t,r)=>t in e?lp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pp=(e,t)=>{for(var r in t||(t={}))hp.call(t,r)&&fp(e,r,t[r]);if(up)for(var r of up(t))dp.call(t,r)&&fp(e,r,t[r]);return e};class gp extends Bu{constructor(e,t,r,n=kh,i=void 0){super(e,t,r,n),this.core=e,this.logger=t,this.name=r,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=kh,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>{this.getKey&&null!==e&&!bl(e)?this.map.set(this.getKey(e),e):function(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}(e)?this.map.set(e.id,e):function(e){return e?.topic}(e)&&this.map.set(e.topic,e)})),this.cached=[],this.initialized=!0)},this.set=async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())},this.get=e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)),this.getAll=e=>(this.isInitialized(),e?this.values.filter((t=>Object.keys(e).every((r=>Sh()(t[r],e[r]))))):this.values),this.update=async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});const r=pp(pp({},this.getData(e)),t);this.map.set(e,r),await this.persist()},this.delete=async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())},this.logger=Cu(t,this.name),this.storagePrefix=n,this.getKey=i}get context(){return Pu(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:t}=pl("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}const{message:t}=pl("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:e}=pl("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=pl("NOT_INITIALIZED",this.name);throw new Error(e)}}}class mp{constructor(e,t){this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(ri()),this.initialized=!1,this.storagePrefix=kh,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]},this.create=async e=>{this.isInitialized();const t=Hc(),r=await this.core.crypto.setSymKey(t),n=hc(fi.FIVE_MINUTES),i={protocol:"irn"},s={topic:r,expiry:n,relay:i,active:!1,methods:e?.methods},o=ol({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:i,expiryTimestamp:n,methods:e?.methods});return this.events.emit(Gh,s),this.core.expirer.set(r,n),await this.pairings.set(r,s),await this.core.relayer.subscribe(r,{transportType:e?.transportType}),{topic:r,uri:o}},this.pair=async e=>{this.isInitialized();const t=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:["pairing_started"]}});this.isValidPair(e,t);const{topic:r,symKey:n,relay:i,expiryTimestamp:s,methods:o}=il(e.uri);let a;if(t.props.properties.topic=r,t.addTrace("pairing_uri_validation_success"),t.addTrace("pairing_uri_not_expired"),this.pairings.keys.includes(r)){if(a=this.pairings.get(r),t.addTrace("existing_pairing"),a.active)throw t.setError("active_pairing_already_exists"),new Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);t.addTrace("pairing_not_expired")}const c=s||hc(fi.FIVE_MINUTES),l={topic:r,relay:i,expiry:c,active:!1,methods:o};this.core.expirer.set(r,c),await this.pairings.set(r,l),t.addTrace("store_new_pairing"),e.activatePairing&&await this.activate({topic:r}),this.events.emit(Gh,l),t.addTrace("emit_inactive_pairing"),this.core.crypto.keychain.has(r)||await this.core.crypto.setSymKey(n,r),t.addTrace("subscribing_pairing_topic");try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{t.setError("no_internet_connection")}try{await this.core.relayer.subscribe(r,{relay:i})}catch(e){throw t.setError("subscribe_pairing_topic_failure"),e}return t.addTrace("subscribe_pairing_topic_success"),l},this.activate=async({topic:e})=>{this.isInitialized();const t=hc(fi.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:t}=e;if(this.pairings.keys.includes(t)){const e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:n,reject:i}=ac();this.events.once(fc("pairing_ping",e),(({error:e})=>{e?i(e):n()})),await r()}},this.updateExpiry=async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})},this.updateMetadata=async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",gl("USER_DISCONNECTED")),await this.deletePairing(t))},this.formatUriFromPairing=e=>{this.isInitialized();const{topic:t,relay:r,expiry:n,methods:i}=e,s=this.core.crypto.keychain.get(t);return ol({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:r,expiryTimestamp:n,methods:i})},this.sendRequest=async(e,t,r)=>{const n=ih(t,r),i=await this.core.crypto.encode(e,n),s=Kh[t].req;return this.core.history.set(e,n),this.core.relayer.publish(e,i,s),n.id},this.sendResult=async(e,t,r)=>{const n=sh(e,r),i=await this.core.crypto.encode(t,n),s=await this.core.history.get(t,e),o=Kh[s.request.method].res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(n)},this.sendError=async(e,t,r)=>{const n=oh(e,r),i=await this.core.crypto.encode(t,n),s=await this.core.history.get(t,e),o=Kh[s.request.method]?Kh[s.request.method].res:Kh.unregistered_method.res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(n)},this.deletePairing=async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,gl("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])},this.cleanup=async()=>{const e=this.pairings.getAll().filter((e=>dc(e.expiry)));await Promise.all(e.map((e=>this.deletePairing(e.topic))))},this.onRelayEventRequest=e=>{const{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return this.onPairingPingRequest(t,r);case"wc_pairingDelete":return this.onPairingDeleteRequest(t,r);default:return this.onUnknownRpcMethodRequest(t,r)}},this.onRelayEventResponse=async e=>{const{topic:t,payload:r}=e,n=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===n?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(n)},this.onPairingPingRequest=async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit("pairing_ping",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onPairingPingResponse=(e,t)=>{const{id:r}=t;setTimeout((()=>{yh(t)?this.events.emit(fc("pairing_ping",r),{}):bh(t)&&this.events.emit(fc("pairing_ping",r),{error:t.error})}),500)},this.onPairingDeleteRequest=async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(Zh,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onUnknownRpcMethodRequest=async(e,t)=>{const{id:r,method:n}=t;try{if(this.registeredMethods.includes(n))return;const t=gl("WC_METHOD_UNSUPPORTED",n);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onUnknownRpcMethodResponse=e=>{this.registeredMethods.includes(e)||this.logger.error(gl("WC_METHOD_UNSUPPORTED",e))},this.isValidPair=(e,t)=>{var r;if(!Il(e)){const{message:r}=pl("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(od),new Error(r)}if(!function(e){function t(e){try{return typeof new URL(e)<"u"}catch{return!1}}try{if(wl(e,!1))return!!t(e)||t(bc(e))}catch{}return!1}(e.uri)){const{message:r}=pl("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(od),new Error(r)}const n=il(e?.uri);if(null==(r=n?.relay)||!r.protocol){const{message:e}=pl("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(od),new Error(e)}if(null==n||!n.symKey){const{message:e}=pl("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(od),new Error(e)}if(null!=n&&n.expiryTimestamp&&(0,fi.toMiliseconds)(n?.expiryTimestamp)<Date.now()){t.setError("pairing_expired");const{message:e}=pl("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(e)}},this.isValidPing=async e=>{if(!Il(e)){const{message:t}=pl("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidDisconnect=async e=>{if(!Il(e)){const{message:t}=pl("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidPairingTopic=async e=>{if(!wl(e,!1)){const{message:t}=pl("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.pairings.keys.includes(e)){const{message:t}=pl("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(dc(this.pairings.get(e).expiry)){await this.deletePairing(e);const{message:t}=pl("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}},this.core=e,this.logger=Cu(t,this.name),this.pairings=new gp(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Pu(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=pl("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Rh,(async e=>{const{topic:t,message:r,transportType:n}=e;if(!this.pairings.keys.includes(t)||n===$h.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))return;const i=await this.core.crypto.decode(t,r);try{gh(i)?(this.core.history.set(t,i),this.onRelayEventRequest({topic:t,payload:i})):mh(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:t,payload:i}),this.core.history.delete(t,i.id))}catch(e){this.logger.error(e)}}))}registerExpirerEvents(){this.core.expirer.on(td,(async e=>{const{topic:t}=uc(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))}))}}class yp extends Mu{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new ti.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=kh,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.records.set(e.id,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;const n={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:hc(fi.THIRTY_DAYS)};this.records.set(n.id,n),this.persist(),this.events.emit(Yh,n)},this.resolve=async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;const t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=bh(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(Jh,t))},this.get=async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)),this.delete=(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach((r=>{if(r.topic===e){if(typeof t<"u"&&r.id!==t)return;this.records.delete(r.id),this.events.emit(Xh,r)}})),this.persist()},this.exists=async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e),this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=Cu(t,this.name)}get context(){return Pu(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:ih(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:t}=pl("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit("history_sync")}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:e}=pl("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Yh,(e=>{const t=Yh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(Jh,(e=>{const t=Jh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(Xh,(e=>{const t=Xh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.core.heartbeat.on(Bl,(()=>{this.cleanup()}))}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach((t=>{(0,fi.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Xh,t,!1),e=!0)})),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=pl("NOT_INITIALIZED",this.name);throw new Error(e)}}}class bp extends Uu{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new ti.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=kh,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.expirations.set(e.target,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=e=>{try{const t=this.formatTarget(e);return typeof this.getExpiration(t)<"u"}catch{return!1}},this.set=(e,t)=>{this.isInitialized();const r=this.formatTarget(e),n={target:r,expiry:t};this.expirations.set(r,n),this.checkExpiry(r,n),this.events.emit(Qh,{target:r,expiration:n})},this.get=e=>{this.isInitialized();const t=this.formatTarget(e);return this.getExpiration(t)},this.del=e=>{if(this.isInitialized(),this.has(e)){const t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(ed,{target:t,expiration:r})}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=Cu(t,this.name)}get context(){return Pu(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function(e){return lc("topic",e)}(e);if("number"==typeof e)return function(e){return lc("id",e)}(e);const{message:t}=pl("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit("expirer_sync")}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:e}=pl("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:t}=pl("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),new Error(t)}return t}checkExpiry(e,t){const{expiry:r}=t;(0,fi.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(td,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(Bl,(()=>this.checkExpirations())),this.events.on(Qh,(e=>{const t=Qh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(td,(e=>{const t=td;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(ed,(e=>{const t=ed;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=pl("NOT_INITIALIZED",this.name);throw new Error(e)}}}class wp extends zu{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,this.name="verify-api",this.verifyUrlV3=id,this.storagePrefix=kh,this.version=2,this.init=async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,fi.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async e=>{if(!Qa()||this.isDevEnv)return;const t=window.location.origin,{id:r,decryptedId:n}=e,i=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${n}`;try{const e=(0,Ah.YE)(),t=this.startAbortTimer(5*fi.ONE_SECOND),n=await new Promise(((n,s)=>{const o=()=>{window.removeEventListener("message",c),e.body.removeChild(a),s("attestation aborted")};this.abortController.signal.addEventListener("abort",o);const a=e.createElement("iframe");a.src=i,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});const c=i=>{if(i.data&&"string"==typeof i.data)try{const s=JSON.parse(i.data);if("verify_attestation"===s.type){if($a(s.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",c),n(null===s.attestation?"":s.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",c,{signal:this.abortController.signal})}));return this.logger.debug("jwt attestation",n),n}catch(e){this.logger.warn(e)}return""},this.resolve=async e=>{if(this.isDevEnv)return"";const{attestationId:t,hash:r,encryptedId:n}=e;if(""===t)return void this.logger.debug("resolve: attestationId is empty, skipping");if(t){if($a(t).payload.id!==n)return;const e=await this.isValidJwtAttestation(t);if(e)return e.isVerified?e:void this.logger.warn("resolve: jwt attestation: origin url not verified")}if(!r)return;const i=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,i)},this.fetchAttestation=async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);const r=this.startAbortTimer(5*fi.ONE_SECOND),n=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===n.status?await n.json():void 0},this.getVerifyUrl=e=>{let t=e||nd;return sd.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${nd}`),t=nd),t},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const e=this.startAbortTimer(fi.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}},this.persistPublicKey=async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async e=>{const t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}const r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise((async e=>{const t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))}));const e=await this.fetchPromise;return this.fetchPromise=void 0,e},this.validateAttestation=(e,t)=>{const r=function(e,t){const[r,n,i]=e.split("."),s=function(e){return Buffer.from(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");const r=t.length%4;return r>0&&(t+="=".repeat(4-r)),t}(e),"base64")}(i);if(64!==s.length)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),c=`${r}.${n}`,l=(new Ys.aD).update(Buffer.from(c)).digest(),u=function(e){return new Ta.ec("p256").keyFromPublic({x:Buffer.from(e.x,"base64").toString("hex"),y:Buffer.from(e.y,"base64").toString("hex")},"hex")}(t),h=Buffer.from(l).toString("hex");if(!u.verify(h,{r:o,s:a}))throw new Error("Invalid signature");return $a(e).payload}(e,t.publicKey),n={hasExpired:(0,fi.toMiliseconds)(r.exp)<Date.now(),payload:r};if(n.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:n.payload.origin,isScam:n.payload.isScam,isVerified:n.payload.isVerified}},this.logger=Cu(t,this.name),this.abortController=new AbortController,this.isDevEnv=yc(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Pu(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),(0,fi.toMiliseconds)(e))}}class vp extends ju{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context="echo",this.registerDeviceToken=async e=>{const{clientId:t,token:r,notificationType:n,enableEncrypted:i=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:n,token:r,always_raw:i})})},this.logger=Cu(t,this.context)}}var _p=Object.defineProperty,Ep=Object.getOwnPropertySymbols,xp=Object.prototype.hasOwnProperty,Sp=Object.prototype.propertyIsEnumerable,Ap=(e,t,r)=>t in e?_p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ip=(e,t)=>{for(var r in t||(t={}))xp.call(t,r)&&Ap(e,r,t[r]);if(Ep)for(var r of Ep(t))Sp.call(t,r)&&Ap(e,r,t[r]);return e};class kp extends Fu{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,this.context="event-client",this.storagePrefix=kh,this.storageVersion=.1,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!yc())try{const e={eventId:mc(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:nc(this.core.relayer.protocol,this.core.relayer.version,Fh)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}},this.createEvent=e=>{const{event:t="ERROR",type:r="",properties:{topic:n,trace:i}}=e,s=mc(),o=this.core.projectId||"",a=Date.now(),c=Ip({eventId:s,timestamp:a,props:{event:t,type:r,properties:{topic:n,trace:i}},bundleId:o,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,c),this.shouldPersist=!0),c},this.getEvent=e=>{const{eventId:t,topic:r}=e;if(t)return this.events.get(t);const n=Array.from(this.events.values()).find((e=>e.props.properties.topic===r));return n?Ip(Ip({},n),this.setMethods(n.eventId)):void 0},this.deleteEvent=e=>{const{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(Bl,(async()=>{this.shouldPersist&&await this.persist(),this.events.forEach((e=>{(0,fi.fromMiliseconds)(Date.now())-(0,fi.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)}))}))},this.setMethods=e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)}),this.addTrace=(e,t)=>{const r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)},this.setError=(e,t)=>{const r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach((e=>{this.events.set(e.eventId,Ip(Ip({},e),this.setMethods(e.eventId)))}))}catch(e){this.logger.warn(e)}},this.submit=async()=>{if(!this.telemetryEnabled||0===this.events.size)return;const e=[];for(const[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(const t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}},this.sendEvent=async e=>{const t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Fh}${t}`,{method:"POST",body:JSON.stringify(e)})},this.getAppDomain=()=>rc().url,this.logger=Cu(t,this.context),this.telemetryEnabled=r,r?this.restore().then((async()=>{await this.submit(),this.setEventListeners()})):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Tp=Object.defineProperty,Pp=Object.getOwnPropertySymbols,Cp=Object.prototype.hasOwnProperty,Op=Object.prototype.propertyIsEnumerable,Mp=(e,t,r)=>t in e?Tp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Rp=(e,t)=>{for(var r in t||(t={}))Cp.call(t,r)&&Mp(e,r,t[r]);if(Pp)for(var r of Pp(t))Op.call(t,r)&&Mp(e,r,t[r]);return e};class Lp extends Ou{constructor(e){var t;super(e),this.protocol="wc",this.version=2,this.name=Ih,this.events=new ti.EventEmitter,this.initialized=!1,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.dispatchEnvelope=({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;const n={topic:e,message:t,publishedAt:Date.now(),transportType:$h.link_mode};this.relayer.onLinkMessageEvent(n,{sessionExists:r})},this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Mh,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const r=Tu({level:"string"==typeof e?.logger&&e.logger?e.logger:"error",name:Ih}),{logger:n,chunkLoggerController:i}=function(e){return typeof e.loggerOverride<"u"&&"string"!=typeof e.loggerOverride?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?function(e){var t,r;const n=new yu(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:du()(ku(Iu({},e.opts),{level:"trace",browser:ku(Iu({},null==(r=e.opts)?void 0:r.browser),{write:e=>n.write(e)})})),chunkLoggerController:n}}(e):function(e){var t;const r=new bu(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:du()(ku(Iu({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}(e)}({opts:r,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=i,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Cu(n,this.name),this.heartbeat=new Dl,this.crypto=new Rf(this,this.logger,e?.keychain),this.history=new yp(this,this.logger),this.expirer=new bp(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new uu(Rp(Rp({},Th),e?.storageOptions)),this.relayer=new cp({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new mp(this,this.logger),this.verify=new wp(this,this.logger,this.storage),this.echoClient=new vp(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new kp(this,this.logger,e?.telemetryEnabled)}static async init(e){const t=new Lp(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return Pu(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(qh,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(qh)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const Np=Lp,Bp="client",Dp=`wc@2:${Bp}:`,Up=Bp,zp="WALLETCONNECT_DEEPLINK_CHOICE",jp="Proposal expired",Fp=fi.SEVEN_DAYS,$p={wc_sessionPropose:{req:{ttl:fi.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:fi.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:fi.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:fi.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:fi.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:fi.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:fi.ONE_DAY,prompt:!1,tag:1104},res:{ttl:fi.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:fi.ONE_DAY,prompt:!1,tag:1106},res:{ttl:fi.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:fi.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:fi.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:fi.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:fi.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:fi.ONE_DAY,prompt:!1,tag:1112},res:{ttl:fi.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:fi.ONE_DAY,prompt:!1,tag:1114},res:{ttl:fi.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:fi.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:fi.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:fi.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:fi.FIVE_MINUTES,prompt:!1,tag:1119}}},qp={min:fi.FIVE_MINUTES,max:fi.SEVEN_DAYS},Wp="IDLE",Hp="ACTIVE",Vp=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Kp="wc@1.5:auth:",Gp=`${Kp}:PUB_KEY`;var Zp=Object.defineProperty,Yp=Object.defineProperties,Jp=Object.getOwnPropertyDescriptors,Xp=Object.getOwnPropertySymbols,Qp=Object.prototype.hasOwnProperty,eg=Object.prototype.propertyIsEnumerable,tg=(e,t,r)=>t in e?Zp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rg=(e,t)=>{for(var r in t||(t={}))Qp.call(t,r)&&tg(e,r,t[r]);if(Xp)for(var r of Xp(t))eg.call(t,r)&&tg(e,r,t[r]);return e},ng=(e,t)=>Yp(e,Jp(t));class ig extends qu{constructor(e){super(e),this.name="engine",this.events=new(ri()),this.initialized=!1,this.requestQueue={state:Wp,queue:[]},this.sessionRequestQueue={state:Wp,queue:[]},this.requestQueueDelay=fi.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys($p)}),this.initialized=!0,setTimeout((()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,fi.toMiliseconds)(this.requestQueueDelay)))},this.connect=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const t=ng(rg({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);const{pairingTopic:r,requiredNamespaces:n,optionalNamespaces:i,sessionProperties:s,relays:o}=t;let a,c=r,l=!1;try{if(c){const e=this.client.core.pairing.pairings.get(c);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),l=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${c}) failed`),e}if(!c||!l){const{topic:e,uri:t}=await this.client.core.pairing.create();c=e,a=t}if(!c){const{message:e}=pl("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw new Error(e)}const u=await this.client.core.crypto.generateKeyPair(),h=$p.wc_sessionPropose.req.ttl||fi.FIVE_MINUTES,d=hc(h),f=rg({requiredNamespaces:n,optionalNamespaces:i,relays:o??[{protocol:"irn"}],proposer:{publicKey:u,metadata:this.client.metadata},expiryTimestamp:d,pairingTopic:c},s&&{sessionProperties:s}),{reject:p,resolve:g,done:m}=ac(h,jp);this.events.once(fc("session_connect"),(async({error:e,session:t})=>{if(e)p(e);else if(t){t.self.publicKey=u;const e=ng(rg({},t),{pairingTopic:f.pairingTopic,requiredNamespaces:f.requiredNamespaces,optionalNamespaces:f.optionalNamespaces,transportType:$h.relay});await this.client.session.set(t.topic,e),await this.setExpiry(t.topic,t.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:t.peer.metadata}),this.cleanupDuplicatePairings(e),g(e)}}));const y=await this.sendRequest({topic:c,method:"wc_sessionPropose",params:f,throwOnFailedPublish:!0});return await this.setProposal(y,rg({id:y},f)),{uri:a,approval:m}},this.pair=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}},this.approve=async e=>{var t,r,n;const i=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[ad]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw i.setError("no_internet_connection"),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),i.setError("proposal_not_found"),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),i.setError("session_approve_namespace_validation_failure"),e}const{id:s,relayProtocol:o,namespaces:a,sessionProperties:c,sessionConfig:l}=e,u=this.client.proposal.get(s);this.client.core.eventClient.deleteEvent({eventId:i.eventId});const{pairingTopic:h,proposer:d,requiredNamespaces:f,optionalNamespaces:p}=u;let g=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:h});g||(g=null==(n=this.client.core.eventClient)?void 0:n.createEvent({type:ad,properties:{topic:h,trace:[ad,"session_namespaces_validation_success"]}}));const m=await this.client.core.crypto.generateKeyPair(),y=d.publicKey,b=await this.client.core.crypto.generateSharedKey(m,y),w=rg(rg({relay:{protocol:o??"irn"},namespaces:a,controller:{publicKey:m,metadata:this.client.metadata},expiry:hc(Fp)},c&&{sessionProperties:c}),l&&{sessionConfig:l}),v=$h.relay;g.addTrace("subscribing_session_topic");try{await this.client.core.relayer.subscribe(b,{transportType:v})}catch(e){throw g.setError("subscribe_session_topic_failure"),e}g.addTrace("subscribe_session_topic_success");const _=ng(rg({},w),{topic:b,requiredNamespaces:f,optionalNamespaces:p,pairingTopic:h,acknowledged:!1,self:w.controller,peer:{publicKey:d.publicKey,metadata:d.metadata},controller:m,transportType:$h.relay});await this.client.session.set(b,_),g.addTrace("store_session");try{g.addTrace("publishing_session_settle"),await this.sendRequest({topic:b,method:"wc_sessionSettle",params:w,throwOnFailedPublish:!0}).catch((e=>{throw g?.setError("session_settle_publish_failure"),e})),g.addTrace("session_settle_publish_success"),g.addTrace("publishing_session_approve"),await this.sendResult({id:s,topic:h,result:{relay:{protocol:o??"irn"},responderPublicKey:m},throwOnFailedPublish:!0}).catch((e=>{throw g?.setError("session_approve_publish_failure"),e})),g.addTrace("session_approve_publish_success")}catch(e){throw this.client.logger.error(e),this.client.session.delete(b,gl("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(b),e}return this.client.core.eventClient.deleteEvent({eventId:g.eventId}),await this.client.core.pairing.updateMetadata({topic:h,metadata:d.metadata}),await this.client.proposal.delete(s,gl("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:h}),await this.setExpiry(b,hc(Fp)),{topic:b,acknowledged:()=>Promise.resolve(this.client.session.get(b))}},this.reject=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}const{id:t,reason:r}=e;let n;try{n=this.client.proposal.get(t).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${t}) failed`),e}n&&(await this.sendError({id:t,topic:n,error:r,rpcOpts:$p.wc_sessionPropose.reject}),await this.client.proposal.delete(t,gl("USER_DISCONNECTED")))},this.update=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}const{topic:t,namespaces:r}=e,{done:n,resolve:i,reject:s}=ac(),o=rh(),a=nh().toString(),c=this.client.session.get(t).namespaces;return this.events.once(fc("session_update",o),(({error:e})=>{e?s(e):i()})),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch((e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),s(e)})),{acknowledged:n}},this.extend=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}const{topic:t}=e,r=rh(),{done:n,resolve:i,reject:s}=ac();return this.events.once(fc("session_extend",r),(({error:e})=>{e?s(e):i()})),await this.setExpiry(t,hc(Fp)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch((e=>{s(e)})),{acknowledged:n}},this.request=async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}const{chainId:t,request:n,topic:i,expiry:s=$p.wc_sessionRequest.req.ttl}=e,o=this.client.session.get(i);o?.transportType===$h.relay&&await this.confirmOnlineStateOrThrow();const a=rh(),c=nh().toString(),{done:l,resolve:u,reject:h}=ac(s,"Request expired. Please try again.");this.events.once(fc("session_request",a),(({error:e,result:t})=>{e?h(e):u(t)}));const d=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);return d?(await this.sendRequest({clientRpcId:a,relayRpcId:c,topic:i,method:"wc_sessionRequest",params:{request:ng(rg({},n),{expiryTimestamp:hc(s)}),chainId:t},expiry:s,throwOnFailedPublish:!0,appLink:d}).catch((e=>h(e))),this.client.events.emit("session_request_sent",{topic:i,request:n,chainId:t,id:a}),await l()):await Promise.all([new Promise((async e=>{await this.sendRequest({clientRpcId:a,relayRpcId:c,topic:i,method:"wc_sessionRequest",params:{request:ng(rg({},n),{expiryTimestamp:hc(s)}),chainId:t},expiry:s,throwOnFailedPublish:!0}).catch((e=>h(e))),this.client.events.emit("session_request_sent",{topic:i,request:n,chainId:t,id:a}),e()})),new Promise((async e=>{var t;if(null==(t=o.sessionConfig)||!t.disableDeepLink){const e=await async function(e,t){let r="";try{if(Qa()&&(r=localStorage.getItem(t),r))return r;r=await e.getItem(t)}catch(e){console.error(e)}return r}(this.client.core.storage,zp);await async function({id:e,topic:t,wcDeepLink:n}){var i;try{if(!n)return;const s="string"==typeof n?JSON.parse(n):n,o=s?.href;if("string"!=typeof o)return;const a=function(e,t,r){const n=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;return i=e.startsWith("https://t.me")?`${i}${e.includes("?")?"&startapp=":"?startapp="}${function(e,t=!1){const r=Buffer.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}(n,!0)}`:`${i}/wc?${n}`,i}(o,e,t),c=ec();if(c===Za){if(null==(i=(0,pi.getDocument)())||!i.hasFocus())return void console.warn("Document does not have focus, skipping deeplink.");!function(e){let t="_self";!function(){try{return window.self!==window.top}catch{return!1}}()?(typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"):t="_top",window.open(e,t,"noreferrer noopener")}(a)}else c===Ga&&typeof(null==r.g?void 0:r.g.Linking)<"u"&&await r.g.Linking.openURL(a)}catch(e){console.error(e)}}({id:a,topic:i,wcDeepLink:e})}e()})),l()]).then((e=>e[2]))},this.respond=async e=>{this.isInitialized(),await this.isValidRespond(e);const{topic:t,response:r}=e,{id:n}=r,i=this.client.session.get(t);i.transportType===$h.relay&&await this.confirmOnlineStateOrThrow();const s=this.getAppLinkIfEnabled(i.peer.metadata,i.transportType);yh(r)?await this.sendResult({id:n,topic:t,result:r.result,throwOnFailedPublish:!0,appLink:s}):bh(r)&&await this.sendError({id:n,topic:t,error:r.error,appLink:s}),this.cleanupAfterResponse(e)},this.ping=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}const{topic:t}=e;if(this.client.session.keys.includes(t)){const e=rh(),r=nh().toString(),{done:n,resolve:i,reject:s}=ac();this.events.once(fc("session_ping",e),(({error:e})=>{e?s(e):i()})),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),n()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))},this.emit=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);const{topic:t,event:r,chainId:n}=e,i=nh().toString(),s=rh();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:n},throwOnFailedPublish:!0,relayRpcId:i,clientRpcId:s})},this.disconnect=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);const{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:gl("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else{if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=pl("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw new Error(e)}await this.client.core.pairing.disconnect({topic:t})}},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter((t=>function(e,t){const{requiredNamespaces:r}=t,n=Object.keys(e.namespaces),i=Object.keys(r);let s=!0;return!!ic(i,n)&&(n.forEach((t=>{const{accounts:n,methods:i,events:o}=e.namespaces[t],a=cl(n),c=r[t];ic(Ka(t,c),a)&&ic(c.methods,i)&&ic(c.events,o)||(s=!1)})),s)}(t,e)))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(e,t)=>{var r;this.isInitialized(),this.isValidAuthenticate(e);const n=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),i=n?$h.link_mode:$h.relay;i===$h.relay&&await this.confirmOnlineStateOrThrow();const{chains:s,statement:o="",uri:a,domain:c,nonce:l,type:u,exp:h,nbf:d,methods:f=[],expiry:p}=e,g=[...e.resources||[]],{topic:m,uri:y}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:i});this.client.logger.info({message:"Generated new pairing",pairing:{topic:m,uri:y}});const b=await this.client.core.crypto.generateKeyPair(),w=Vc(b);if(await Promise.all([this.client.auth.authKeys.set(Gp,{responseTopic:w,publicKey:b}),this.client.auth.pairingTopics.set(w,{topic:w,pairingTopic:m})]),await this.client.core.relayer.subscribe(w,{transportType:i}),this.client.logger.info(`sending request to new pairing topic: ${m}`),f.length>0){const{namespace:e}=Ha(s[0]);let t=function(e,t,r){const n=function(e,t,r,n={}){return r?.sort(((e,t)=>e.localeCompare(t))),{att:{[e]:Rc(t,r,n)}}}(e,t,r);return Lc(n)}(e,"request",f);zc(g)&&(t=Bc(t,g.pop())),g.push(t)}const v=p&&p>$p.wc_sessionAuthenticate.req.ttl?p:$p.wc_sessionAuthenticate.req.ttl,_={authPayload:{type:u??"caip122",chains:s,statement:o,aud:a,domain:c,version:"1",nonce:l,iat:(new Date).toISOString(),exp:h,nbf:d,resources:g},requester:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:hc(v)},E={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:s,methods:[...new Set(["personal_sign",...f])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:m,proposer:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:hc($p.wc_sessionPropose.req.ttl)},{done:x,resolve:S,reject:A}=ac(v,"Request expired"),I=async({error:e,session:t})=>{if(this.events.off(fc("session_request",T),k),e)A(e);else if(t){t.self.publicKey=b,await this.client.session.set(t.topic,t),await this.setExpiry(t.topic,t.expiry),m&&await this.client.core.pairing.updateMetadata({topic:m,metadata:t.peer.metadata});const e=this.client.session.get(t.topic);await this.deleteProposal(P),S({session:e})}},k=async e=>{var r,n,s;if(await this.deletePendingAuthRequest(T,{message:"fulfilled",code:0}),e.error){const t=gl("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(fc("session_connect"),I),A(e.error.message))}await this.deleteProposal(P),this.events.off(fc("session_connect"),I);const{cacaos:o,responder:a}=e.result,c=[],l=[];for(const e of o){await Cc({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),A(gl("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:t}=e,r=zc(t.resources),n=[Tc(t.iss)],i=Pc(t.iss);if(r){const e=Dc(r),t=Uc(r);c.push(...e),n.push(...t)}for(const e of n)l.push(`${e}:${i}`)}const u=await this.client.core.crypto.generateSharedKey(b,a.publicKey);let h;c.length>0&&(h={topic:u,acknowledged:!0,self:{publicKey:b,metadata:this.client.metadata},peer:a,controller:a.publicKey,expiry:hc(Fp),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:m,namespaces:hl([...new Set(c)],[...new Set(l)]),transportType:i},await this.client.core.relayer.subscribe(u,{transportType:i}),await this.client.session.set(u,h),m&&await this.client.core.pairing.updateMetadata({topic:m,metadata:a.metadata}),h=this.client.session.get(u)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(n=a.metadata.redirect)&&n.linkMode&&null!=(s=a.metadata.redirect)&&s.universal&&t&&(this.client.core.addLinkModeSupportedApp(a.metadata.redirect.universal),this.client.session.update(u,{transportType:$h.link_mode})),S({auths:o,session:h})},T=rh(),P=rh();let C;this.events.once(fc("session_connect"),I),this.events.once(fc("session_request",T),k);try{if(n){const e=ih("wc_sessionAuthenticate",_,T);this.client.core.history.set(m,e);const r=await this.client.core.crypto.encode("",e,{type:2,encoding:qc});C=al(t,m,r)}else await Promise.all([this.sendRequest({topic:m,method:"wc_sessionAuthenticate",params:_,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:T}),this.sendRequest({topic:m,method:"wc_sessionPropose",params:E,expiry:$p.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:P})])}catch(e){throw this.events.off(fc("session_connect"),I),this.events.off(fc("session_request",T),k),e}return await this.setProposal(P,rg({id:P},E)),await this.setAuthRequest(T,{request:ng(rg({},_),{verifyContext:{}}),pairingTopic:m,transportType:i}),{uri:C??y,response:x}},this.approveSessionAuthenticate=async e=>{const{id:t,auths:r}=e,n=this.client.core.eventClient.createEvent({properties:{topic:t.toString(),trace:["authenticated_session_approve_started"]}});try{this.isInitialized()}catch(e){throw n.setError("no_internet_connection"),e}const i=this.getPendingAuthRequest(t);if(!i)throw n.setError("authenticated_session_pending_request_not_found"),new Error(`Could not find pending auth request with id ${t}`);const s=i.transportType||$h.relay;s===$h.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Vc(o),l={type:1,receiverPublicKey:o,senderPublicKey:a},u=[],h=[];for(const e of r){if(!await Cc({cacao:e,projectId:this.client.core.projectId})){n.setError("invalid_cacao");const e=gl("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:t,topic:c,error:e,encodeOpts:l}),new Error(e.message)}n.addTrace("cacaos_verified");const{p:r}=e,i=zc(r.resources),s=[Tc(r.iss)],o=Pc(r.iss);if(i){const e=Dc(i),t=Uc(i);u.push(...e),s.push(...t)}for(const e of s)h.push(`${e}:${o}`)}const d=await this.client.core.crypto.generateSharedKey(a,o);let f;if(n.addTrace("create_authenticated_session_topic"),u?.length>0){f={topic:d,acknowledged:!0,self:{publicKey:a,metadata:this.client.metadata},peer:{publicKey:o,metadata:i.requester.metadata},controller:o,expiry:hc(Fp),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:i.pairingTopic,namespaces:hl([...new Set(u)],[...new Set(h)]),transportType:s},n.addTrace("subscribing_authenticated_session_topic");try{await this.client.core.relayer.subscribe(d,{transportType:s})}catch(e){throw n.setError("subscribe_authenticated_session_topic_failure"),e}n.addTrace("subscribe_authenticated_session_topic_success"),await this.client.session.set(d,f),n.addTrace("store_authenticated_session"),await this.client.core.pairing.updateMetadata({topic:i.pairingTopic,metadata:i.requester.metadata})}n.addTrace("publishing_authenticated_session_approve");try{await this.sendResult({topic:c,id:t,result:{cacaos:r,responder:{publicKey:a,metadata:this.client.metadata}},encodeOpts:l,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(i.requester.metadata,s)})}catch(e){throw n.setError("authenticated_session_approve_publish_failure"),e}return await this.client.auth.requests.delete(t,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:i.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:f}},this.rejectSessionAuthenticate=async e=>{this.isInitialized();const{id:t,reason:r}=e,n=this.getPendingAuthRequest(t);if(!n)throw new Error(`Could not find pending auth request with id ${t}`);n.transportType===$h.relay&&await this.confirmOnlineStateOrThrow();const i=n.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=Vc(i),a={type:1,receiverPublicKey:i,senderPublicKey:s};await this.sendError({id:t,topic:o,error:r,encodeOpts:a,rpcOpts:$p.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(n.requester.metadata,n.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,gl("USER_DISCONNECTED"))},this.formatAuthMessage=e=>{this.isInitialized();const{request:t,iss:r}=e;return Oc(t,r)},this.processRelayMessageCache=()=>{setTimeout((async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{const e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}}),50)},this.cleanupDuplicatePairings=async e=>{if(e.pairingTopic)try{const t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter((r=>{var n,i;return(null==(n=r.peerMetadata)?void 0:n.url)&&(null==(i=r.peerMetadata)?void 0:i.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic}));if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map((e=>this.client.core.pairing.disconnect({topic:e.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}},this.deleteSession=async e=>{var t;const{topic:r,expirerHasDeleted:n=!1,emitEvent:i=!0,id:s=0}=e,{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,gl("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(zp).catch((e=>this.client.logger.warn(e))),this.getPendingSessionRequests().forEach((e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,gl("USER_DISCONNECTED"))})),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=Wp),i&&this.client.events.emit("session_delete",{id:s,topic:r})},this.deleteProposal=async(e,t)=>{if(t)try{const t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError("proposal_expired")}catch{}await Promise.all([this.client.proposal.delete(e,gl("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")},this.deletePendingSessionRequest=async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((t=>t.id!==e)),r&&(this.sessionRequestQueue.state=Wp,this.client.events.emit("session_request_expire",{id:e}))},this.deletePendingAuthRequest=async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])},this.setExpiry=async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))},this.setProposal=async(e,t)=>{this.client.core.expirer.set(e,hc($p.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)},this.setAuthRequest=async(e,t)=>{const{request:r,pairingTopic:n,transportType:i=$h.relay}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:n,verifyContext:r.verifyContext,transportType:i})},this.setPendingSessionRequest=async e=>{const{id:t,topic:r,params:n,verifyContext:i}=e,s=n.request.expiryTimestamp||hc($p.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:r,params:n,verifyContext:i})},this.sendRequest=async e=>{const{topic:t,method:n,params:i,expiry:s,relayRpcId:o,clientRpcId:a,throwOnFailedPublish:c,appLink:l}=e,u=ih(n,i,a);let h;const d=!!l;try{const e=d?qc:$c;h=await this.client.core.crypto.encode(t,u,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${t} failed`),e}let f;if(Vp.includes(n)){const e=Kc(JSON.stringify(u)),t=Kc(h);f=await this.client.core.verify.register({id:t,decryptedId:e})}const p=$p[n].req;if(p.attestation=f,s&&(p.ttl=s),o&&(p.id=o),this.client.core.history.set(t,u),d){const e=al(l,t,h);await r.g.Linking.openURL(e,this.client.name)}else{const e=$p[n].req;s&&(e.ttl=s),o&&(e.id=o),c?(e.internal=ng(rg({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,h,e)):this.client.core.relayer.publish(t,h,e).catch((e=>this.client.logger.error(e)))}return u.id},this.sendResult=async e=>{const{id:t,topic:n,result:i,throwOnFailedPublish:s,encodeOpts:o,appLink:a}=e,c=sh(t,i);let l;const u=a&&typeof(null==r.g?void 0:r.g.Linking)<"u";try{const e=u?qc:$c;l=await this.client.core.crypto.encode(n,c,ng(rg({},o||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),e}let h;try{h=await this.client.core.history.get(n,t)}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${t}) failed`),e}if(u){const e=al(a,n,l);await r.g.Linking.openURL(e,this.client.name)}else{const e=$p[h.request.method].res;s?(e.internal=ng(rg({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,l,e)):this.client.core.relayer.publish(n,l,e).catch((e=>this.client.logger.error(e)))}await this.client.core.history.resolve(c)},this.sendError=async e=>{const{id:t,topic:n,error:i,encodeOpts:s,rpcOpts:o,appLink:a}=e,c=oh(t,i);let l;const u=a&&typeof(null==r.g?void 0:r.g.Linking)<"u";try{const e=u?qc:$c;l=await this.client.core.crypto.encode(n,c,ng(rg({},s||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),e}let h;try{h=await this.client.core.history.get(n,t)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${n}, ${t}) failed`),e}if(u){const e=al(a,n,l);await r.g.Linking.openURL(e,this.client.name)}else{const e=o||$p[h.request.method].res;this.client.core.relayer.publish(n,l,e)}await this.client.core.history.resolve(c)},this.cleanup=async()=>{const e=[],t=[];this.client.session.getAll().forEach((t=>{let r=!1;dc(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)})),this.client.proposal.getAll().forEach((e=>{dc(e.expiryTimestamp)&&t.push(e.id)})),await Promise.all([...e.map((e=>this.deleteSession({topic:e}))),...t.map((e=>this.deleteProposal(e)))])},this.onRelayEventRequest=async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state!==Hp){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Hp;const e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=Wp}else this.client.logger.info("Request queue already active, skipping...")},this.processRequest=async e=>{const{topic:t,payload:r,attestation:n,transportType:i,encryptedId:s}=e,o=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:n,encryptedId:s});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:n,encryptedId:s,transportType:i});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:n,encryptedId:s,transportType:i});default:return this.client.logger.info(`Unsupported request method ${o}`)}},this.onRelayEventResponse=async e=>{const{topic:t,payload:r,transportType:n}=e,i=(await this.client.core.history.get(t,r.id)).request.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,n);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${i}`)}},this.onRelayEventUnknownPayload=e=>{const{topic:t}=e,{message:r}=pl("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(r)},this.shouldIgnorePairingRequest=e=>{const{topic:t,requestMethod:r}=e,n=this.expectedPairingMethodMap.get(t);return!(!n||n.includes(r)||!(n.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0))},this.onSessionProposeRequest=async e=>{const{topic:t,payload:r,attestation:n,encryptedId:i}=e,{params:s,id:o}=r;try{const e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError("proposal_listener_not_found")),this.isValidConnect(rg({},r.params));const a=s.expiryTimestamp||hc($p.wc_sessionPropose.req.ttl),c=rg({id:o,pairingTopic:t,expiryTimestamp:a},s);await this.setProposal(o,c);const l=await this.getVerifyContext({attestationId:n,hash:Kc(JSON.stringify(r)),encryptedId:i,metadata:c.proposer.metadata});e?.addTrace("emit_session_proposal"),this.client.events.emit("session_proposal",{id:o,params:c,verifyContext:l})}catch(e){await this.sendError({id:o,topic:t,error:e,rpcOpts:$p.wc_sessionPropose.autoReject}),this.client.logger.error(e)}},this.onSessionProposeResponse=async(e,t,r)=>{const{id:n}=t;if(yh(t)){const{result:i}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});const s=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});const o=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const a=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});const c=await this.client.core.crypto.generateSharedKey(o,a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:c});const l=await this.client.core.relayer.subscribe(c,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:l}),await this.client.core.pairing.activate({topic:e})}else if(bh(t)){await this.client.proposal.delete(n,gl("USER_DISCONNECTED"));const e=fc("session_connect");if(0===this.events.listenerCount(e))throw new Error(`emitting ${e} without any listeners, 954`);this.events.emit(fc("session_connect"),{error:t.error})}},this.onSessionSettleRequest=async(e,t)=>{const{id:r,params:n}=t;try{this.isValidSessionSettleRequest(n);const{relay:r,controller:i,expiry:s,namespaces:o,sessionProperties:a,sessionConfig:c}=t.params,l=ng(rg(rg({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:i.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:i.publicKey,metadata:i.metadata}},a&&{sessionProperties:a}),c&&{sessionConfig:c}),{transportType:$h.relay}),u=fc("session_connect");if(0===this.events.listenerCount(u))throw new Error(`emitting ${u} without any listeners 997`);this.events.emit(fc("session_connect"),{session:l}),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionSettleResponse=async(e,t)=>{const{id:r}=t;yh(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(fc("session_approve",r),{})):bh(t)&&(await this.client.session.delete(e,gl("USER_DISCONNECTED")),this.events.emit(fc("session_approve",r),{error:t.error}))},this.onSessionUpdateRequest=async(e,t)=>{const{params:r,id:n}=t;try{const t=`${e}_session_update`,i=Ml.get(t);if(i&&this.isRequestOutOfSync(i,n))return this.client.logger.warn(`Discarding out of sync request - ${n}`),void this.sendError({id:n,topic:e,error:gl("INVALID_UPDATE_REQUEST")});this.isValidUpdate(rg({topic:e},r));try{Ml.set(t,n),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:n,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw Ml.delete(t),e}this.client.events.emit("session_update",{id:n,topic:e,params:r})}catch(t){await this.sendError({id:n,topic:e,error:t}),this.client.logger.error(t)}},this.isRequestOutOfSync=(e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3),this.onSessionUpdateResponse=(e,t)=>{const{id:r}=t,n=fc("session_update",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);yh(t)?this.events.emit(fc("session_update",r),{}):bh(t)&&this.events.emit(fc("session_update",r),{error:t.error})},this.onSessionExtendRequest=async(e,t)=>{const{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,hc(Fp)),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionExtendResponse=(e,t)=>{const{id:r}=t,n=fc("session_extend",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);yh(t)?this.events.emit(fc("session_extend",r),{}):bh(t)&&this.events.emit(fc("session_extend",r),{error:t.error})},this.onSessionPingRequest=async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionPingResponse=(e,t)=>{const{id:r}=t,n=fc("session_ping",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);setTimeout((()=>{yh(t)?this.events.emit(fc("session_ping",r),{}):bh(t)&&this.events.emit(fc("session_ping",r),{error:t.error})}),500)},this.onSessionDeleteRequest=async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise((t=>{this.client.core.relayer.once(Bh,(async()=>{t(await this.deleteSession({topic:e,id:r}))}))})),this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:gl("USER_DISCONNECTED")})]).catch((e=>this.client.logger.error(e)))}catch(e){this.client.logger.error(e)}},this.onSessionRequest=async e=>{var t,r,n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=e,{id:l,params:u}=s;try{await this.isValidRequest(rg({topic:i},u));const e=this.client.session.get(i),s={id:l,topic:i,params:u,verifyContext:await this.getVerifyContext({attestationId:o,hash:Kc(JSON.stringify(ih("wc_sessionRequest",u,l))),encryptedId:a,metadata:e.peer.metadata,transportType:c})};await this.setPendingSessionRequest(s),c===$h.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(n=this.client.signConfig)&&n.disableRequestQueue?this.emitSessionRequest(s):(this.addSessionRequestToSessionRequestQueue(s),this.processSessionRequestQueue())}catch(e){await this.sendError({id:l,topic:i,error:e}),this.client.logger.error(e)}},this.onSessionRequestResponse=(e,t)=>{const{id:r}=t,n=fc("session_request",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);yh(t)?this.events.emit(fc("session_request",r),{result:t.result}):bh(t)&&this.events.emit(fc("session_request",r),{error:t.error})},this.onSessionEventRequest=async(e,t)=>{const{id:r,params:n}=t;try{const t=`${e}_session_event_${n.event.name}`,i=Ml.get(t);if(i&&this.isRequestOutOfSync(i,r))return void this.client.logger.info(`Discarding out of sync request - ${r}`);this.isValidEmit(rg({topic:e},n)),this.client.events.emit("session_event",{id:r,topic:e,params:n}),Ml.set(t,r)}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionAuthenticateResponse=(e,t)=>{const{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),yh(t)?this.events.emit(fc("session_request",r),{result:t.result}):bh(t)&&this.events.emit(fc("session_request",r),{error:t.error})},this.onSessionAuthenticateRequest=async e=>{var t;const{topic:r,payload:n,attestation:i,encryptedId:s,transportType:o}=e;try{const{requester:e,authPayload:a,expiryTimestamp:c}=n.params,l=await this.getVerifyContext({attestationId:i,hash:Kc(JSON.stringify(n)),encryptedId:s,metadata:e.metadata,transportType:o}),u={requester:e,pairingTopic:r,id:n.id,authPayload:a,verifyContext:l,expiryTimestamp:c};await this.setAuthRequest(n.id,{request:u,pairingTopic:r,transportType:o}),o===$h.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:n.params,id:n.id,verifyContext:l})}catch(e){this.client.logger.error(e);const t=n.params.requester.publicKey,i=await this.client.core.crypto.generateKeyPair(),s=this.getAppLinkIfEnabled(n.params.requester.metadata,o),a={type:1,receiverPublicKey:t,senderPublicKey:i};await this.sendError({id:n.id,topic:r,error:e,encodeOpts:a,rpcOpts:$p.wc_sessionAuthenticate.autoReject,appLink:s})}},this.addSessionRequestToSessionRequestQueue=e=>{this.sessionRequestQueue.queue.push(e)},this.cleanupAfterResponse=e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=Wp,this.processSessionRequestQueue()}),(0,fi.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:e,error:t})=>{const r=this.client.core.history.pending;r.length>0&&r.filter((t=>t.topic===e&&"wc_sessionRequest"===t.request.method)).forEach((e=>{const r=fc("session_request",e.request.id);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);this.events.emit(fc("session_request",e.request.id),{error:t})}))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Hp)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.sessionRequestQueue.state=Hp,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}else this.client.logger.info("session request queue is empty.")},this.emitSessionRequest=e=>{this.client.events.emit("session_request",e)},this.onPairingCreated=e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;const t=this.client.proposal.getAll().find((t=>t.pairingTopic===e.topic));t&&this.onSessionProposeRequest({topic:e.topic,payload:ih("wc_sessionPropose",{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties},t.id)})},this.isValidConnect=async e=>{if(!Il(e)){const{message:t}=pl("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(t)}const{pairingTopic:t,requiredNamespaces:r,optionalNamespaces:n,sessionProperties:i,relays:s}=e;if(bl(t)||await this.isValidPairingTopic(t),!function(e){let t=!1;return e?e&&ml(e)&&e.length&&e.forEach((e=>{t=Al(e)})):t=!0,t}(s)){const{message:e}=pl("MISSING_OR_INVALID",`connect() relays: ${s}`);throw new Error(e)}!bl(r)&&0!==yl(r)&&this.validateNamespaces(r,"requiredNamespaces"),!bl(n)&&0!==yl(n)&&this.validateNamespaces(n,"optionalNamespaces"),bl(i)||this.validateSessionProps(i,"sessionProperties")},this.validateNamespaces=(e,t)=>{const r=function(e,t,r){let n=null;if(e&&yl(e)){const i=xl(e,t);i&&(n=i);const s=function(e,t,r){let n=null;return Object.entries(e).forEach((([e,i])=>{if(n)return;const s=function(e,t,r){let n=null;return ml(t)&&t.length?t.forEach((e=>{n||_l(e)||(n=gl("UNSUPPORTED_CHAINS",`${r}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):_l(e)||(n=gl("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}(e,Ka(e,i),`${t} ${r}`);s&&(n=s)})),n}(e,t,r);s&&(n=s)}else n=pl("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return n}(e,"connect()",t);if(r)throw new Error(r.message)},this.isValidApprove=async e=>{if(!Il(e))throw new Error(pl("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:t,namespaces:r,relayProtocol:n,sessionProperties:i}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);const s=this.client.proposal.get(t),o=Sl(r,"approve()");if(o)throw new Error(o.message);const a=Tl(s.requiredNamespaces,r,"approve()");if(a)throw new Error(a.message);if(!wl(n,!0)){const{message:e}=pl("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw new Error(e)}bl(i)||this.validateSessionProps(i,"sessionProperties")},this.isValidReject=async e=>{if(!Il(e)){const{message:t}=pl("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(t)}const{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!function(e){return!!(e&&"object"==typeof e&&e.code&&vl(e.code,!1)&&e.message&&wl(e.message,!1))}(r)){const{message:e}=pl("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw new Error(e)}},this.isValidSessionSettleRequest=e=>{if(!Il(e)){const{message:t}=pl("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(t)}const{relay:t,controller:r,namespaces:n,expiry:i}=e;if(!Al(t)){const{message:e}=pl("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(e)}const s=function(e){let t=null;return wl(e?.publicKey,!1)||(t=pl("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t}(r);if(s)throw new Error(s.message);const o=Sl(n,"onSessionSettleRequest()");if(o)throw new Error(o.message);if(dc(i)){const{message:e}=pl("EXPIRED","onSessionSettleRequest()");throw new Error(e)}},this.isValidUpdate=async e=>{if(!Il(e)){const{message:t}=pl("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(t)}const{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const n=this.client.session.get(t),i=Sl(r,"update()");if(i)throw new Error(i.message);const s=Tl(n.requiredNamespaces,r,"update()");if(s)throw new Error(s.message)},this.isValidExtend=async e=>{if(!Il(e)){const{message:t}=pl("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)},this.isValidRequest=async e=>{if(!Il(e)){const{message:t}=pl("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(t)}const{topic:t,request:r,chainId:n,expiry:i}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const{namespaces:s}=this.client.session.get(t);if(!kl(s,n)){const{message:e}=pl("MISSING_OR_INVALID",`request() chainId: ${n}`);throw new Error(e)}if(!function(e){return!(bl(e)||!wl(e.method,!1))}(r)){const{message:e}=pl("MISSING_OR_INVALID",`request() ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,r){return!!wl(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{cl(e.accounts).includes(t)&&r.push(...e.methods)})),r}(e,t).includes(r)}(s,n,r.method)){const{message:e}=pl("MISSING_OR_INVALID",`request() method: ${r.method}`);throw new Error(e)}if(i&&!function(e,t){return vl(e,!1)&&e<=t.max&&e>=t.min}(i,qp)){const{message:e}=pl("MISSING_OR_INVALID",`request() expiry: ${i}. Expiry must be a number (in seconds) between ${qp.min} and ${qp.max}`);throw new Error(e)}},this.isValidRespond=async e=>{var t;if(!Il(e)){const{message:t}=pl("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(t)}const{topic:r,response:n}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(!function(e){return!(bl(e)||bl(e.result)&&bl(e.error)||!vl(e.id,!1)||!wl(e.jsonrpc,!1))}(n)){const{message:e}=pl("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(n)}`);throw new Error(e)}},this.isValidPing=async e=>{if(!Il(e)){const{message:t}=pl("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidEmit=async e=>{if(!Il(e)){const{message:t}=pl("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(t)}const{topic:t,event:r,chainId:n}=e;await this.isValidSessionTopic(t);const{namespaces:i}=this.client.session.get(t);if(!kl(i,n)){const{message:e}=pl("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw new Error(e)}if(!function(e){return!(bl(e)||!wl(e.name,!1))}(r)){const{message:e}=pl("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,r){return!!wl(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{cl(e.accounts).includes(t)&&r.push(...e.events)})),r}(e,t).includes(r)}(i,n,r.name)){const{message:e}=pl("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}},this.isValidDisconnect=async e=>{if(!Il(e)){const{message:t}=pl("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidAuthenticate=e=>{const{chains:t,uri:r,domain:n,nonce:i}=e;if(!Array.isArray(t)||0===t.length)throw new Error("chains is required and must be a non-empty array");if(!wl(r,!1))throw new Error("uri is required parameter");if(!wl(n,!1))throw new Error("domain is required parameter");if(!wl(i,!1))throw new Error("nonce is required parameter");if([...new Set(t.map((e=>Ha(e).namespace)))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:s}=Ha(t[0]);if("eip155"!==s)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async e=>{const{attestationId:t,hash:r,encryptedId:n,metadata:i,transportType:s}=e,o={verified:{verifyUrl:i.verifyUrl||nd,validation:"UNKNOWN",origin:i.url||""}};try{if(s===$h.link_mode){const e=this.getAppLinkIfEnabled(i,s);return o.verified.validation=e&&new URL(e).origin===new URL(i.url).origin?"VALID":"INVALID",o}const e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:n,verifyUrl:i.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(e,t)=>{Object.values(e).forEach((e=>{if(!wl(e,!1)){const{message:r}=pl("MISSING_OR_INVALID",`${t} must be in Record<string, string> format. Received: ${JSON.stringify(e)}`);throw new Error(r)}}))},this.getPendingAuthRequest=e=>{const t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0},this.addToRecentlyDeleted=(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0;const t=this.recentlyDeletedLimit/2;for(const r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}},this.checkRecentlyDeleted=e=>{const t=this.recentlyDeletedMap.get(e);if(t){const{message:r}=pl("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw new Error(r)}},this.isLinkModeEnabled=(e,t)=>{var n,i,s,o,a,c,l,u,h;return!(!e||t!==$h.link_mode)&&!0===(null==(i=null==(n=this.client.metadata)?void 0:n.redirect)?void 0:i.linkMode)&&void 0!==(null==(o=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:o.universal)&&""!==(null==(c=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:c.universal)&&void 0!==(null==(l=e?.redirect)?void 0:l.universal)&&""!==(null==(u=e?.redirect)?void 0:u.universal)&&!0===(null==(h=e?.redirect)?void 0:h.linkMode)&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&typeof(null==r.g?void 0:r.g.Linking)<"u"},this.getAppLinkIfEnabled=(e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0},this.handleLinkModeMessage=({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;const t=gc(e,"topic")||"",r=decodeURIComponent(gc(e,"wc_ev")||""),n=this.client.session.keys.includes(t);n&&this.client.session.update(t,{transportType:$h.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:n})},this.registerLinkModeListeners=async()=>{var e;if(yc()||Xa()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){const e=null==r.g?void 0:r.g.Linking;if(typeof e<"u"){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);const t=await e.getInitialURL();t&&setTimeout((()=>{this.handleLinkModeMessage({url:t})}),50)}}}}isInitialized(){if(!this.initialized){const{message:e}=pl("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Rh,(e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)}))}async onRelayMessage(e){const{topic:t,message:r,attestation:n,transportType:i}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(Gp)?this.client.auth.authKeys.get(Gp):{responseTopic:void 0,publicKey:void 0},o=await this.client.core.crypto.decode(t,r,{receiverPublicKey:s,encoding:i===$h.link_mode?qc:$c});try{gh(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o,attestation:n,transportType:i,encryptedId:Kc(r)})):mh(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o,transportType:i}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o,transportType:i})}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(td,(async e=>{const{topic:t,id:r}=uc(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,pl("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,pl("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))}))}registerPairingEvents(){this.client.core.pairing.events.on(Gh,(e=>this.onPairingCreated(e))),this.client.core.pairing.events.on(Zh,(e=>{this.addToRecentlyDeleted(e.topic,"pairing")}))}isValidPairingTopic(e){if(!wl(e,!1)){const{message:t}=pl("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=pl("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(dc(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=pl("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!wl(e,!1)){const{message:t}=pl("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=pl("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(dc(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=pl("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=pl("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else{if(!this.client.core.pairing.pairings.keys.includes(e)){if(wl(e,!1)){const{message:t}=pl("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}{const{message:t}=pl("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}this.isValidPairingTopic(e)}}async isValidProposalId(e){if("number"!=typeof e){const{message:t}=pl("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=pl("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(dc(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=pl("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class sg extends gp{constructor(e,t){super(e,t,"proposal",Dp),this.core=e,this.logger=t}}class og extends gp{constructor(e,t){super(e,t,"session",Dp),this.core=e,this.logger=t}}class ag extends gp{constructor(e,t){super(e,t,"request",Dp,(e=>e.id)),this.core=e,this.logger=t}}class cg extends gp{constructor(e,t){super(e,t,"authKeys",Kp,(()=>Gp)),this.core=e,this.logger=t}}class lg extends gp{constructor(e,t){super(e,t,"pairingTopics",Kp),this.core=e,this.logger=t}}class ug extends gp{constructor(e,t){super(e,t,"requests",Kp,(e=>e.id)),this.core=e,this.logger=t}}class hg{constructor(e,t){this.core=e,this.logger=t,this.authKeys=new cg(this.core,this.logger),this.pairingTopics=new lg(this.core,this.logger),this.requests=new ug(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class dg extends $u{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=Up,this.events=new ti.EventEmitter,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.removeAllListeners=e=>this.events.removeAllListeners(e),this.connect=async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}},this.pair=async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}},this.approve=async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}},this.reject=async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}},this.update=async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}},this.extend=async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}},this.request=async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}},this.respond=async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}},this.ping=async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}},this.emit=async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}},this.disconnect=async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}},this.find=e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.authenticate=async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}},this.formatAuthMessage=e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}},this.approveSessionAuthenticate=async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}},this.rejectSessionAuthenticate=async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}},this.name=e?.name||Up,this.metadata=e?.metadata||rc(),this.signConfig=e?.signConfig;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:du()(Tu({level:e?.logger||"error"}));this.core=e?.core||new Np(e),this.logger=Cu(t,this.name),this.session=new og(this.core,this.logger),this.proposal=new sg(this.core,this.logger),this.pendingRequest=new ag(this.core,this.logger),this.engine=new ig(this),this.auth=new hg(this.core,this.logger)}static async init(e){const t=new dg(e);return await t.initialize(),t}get context(){return Pu(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout((()=>{this.engine.processRelayMessageCache()}),(0,fi.toMiliseconds)(fi.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var fg=r(2543),pg=r(4945),gg=r.n(pg),mg=Object.defineProperty,yg=Object.defineProperties,bg=Object.getOwnPropertyDescriptors,wg=Object.getOwnPropertySymbols,vg=Object.prototype.hasOwnProperty,_g=Object.prototype.propertyIsEnumerable,Eg=(e,t,r)=>t in e?mg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xg=(e,t)=>{for(var r in t||(t={}))vg.call(t,r)&&Eg(e,r,t[r]);if(wg)for(var r of wg(t))_g.call(t,r)&&Eg(e,r,t[r]);return e},Sg=(e,t)=>yg(e,bg(t));const Ag={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class Ig{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new ti.EventEmitter,this.isAvailable=!1,this.registering=!1,!dh(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=Ua(e),r=await(await gg()(this.url,Sg(xg({},Ag),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!dh(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(new Error("HTTP connection is missing or invalid"));e()}))}))}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Ua({id:1,jsonrpc:"2.0",method:"test",params:[]});await gg()(e,Sg(xg({},Ag),{body:t}))}this.onOpen()}catch(e){const t=this.parseError(e);throw this.events.emit("register_error",t),this.onClose(),t}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?Da(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),n=oh(e,r.message||r.toString());this.events.emit("payload",n)}parseError(e,t=this.url){return eh(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}const kg="error",Tg="wc@2:universal_provider:",Pg="https://rpc.walletconnect.org/v1/",Cg="generic",Og=`${Pg}bundler`,Mg="default_chain_changed";var Rg=Object.defineProperty,Lg=Object.defineProperties,Ng=Object.getOwnPropertyDescriptors,Bg=Object.getOwnPropertySymbols,Dg=Object.prototype.hasOwnProperty,Ug=Object.prototype.propertyIsEnumerable,zg=(e,t,r)=>t in e?Rg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jg=(e,t)=>{for(var r in t||(t={}))Dg.call(t,r)&&zg(e,r,t[r]);if(Bg)for(var r of Bg(t))Ug.call(t,r)&&zg(e,r,t[r]);return e},Fg=(e,t)=>Lg(e,Ng(t));function $g(e,t,r){var n;const i=Ha(e);return(null==(n=t.rpcMap)?void 0:n[i.reference])||`${Pg}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function qg(e){return e.includes(":")?e.split(":")[1]:e}function Wg(e){return e.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))}function Hg(e={},t={}){const r=Vg(e),n=Vg(t);return(0,fg.merge)(r,n)}function Vg(e){var t,r,n,i;const s={};if(!yl(e))return s;for(const[o,a]of Object.entries(e)){const e=ll(o)?[o]:a.chains,c=a.methods||[],l=a.events||[],u=a.rpcMap||{},h=ul(o);s[h]=Fg(jg(jg({},s[h]),a),{chains:pc(e,null==(t=s[h])?void 0:t.chains),methods:pc(c,null==(r=s[h])?void 0:r.methods),events:pc(l,null==(n=s[h])?void 0:n.events),rpcMap:jg(jg({},u),null==(i=s[h])?void 0:i.rpcMap)})}return s}function Kg(e){return e.includes(":")?e.split(":")[2]:e}function Gg(e){const t={};for(const[r,n]of Object.entries(e)){const e=n.methods||[],i=n.events||[],s=n.accounts||[],o=ll(r)?[r]:n.chains?n.chains:Wg(n.accounts);t[r]={chains:o,methods:e,events:i,accounts:s}}return t}function Zg(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}const Yg={},Jg=e=>Yg[e],Xg=(e,t)=>{Yg[e]=t};class Qg{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Jg("events"),this.client=Jg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Mg,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=qg(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||$g(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wh(new Ig(r,Jg("disableProviderPing")))}}var em=Object.defineProperty,tm=Object.defineProperties,rm=Object.getOwnPropertyDescriptors,nm=Object.getOwnPropertySymbols,im=Object.prototype.hasOwnProperty,sm=Object.prototype.propertyIsEnumerable,om=(e,t,r)=>t in e?em(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,am=(e,t)=>{for(var r in t||(t={}))im.call(t,r)&&om(e,r,t[r]);if(nm)for(var r of nm(t))sm.call(t,r)&&om(e,r,t[r]);return e},cm=(e,t)=>tm(e,rm(t));class lm{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Jg("events"),this.client=Jg("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(Mg,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||$g(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wh(new Ig(r,Jg("disableProviderPing")))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=parseInt(qg(t));e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let n=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0";n=n.startsWith("0x")?n:`0x${n}`;const i=parseInt(n,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else{if(!this.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:n}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${i}`)}return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,n;const i=null==(r=null==(t=e.request)?void 0:t.params)?void 0:r[0];if(!i)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const s=this.client.session.get(e.topic),o=(null==(n=s?.sessionProperties)?void 0:n.capabilities)||{};if(null!=o&&o[i])return o?.[i];const a=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:cm(am({},s.sessionProperties||{}),{capabilities:cm(am({},o||{}),{[i]:a})})})}catch(e){console.warn("Failed to update session with capabilities",e)}return a}async getCallStatus(e){var t,r;const n=this.client.session.get(e.topic),i=null==(t=n.sessionProperties)?void 0:t.bundler_name;if(i){const t=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}const s=null==(r=n.sessionProperties)?void 0:r.bundler_url;if(s)try{return await this.getUserOperationReceipt(s,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,s)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;const n=new URL(e),i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ih("eth_getUserOperationReceipt",[null==(r=t.request.params)?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,t){return`${Og}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}class um{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Jg("events"),this.client=Jg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Mg,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=qg(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||$g(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wh(new Ig(r,Jg("disableProviderPing")))}}class hm{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Jg("events"),this.client=Jg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Mg,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=qg(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||$g(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wh(new Ig(r,Jg("disableProviderPing")))}}class dm{constructor(e){this.name="algorand",this.namespace=e.namespace,this.events=Jg("events"),this.client=Jg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||$g(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Mg,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||$g(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new wh(new Ig(r,Jg("disableProviderPing")))}}class fm{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Jg("events"),this.client=Jg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Mg,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const r=this.getCardanoRPCUrl(t),n=qg(t);e[n]=this.createHttpProvider(n,r)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wh(new Ig(r,Jg("disableProviderPing")))}}class pm{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Jg("events"),this.client=Jg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Mg,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=qg(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||$g(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wh(new Ig(r,Jg("disableProviderPing")))}}class gm{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Jg("events"),this.client=Jg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Mg,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=qg(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||$g(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wh(new Ig(r,Jg("disableProviderPing")))}}class mm{constructor(e){this.name="near",this.namespace=e.namespace,this.events=Jg("events"),this.client=Jg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||$g(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Mg,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||$g(e,this.namespace);return typeof r>"u"?void 0:new wh(new Ig(r,Jg("disableProviderPing")))}}class ym{constructor(e){this.name="tezos",this.namespace=e.namespace,this.events=Jg("events"),this.client=Jg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||$g(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Mg,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{e[t]=this.createHttpProvider(t)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||$g(e,this.namespace);return typeof r>"u"?void 0:new wh(new Ig(r))}}class bm{constructor(e){this.name=Cg,this.namespace=e.namespace,this.events=Jg("events"),this.client=Jg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Mg,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){var e,t;const r={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach((e=>{const t=Ha(e);r[`${t.namespace}:${t.reference}`]=this.createHttpProvider(e)})),r}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||$g(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new wh(new Ig(r,Jg("disableProviderPing")))}}var wm=Object.defineProperty,vm=Object.defineProperties,_m=Object.getOwnPropertyDescriptors,Em=Object.getOwnPropertySymbols,xm=Object.prototype.hasOwnProperty,Sm=Object.prototype.propertyIsEnumerable,Am=(e,t,r)=>t in e?wm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Im=(e,t)=>{for(var r in t||(t={}))xm.call(t,r)&&Am(e,r,t[r]);if(Em)for(var r of Em(t))Sm.call(t,r)&&Am(e,r,t[r]);return e},km=(e,t)=>vm(e,_m(t));class Tm{constructor(e){this.events=new(ri()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:du()(Tu({level:e?.logger||kg})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new Tm(e);return await t.initialize(),t}async request(e,t,r){const[n,i]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:Im({},e),chainId:`${n}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,n){const i=(new Date).getTime();this.request(e,r,n).then((e=>t(null,sh(i,e)))).catch((e=>t(e,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:gl("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:n}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();if(this.session=i.session,this.session){const e=Gg(this.session.namespaces);this.namespaces=Hg(this.namespaces,e),this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});r&&(this.uri=r,this.events.emit("display_uri",r)),await n().then((e=>{this.session=e;const t=Gg(e.namespaces);this.namespaces=Hg(this.namespaces,t),this.persist("namespaces",this.namespaces)})).catch((e=>{if(e.message!==jp)throw e;t++}))}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[r,n]=this.validateChain(e),i=this.getProvider(r);i.name===Cg?i.setDefaultChain(`${r}:${n}`,t):i.setDefaultChain(n,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(ml(t)){for(const r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await dg.init({core:this.providerOpts.core,logger:this.providerOpts.logger||kg,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map((e=>ul(e))))];Xg("client",this.client),Xg("events",this.events),Xg("disableProviderPing",this.disableProviderPing),e.forEach((e=>{if(!this.session)return;const t=function(e,t){const r=Object.keys(t.namespaces).filter((t=>t.includes(e)));if(!r.length)return[];const n=[];return r.forEach((e=>{const r=t.namespaces[e].accounts;n.push(...r)})),n}(e,this.session),r=Wg(t),n=Hg(this.namespaces,this.optionalNamespaces),i=km(Im({},n[e]),{accounts:t,chains:r});switch(e){case"eip155":this.rpcProviders[e]=new lm({namespace:i});break;case"algorand":this.rpcProviders[e]=new dm({namespace:i});break;case"solana":this.rpcProviders[e]=new um({namespace:i});break;case"cosmos":this.rpcProviders[e]=new hm({namespace:i});break;case"polkadot":this.rpcProviders[e]=new Qg({namespace:i});break;case"cip34":this.rpcProviders[e]=new fm({namespace:i});break;case"elrond":this.rpcProviders[e]=new pm({namespace:i});break;case"multiversx":this.rpcProviders[e]=new gm({namespace:i});break;case"near":this.rpcProviders[e]=new mm({namespace:i});break;case"tezos":this.rpcProviders[e]=new ym({namespace:i});break;default:this.rpcProviders[Cg]?this.rpcProviders[Cg].updateNamespace(i):this.rpcProviders[Cg]=new bm({namespace:i})}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(e=>{this.events.emit("session_ping",e)})),this.client.on("session_event",(e=>{const{params:t}=e,{event:r}=t;if("accountsChanged"===r.name){const e=r.data;e&&ml(e)&&this.events.emit("accountsChanged",e.map(Kg))}else if("chainChanged"===r.name){const e=t.chainId,r=t.event.data,n=ul(e),i=Zg(e)!==Zg(r)?`${n}:${Zg(r)}`:e;this.onChainChanged(i)}else this.events.emit(r.name,r.data);this.events.emit("session_event",e)})),this.client.on("session_update",(({topic:e,params:t})=>{var r;const{namespaces:n}=t,i=null==(r=this.client)?void 0:r.session.get(e);this.session=km(Im({},i),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})})),this.client.on("session_delete",(async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",km(Im({},gl("USER_DISCONNECTED")),{data:e.topic}))})),this.on(Mg,(e=>{this.onChainChanged(e,!0)}))}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Cg]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])}))}setNamespaces(e){const{namespaces:t,optionalNamespaces:r,sessionProperties:n}=e;t&&Object.keys(t).length&&(this.namespaces=t),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=n,this.persist("namespaces",t),this.persist("optionalNamespaces",r)}validateChain(e){const[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map((e=>ul(e))).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const n=ul(Object.keys(this.namespaces)[0]);return[n,this.rpcProviders[n].getDefaultChain()]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){if(!this.namespaces)return;const[r,n]=this.validateChain(e);n&&(t||this.getProvider(r).setDefaultChain(n),this.namespaces[r]?this.namespaces[r].defaultChain=n:this.namespaces[`${r}:${n}`]?this.namespaces[`${r}:${n}`].defaultChain=n:this.namespaces[`${r}:${n}`]={defaultChain:n},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",n))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${Tg}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${Tg}/${e}`)}}const Pm=Tm,Cm=["eth_sendTransaction","personal_sign"],Om=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],Mm=["chainChanged","accountsChanged"],Rm=["chainChanged","accountsChanged","message","disconnect","connect"];var Lm=Object.defineProperty,Nm=Object.defineProperties,Bm=Object.getOwnPropertyDescriptors,Dm=Object.getOwnPropertySymbols,Um=Object.prototype.hasOwnProperty,zm=Object.prototype.propertyIsEnumerable,jm=(e,t,r)=>t in e?Lm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fm=(e,t)=>{for(var r in t||(t={}))Um.call(t,r)&&jm(e,r,t[r]);if(Dm)for(var r of Dm(t))zm.call(t,r)&&jm(e,r,t[r]);return e},$m=(e,t)=>Nm(e,Bm(t));function qm(e){return Number(e[0].split(":")[1])}function Wm(e){return`0x${e.toString(16)}`}class Hm{constructor(){this.events=new ti.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new Hm;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,r){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),r)}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:r}=function(e){const{chains:t,optionalChains:r,methods:n,optionalMethods:i,events:s,optionalEvents:o,rpcMap:a}=e;if(!ml(t))throw new Error("Invalid chains");const c={chains:t,methods:n||Cm,events:s||Mm,rpcMap:Fm({},t.length?{[qm(t)]:a[qm(t)]}:{})},l=s?.filter((e=>!Mm.includes(e))),u=n?.filter((e=>!Cm.includes(e)));if(!(r||o||i||null!=l&&l.length||null!=u&&u.length))return{required:t.length?c:void 0};const h={chains:[...new Set(l?.length&&u?.length||!r?c.chains.concat(r||[]):r)],methods:[...new Set(c.methods.concat(null!=i&&i.length?i:Om))],events:[...new Set(c.events.concat(null!=o&&o.length?o:Rm))],rpcMap:a};return{required:t.length?c:void 0,optional:r.length?h:void 0}}(this.rpc);try{const n=await new Promise((async(n,i)=>{var s;this.rpc.showQrModal&&(null==(s=this.modal)||s.subscribeModal((e=>{!e.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),i(new Error("Connection request reset. Please try again.")))}))),await this.signer.connect($m(Fm({namespaces:Fm({},t&&{[this.namespace]:t})},r&&{optionalNamespaces:{[this.namespace]:r}}),{pairingTopic:e?.pairingTopic})).then((e=>{n(e)})).catch((e=>{i(new Error(e.message))}))}));if(!n)return;const i=Va(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:i),this.setAccounts(i),this.events.emit("connect",{chainId:Wm(this.chainId)})}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async authenticate(e,t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{const r=await new Promise((async(r,n)=>{var i;this.rpc.showQrModal&&(null==(i=this.modal)||i.subscribeModal((e=>{!e.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),n(new Error("Connection request reset. Please try again.")))}))),await this.signer.authenticate($m(Fm({},e),{chains:this.rpc.chains}),t).then((e=>{r(e)})).catch((e=>{n(new Error(e.message))}))})),n=r.session;if(n){const e=Va(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:e),this.setAccounts(e),this.events.emit("connect",{chainId:Wm(this.chainId)})}return r}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",(e=>{const{params:t}=e,{event:r}=t;"accountsChanged"===r.name?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===r.name?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)})),this.signer.on("chainChanged",(e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",Wm(this.chainId)),this.persist()})),this.signer.on("session_update",(e=>{this.events.emit("session_update",e)})),this.signer.on("session_delete",(e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",$m(Fm({},gl("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))})),this.signer.on("display_uri",(e=>{var t,r;this.rpc.showQrModal&&(null==(t=this.modal)||t.closeModal(),null==(r=this.modal)||r.openModal({uri:e})),this.events.emit("display_uri",e)}))}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return"string"==typeof e&&e.startsWith(`${this.namespace}:`)}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter((e=>this.isCompatibleChainId(e))).map((e=>this.parseChainId(e)));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",Wm(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,r,n]=e.split(":");return{chainId:`${t}:${r}`,address:n}}setAccounts(e){this.accounts=e.filter((e=>this.parseChainId(this.parseAccountId(e).chainId)===this.chainId)).map((e=>this.parseAccountId(e).address)),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,r;const n=null!=(t=e?.chains)?t:[],i=null!=(r=e?.optionalChains)?r:[],s=n.concat(i);if(!s.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const o=n.length?e?.methods||Cm:[],a=n.length?e?.events||Mm:[],c=e?.optionalMethods||[],l=e?.optionalEvents||[],u=e?.rpcMap||this.buildRpcMap(s,e.projectId),h=e?.qrModalOptions||void 0;return{chains:n?.map((e=>this.formatChainId(e))),optionalChains:i.map((e=>this.formatChainId(e))),methods:o,events:a,optionalMethods:c,optionalEvents:l,rpcMap:u,showQrModal:!(null==e||!e.showQrModal),qrModalOptions:h,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const r={};return e.forEach((e=>{r[e]=this.getRpcUrl(e,t)})),r}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?qm(this.rpc.chains):qm(this.rpc.optionalChains),this.signer=await Pm.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let e;try{const{WalletConnectModal:t}=await Promise.resolve().then(r.bind(r,940));e=t}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(e)try{this.modal=new e(Fm({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(e){throw this.signer.logger.error(e),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:r,rpcMap:n}=e;t&&ml(t)&&(this.rpc.chains=t.map((e=>this.formatChainId(e))),t.forEach((e=>{this.rpc.rpcMap[e]=n?.[e]||this.getRpcUrl(e)}))),r&&ml(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map((e=>this.formatChainId(e))),r.forEach((e=>{this.rpc.rpcMap[e]=n?.[e]||this.getRpcUrl(e)})))}getRpcUrl(e,t){var r;return(null==(r=this.rpc.rpcMap)?void 0:r[e])||`https://rpc.walletconnect.org/v1/?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t?.accounts),this.setAccounts(t?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch((e=>this.signer.logger.warn(e)))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return"string"==typeof e||e instanceof String?[this.parseAccount(e)]:e.map((e=>this.parseAccount(e)))}}const Vm=Hm;class Km extends Be{constructor(){super(Oe.WalletConnect)}getRPCMap(){return this.netWorkService.getAll().reduce(((e,t)=>(e[t.id]=t.networkParams.defaultRpcUrl,e)),{})}async connect(e){Ue()&&console.log("WalletConnectWalletService::connect connect to wallet from widget");const t=await Vm.init({rpcMap:this.getRPCMap(),projectId:y.walletConnectProjectId,optionalChains:this.netWorkService.getAll().filter((e=>e.type==W.EVM)).map((e=>e.id)),showQrModal:!0,chains:[1],methods:["eth_sendTransaction"],optionalMethods:["eth_signTypedData","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_requestPermissions","wallet_addEthereumChain"],optionalEvents:["accountsChanged"],qrModalOptions:{explorerExcludedWalletIds:["c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96"]}});t.on("disconnect",(()=>{this.disconnect$.next()}));try{Ue()&&console.log("WalletConnectWalletService::connect try enable"),await t.enable()}catch(e){throw new De(Me.CONNECT_ERROR)}Ue()&&console.log("WalletConnectWalletService::connect set provider"),this.setProvider(t),await this.getAccount()}async disconnect(){this.provider&&await this.provider.disconnect(),this.setProvider(null)}}var Gm=r(591),Zm=r(6763),Ym=r.n(Zm),Jm=r(2729),Xm=r.n(Jm),Qm=r(1658);function ey(e){let t=e.length;for(;--t>=0;)e[t]=0}const ty=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ry=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ny=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),iy=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sy=new Array(576);ey(sy);const oy=new Array(60);ey(oy);const ay=new Array(512);ey(ay);const cy=new Array(256);ey(cy);const ly=new Array(29);ey(ly);const uy=new Array(30);function hy(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let dy,fy,py;function gy(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}ey(uy);const my=e=>e<256?ay[e]:ay[256+(e>>>7)],yy=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},by=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,yy(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},wy=(e,t,r)=>{by(e,r[2*t],r[2*t+1])},vy=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},_y=(e,t,r)=>{const n=new Array(16);let i,s,o=0;for(i=1;i<=15;i++)o=o+r[i-1]<<1,n[i]=o;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=vy(n[t]++,t))}},Ey=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},xy=e=>{e.bi_valid>8?yy(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Sy=(e,t,r,n)=>{const i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]},Ay=(e,t,r)=>{const n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&Sy(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Sy(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},Iy=(e,t,r)=>{let n,i,s,o,a=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+a++],n+=(255&e.pending_buf[e.sym_buf+a++])<<8,i=e.pending_buf[e.sym_buf+a++],0===n?wy(e,i,t):(s=cy[i],wy(e,s+256+1,t),o=ty[s],0!==o&&(i-=ly[s],by(e,i,o)),n--,s=my(n),wy(e,s,r),o=ry[s],0!==o&&(n-=uy[s],by(e,n,o)))}while(a<e.sym_next);wy(e,256,t)},ky=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,c,l=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==r[2*o]?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):r[2*o+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,r[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=n[2*c+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)Ay(e,r,o);c=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Ay(e,r,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,r[2*c]=r[2*o]+r[2*a],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,r[2*o+1]=r[2*a+1]=c,e.heap[1]=c++,Ay(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,u,h,d,f,p,g=0;for(d=0;d<=15;d++)e.bl_count[d]=0;for(r[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)u=e.heap[l],d=r[2*r[2*u+1]+1]+1,d>c&&(d=c,g++),r[2*u+1]=d,u>n||(e.bl_count[d]++,f=0,u>=a&&(f=o[u-a]),p=r[2*u],e.opt_len+=p*(d+f),s&&(e.static_len+=p*(i[2*u+1]+f)));if(0!==g){do{for(d=c-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[c]--,g-=2}while(g>0);for(d=c;0!==d;d--)for(u=e.bl_count[d];0!==u;)h=e.heap[--l],h>n||(r[2*h+1]!==d&&(e.opt_len+=(d-r[2*h+1])*r[2*h],r[2*h+1]=d),u--)}})(e,t),_y(r,l,e.bl_count)},Ty=(e,t,r)=>{let n,i,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++a<c&&i===o||(a<l?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,s=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4))},Py=(e,t,r)=>{let n,i,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++a<c&&i===o)){if(a<l)do{wy(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==s&&(wy(e,i,e.bl_tree),a--),wy(e,16,e.bl_tree),by(e,a-3,2)):a<=10?(wy(e,17,e.bl_tree),by(e,a-3,3)):(wy(e,18,e.bl_tree),by(e,a-11,7));a=0,s=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4)}};let Cy=!1;const Oy=(e,t,r,n)=>{by(e,0+(n?1:0),3),xy(e),yy(e,r),yy(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};var My={_tr_init:e=>{Cy||((()=>{let e,t,r,n,i;const s=new Array(16);for(r=0,n=0;n<28;n++)for(ly[n]=r,e=0;e<1<<ty[n];e++)cy[r++]=n;for(cy[r-1]=n,i=0,n=0;n<16;n++)for(uy[n]=i,e=0;e<1<<ry[n];e++)ay[i++]=n;for(i>>=7;n<30;n++)for(uy[n]=i<<7,e=0;e<1<<ry[n]-7;e++)ay[256+i++]=n;for(t=0;t<=15;t++)s[t]=0;for(e=0;e<=143;)sy[2*e+1]=8,e++,s[8]++;for(;e<=255;)sy[2*e+1]=9,e++,s[9]++;for(;e<=279;)sy[2*e+1]=7,e++,s[7]++;for(;e<=287;)sy[2*e+1]=8,e++,s[8]++;for(_y(sy,287,s),e=0;e<30;e++)oy[2*e+1]=5,oy[2*e]=vy(e,5);dy=new hy(sy,ty,257,286,15),fy=new hy(oy,ry,0,30,15),py=new hy(new Array(0),ny,0,19,7)})(),Cy=!0),e.l_desc=new gy(e.dyn_ltree,dy),e.d_desc=new gy(e.dyn_dtree,fy),e.bl_desc=new gy(e.bl_tree,py),e.bi_buf=0,e.bi_valid=0,Ey(e)},_tr_stored_block:Oy,_tr_flush_block:(e,t,r,n)=>{let i,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),ky(e,e.l_desc),ky(e,e.d_desc),o=(e=>{let t;for(Ty(e,e.dyn_ltree,e.l_desc.max_code),Ty(e,e.dyn_dtree,e.d_desc.max_code),ky(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*iy[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==t?Oy(e,t,r,n):4===e.strategy||s===i?(by(e,2+(n?1:0),3),Iy(e,sy,oy)):(by(e,4+(n?1:0),3),((e,t,r,n)=>{let i;for(by(e,t-257,5),by(e,r-1,5),by(e,n-4,4),i=0;i<n;i++)by(e,e.bl_tree[2*iy[i]+1],3);Py(e,e.dyn_ltree,t-1),Py(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Iy(e,e.dyn_ltree,e.dyn_dtree)),Ey(e),n&&xy(e)},_tr_tally:(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(cy[r]+256+1)]++,e.dyn_dtree[2*my(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{by(e,2,3),wy(e,256,sy),(e=>{16===e.bi_valid?(yy(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},Ry=(e,t,r,n)=>{let i=65535&e,s=e>>>16&65535,o=0;for(;0!==r;){o=r>2e3?2e3:r,r-=o;do{i=i+t[n++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16};const Ly=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());var Ny=(e,t,r,n)=>{const i=Ly,s=n+r;e^=-1;for(let r=n;r<s;r++)e=e>>>8^i[255&(e^t[r])];return~e},By={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Dy={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Uy,_tr_stored_block:zy,_tr_flush_block:jy,_tr_tally:Fy,_tr_align:$y}=My,{Z_NO_FLUSH:qy,Z_PARTIAL_FLUSH:Wy,Z_FULL_FLUSH:Hy,Z_FINISH:Vy,Z_BLOCK:Ky,Z_OK:Gy,Z_STREAM_END:Zy,Z_STREAM_ERROR:Yy,Z_DATA_ERROR:Jy,Z_BUF_ERROR:Xy,Z_DEFAULT_COMPRESSION:Qy,Z_FILTERED:eb,Z_HUFFMAN_ONLY:tb,Z_RLE:rb,Z_FIXED:nb,Z_DEFAULT_STRATEGY:ib,Z_UNKNOWN:sb,Z_DEFLATED:ob}=Dy,ab=258,cb=262,lb=42,ub=113,hb=666,db=(e,t)=>(e.msg=By[t],t),fb=e=>2*e-(e>4?9:0),pb=e=>{let t=e.length;for(;--t>=0;)e[t]=0},gb=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do{r=e.head[--n],e.head[n]=r>=i?r-i:0}while(--t);t=i,n=t;do{r=e.prev[--n],e.prev[n]=r>=i?r-i:0}while(--t)};let mb=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const yb=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},bb=(e,t)=>{jy(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,yb(e.strm)},wb=(e,t)=>{e.pending_buf[e.pending++]=t},vb=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},_b=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=Ry(e.adler,t,i,r):2===e.state.wrap&&(e.adler=Ny(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},Eb=(e,t)=>{let r,n,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-cb?e.strstart-(e.w_size-cb):0,l=e.window,u=e.w_mask,h=e.prev,d=e.strstart+ab;let f=l[s+o-1],p=l[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(r=t,l[r+o]===p&&l[r+o-1]===f&&l[r]===l[s]&&l[++r]===l[s+1]){s+=2,r++;do{}while(l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&s<d);if(n=ab-(d-s),s=d-ab,n>o){if(e.match_start=t,o=n,n>=a)break;f=l[s+o-1],p=l[s+o]}}}while((t=h[t&u])>c&&0!=--i);return o<=e.lookahead?o:e.lookahead},xb=e=>{const t=e.w_size;let r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-cb)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),gb(e),n+=t),0===e.strm.avail_in)break;if(r=_b(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=mb(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=mb(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<cb&&0!==e.strm.avail_in)},Sb=(e,t)=>{let r,n,i,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,a=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>i&&(r=i),r<s&&(0===r&&t!==Vy||t===qy||r!==n+e.strm.avail_in))break;o=t===Vy&&r===n+e.strm.avail_in?1:0,zy(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,yb(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(_b(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===o);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==qy&&t!==Vy&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(_b(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,s=i>e.w_size?e.w_size:i,n=e.strstart-e.block_start,(n>=s||(n||t===Vy)&&t!==qy&&0===e.strm.avail_in&&n<=i)&&(r=n>i?i:n,o=t===Vy&&0===e.strm.avail_in&&r===n?1:0,zy(e,e.block_start,r,o),e.block_start+=r,yb(e.strm)),o?3:1)},Ab=(e,t)=>{let r,n;for(;;){if(e.lookahead<cb){if(xb(e),e.lookahead<cb&&t===qy)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=mb(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-cb&&(e.match_length=Eb(e,r)),e.match_length>=3)if(n=Fy(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=mb(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=mb(e,e.ins_h,e.window[e.strstart+1]);else n=Fy(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(bb(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Vy?(bb(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(bb(e,!1),0===e.strm.avail_out)?1:2},Ib=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<cb){if(xb(e),e.lookahead<cb&&t===qy)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=mb(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-cb&&(e.match_length=Eb(e,r),e.match_length<=5&&(e.strategy===eb||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=Fy(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=mb(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(bb(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=Fy(e,0,e.window[e.strstart-1]),n&&bb(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Fy(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Vy?(bb(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(bb(e,!1),0===e.strm.avail_out)?1:2};function kb(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const Tb=[new kb(0,0,0,0,Sb),new kb(4,4,8,4,Ab),new kb(4,5,16,8,Ab),new kb(4,6,32,32,Ab),new kb(4,4,16,16,Ib),new kb(8,16,32,32,Ib),new kb(8,16,128,128,Ib),new kb(8,32,128,256,Ib),new kb(32,128,258,1024,Ib),new kb(32,258,258,4096,Ib)];function Pb(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ob,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),pb(this.dyn_ltree),pb(this.dyn_dtree),pb(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),pb(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),pb(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Cb=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==lb&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==ub&&t.status!==hb?1:0},Ob=e=>{if(Cb(e))return db(e,Yy);e.total_in=e.total_out=0,e.data_type=sb;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?lb:ub,e.adler=2===t.wrap?0:1,t.last_flush=-2,Uy(t),Gy},Mb=e=>{const t=Ob(e);return t===Gy&&(e=>{e.window_size=2*e.w_size,pb(e.head),e.max_lazy_match=Tb[e.level].max_lazy,e.good_match=Tb[e.level].good_length,e.nice_match=Tb[e.level].nice_length,e.max_chain_length=Tb[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},Rb=(e,t,r,n,i,s)=>{if(!e)return Yy;let o=1;if(t===Qy&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>9||r!==ob||n<8||n>15||t<0||t>9||s<0||s>nb||8===n&&1!==o)return db(e,Yy);8===n&&(n=9);const a=new Pb;return e.state=a,a.strm=e,a.status=lb,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=s,a.method=r,Mb(e)};var Lb=Rb,Nb=(e,t)=>Cb(e)||2!==e.state.wrap?Yy:(e.state.gzhead=t,Gy),Bb=(e,t)=>{if(Cb(e)||t>Ky||t<0)return e?db(e,Yy):Yy;const r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===hb&&t!==Vy)return db(e,0===e.avail_out?Xy:Yy);const n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(yb(e),0===e.avail_out)return r.last_flush=-1,Gy}else if(0===e.avail_in&&fb(t)<=fb(n)&&t!==Vy)return db(e,Xy);if(r.status===hb&&0!==e.avail_in)return db(e,Xy);if(r.status===lb&&0===r.wrap&&(r.status=ub),r.status===lb){let t=ob+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=tb||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=n<<6,0!==r.strstart&&(t|=32),t+=31-t%31,vb(r,t),0!==r.strstart&&(vb(r,e.adler>>>16),vb(r,65535&e.adler)),e.adler=1,r.status=ub,yb(e),0!==r.pending)return r.last_flush=-1,Gy}if(57===r.status)if(e.adler=0,wb(r,31),wb(r,139),wb(r,8),r.gzhead)wb(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),wb(r,255&r.gzhead.time),wb(r,r.gzhead.time>>8&255),wb(r,r.gzhead.time>>16&255),wb(r,r.gzhead.time>>24&255),wb(r,9===r.level?2:r.strategy>=tb||r.level<2?4:0),wb(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(wb(r,255&r.gzhead.extra.length),wb(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Ny(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(wb(r,0),wb(r,0),wb(r,0),wb(r,0),wb(r,0),wb(r,9===r.level?2:r.strategy>=tb||r.level<2?4:0),wb(r,3),r.status=ub,yb(e),0!==r.pending)return r.last_flush=-1,Gy;if(69===r.status){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let i=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=Ny(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=i,yb(e),0!==r.pending)return r.last_flush=-1,Gy;t=0,n-=i}let i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=Ny(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=Ny(e.adler,r.pending_buf,r.pending-n,n)),yb(e),0!==r.pending)return r.last_flush=-1,Gy;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,wb(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=Ny(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=Ny(e.adler,r.pending_buf,r.pending-n,n)),yb(e),0!==r.pending)return r.last_flush=-1,Gy;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,wb(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=Ny(e.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(yb(e),0!==r.pending))return r.last_flush=-1,Gy;wb(r,255&e.adler),wb(r,e.adler>>8&255),e.adler=0}if(r.status=ub,yb(e),0!==r.pending)return r.last_flush=-1,Gy}if(0!==e.avail_in||0!==r.lookahead||t!==qy&&r.status!==hb){let n=0===r.level?Sb(r,t):r.strategy===tb?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(xb(e),0===e.lookahead)){if(t===qy)return 1;break}if(e.match_length=0,r=Fy(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(bb(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Vy?(bb(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(bb(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===rb?((e,t)=>{let r,n,i,s;const o=e.window;for(;;){if(e.lookahead<=ab){if(xb(e),e.lookahead<=ab&&t===qy)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){s=e.strstart+ab;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);e.match_length=ab-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=Fy(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Fy(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(bb(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Vy?(bb(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(bb(e,!1),0===e.strm.avail_out)?1:2})(r,t):Tb[r.level].func(r,t);if(3!==n&&4!==n||(r.status=hb),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),Gy;if(2===n&&(t===Wy?$y(r):t!==Ky&&(zy(r,0,0,!1),t===Hy&&(pb(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),yb(e),0===e.avail_out))return r.last_flush=-1,Gy}return t!==Vy?Gy:r.wrap<=0?Zy:(2===r.wrap?(wb(r,255&e.adler),wb(r,e.adler>>8&255),wb(r,e.adler>>16&255),wb(r,e.adler>>24&255),wb(r,255&e.total_in),wb(r,e.total_in>>8&255),wb(r,e.total_in>>16&255),wb(r,e.total_in>>24&255)):(vb(r,e.adler>>>16),vb(r,65535&e.adler)),yb(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?Gy:Zy)},Db=e=>{if(Cb(e))return Yy;const t=e.state.status;return e.state=null,t===ub?db(e,Jy):Gy},Ub=(e,t)=>{let r=t.length;if(Cb(e))return Yy;const n=e.state,i=n.wrap;if(2===i||1===i&&n.status!==lb||n.lookahead)return Yy;if(1===i&&(e.adler=Ry(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===i&&(pb(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,xb(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=mb(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,xb(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,n.wrap=i,Gy};const zb=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var jb=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const t in r)zb(r,t)&&(e[t]=r[t])}}return e},Fb=e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;const r=new Uint8Array(t);for(let t=0,n=0,i=e.length;t<i;t++){let i=e[t];r.set(i,n),n+=i.length}return r};let $b=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){$b=!1}const qb=new Uint8Array(256);for(let e=0;e<256;e++)qb[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;qb[254]=qb[254]=1;var Wb=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,i,s,o=e.length,a=0;for(i=0;i<o;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<o&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<o&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|63&r):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|63&r):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|63&r);return t},Hb=(e,t)=>{const r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,i;const s=new Array(2*r);for(i=0,n=0;n<r;){let t=e[n++];if(t<128){s[i++]=t;continue}let o=qb[t];if(o>4)s[i++]=65533,n+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&n<r;)t=t<<6|63&e[n++],o--;o>1?s[i++]=65533:t<65536?s[i++]=t:(t-=65536,s[i++]=55296|t>>10&1023,s[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&$b)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r})(s,i)},Vb=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+qb[e[r]]>t?r:t},Kb=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Gb=Object.prototype.toString,{Z_NO_FLUSH:Zb,Z_SYNC_FLUSH:Yb,Z_FULL_FLUSH:Jb,Z_FINISH:Xb,Z_OK:Qb,Z_STREAM_END:ew,Z_DEFAULT_COMPRESSION:tw,Z_DEFAULT_STRATEGY:rw,Z_DEFLATED:nw}=Dy;function iw(e){this.options=jb({level:tw,method:nw,chunkSize:16384,windowBits:15,memLevel:8,strategy:rw},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Kb,this.strm.avail_out=0;let r=Lb(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Qb)throw new Error(By[r]);if(t.header&&Nb(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Wb(t.dictionary):"[object ArrayBuffer]"===Gb.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=Ub(this.strm,e),r!==Qb)throw new Error(By[r]);this._dict_set=!0}}function sw(e,t){const r=new iw(t);if(r.push(e,!0),r.err)throw r.msg||By[r.err];return r.result}iw.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Xb:Zb,"string"==typeof e?r.input=Wb(e):"[object ArrayBuffer]"===Gb.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(s===Yb||s===Jb)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=Bb(r,s),i===ew)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Db(this.strm),this.onEnd(i),this.ended=!0,i===Qb;if(0!==r.avail_out){if(s>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},iw.prototype.onData=function(e){this.chunks.push(e)},iw.prototype.onEnd=function(e){e===Qb&&(this.result=Fb(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ow={Deflate:iw,deflate:sw,deflateRaw:function(e,t){return(t=t||{}).raw=!0,sw(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,sw(e,t)},constants:Dy};const aw=16209;var cw=function(e,t){let r,n,i,s,o,a,c,l,u,h,d,f,p,g,m,y,b,w,v,_,E,x,S,A;const I=e.state;r=e.next_in,S=e.input,n=r+(e.avail_in-5),i=e.next_out,A=e.output,s=i-(t-e.avail_out),o=i+(e.avail_out-257),a=I.dmax,c=I.wsize,l=I.whave,u=I.wnext,h=I.window,d=I.hold,f=I.bits,p=I.lencode,g=I.distcode,m=(1<<I.lenbits)-1,y=(1<<I.distbits)-1;e:do{f<15&&(d+=S[r++]<<f,f+=8,d+=S[r++]<<f,f+=8),b=p[d&m];t:for(;;){if(w=b>>>24,d>>>=w,f-=w,w=b>>>16&255,0===w)A[i++]=65535&b;else{if(!(16&w)){if(64&w){if(32&w){I.mode=16191;break e}e.msg="invalid literal/length code",I.mode=aw;break e}b=p[(65535&b)+(d&(1<<w)-1)];continue t}for(v=65535&b,w&=15,w&&(f<w&&(d+=S[r++]<<f,f+=8),v+=d&(1<<w)-1,d>>>=w,f-=w),f<15&&(d+=S[r++]<<f,f+=8,d+=S[r++]<<f,f+=8),b=g[d&y];;){if(w=b>>>24,d>>>=w,f-=w,w=b>>>16&255,16&w){if(_=65535&b,w&=15,f<w&&(d+=S[r++]<<f,f+=8,f<w&&(d+=S[r++]<<f,f+=8)),_+=d&(1<<w)-1,_>a){e.msg="invalid distance too far back",I.mode=aw;break e}if(d>>>=w,f-=w,w=i-s,_>w){if(w=_-w,w>l&&I.sane){e.msg="invalid distance too far back",I.mode=aw;break e}if(E=0,x=h,0===u){if(E+=c-w,w<v){v-=w;do{A[i++]=h[E++]}while(--w);E=i-_,x=A}}else if(u<w){if(E+=c+u-w,w-=u,w<v){v-=w;do{A[i++]=h[E++]}while(--w);if(E=0,u<v){w=u,v-=w;do{A[i++]=h[E++]}while(--w);E=i-_,x=A}}}else if(E+=u-w,w<v){v-=w;do{A[i++]=h[E++]}while(--w);E=i-_,x=A}for(;v>2;)A[i++]=x[E++],A[i++]=x[E++],A[i++]=x[E++],v-=3;v&&(A[i++]=x[E++],v>1&&(A[i++]=x[E++]))}else{E=i-_;do{A[i++]=A[E++],A[i++]=A[E++],A[i++]=A[E++],v-=3}while(v>2);v&&(A[i++]=A[E++],v>1&&(A[i++]=A[E++]))}break}if(64&w){e.msg="invalid distance code",I.mode=aw;break e}b=g[(65535&b)+(d&(1<<w)-1)]}}break}}while(r<n&&i<o);v=f>>3,r-=v,f-=v<<3,d&=(1<<f)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<o?o-i+257:257-(i-o),I.hold=d,I.bits=f};const lw=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),uw=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),hw=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dw=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var fw=(e,t,r,n,i,s,o,a)=>{const c=a.bits;let l,u,h,d,f,p,g=0,m=0,y=0,b=0,w=0,v=0,_=0,E=0,x=0,S=0,A=null;const I=new Uint16Array(16),k=new Uint16Array(16);let T,P,C,O=null;for(g=0;g<=15;g++)I[g]=0;for(m=0;m<n;m++)I[t[r+m]]++;for(w=c,b=15;b>=1&&0===I[b];b--);if(w>b&&(w=b),0===b)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(y=1;y<b&&0===I[y];y++);for(w<y&&(w=y),E=1,g=1;g<=15;g++)if(E<<=1,E-=I[g],E<0)return-1;if(E>0&&(0===e||1!==b))return-1;for(k[1]=0,g=1;g<15;g++)k[g+1]=k[g]+I[g];for(m=0;m<n;m++)0!==t[r+m]&&(o[k[t[r+m]]++]=m);if(0===e?(A=O=o,p=20):1===e?(A=lw,O=uw,p=257):(A=hw,O=dw,p=0),S=0,m=0,g=y,f=s,v=w,_=0,h=-1,x=1<<w,d=x-1,1===e&&x>852||2===e&&x>592)return 1;for(;;){T=g-_,o[m]+1<p?(P=0,C=o[m]):o[m]>=p?(P=O[o[m]-p],C=A[o[m]-p]):(P=96,C=0),l=1<<g-_,u=1<<v,y=u;do{u-=l,i[f+(S>>_)+u]=T<<24|P<<16|C}while(0!==u);for(l=1<<g-1;S&l;)l>>=1;if(0!==l?(S&=l-1,S+=l):S=0,m++,0==--I[g]){if(g===b)break;g=t[r+o[m]]}if(g>w&&(S&d)!==h){for(0===_&&(_=w),f+=y,v=g-_,E=1<<v;v+_<b&&(E-=I[v+_],!(E<=0));)v++,E<<=1;if(x+=1<<v,1===e&&x>852||2===e&&x>592)return 1;h=S&d,i[h]=w<<24|v<<16|f-s}}return 0!==S&&(i[f+S]=g-_<<24|64<<16),a.bits=w,0};const{Z_FINISH:pw,Z_BLOCK:gw,Z_TREES:mw,Z_OK:yw,Z_STREAM_END:bw,Z_NEED_DICT:ww,Z_STREAM_ERROR:vw,Z_DATA_ERROR:_w,Z_MEM_ERROR:Ew,Z_BUF_ERROR:xw,Z_DEFLATED:Sw}=Dy,Aw=16180,Iw=16190,kw=16191,Tw=16192,Pw=16194,Cw=16199,Ow=16200,Mw=16206,Rw=16209,Lw=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Nw(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Bw=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Aw||t.mode>16211?1:0},Dw=e=>{if(Bw(e))return vw;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Aw,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,yw},Uw=e=>{if(Bw(e))return vw;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Dw(e)},zw=(e,t)=>{let r;if(Bw(e))return vw;const n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?vw:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Uw(e))},jw=(e,t)=>{if(!e)return vw;const r=new Nw;e.state=r,r.strm=e,r.window=null,r.mode=Aw;const n=zw(e,t);return n!==yw&&(e.state=null),n};let Fw,$w,qw=!0;const Ww=e=>{if(qw){Fw=new Int32Array(512),$w=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(fw(1,e.lens,0,288,Fw,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;fw(2,e.lens,0,32,$w,0,e.work,{bits:5}),qw=!1}e.lencode=Fw,e.lenbits=9,e.distcode=$w,e.distbits=5},Hw=(e,t,r,n)=>{let i;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(t.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(t.subarray(r-n,r-n+i),s.wnext),(n-=i)?(s.window.set(t.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var Vw=Uw,Kw=jw,Gw=(e,t)=>{let r,n,i,s,o,a,c,l,u,h,d,f,p,g,m,y,b,w,v,_,E,x,S=0;const A=new Uint8Array(4);let I,k;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Bw(e)||!e.output||!e.input&&0!==e.avail_in)return vw;r=e.state,r.mode===kw&&(r.mode=Tw),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,l=r.hold,u=r.bits,h=a,d=c,x=yw;e:for(;;)switch(r.mode){case Aw:if(0===r.wrap){r.mode=Tw;break}for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(2&r.wrap&&35615===l){0===r.wbits&&(r.wbits=15),r.check=0,A[0]=255&l,A[1]=l>>>8&255,r.check=Ny(r.check,A,2,0),l=0,u=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",r.mode=Rw;break}if((15&l)!==Sw){e.msg="unknown compression method",r.mode=Rw;break}if(l>>>=4,u-=4,E=8+(15&l),0===r.wbits&&(r.wbits=E),E>15||E>r.wbits){e.msg="invalid window size",r.mode=Rw;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&l?16189:kw,l=0,u=0;break;case 16181:for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(r.flags=l,(255&r.flags)!==Sw){e.msg="unknown compression method",r.mode=Rw;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=Rw;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&4&r.wrap&&(A[0]=255&l,A[1]=l>>>8&255,r.check=Ny(r.check,A,2,0)),l=0,u=0,r.mode=16182;case 16182:for(;u<32;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.head&&(r.head.time=l),512&r.flags&&4&r.wrap&&(A[0]=255&l,A[1]=l>>>8&255,A[2]=l>>>16&255,A[3]=l>>>24&255,r.check=Ny(r.check,A,4,0)),l=0,u=0,r.mode=16183;case 16183:for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&4&r.wrap&&(A[0]=255&l,A[1]=l>>>8&255,r.check=Ny(r.check,A,2,0)),l=0,u=0,r.mode=16184;case 16184:if(1024&r.flags){for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&4&r.wrap&&(A[0]=255&l,A[1]=l>>>8&255,r.check=Ny(r.check,A,2,0)),l=0,u=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(f=r.length,f>a&&(f=a),f&&(r.head&&(E=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+f),E)),512&r.flags&&4&r.wrap&&(r.check=Ny(r.check,n,f,s)),a-=f,s+=f,r.length-=f),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===a)break e;f=0;do{E=n[s+f++],r.head&&E&&r.length<65536&&(r.head.name+=String.fromCharCode(E))}while(E&&f<a);if(512&r.flags&&4&r.wrap&&(r.check=Ny(r.check,n,f,s)),a-=f,s+=f,E)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===a)break e;f=0;do{E=n[s+f++],r.head&&E&&r.length<65536&&(r.head.comment+=String.fromCharCode(E))}while(E&&f<a);if(512&r.flags&&4&r.wrap&&(r.check=Ny(r.check,n,f,s)),a-=f,s+=f,E)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(4&r.wrap&&l!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Rw;break}l=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=kw;break;case 16189:for(;u<32;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}e.adler=r.check=Lw(l),l=0,u=0,r.mode=Iw;case Iw:if(0===r.havedict)return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=l,r.bits=u,ww;e.adler=r.check=1,r.mode=kw;case kw:if(t===gw||t===mw)break e;case Tw:if(r.last){l>>>=7&u,u-=7&u,r.mode=Mw;break}for(;u<3;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}switch(r.last=1&l,l>>>=1,u-=1,3&l){case 0:r.mode=16193;break;case 1:if(Ww(r),r.mode=Cw,t===mw){l>>>=2,u-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=Rw}l>>>=2,u-=2;break;case 16193:for(l>>>=7&u,u-=7&u;u<32;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Rw;break}if(r.length=65535&l,l=0,u=0,r.mode=Pw,t===mw)break e;case Pw:r.mode=16195;case 16195:if(f=r.length,f){if(f>a&&(f=a),f>c&&(f=c),0===f)break e;i.set(n.subarray(s,s+f),o),a-=f,s+=f,c-=f,o+=f,r.length-=f;break}r.mode=kw;break;case 16196:for(;u<14;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(r.nlen=257+(31&l),l>>>=5,u-=5,r.ndist=1+(31&l),l>>>=5,u-=5,r.ncode=4+(15&l),l>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Rw;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;u<3;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.lens[T[r.have++]]=7&l,l>>>=3,u-=3}for(;r.have<19;)r.lens[T[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},x=fw(0,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,x){e.msg="invalid code lengths set",r.mode=Rw;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;S=r.lencode[l&(1<<r.lenbits)-1],m=S>>>24,y=S>>>16&255,b=65535&S,!(m<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(b<16)l>>>=m,u-=m,r.lens[r.have++]=b;else{if(16===b){for(k=m+2;u<k;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(l>>>=m,u-=m,0===r.have){e.msg="invalid bit length repeat",r.mode=Rw;break}E=r.lens[r.have-1],f=3+(3&l),l>>>=2,u-=2}else if(17===b){for(k=m+3;u<k;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}l>>>=m,u-=m,E=0,f=3+(7&l),l>>>=3,u-=3}else{for(k=m+7;u<k;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}l>>>=m,u-=m,E=0,f=11+(127&l),l>>>=7,u-=7}if(r.have+f>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Rw;break}for(;f--;)r.lens[r.have++]=E}}if(r.mode===Rw)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=Rw;break}if(r.lenbits=9,I={bits:r.lenbits},x=fw(1,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,x){e.msg="invalid literal/lengths set",r.mode=Rw;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},x=fw(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,x){e.msg="invalid distances set",r.mode=Rw;break}if(r.mode=Cw,t===mw)break e;case Cw:r.mode=Ow;case Ow:if(a>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=l,r.bits=u,cw(e,d),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,l=r.hold,u=r.bits,r.mode===kw&&(r.back=-1);break}for(r.back=0;S=r.lencode[l&(1<<r.lenbits)-1],m=S>>>24,y=S>>>16&255,b=65535&S,!(m<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(y&&!(240&y)){for(w=m,v=y,_=b;S=r.lencode[_+((l&(1<<w+v)-1)>>w)],m=S>>>24,y=S>>>16&255,b=65535&S,!(w+m<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}l>>>=w,u-=w,r.back+=w}if(l>>>=m,u-=m,r.back+=m,r.length=b,0===y){r.mode=16205;break}if(32&y){r.back=-1,r.mode=kw;break}if(64&y){e.msg="invalid literal/length code",r.mode=Rw;break}r.extra=15&y,r.mode=16201;case 16201:if(r.extra){for(k=r.extra;u<k;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;S=r.distcode[l&(1<<r.distbits)-1],m=S>>>24,y=S>>>16&255,b=65535&S,!(m<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(!(240&y)){for(w=m,v=y,_=b;S=r.distcode[_+((l&(1<<w+v)-1)>>w)],m=S>>>24,y=S>>>16&255,b=65535&S,!(w+m<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}l>>>=w,u-=w,r.back+=w}if(l>>>=m,u-=m,r.back+=m,64&y){e.msg="invalid distance code",r.mode=Rw;break}r.offset=b,r.extra=15&y,r.mode=16203;case 16203:if(r.extra){for(k=r.extra;u<k;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Rw;break}r.mode=16204;case 16204:if(0===c)break e;if(f=d-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Rw;break}f>r.wnext?(f-=r.wnext,p=r.wsize-f):p=r.wnext-f,f>r.length&&(f=r.length),g=r.window}else g=i,p=o-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do{i[o++]=g[p++]}while(--f);0===r.length&&(r.mode=Ow);break;case 16205:if(0===c)break e;i[o++]=r.length,c--,r.mode=Ow;break;case Mw:if(r.wrap){for(;u<32;){if(0===a)break e;a--,l|=n[s++]<<u,u+=8}if(d-=c,e.total_out+=d,r.total+=d,4&r.wrap&&d&&(e.adler=r.check=r.flags?Ny(r.check,i,d,o-d):Ry(r.check,i,d,o-d)),d=c,4&r.wrap&&(r.flags?l:Lw(l))!==r.check){e.msg="incorrect data check",r.mode=Rw;break}l=0,u=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;u<32;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(4&r.wrap&&l!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Rw;break}l=0,u=0}r.mode=16208;case 16208:x=bw;break e;case Rw:x=_w;break e;case 16210:return Ew;default:return vw}return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=l,r.bits=u,(r.wsize||d!==e.avail_out&&r.mode<Rw&&(r.mode<Mw||t!==pw))&&Hw(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,r.total+=d,4&r.wrap&&d&&(e.adler=r.check=r.flags?Ny(r.check,i,d,e.next_out-d):Ry(r.check,i,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===kw?128:0)+(r.mode===Cw||r.mode===Pw?256:0),(0===h&&0===d||t===pw)&&x===yw&&(x=xw),x},Zw=e=>{if(Bw(e))return vw;let t=e.state;return t.window&&(t.window=null),e.state=null,yw},Yw=(e,t)=>{if(Bw(e))return vw;const r=e.state;return 2&r.wrap?(r.head=t,t.done=!1,yw):vw},Jw=(e,t)=>{const r=t.length;let n,i,s;return Bw(e)?vw:(n=e.state,0!==n.wrap&&n.mode!==Iw?vw:n.mode===Iw&&(i=1,i=Ry(i,t,r,0),i!==n.check)?_w:(s=Hw(e,t,r,r),s?(n.mode=16210,Ew):(n.havedict=1,yw)))},Xw=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Qw=Object.prototype.toString,{Z_NO_FLUSH:ev,Z_FINISH:tv,Z_OK:rv,Z_STREAM_END:nv,Z_NEED_DICT:iv,Z_STREAM_ERROR:sv,Z_DATA_ERROR:ov,Z_MEM_ERROR:av}=Dy;function cv(e){this.options=jb({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Kb,this.strm.avail_out=0;let r=Kw(this.strm,t.windowBits);if(r!==rv)throw new Error(By[r]);if(this.header=new Xw,Yw(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Wb(t.dictionary):"[object ArrayBuffer]"===Qw.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Jw(this.strm,t.dictionary),r!==rv)))throw new Error(By[r])}function lv(e,t){const r=new cv(t);if(r.push(e),r.err)throw r.msg||By[r.err];return r.result}cv.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=t===~~t?t:!0===t?tv:ev,"[object ArrayBuffer]"===Qw.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=Gw(r,o),s===iv&&i&&(s=Jw(r,i),s===rv?s=Gw(r,o):s===ov&&(s=iv));r.avail_in>0&&s===nv&&r.state.wrap>0&&0!==e[r.next_in];)Vw(r),s=Gw(r,o);switch(s){case sv:case ov:case iv:case av:return this.onEnd(s),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(0===r.avail_out||s===nv))if("string"===this.options.to){let e=Vb(r.output,r.next_out),t=r.next_out-e,i=Hb(r.output,e);r.next_out=t,r.avail_out=n-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(s!==rv||0!==a){if(s===nv)return s=Zw(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},cv.prototype.onData=function(e){this.chunks.push(e)},cv.prototype.onEnd=function(e){e===rv&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Fb(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var uv={Inflate:cv,inflate:lv,inflateRaw:function(e,t){return(t=t||{}).raw=!0,lv(e,t)},ungzip:lv,constants:Dy};const{Deflate:hv,deflate:dv,deflateRaw:fv,gzip:pv}=ow,{Inflate:gv,inflate:mv,inflateRaw:yv,ungzip:bv}=uv;var wv=mv,vv=r(228),_v=r.n(vv);const Ev=e=>"version"in e;var xv=Object.freeze({__proto__:null,encode:function(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"0x")},decode:function(e){0===e.indexOf("0x")&&(e=e.substr(2)),e.length%2==1&&(e="0"+e);let t=e.match(/.{2}/g);return null===t?m.Buffer.from([]):m.Buffer.from(t.map((e=>parseInt(e,16))))}});function Sv(e){return new TextDecoder("utf-8").decode(e)}function Av(e){return(new TextEncoder).encode(e)}var Iv=Object.freeze({__proto__:null,decode:Sv,encode:Av});function kv(e){return Ym().encode(e)}var Tv=Object.freeze({__proto__:null,encode:kv,decode:function(e){return Ym().decode(e)}});function Pv(e){return e.toString("base64")}function Cv(e){return m.Buffer.from(e,"base64")}var Ov=Object.freeze({__proto__:null,encode:Pv,decode:Cv}),Mv=Object.freeze({__proto__:null,hex:xv,utf8:Iv,bs58:Tv,base64:Ov});function Rv(e,...t){if(e.args.length!=t.length)throw new Error("Invalid argument length");const r={};let n=0;return e.args.forEach((e=>{r[e.name]=t[n],n+=1})),r}function Lv(e,t={}){e.forEach((e=>{if("accounts"in e)Lv(e.accounts,t[e.name]);else if(void 0===t[e.name])throw new Error(`Invalid arguments: ${e.name} not provided.`)}))}function Nv(e){return e instanceof Gm.PublicKey?e:new Gm.PublicKey(e)}class Bv extends TypeError{constructor(e,t){let r;const{message:n,...i}=e,{path:s}=e;super(0===s.length?n:"At path: "+s.join(".")+" -- "+n),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var n;return null!=(n=r)?n:r=[e,...t()]}}}function Dv(e){return"object"==typeof e&&null!=e}function Uv(e){return"string"==typeof e?JSON.stringify(e):""+e}function zv(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:s}=t,{type:o}=r,{refinement:a,message:c="Expected a value of type `"+o+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+Uv(n)+"`"}=e;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...e,message:c}}function*jv(e,t,r,n){(function(e){return Dv(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const i of e){const e=zv(i,t,r,n);e&&(yield e)}}function*Fv(e,t,r){void 0===r&&(r={});const{path:n=[],branch:i=[e],coerce:s=!1,mask:o=!1}=r,a={path:n,branch:i};if(s&&(e=t.coercer(e,a),o&&"type"!==t.type&&Dv(t.schema)&&Dv(e)&&!Array.isArray(e)))for(const r in e)void 0===t.schema[r]&&delete e[r];let c=!0;for(const r of t.validator(e,a))c=!1,yield[r,void 0];for(let[r,l,u]of t.entries(e,a)){const t=Fv(l,u,{path:void 0===r?n:[...n,r],branch:void 0===r?i:[...i,l],coerce:s,mask:o});for(const n of t)n[0]?(c=!1,yield[n[0],void 0]):s&&(l=n[1],void 0===r?e=l:e instanceof Map?e.set(r,l):e instanceof Set?e.add(l):Dv(e)&&(e[r]=l))}if(c)for(const r of t.refiner(e,a))c=!1,yield[r,void 0];c&&(yield[void 0,e])}class $v{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:t,schema:r,validator:n,refiner:i,coercer:s=e=>e,entries:o=function*(){}}=e;this.type=t,this.schema=r,this.entries=o,this.coercer=s,this.validator=n?(e,t)=>jv(n(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>jv(i(e,t),t,this,e):()=>[]}assert(e){return function(e,t){const r=Hv(e,t);if(r[0])throw r[0]}(e,this)}create(e){return qv(e,this)}is(e){return Wv(e,this)}mask(e){return function(e,t){const r=Hv(e,t,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}(e,this)}validate(e,t){return void 0===t&&(t={}),Hv(e,this,t)}}function qv(e,t){const r=Hv(e,t,{coerce:!0});if(r[0])throw r[0];return r[1]}function Wv(e,t){return!Hv(e,t)[0]}function Hv(e,t,r){void 0===r&&(r={});const n=Fv(e,t,r),i=function(e){const{done:t,value:r}=e.next();return t?void 0:r}(n);return i[0]?[new Bv(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])})),void 0]:[void 0,i[1]]}function Vv(e,t){return new $v({type:e,schema:null,validator:t})}function Kv(e){return new $v({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+Uv(e)})}function Gv(e){const t=Uv(e),r=typeof e;return new $v({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||"Expected the literal `"+t+"`, but received: "+Uv(r)})}function Zv(e){return new $v({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function Yv(){return Vv("number",(e=>"number"==typeof e&&!isNaN(e)||"Expected a number, but received: "+Uv(e)))}function Jv(e){return new $v({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function Xv(){return Vv("string",(e=>"string"==typeof e||"Expected a string, but received: "+Uv(e)))}function Qv(e){const t=Object.keys(e);return new $v({type:"type",schema:e,*entries(r){if(Dv(r))for(const n of t)yield[n,r[n],e[n]]},validator:e=>Dv(e)||"Expected an object, but received: "+Uv(e)})}function e_(e){const t=e.map((e=>e.type)).join(" | ");return new $v({type:"union",schema:null,coercer(t,r){const n=e.find((e=>{const[r]=e.validate(t,{coerce:!0});return!r}))||t_();return n.coercer(t,r)},validator(r,n){const i=[];for(const t of e){const[...e]=Fv(r,t,n),[s]=e;if(!s[0])return[];for(const[t]of e)t&&i.push(t)}return["Expected the value to satisfy a union of `"+t+"`, but received: "+Uv(r),...i]}})}function t_(){return Vv("unknown",(()=>!0))}async function r_(e,t,r){if(t.length<=99)return await n_(e,t,r);{const n=function(e){return Array.apply(0,new Array(Math.ceil(e.length/99))).map(((t,r)=>e.slice(99*r,99*(r+1))))}(t);return(await Promise.all(n.map((t=>n_(e,t,r))))).flat()}}async function n_(e,t,r){const n=null!=r?r:e.commitment,{value:i,context:s}=await e.getMultipleAccountsInfoAndContext(t,n);return i.map(((e,r)=>null===e?null:{publicKey:t[r],account:e,context:s}))}async function i_(e,t,r,n,i){var s;r&&r.length>0&&t.sign(...r);const o=t._compile(),a=o.serialize(),c=t._serialize(a).toString("base64"),l={encoding:"base64",commitment:null!=n?n:e.commitment};if(i){const e=(Array.isArray(i)?i:o.nonProgramIds()).map((e=>e.toBase58()));l.accounts={encoding:"base64",addresses:e}}r&&(l.sigVerify=!0);const u=[c,l],h=qv(await e._rpcRequest("simulateTransaction",u),a_);if("error"in h){let e;if("data"in h.error&&(e=null===(s=h.error.data)||void 0===s?void 0:s.logs,e&&Array.isArray(e))){const t="\n    ",r=t+e.join(t);console.error(h.error.message,r)}throw new Gm.SendTransactionError("failed to simulate transaction: "+h.error.message,e)}return h.result}const s_=o_(t_());function o_(e){return e_([Qv({jsonrpc:Gv("2.0"),id:Xv(),result:e}),Qv({jsonrpc:Gv("2.0"),id:Xv(),error:Qv({code:t_(),message:Xv(),data:Jv(Vv("any",(()=>!0)))})})])}const a_=(l_=Qv({err:Zv(e_([Qv({}),Xv()])),logs:Zv(Kv(Xv())),accounts:Jv(Zv(Kv(Zv(Qv({executable:Vv("boolean",(e=>"boolean"==typeof e)),owner:Xv(),lamports:Yv(),data:Kv(Xv()),rentEpoch:Jv(Yv())}))))),unitsConsumed:Jv(Yv())}),function(e,t){return new $v({...e,coercer:(r,n)=>Wv(r,t)?e.coercer((e=>"error"in e?e:{...e,result:qv(e.result,c_)})(r),n):e.coercer(r,n)})}(o_(c_=Qv({context:Qv({slot:Yv()}),value:l_})),s_));var c_,l_,u_=Object.freeze({__proto__:null,invoke:async function(e,t,r,n){e=Nv(e),n||(n=g_());const i=new Gm.Transaction;if(i.add(new Gm.TransactionInstruction({programId:e,keys:null!=t?t:[],data:r})),void 0===n.sendAndConfirm)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");return await n.sendAndConfirm(i,[])},getMultipleAccounts:async function(e,t,r){return(await r_(e,t,r)).map((e=>e?{publicKey:e.publicKey,account:e.account}:null))},getMultipleAccountsAndContext:r_,simulateTransaction:i_});class h_{constructor(e,t,r){this.connection=e,this.wallet=t,this.opts=r,this.publicKey=null==t?void 0:t.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,r){var n,i,s,o;if(void 0===r&&(r=this.opts),Ev(e))t&&e.sign(t);else if(e.feePayer=null!==(n=e.feePayer)&&void 0!==n?n:this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(r.preflightCommitment)).blockhash,t)for(const r of t)e.partialSign(r);const a=(e=await this.wallet.signTransaction(e)).serialize();try{return await f_(this.connection,a,r)}catch(t){if(t instanceof p_){const r=kv(Ev(e)?(null===(i=e.signatures)||void 0===i?void 0:i[0])||new Uint8Array:null!==(s=e.signature)&&void 0!==s?s:new Uint8Array),n=await this.connection.getTransaction(r,{commitment:"confirmed"});if(n){const e=null===(o=n.meta)||void 0===o?void 0:o.logMessages;throw e?new Gm.SendTransactionError(t.message,e):t}throw t}throw t}}async sendAll(e,t){var r,n,i;void 0===t&&(t=this.opts);const s=(await this.connection.getLatestBlockhash(t.preflightCommitment)).blockhash;let o=e.map((e=>{var t,r;if(Ev(e.tx)){let t=e.tx;return e.signers&&t.sign(e.signers),t}{let n=e.tx,i=null!==(t=e.signers)&&void 0!==t?t:[];return n.feePayer=null!==(r=n.feePayer)&&void 0!==r?r:this.wallet.publicKey,n.recentBlockhash=s,i.forEach((e=>{n.partialSign(e)})),n}}));const a=await this.wallet.signAllTransactions(o),c=[];for(let e=0;e<o.length;e+=1){const s=a[e],o=s.serialize();try{c.push(await f_(this.connection,o,t))}catch(e){if(e instanceof p_){const t=kv(Ev(s)?(null===(r=s.signatures)||void 0===r?void 0:r[0])||new Uint8Array:null!==(n=s.signature)&&void 0!==n?n:new Uint8Array),o=await this.connection.getTransaction(t,{commitment:"confirmed"});if(o){const t=null===(i=o.meta)||void 0===i?void 0:i.logMessages;throw t?new Gm.SendTransactionError(e.message,t):e}throw e}throw e}}return c}async simulate(e,t,r,n){let i,s=(await this.connection.getLatestBlockhash(null!=r?r:this.connection.commitment)).blockhash;if(Ev(e)?(t&&(e.sign(t),e=await this.wallet.signTransaction(e)),i=await this.connection.simulateTransaction(e,{commitment:r})):(e.feePayer=e.feePayer||this.wallet.publicKey,e.recentBlockhash=s,t&&(e=await this.wallet.signTransaction(e)),i=await i_(this.connection,e,t,r,n)),i.value.err)throw new d_(i.value);return i.value}}class d_ extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function f_(e,t,r){const n=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment},i=await e.sendRawTransaction(t,n),s=(await e.confirmTransaction(i,r&&r.commitment)).value;if(s.err)throw new p_(`Raw transaction ${i} failed (${JSON.stringify(s)})`);return i}class p_ extends Error{constructor(e){super(e)}}function g_(){return null===m_?h_.local():m_}let m_=null;const y_=new Set(["anchor-deprecated-state","debug-logs"]),b_=new Map;function w_(e){return void 0!==b_.get(e)}var v_=Object.freeze({__proto__:null,set:function(e){if(!y_.has(e))throw new Error("Invalid feature");b_.set(e,!0)},isSet:w_});class __ extends Error{constructor(e){super(e),this.name="IdlError"}}class E_{constructor(e){this.stack=e}static parse(e){var t;const r=/^Program (\w*) invoke/,n=/^Program \w* success/,i=[];for(let s=0;s<e.length;s++){if(n.exec(e[s])){i.pop();continue}const o=null===(t=r.exec(e[s]))||void 0===t?void 0:t[1];o&&i.push(new Gm.PublicKey(o))}return new E_(i)}}class x_ extends Error{constructor(e,t,r,n,i,s){super(r.join("\n").replace("Program log: ","")),this.errorLogs=r,this.logs=n,this.error={errorCode:e,errorMessage:t,comparedValues:s,origin:i},this._programErrorStack=E_.parse(n)}static parse(e){if(!e)return null;const t=e.findIndex((e=>e.startsWith("Program log: AnchorError")));if(-1===t)return null;const r=e[t],n=[r];let i;if(t+1<e.length)if("Program log: Left:"===e[t+1]){const r=/^Program log: (.*)$/,s=r.exec(e[t+2])[1],o=r.exec(e[t+4])[1];i=[new Gm.PublicKey(s),new Gm.PublicKey(o)],n.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){const r=/^Program log: (Left|Right): (.*)$/,s=r.exec(e[t+1])[2],o=r.exec(e[t+2])[2];n.push(...e.slice(t+1,t+3)),i=[s,o]}const s=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),o=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),a=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r);if(s){const[t,r,o]=s.slice(1,4),a={code:t,number:parseInt(r)};return new x_(a,o,n,e,void 0,i)}if(o){const[t,r,s,a,c]=o.slice(1,6),l={code:s,number:parseInt(a)},u={file:t,line:parseInt(r)};return new x_(l,c,n,e,u,i)}if(a){const[t,r,s,o]=a.slice(1,5),c=t,l={code:r,number:parseInt(s)};return new x_(l,o,n,e,c,i)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class S_ extends Error{constructor(e,t,r){super(),this.code=e,this.msg=t,this.logs=r,r&&(this._programErrorStack=E_.parse(r))}static parse(e,t){const r=e.toString();let n,i;if(r.includes("custom program error:")){let e=r.split("custom program error: ");if(2!==e.length)return null;n=e[1]}else{const e=r.match(/"Custom":([0-9]+)}/g);if(!e||e.length>1)return null;n=e[0].match(/([0-9]+)/g)[0]}try{i=parseInt(n)}catch(e){return null}let s=t.get(i);return void 0!==s?new S_(i,s,e.logs):(s=I_.get(i),void 0!==s?new S_(i,s,e.logs):null)}get program(){var e;return null===(e=this._programErrorStack)||void 0===e?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return null===(e=this._programErrorStack)||void 0===e?void 0:e.stack}toString(){return this.msg}}function A_(e,t){w_("debug-logs")&&console.log("Translating error:",e);const r=x_.parse(e.logs);if(r)return r;const n=S_.parse(e,t);if(n)return n;if(e.logs){const t={get:function(t,r){return"programErrorStack"===r?t.programErrorStack.stack:"program"===r?t.programErrorStack.stack[e.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return e.programErrorStack=E_.parse(e.logs),new Proxy(e,t)}return e}const I_=new Map([[100,"8 byte instruction identifier not provided"],[101,"Fallback functions are not supported"],[102,"The program could not deserialize the given instruction"],[103,"The program could not serialize the given instruction"],[1e3,"The program was compiled without idl instructions"],[1001,"The transaction was given an invalid program for the IDL instruction"],[2e3,"A mut constraint was violated"],[2001,"A has one constraint was violated"],[2002,"A signer constraint was violated"],[2003,"A raw constraint was violated"],[2004,"An owner constraint was violated"],[2005,"A rent exemption constraint was violated"],[2006,"A seeds constraint was violated"],[2007,"An executable constraint was violated"],[2008,"Deprecated Error, feel free to replace with something else"],[2009,"An associated constraint was violated"],[2010,"An associated init constraint was violated"],[2011,"A close constraint was violated"],[2012,"An address constraint was violated"],[2013,"Expected zero account discriminant"],[2014,"A token mint constraint was violated"],[2015,"A token owner constraint was violated"],[2016,"A mint mint authority constraint was violated"],[2017,"A mint freeze authority constraint was violated"],[2018,"A mint decimals constraint was violated"],[2019,"A space constraint was violated"],[2020,"A required account for the constraint is None"],[2500,"A require expression was violated"],[2501,"A require_eq expression was violated"],[2502,"A require_keys_eq expression was violated"],[2503,"A require_neq expression was violated"],[2504,"A require_keys_neq expression was violated"],[2505,"A require_gt expression was violated"],[2506,"A require_gte expression was violated"],[3e3,"The account discriminator was already set on this account"],[3001,"No 8 byte discriminator was found on the account"],[3002,"8 byte discriminator did not match what was expected"],[3003,"Failed to deserialize the account"],[3004,"Failed to serialize the account"],[3005,"Not enough account keys given to the instruction"],[3006,"The given account is not mutable"],[3007,"The given account is owned by a different program than expected"],[3008,"Program ID was not as expected"],[3009,"Program account is not executable"],[3010,"The given account did not sign"],[3011,"The given account is not owned by the system program"],[3012,"The program expected this account to be already initialized"],[3013,"The given account is not a program data account"],[3014,"The given account is not the associated token account"],[3015,"The given public key does not match the required sysvar"],[3016,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[3017,"The account was duplicated for more than one reallocation"],[4100,"The declared program id does not match the actual program id"],[5e3,"The API being used is deprecated and should no longer be used"]]);var k_=function(){return k_=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},k_.apply(this,arguments)},T_=function(){return T_=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},T_.apply(this,arguments)};function P_(e){return e.toLowerCase()}var C_=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],O_=/[^A-Z0-9]+/gi;function M_(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce((function(e,t){return e.replace(t,r)}),e)}class R_{static fieldLayout(e,t){const r=void 0!==e.name?Xm()(e.name):void 0;switch(e.type){case"bool":return Qm.bool(r);case"u8":return Qm.u8(r);case"i8":return Qm.i8(r);case"u16":return Qm.u16(r);case"i16":return Qm.i16(r);case"u32":return Qm.u32(r);case"i32":return Qm.i32(r);case"f32":return Qm.f32(r);case"u64":return Qm.u64(r);case"i64":return Qm.i64(r);case"f64":return Qm.f64(r);case"u128":return Qm.u128(r);case"i128":return Qm.i128(r);case"u256":return Qm.u256(r);case"i256":return Qm.i256(r);case"bytes":return Qm.vecU8(r);case"string":return Qm.str(r);case"publicKey":return Qm.publicKey(r);default:if("vec"in e.type)return Qm.vec(R_.fieldLayout({name:void 0,type:e.type.vec},t),r);if("option"in e.type)return Qm.option(R_.fieldLayout({name:void 0,type:e.type.option},t),r);if("defined"in e.type){if(!t)throw new __("User defined types not provided");const n=e.type.defined,i=t.filter((e=>e.name===n));if(1!==i.length)throw new __(`Type not found: ${JSON.stringify(e)}`);return R_.typeDefLayout(i[0],t,r)}if("array"in e.type){let n=e.type.array[0],i=e.type.array[1],s=R_.fieldLayout({name:void 0,type:n},t);return Qm.array(s,i,r)}throw new Error(`Not yet implemented: ${e}`)}}static typeDefLayout(e,t=[],r){switch(e.type.kind){case"struct":{const n=e.type.fields.map((e=>R_.fieldLayout(e,t)));return Qm.struct(n,r)}case"enum":{let n=e.type.variants.map((e=>{const r=Xm()(e.name);if(!e.fields)return Qm.struct([],r);const n=e.fields.map(((e,r)=>(null==e?void 0:e.name)?R_.fieldLayout(e,t):R_.fieldLayout({type:e,name:r.toString()},t)));return Qm.struct(n,r)}));return void 0!==r?Qm.rustEnum(n).replicate(r):Qm.rustEnum(n,r)}case"alias":return R_.fieldLayout({type:e.type.value,name:e.name},t)}}}const L_="global";class N_{constructor(e){this.idl=e,this.ixLayout=N_.parseIxLayout(e);const t=new Map;e.instructions.forEach((e=>{const r=D_(L_,e.name);t.set(Ym().encode(r),{layout:this.ixLayout.get(e.name),name:e.name})})),this.sighashLayouts=t}encode(e,t){return this._encode(L_,e,t)}_encode(e,t,r){const n=m.Buffer.alloc(1e3),i=Xm()(t),s=this.ixLayout.get(i);if(!s)throw new Error(`Unknown method: ${i}`);const o=s.encode(r,n),a=n.slice(0,o);return m.Buffer.concat([D_(e,t),a])}static parseIxLayout(e){const t=e.instructions.map((t=>{let r=t.args.map((t=>{var r,n;return R_.fieldLayout(t,Array.from([...null!==(r=e.accounts)&&void 0!==r?r:[],...null!==(n=e.types)&&void 0!==n?n:[]]))}));const n=Xm()(t.name);return[n,Qm.struct(r,n)]}));return new Map(t)}decode(e,t="hex"){"string"==typeof e&&(e="hex"===t?m.Buffer.from(e,"hex"):Ym().decode(e));let r=Ym().encode(e.slice(0,8)),n=e.slice(8);const i=this.sighashLayouts.get(r);return i?{data:i.layout.decode(n),name:i.name}:null}format(e,t){return B_.format(e,t,this.idl)}}class B_{static format(e,t,r){const n=r.instructions.filter((t=>e.name===t.name))[0];if(void 0===n)return console.error("Invalid instruction given"),null;const i=n.args.map((t=>({name:t.name,type:B_.formatIdlType(t.type),data:B_.formatIdlData(t,e.data[t.name],r.types)}))),s=B_.flattenIdlAccounts(n.accounts);return{args:i,accounts:t.map(((e,t)=>t<s.length?{name:s[t].name,...e}:{name:void 0,...e}))}}static formatIdlType(e){if("string"==typeof e)return e;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("defined"in e)return e.defined;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,r){if("string"==typeof e.type)return t.toString();if(e.type.hasOwnProperty("vec"))return"["+t.map((t=>this.formatIdlData({name:"",type:e.type.vec},t))).join(", ")+"]";if(e.type.hasOwnProperty("option"))return null===t?"null":this.formatIdlData({name:"",type:e.type.option},t,r);if(e.type.hasOwnProperty("defined")){if(void 0===r)throw new Error("User defined types not provided");const n=r.filter((t=>t.name===e.type.defined));if(1!==n.length)throw new Error(`Type not found: ${e.type.defined}`);return B_.formatIdlDataDefined(n[0],t,r)}return"unknown"}static formatIdlDataDefined(e,t,r){switch(e.type.kind){case"struct":{const n=e.type,i=Object.keys(t).map((e=>{const i=n.fields.find((t=>t.name===e));if(!i)throw new Error("Unable to find type");return e+": "+B_.formatIdlData(i,t[e],r)})).join(", ");return"{ "+i+" }"}case"enum":if(0===e.type.variants.length)return"{}";if(e.type.variants[0].name){const n=e.type.variants,i=Object.keys(t)[0],s=t[i],o=Object.keys(s).map((e=>{var t;const o=s[e],a=null===(t=n[i])||void 0===t?void 0:t.find((t=>t.name===e));if(!a)throw new Error("Unable to find variant");return e+": "+B_.formatIdlData(a,o,r)})).join(", "),a=Xm()(i,{pascalCase:!0});return 0===o.length?a:`${a} { ${o} }`}return"Tuple formatting not yet implemented";case"alias":return B_.formatIdlType(e.type.value)}}static flattenIdlAccounts(e,t){return e.map((e=>{const r=function(e){const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}(e.name);if(e.hasOwnProperty("accounts")){const n=t?`${t} > ${r}`:r;return B_.flattenIdlAccounts(e.accounts,n)}return{...e,name:t?`${t} > ${r}`:r}})).flat()}}function D_(e,t){var r;let n=`${e}:${void 0===r&&(r={}),function(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,n=void 0===r?C_:r,i=t.stripRegexp,s=void 0===i?O_:i,o=t.transform,a=void 0===o?P_:o,c=t.delimiter,l=void 0===c?" ":c,u=M_(M_(e,n,"$1\0$2"),s,"\0"),h=0,d=u.length;"\0"===u.charAt(h);)h++;for(;"\0"===u.charAt(d-1);)d--;return u.slice(h,d).split("\0").map(a).join(l)}(e,T_({delimiter:"."},t))}(t,k_({delimiter:"_"},r))}`;return m.Buffer.from((0,cr.sc)(n).slice(0,8))}function U_(e,t){switch(t.type.kind){case"struct":return t.type.fields.map((t=>z_(e,t.type))).reduce(((e,t)=>e+t),0);case"enum":{const r=t.type.variants.map((t=>t.fields?t.fields.map((t=>z_(e,"object"==typeof t&&"name"in t?t.type:t))).reduce(((e,t)=>e+t),0):0));return Math.max(...r)+1}case"alias":return z_(e,t.type.value)}}function z_(e,t){var r,n;switch(t){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"u256":case"i256":case"publicKey":return 32;default:if("vec"in t)return 1;if("option"in t)return 1+z_(e,t.option);if("coption"in t)return 4+z_(e,t.coption);if("defined"in t){const i=null!==(n=null===(r=e.types)||void 0===r?void 0:r.filter((e=>e.name===t.defined)))&&void 0!==n?n:[];if(1!==i.length)throw new __(`Type not found: ${JSON.stringify(t)}`);return U_(e,i[0])}if("array"in t){let r=t.array[0],n=t.array[1];return z_(e,r)*n}throw new Error(`Invalid type ${JSON.stringify(t)}`)}}function j_(e){return Buffer.from((0,cr.sc)(e).slice(0,8))}class F_{constructor(e){if(void 0===e.accounts)return void(this.accountLayouts=new Map);const t=e.accounts.map((t=>[t.name,R_.typeDefLayout(t,e.types)]));this.accountLayouts=new Map(t),this.idl=e}async encode(e,t){const r=m.Buffer.alloc(1e3),n=this.accountLayouts.get(e);if(!n)throw new Error(`Unknown account: ${e}`);const i=n.encode(t,r);let s=r.slice(0,i),o=F_.accountDiscriminator(e);return m.Buffer.concat([o,s])}decode(e,t){if(F_.accountDiscriminator(e).compare(t.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeAny(e){const t=e.slice(0,8),r=Array.from(this.accountLayouts.keys()).find((e=>F_.accountDiscriminator(e).equals(t)));if(!r)throw new Error("Account descriminator not found");return this.decodeUnchecked(r,e)}decodeUnchecked(e,t){const r=t.subarray(8),n=this.accountLayouts.get(e);if(!n)throw new Error(`Unknown account: ${e}`);return n.decode(r)}memcmp(e,t){const r=F_.accountDiscriminator(e);return{offset:0,bytes:Ym().encode(t?m.Buffer.concat([r,t]):r)}}size(e){var t;return 8+(null!==(t=U_(this.idl,e))&&void 0!==t?t:0)}static accountDiscriminator(e){return j_(`account:${Xm()(e,{pascalCase:!0,preserveConsecutiveUppercase:!0})}`)}}class $_{constructor(e){if(void 0===e.events)return void(this.layouts=new Map);const t=e.events.map((t=>{let r={name:t.name,type:{kind:"struct",fields:t.fields.map((e=>({name:e.name,type:e.type})))}};return[t.name,R_.typeDefLayout(r,e.types)]}));this.layouts=new Map(t),this.discriminators=new Map(void 0===e.events?[]:e.events.map((e=>{return[Pv((t=e.name,j_(`event:${t}`))),e.name];var t})))}decode(e){let t;try{t=Cv(e)}catch(e){return null}const r=Pv(t.slice(0,8)),n=this.discriminators.get(r);if(void 0===n)return null;const i=this.layouts.get(n);if(!i)throw new Error(`Unknown event: ${n}`);return{data:i.decode(t.slice(8)),name:n}}}class q_{constructor(e){if(void 0===e.types)return void(this.typeLayouts=new Map);const t=e.types.map((t=>[t.name,R_.typeDefLayout(t,e.types)]));this.typeLayouts=new Map(t),this.idl=e}encode(e,t){const r=m.Buffer.alloc(1e3),n=this.typeLayouts.get(e);if(!n)throw new Error(`Unknown type: ${e}`);const i=n.encode(t,r);return r.slice(0,i)}decode(e,t){const r=this.typeLayouts.get(e);if(!r)throw new Error(`Unknown type: ${e}`);return r.decode(t)}}class W_{constructor(e){this.instruction=new N_(e),this.accounts=new F_(e),this.events=new $_(e),this.types=new q_(e)}}var H_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function V_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class K_{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,r){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var G_=K_;class Z_ extends K_{isCount(){throw new Error("ExternalLayout is abstract")}}class Y_ extends Z_{constructor(e,t,r){if(!(e instanceof K_))throw new TypeError("layout must be a Layout");if(void 0===t)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof J_||this.layout instanceof X_}decode(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,r){return void 0===r&&(r=0),this.layout.encode(e,t,r+this.offset)}}class J_ extends K_{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeUIntLE(e,r,this.span),this.span}}class X_ extends K_{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeUIntBE(e,r,this.span),this.span}}const Q_=Math.pow(2,32);function eE(e){const t=Math.floor(e/Q_);return{hi32:t,lo32:e-t*Q_}}function tE(e,t){return e*Q_+t}class rE extends K_{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const r=e.readUInt32LE(t);return tE(e.readInt32LE(t+4),r)}encode(e,t,r){void 0===r&&(r=0);const n=eE(e);return t.writeUInt32LE(n.lo32,r),t.writeInt32LE(n.hi32,r+4),8}}class nE extends K_{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof K_),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===r&&(r=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(e){throw new RangeError("indeterminate span")}return r}decode(e,t){void 0===t&&(t=0);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r){void 0===r&&(r=0);const n=r;let i=0,s=0;for(const n of this.fields){let o=n.span;if(s=0<o?o:0,void 0!==n.property){const i=e[n.property];void 0!==i&&(s=n.encode(i,t,r),0>o&&(o=n.getSpan(t,r)))}i=r,r+=o}return i+s-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class iE{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class sE extends iE{constructor(e,t){if(!(e instanceof Z_&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}class oE extends K_{constructor(e,t,r){const n=e instanceof J_||e instanceof X_;if(n)e=new sE(new Y_(e));else if(e instanceof Z_&&e.isCount())e=new sE(e);else if(!(e instanceof iE))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof K_))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&n&&(i+=e.layout.span)),super(i,r),this.discriminator=e,this.usesPrefixDiscriminator=n,this.defaultLayout=t,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return s(e)},this.configGetSourceVariant=function(e){s=e.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(e,t){let r;void 0===t&&(t=0);const n=this.discriminator,i=n.decode(e,t);let s=this.registry[i];if(void 0===s){let o=0;s=this.defaultLayout,this.usesPrefixDiscriminator&&(o=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[s.property]=this.defaultLayout.decode(e,t+o)}else r=s.decode(e,t);return r}encode(e,t,r){void 0===r&&(r=0);const n=this.getSourceVariant(e);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let s=0;return this.usesPrefixDiscriminator&&(s=n.layout.span),n.encode(e[n.property],t,r),s+i.encode(e[i.property],t,r+s)}return n.encode(e,t,r)}addVariant(e,t,r){const n=new aE(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t){let r=e;return Buffer.isBuffer(e)&&(void 0===t&&(t=0),r=this.discriminator.decode(e,t)),this.registry[r]}}class aE extends K_{constructor(e,t,r,n){if(!(e instanceof oE))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof K_))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof n)throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(e,t+r)}decode(e,t){const r=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r){void 0===r&&(r=0);let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class cE extends K_{constructor(e,t){if(!(e instanceof Z_&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Z_||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t){void 0===t&&(t=0);let r=this.span;return 0>r&&(r=this.length.decode(e,t)),e.slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof Z_&&(n=e.length),!Buffer.isBuffer(e)||n!==e.length)throw new TypeError((i="Blob.encode",(this.property?i+"["+this.property+"]":i)+" requires (length "+n+") Buffer as src"));var i;if(r+n>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),r,n,"hex"),this.length instanceof Z_&&this.length.encode(n,t,r),n}}var lE=(e,t,r)=>new Y_(e,t,r),uE=e=>new J_(4,e),hE=e=>new rE(e),dE=(e,t,r)=>new nE(e,t,r),fE=(e,t,r)=>new oE(e,t,r),pE=(e,t)=>new cE(e,t);class gE extends G_{constructor(e){super(-1,e),this.property=e,this.layout=dE([uE("length"),uE("lengthPadding"),pE(lE(uE(),-8),"chars")],this.property)}encode(e,t,r=0){if(null==e)return this.layout.span;const n={chars:Buffer.from(e,"utf8")};return this.layout.encode(n,t,r)}decode(e,t=0){return this.layout.decode(e,t).chars.toString()}getSpan(e,t=0){return uE().span+uE().span+new(Gi())(new Uint8Array(e).slice(t,t+4),10,"le").toNumber()}}function mE(e){return new gE(e)}function yE(e){return pE(32,e)}const bE=fE(uE("instruction"));bE.addVariant(0,dE([hE("lamports"),hE("space"),yE("owner")]),"createAccount"),bE.addVariant(1,dE([yE("owner")]),"assign"),bE.addVariant(2,dE([hE("lamports")]),"transfer"),bE.addVariant(3,dE([yE("base"),mE("seed"),hE("lamports"),hE("space"),yE("owner")]),"createAccountWithSeed"),bE.addVariant(4,dE([yE("authorized")]),"advanceNonceAccount"),bE.addVariant(5,dE([hE("lamports")]),"withdrawNonceAccount"),bE.addVariant(6,dE([yE("authorized")]),"initializeNonceAccount"),bE.addVariant(7,dE([yE("authorized")]),"authorizeNonceAccount"),bE.addVariant(8,dE([hE("space")]),"allocate"),bE.addVariant(9,dE([yE("base"),mE("seed"),hE("space"),yE("owner")]),"allocateWithSeed"),bE.addVariant(10,dE([yE("base"),mE("seed"),yE("owner")]),"assignWithSeed"),bE.addVariant(11,dE([hE("lamports"),mE("seed"),yE("owner")]),"transferWithSeed"),Math.max(...Object.values(bE.registry).map((e=>e.span)));class wE extends G_{constructor(e,t,r,n){super(e.span,n),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}}function vE(e){return new wE(pE(32),(e=>new Gm.PublicKey(e)),(e=>e.toBuffer()),e)}dE([uE("version"),uE("state"),vE("authorizedPubkey"),vE("nonce"),dE([new class extends K_{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const r=e.readUInt32LE(t);return tE(e.readUInt32LE(t+4),r)}encode(e,t,r){void 0===r&&(r=0);const n=eE(e);return t.writeUInt32LE(n.lo32,r),t.writeUInt32LE(n.hi32,r+4),8}}("lamportsPerSignature")],"feeCalculator")]);var _E=Object.freeze({__proto__:null,hash:function(e){return(new TextDecoder).decode((0,cr.sc)(e))}});function EE(e,...t){let r=[m.Buffer.from([97,110,99,104,111,114])];t.forEach((e=>{r.push(e instanceof m.Buffer?e:Nv(e).toBuffer())}));const[n]=Gm.PublicKey.findProgramAddressSync(r,Nv(e));return n}var xE=Object.freeze({__proto__:null,createWithSeedSync:function(e,t,r){const n=m.Buffer.concat([e.toBuffer(),m.Buffer.from(t),r.toBuffer()]);return new Gm.PublicKey((0,cr.sc)(n))},associated:EE});const SE=new Gm.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),AE=new Gm.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var IE=Object.freeze({__proto__:null,TOKEN_PROGRAM_ID:SE,ASSOCIATED_PROGRAM_ID:AE,associatedAddress:function({mint:e,owner:t}){return Gm.PublicKey.findProgramAddressSync([t.toBuffer(),SE.toBuffer(),e.toBuffer()],AE)[0]}}),kE={exports:{}};!function(e,t){var r="undefined"!=typeof self?self:H_,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function g(e){var t=new FileReader,r=p(t);return t.readAsArrayBuffer(e),r}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&i&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=p(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=l(e),t=u(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},d.prototype.delete=function(e){delete this.map[l(e)]},d.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},d.prototype.set=function(e,t){this.map[l(e)]=u(t)},d.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),h(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),h(e)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e,t){var r,n,i=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),b.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function v(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},y.call(w.prototype),y.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];_.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function x(e,r){return new Promise((function(n,s){var o=new w(e,r);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new _(i,r))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",c)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}x.polyfill=!0,e.fetch||(e.fetch=x,e.Headers=d,e.Request=w,e.Response=_),t.Headers=d,t.Request=w,t.Response=_,t.fetch=x,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(kE,kE.exports);var TE=V_(kE.exports);async function PE(e,t){const r=await e.getAccountInfo(t);if(null===r)throw new Error("program account not found");const{program:n}=OE(r.data),i=await e.getAccountInfo(n.programdataAddress);if(null===i)throw new Error("program data account not found");const{programData:s}=OE(i.data);return s}const CE=Qm.rustEnum([Qm.struct([],"uninitialized"),Qm.struct([Qm.option(Qm.publicKey(),"authorityAddress")],"buffer"),Qm.struct([Qm.publicKey("programdataAddress")],"program"),Qm.struct([Qm.u64("slot"),Qm.option(Qm.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Qm.u32());function OE(e){return CE.decode(e)}var ME=Object.freeze({__proto__:null,verifiedBuild:async function(e,t,r=5){const n=`https://api.apr.dev/api/v0/program/${t.toString()}/latest?limit=${r}`,[i,s]=await Promise.all([PE(e,t),TE(n)]),o=(await s.json()).filter((e=>!e.aborted&&"Built"===e.state&&"Verified"===e.verified));if(0===o.length)return null;const a=o[0];return i.slot.toNumber()!==a.verified_slot?null:a},fetchData:PE,decodeUpgradeableLoaderState:OE}),RE=Object.freeze({__proto__:null,sha256:_E,rpc:u_,publicKey:xE,bytes:Mv,token:IE,features:v_,registry:ME});function LE(e){return"accounts"in e}const NE=Qm.struct([Qm.publicKey("authority"),Qm.vecU8("data")]);function BE(e,t){var r,n;let i={};const s=e.args?e.args.length:0;if(t.length>s){if(t.length!==s+1)throw new Error(`provided too many arguments ${t} to instruction ${null==e?void 0:e.name} expecting: ${null!==(n=null===(r=e.args)||void 0===r?void 0:r.map((e=>e.name)))&&void 0!==n?n:[]}`);i=t.pop()}return[t,i]}class DE{static build(e,t,r){if("_inner"===e.name)throw new __("the _inner name is reserved");const n=(...i)=>{const[s,o]=BE(e,[...i]);Lv(e.accounts,o.accounts);const a=n.accounts(o.accounts);return void 0!==o.remainingAccounts&&a.push(...o.remainingAccounts),w_("debug-logs")&&console.log("Outgoing account metas:",a),new Gm.TransactionInstruction({keys:a,programId:r,data:t(e.name,Rv(e,...s))})};return n.accounts=t=>DE.accountsArray(t,e.accounts,r,e.name),n}static accountsArray(e,t,r,n){return e?t.map((t=>{if(void 0!==("accounts"in t?t.accounts:void 0)){const i=e[t.name];return DE.accountsArray(i,t.accounts,r,n).flat()}{const i=t;let s;try{s=Nv(e[t.name])}catch(e){throw new Error(`Wrong input type for account "${t.name}" in the instruction accounts object${void 0!==n?' for instruction "'+n+'"':""}. Expected PublicKey or string.`)}const o=i.isOptional&&s.equals(r);return{pubkey:s,isWritable:i.isMut&&!o,isSigner:i.isSigner&&!o}}})).flat():[]}}class UE{static build(e,t){return(...r)=>{var n,i,s;const[,o]=BE(e,[...r]),a=new Gm.Transaction;if(o.preInstructions&&o.instructions)throw new Error("instructions is deprecated, use preInstructions");return null===(n=o.preInstructions)||void 0===n||n.forEach((e=>a.add(e))),null===(i=o.instructions)||void 0===i||i.forEach((e=>a.add(e))),a.add(t(...r)),null===(s=o.postInstructions)||void 0===s||s.forEach((e=>a.add(e))),a}}}class zE{static build(e,t,r,n){return async(...i)=>{var s;const o=t(...i),[,a]=BE(e,[...i]);if(void 0===n.sendAndConfirm)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await n.sendAndConfirm(o,null!==(s=a.signers)&&void 0!==s?s:[],a.options)}catch(e){throw A_(e,r)}}}}class jE{static build(e,t,r,n){var i;const s={};return null===(i=e.accounts)||void 0===i||i.forEach((i=>{const o=Xm()(i.name);s[o]=new FE(e,i,r,n,t)})),s}}class FE{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}get idlAccount(){return this._idlAccount}constructor(e,t,r,n,i){this._idlAccount=t,this._programId=r,this._provider=null!=n?n:g_(),this._coder=null!=i?i:new W_(e),this._size=this._coder.accounts.size(t)}async fetchNullable(e,t){const{data:r}=await this.fetchNullableAndContext(e,t);return r}async fetchNullableAndContext(e,t){const r=await this.getAccountInfoAndContext(e,t),{value:n,context:i}=r;return{data:n&&0!==n.data.length?this._coder.accounts.decode(this._idlAccount.name,n.data):null,context:i}}async fetch(e,t){const{data:r}=await this.fetchNullableAndContext(e,t);if(null===r)throw new Error(`Account does not exist or has no data ${e.toString()}`);return r}async fetchAndContext(e,t){const{data:r,context:n}=await this.fetchNullableAndContext(e,t);if(null===r)throw new Error(`Account does not exist ${e.toString()}`);return{data:r,context:n}}async fetchMultiple(e,t){return(await this.fetchMultipleAndContext(e,t)).map((e=>e?e.data:null))}async fetchMultipleAndContext(e,t){return(await r_(this._provider.connection,e.map((e=>Nv(e))),t)).map((e=>{if(null==e)return null;const{account:t,context:r}=e;return{data:this._coder.accounts.decode(this._idlAccount.name,t.data),context:r}}))}async all(e){const t=this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Buffer?e:void 0),r=[];return null!=(null==t?void 0:t.offset)&&null!=(null==t?void 0:t.bytes)&&r.push({memcmp:{offset:t.offset,bytes:t.bytes}}),null!=(null==t?void 0:t.dataSize)&&r.push({dataSize:t.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...r,...Array.isArray(e)?e:[]]})).map((({pubkey:e,account:t})=>({publicKey:e,account:this._coder.accounts.decode(this._idlAccount.name,t.data)})))}subscribe(e,t){const r=$E.get(e.toString());if(r)return r.ee;const n=new(_v());e=Nv(e);const i=this._provider.connection.onAccountChange(e,(e=>{const t=this._coder.accounts.decode(this._idlAccount.name,e.data);n.emit("change",t)}),t);return $E.set(e.toString(),{ee:n,listener:i}),n}async unsubscribe(e){let t=$E.get(e.toString());t?$E&&await this._provider.connection.removeAccountChangeListener(t.listener).then((()=>{$E.delete(e.toString())})).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(e,t){const r=this.size;if(void 0===this._provider.publicKey)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return Gm.SystemProgram.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:e.publicKey,space:null!=t?t:r,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(null!=t?t:r),programId:this._programId})}async associated(...e){const t=await this.associatedAddress(...e);return await this.fetch(t)}async associatedAddress(...e){return await EE(this._programId,...e)}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(Nv(e),t)}async getAccountInfoAndContext(e,t){return await this._provider.connection.getAccountInfoAndContext(Nv(e),t)}}const $E=new Map,qE="Program log: ";class WE{constructor(e,t,r){this._programId=e,this._provider=t,this._eventParser=new HE(e,r),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var r;let n=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(e)||this._eventListeners.set(e,[]),this._eventListeners.set(e,(null!==(r=this._eventListeners.get(e))&&void 0!==r?r:[]).concat(n)),this._eventCallbacks.set(n,[e,t]),void 0!==this._onLogsSubscriptionId||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,((e,t)=>{if(!e.err)for(const r of this._eventParser.parseLogs(e.logs)){const n=this._eventListeners.get(r.name);n&&n.forEach((n=>{const i=this._eventCallbacks.get(n);if(i){const[,n]=i;n(r.data,t.slot,e.signature)}}))}}))),n}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[r]=t;let n=this._eventListeners.get(r);if(!n)throw new Error(`Event listeners don't exist for ${r}!`);if(this._eventCallbacks.delete(e),n=n.filter((t=>t!==e)),this._eventListeners.set(r,n),0===n.length&&this._eventListeners.delete(r),0===this._eventCallbacks.size){if(0!==this._eventListeners.size)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);void 0!==this._onLogsSubscriptionId&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class HE{constructor(e,t){this.coder=t,this.programId=e}*parseLogs(e,t=!1){const r=new KE(e),n=new VE;let i=r.next();for(;null!==i;){let[e,s,o]=this.handleLog(n,i,t);e&&(yield e),s&&n.push(s),o&&n.pop(),i=r.next()}}handleLog(e,t,r){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t,r):[null,...this.handleSystemLog(t)]}handleProgramLog(e,t){if(e.startsWith(qE)||e.startsWith("Program data: ")){const r=e.startsWith(qE)?e.slice(13):e.slice(14),n=this.coder.events.decode(r);if(t&&null===n)throw new Error(`Unable to decode event ${r}`);return[n,null,!1]}return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return null!==t.match(/^Program (.*) success/g)?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class VE{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class KE{constructor(e){this.logs=e}next(){if(0===this.logs.length)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}class GE{static build(e,t,r,n,i,s,o){return async(...a)=>{var c;const l=t(...a),[,u]=BE(e,[...a]);let h;if(void 0===n.simulate)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{h=await n.simulate(l,u.signers,null===(c=u.options)||void 0===c?void 0:c.commitment)}catch(e){throw A_(e,r)}if(void 0===h)throw new Error("Unable to simulate transaction");const d=h.logs;if(!d)throw new Error("Simulated logs not found");const f=[];if(o.events){let e=new HE(s,i);for(const t of e.parseLogs(d))f.push(t)}return{events:f,raw:d}}}}function ZE(e){return new XE(pE(8),(e=>ex.fromBuffer(e)),(e=>e.toBuffer()),e)}function YE(e){return new XE(pE(32),(e=>new Gm.PublicKey(e)),(e=>e.toBuffer()),e)}function JE(e,t){return new QE(e,t)}class XE extends G_{constructor(e,t,r,n){super(e.span,n),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}}class QE extends G_{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=uE()}encode(e,t,r=0){return null==e?this.layout.span+this.discriminator.encode(0,t,r):(this.discriminator.encode(1,t,r),this.layout.encode(e,t,r+4)+4)}decode(e,t=0){const r=this.discriminator.decode(e,t);if(0===r)return null;if(1===r)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}class ex extends(Gi()){toBuffer(){const e=super.toArray().reverse(),t=Buffer.from(e);if(8===t.length)return t;if(t.length>=8)throw new Error("u64 too large");const r=Buffer.alloc(8);return t.copy(r),r}static fromBuffer(e){if(8!==e.length)throw new Error(`Invalid buffer length: ${e.length}`);return new ex([...e].reverse().map((e=>`00${e.toString(16)}`.slice(-2))).join(""),16)}}const tx=dE([YE("mint"),YE("owner"),ZE("amount"),JE(YE(),"delegate"),(()=>{const e=fE(new J_(1,"discriminator"),null,"state");return e.addVariant(0,dE([]),"uninitialized"),e.addVariant(1,dE([]),"initialized"),e.addVariant(2,dE([]),"frozen"),e})(),JE(ZE(),"isNative"),ZE("delegatedAmount"),JE(YE(),"closeAuthority")]);class rx{constructor(e,t,r,n,i,s,o,a){this._accounts=t,this._provider=r,this._programId=n,this._idlIx=i,this._idlTypes=o,this._customResolver=a,this._args=e,this._accountStore=new nx(r,s,this._programId)}args(e){this._args=e}async resolve(){for(await this.resolveConst(this._idlIx.accounts),this._resolveEventCpi(this._idlIx.accounts);await this.resolvePdas(this._idlIx.accounts)+await this.resolveRelations(this._idlIx.accounts)+await this.resolveCustom()>0;);}async resolveCustom(){if(this._customResolver){const{accounts:e,resolved:t}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=e,t}return 0}resolveOptionalsHelper(e,t){const r={};for(const n of t){const t=n.name,i=e[t];void 0!==i&&(sx(i)?LE(n)?r[t]=this.resolveOptionalsHelper(i,n.accounts):r[t]=ox(i,!0):null!==i?r[t]=Nv(i):n.isOptional&&(r[t]=this._programId))}return r}resolveOptionals(e){Object.assign(this._accounts,this.resolveOptionalsHelper(e,this._idlIx.accounts))}get(e){const t=e.reduce(((e,t)=>e&&e[t]),this._accounts);if(t&&t.toBase58)return t}set(e,t){let r=this._accounts;e.forEach(((n,i)=>{i==e.length-1&&(r[n]=t),r[n]=r[n]||{},r=r[n]}))}async resolveConst(e,t=[]){for(let r=0;r<e.length;r+=1){const n=e[r],i=n.accounts;i&&await this.resolveConst(i,[...t,Xm()(n.name)]);const s=n,o=Xm()(n.name);if(s.isSigner&&!this.get([...t,o])){if(void 0===this._provider.wallet)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this.set([...t,o],this._provider.wallet.publicKey)}Reflect.has(rx.CONST_ACCOUNTS,o)&&!this.get([...t,o])&&this.set([...t,o],rx.CONST_ACCOUNTS[o])}}_resolveEventCpi(e,t=[]){for(const r in e){const n=e[r],i=n.accounts;i&&this._resolveEventCpi(i,[...t,Xm()(n.name)]);const s=+r+1;if(s===e.length)return;const o=Xm()(e[r].name),a=Xm()(e[s].name);if("eventAuthority"===o&&"program"===a){const e=[...t,o],r=[...t,a];return this.get(e)||this.set(e,Gm.PublicKey.findProgramAddressSync([Buffer.from("__event_authority")],this._programId)[0]),void(this.get(r)||this.set(r,this._programId))}}}async resolvePdas(e,t=[]){let r=0;for(let n=0;n<e.length;n+=1){const i=e[n],s=i.accounts;s&&(r+=await this.resolvePdas(s,[...t,Xm()(i.name)]));const o=i,a=Xm()(i.name);o.pda&&o.pda.seeds.length>0&&!this.get([...t,a])&&Boolean(await this.autoPopulatePda(o,t))&&(r+=1)}return r}async resolveRelations(e,t=[]){let r=0;for(let n=0;n<e.length;n+=1){const i=e[n],s=i.accounts;s&&(r+=await this.resolveRelations(s,[...t,Xm()(i.name)]));const o=i.relations||[],a=Xm()(i.name),c=[...t,a],l=this.get(c);if(l){const e=o.filter((e=>!this.get([...t,Xm()(e)])));if(r+=e.length,e.length>0){const r=await this._accountStore.fetchAccount({publicKey:l});await Promise.all(e.map((async e=>{const n=Xm()(e);return this.set([...t,n],r[n]),r[n]})))}}}return r}async autoPopulatePda(e,t=[]){if(!e.pda||!e.pda.seeds)throw new Error("Must have seeds");const r=await Promise.all(e.pda.seeds.map((e=>this.toBuffer(e,t))));if(r.some((e=>void 0===e)))return;const n=await this.parseProgramId(e,t);if(!n)return;const[i]=await Gm.PublicKey.findProgramAddress(r,n);this.set([...t,Xm()(e.name)],i)}async parseProgramId(e,t=[]){var r;if(!(null===(r=e.pda)||void 0===r?void 0:r.programId))return this._programId;switch(e.pda.programId.kind){case"const":return new Gm.PublicKey(this.toBufferConst(e.pda.programId.value));case"arg":return this.argValue(e.pda.programId);case"account":return await this.accountValue(e.pda.programId,t);default:throw new Error(`Unexpected program seed kind: ${e.pda.programId.kind}`)}}async toBuffer(e,t=[]){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e,t);default:throw new Error(`Unexpected seed kind: ${e.kind}`)}}getType(e,t=[]){if(t.length>0&&e.defined){const r=this._idlTypes.find((t=>t.name===e.defined));if(!r)throw new Error(`Cannot find type ${e.defined}`);const n=r.type.fields.find((e=>e.name===t[0]));return this.getType(n.type,t.slice(1))}return e}toBufferConst(e){return this.toBufferValue(this.getType(e.type,(e.path||"").split(".").slice(1)),e.value)}async toBufferArg(e){const t=this.argValue(e);if(void 0!==t)return this.toBufferValue(this.getType(e.type,(e.path||"").split(".").slice(1)),t)}argValue(e){const t=e.path.split("."),r=Xm()(t[0]),n=this._idlIx.args.findIndex((e=>e.name===r));if(-1===n)throw new Error(`Unable to find argument for seed: ${r}`);return t.slice(1).reduce(((e,t)=>(e||{})[t]),this._args[n])}async toBufferAccount(e,t=[]){const r=await this.accountValue(e,t);if(r)return this.toBufferValue(e.type,r)}async accountValue(e,t=[]){const r=e.path.split("."),n=r[0],i=this.get([...t,Xm()(n)]);if(null===i)throw new Error("fieldPubkey is null");if(1===r.length)return i;const s=await this._accountStore.fetchAccount({publicKey:i,name:e.account});return this.parseAccountValue(s,r.slice(1))}parseAccountValue(e,t){let r;for(;t.length>0;)r=e[Xm()(t[0])],t=t.slice(1);return r}toBufferValue(e,t){switch(e){case"u8":return Buffer.from([t]);case"u16":let r=Buffer.alloc(2);return r.writeUInt16LE(t),r;case"u32":let n=Buffer.alloc(4);return n.writeUInt32LE(t),n;case"u64":let i=Buffer.alloc(8);return i.writeBigUInt64LE(BigInt(t)),i;case"string":return Buffer.from(Av(t));case"publicKey":return t.toBuffer();default:if(e.array)return Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}}}rx.CONST_ACCOUNTS={associatedTokenProgram:AE,rent:Gm.SYSVAR_RENT_PUBKEY,systemProgram:Gm.SystemProgram.programId,tokenProgram:SE,clock:Gm.SYSVAR_CLOCK_PUBKEY};class nx{constructor(e,t,r){this._provider=e,this._programId=r,this._cache=new Map,this._idls={},this._idls[r.toBase58()]=t}async ensureIdl(e){if(!this._idls[e.toBase58()]){const t=await ux.fetchIdl(e,this._provider);if(t){const r=new ux(t,e,this._provider);this._idls[e.toBase58()]=r.account}}return this._idls[e.toBase58()]}async fetchAccount({publicKey:e,name:t,programId:r=this._programId}){const n=e.toString();if(!this._cache.has(n))if("TokenAccount"===t){const t=await this._provider.connection.getAccountInfo(e);if(null===t)throw new Error(`invalid account info for ${n}`);const r=(i=t.data,tx.decode(i));this._cache.set(n,r)}else if(t){const i=await this.ensureIdl(r);if(i){const r=i[Xm()(t)];if(r){const t=await r.fetch(e);this._cache.set(n,t)}}}else{const t=await this._provider.connection.getAccountInfo(e);if(null===t)throw new Error(`invalid account info for ${n}`);const r=t.data,i=await this.ensureIdl(t.owner);if(i){const e=Object.values(i)[0];if(!e)throw new Error("No accounts for this program");const t=e.coder.accounts.decodeAny(r);this._cache.set(n,t)}}var i;return this._cache.get(n)}}class ix{static build(e,t,r,n,i,s,o,a,c,l,u){return(...h)=>new ax(h,n,i,s,o,a,e,t,r,c,l,u)}}function sx(e){return"object"==typeof e&&null!==e&&!("_bn"in e)}function ox(e,t){const r={};for(const n in e){const i=e[n];if(null!==i)r[n]=sx(i)?ox(i,!0):Nv(i);else if(t)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!")}return r}class ax{constructor(e,t,r,n,i,s,o,a,c,l,u,h){this._ixFn=t,this._txFn=r,this._rpcFn=n,this._simulateFn=i,this._viewFn=s,this._programId=a,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._autoResolveAccounts=!0,this._args=e,this._accountsResolver=new rx(e,this._accounts,o,a,c,l,u,h)}args(e){this._args=e,this._accountsResolver.args(e)}async pubkeys(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._accounts}accounts(e){return this._autoResolveAccounts=!0,this._accountsResolver.resolveOptionals(e),this}accountsStrict(e){return this._autoResolveAccounts=!1,this._accountsResolver.resolveOptionals(e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e){return this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async rpc(e){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async rpcAndKeys(e){return{pubkeys:await this.pubkeys(),signature:await this.rpc(e)}}async view(e){if(this._autoResolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:await this._signers}}async transaction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class cx{static build(e,t,r,n){const i=t.accounts.find((e=>e.isMut)),s=!!t.returns;if(!i&&s)return async(...i)=>{var s,o;let a=await r(...i);const c=`Program return: ${e} `;let l=a.raw.find((e=>e.startsWith(c)));if(!l)throw new Error("View expected return log");let u=Cv(l.slice(c.length)),h=t.returns;if(!h)throw new Error("View expected return type");return R_.fieldLayout({type:h},Array.from([...null!==(s=n.accounts)&&void 0!==s?s:[],...null!==(o=n.types)&&void 0!==o?o:[]])).decode(u)}}}class lx{static build(e,t,r,n,i){const s={},o={},a={},c={},l={},u={},h=function(e){const t=new Map;return e.errors&&e.errors.forEach((e=>{var r;let n=null!==(r=e.msg)&&void 0!==r?r:e.name;t.set(e.code,n)})),t}(e),d=e.accounts?jE.build(e,t,r,n):{};return e.instructions.forEach((f=>{const p=DE.build(f,((e,r)=>t.instruction.encode(e,r)),r),g=UE.build(f,p),m=zE.build(f,g,h,n),y=GE.build(f,g,h,n,t,r,e),b=cx.build(r,f,y,e),w=ix.build(n,r,f,p,g,m,y,b,d,e.types||[],i&&i(f)),v=Xm()(f.name);o[v]=p,a[v]=g,s[v]=m,c[v]=y,l[v]=w,b&&(u[v]=b)})),[s,o,a,d,c,l,u]}}class ux{get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}constructor(e,t,r,n,i){t=Nv(t),r||(r=g_()),this._idl=e,this._provider=r,this._programId=t,this._coder=null!=n?n:new W_(e),this._events=new WE(this._programId,r,this._coder);const[s,o,a,c,l,u,h]=lx.build(e,this._coder,t,r,null!=i?i:()=>{});this.rpc=s,this.instruction=o,this.transaction=a,this.account=c,this.simulate=l,this.methods=u,this.views=h}static async at(e,t){const r=Nv(e),n=await ux.fetchIdl(r,t);if(!n)throw new Error(`IDL not found for program: ${e.toString()}`);return new ux(n,r,t)}static async fetchIdl(e,t){t=null!=t?t:g_();const r=Nv(e),n=await async function(e){const t=(await Gm.PublicKey.findProgramAddress([],e))[0];return await Gm.PublicKey.createWithSeed(t,"anchor:idl",e)}(r),i=await t.connection.getAccountInfo(n);if(!i)return null;let s=(o=i.data.slice(8),NE.decode(o));var o;const a=wv(s.data);return JSON.parse(Sv(a))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}new Gm.PublicKey("11111111111111111111111111111111");var hx,dx,fx,px,gx,mx,yx=r(3686),bx=r.n(yx);function wx(){var e=["PriorityFe","Transactio","16MBfWdr","HIGH","1661264VtpgKB","SendError","params","976769MfFaMT","ransaction","VERYHIGH","message","MEDIUM","Error","UNSAFE_MAX","990846VcBZow","41830FhPore","Simulation","MIN","LOW","180kKkDNz","MalformedT","3501064WZVVjv","nTooBig","2343980MfTxuI","eError","11696148puIGKf"];return(wx=function(){return e})()}function vx(e,t){var r=wx();return(vx=function(e,t){return r[e-=407]})(e,t)}!function(e){for(var t=vx,r=e();;)try{if(784591==-parseInt(t(410))/1+-parseInt(t(426))/2+-parseInt(t(417))/3+parseInt(t(407))/4+-parseInt(t(418))/5*(parseInt(t(422))/6)+parseInt(t(424))/7+parseInt(t(431))/8*(parseInt(t(428))/9))break;r.push(r.shift())}catch(e){r.push(r.shift())}}(wx),(dx=hx||(hx={}))[(fx=vx)(430)+fx(425)]=fx(430)+fx(425),dx[fx(423)+"ransaction"]=fx(423)+fx(411),dx[fx(419)+fx(415)]=fx(419)+fx(415),dx[fx(408)]="SendError",dx["PriorityFe"+fx(427)]=fx(429)+fx(427);class _x extends Error{constructor(e,t,r){var n=vx;super(e),this.type=e,this[n(413)]=t,this[n(409)]=r}}(gx=px||(px={}))[gx[(mx=vx)(420)]=1e3]=mx(420),gx[gx[mx(421)]=2500]="LOW",gx[gx[mx(414)]=5e3]=mx(414),gx[gx.HIGH=7500]=mx(432),gx[gx[mx(412)]=8500]="VERYHIGH",gx[gx[mx(416)]=1e4]=mx(416);const Ex=Sx;!function(e){const t=Sx,r=e();for(;;)try{if(214998==-parseInt(t(458))/1+parseInt(t(468))/2+-parseInt(t(469))/3*(parseInt(t(459))/4)+-parseInt(t(460))/5+-parseInt(t(462))/6+-parseInt(t(461))/7+-parseInt(t(464))/8*(-parseInt(t(465))/9))break;r.push(r.shift())}catch(e){r.push(r.shift())}}(Ax);const xx="1"[Ex(466)](32);function Sx(e,t){const r=Ax();return(Sx=function(e,t){return r[e-=458]})(e,t)}function Ax(){const e=["confirmed","248EhBCaT","332091MMrQoP","repeat","finalized","841638KKPkiS","137172OkYwsD","404589EjWXhF","32lLAztr","498585AuSeZU","1732794adrgoy","1392300dCZXYN"];return(Ax=function(){return e})()}const Ix={MAX_TX_SEND_COUNT:10,ALLOWED_SLOT_UPDATE_DELAY:1500,SLOT_CHECK_INTERVAL:2e3,LIMIT_PER_IX:2e5,MIN_PRIORITY_LAMPORTS_PER_TX:5e3,MAX_PRIORITY_LAMPORTS_PER_TX:1e6,MICRO_LAMPORTS_MULTIPLIER:1e6,NON_PROCESSED_TIMEOUT:3e4,DELAY_BETWEEN_SEND:1e3,COMMITMENT:Ex(463),BLOCKHASH_COMMITMENT:Ex(467)},kx=Tx;function Tx(e,t){const r=Dx();return(Tx=function(e,t){return r[e-=406]})(e,t)}!function(e){const t=Tx,r=e();for(;;)try{if(833488==-parseInt(t(430))/1*(parseInt(t(414))/2)+-parseInt(t(426))/3*(parseInt(t(438))/4)+-parseInt(t(422))/5*(-parseInt(t(415))/6)+-parseInt(t(413))/7*(parseInt(t(425))/8)+-parseInt(t(411))/9*(-parseInt(t(409))/10)+-parseInt(t(440))/11+parseInt(t(427))/12)break;r.push(r.shift())}catch(e){r.push(r.shift())}}(Dx);class Px{constructor(e){this[Tx(445)]=e}[kx(439)](){const e=kx;var t,r;return"dump: "+this[e(445)].txDump+e(450)+(null!==(r=null===(t=this.args.logs)||void 0===t?void 0:t[e(419)]("\n"))&&void 0!==r?r:e(449))}}function Cx(e,t){return new Promise(((r,n)=>{const i=Tx;var s;if(i(418)===i(406))return new _0x232b0d(_0x330334.compile({instructions:_0x2b327c[i(423)+"ns"],payerKey:_0x35dc27.payer,recentBlockhash:null!==(s=_0xca941b[i(421)])&&void 0!==s?s:_0x3bc7f4,addressLookupTableAccounts:_0x19c4db[i(416)]}));{const s=()=>{n(new Error(i(434)))};t[i(407)+i(437)](i(433),s),e[i(428)]((e=>{const n=i;t["removeEven"+n(447)](n(433),s),r(e)}))[i(417)]((e=>{const r=i;t[r(441)+r(447)](r(433),s),n(e)}))}}))}function Ox(e){return new Promise(((t,r)=>{"INPlb"===Tx(424)?(_0x3da0ce.removeEventListener("abort",_0x114fd9),_0x27afc3(_0x2708f5)):setTimeout(t,e)}))}function Mx(e){return kx(412)in e}function Rx(e){const t=kx,r=new Gm.VersionedTransaction(e.message);return r[t(408)][t(431)+t(444)]=xx,Buffer.from(r[t(436)]())[t(439)](t(410))}function Lx(e,t){const r=kx;return Math[r(420)](e*Ix[r(448)+"ORTS_MULTI"+r(442)]/t)}function Nx(e,t){const r=kx;return Math[r(420)](t*e/Ix[r(448)+r(435)+"PLIER"])}function Bx(e){const t=kx;var r;return new Gm.VersionedTransaction(Gm.MessageV0[t(429)]({instructions:e[t(423)+"ns"],payerKey:e[t(443)],recentBlockhash:null!==(r=e[t(421)])&&void 0!==r?r:xx,addressLookupTableAccounts:e[t(416)]}))}function Dx(){const e=["8008TCdxee","recentBloc","length","abort","Aborted","ORTS_MULTI","serialize","stener","2864996ZPNzhK","toString","5049000tVIwpN","removeEven","PLIER","payer","khash","args","floor","tListener","MICRO_LAMP","NO_LOGS","\n\nlogs: ","Bgxxz","addEventLi","message","4589790vqZmvH","base64","27hWXQKE","version","35sPUafD","122hBgiep","40566jQoIfM","ALTs","catch","wfTOY","join","ceil","blockhash","1110ZrIzVg","instructio","sNLXU","1852112BhCvBG","3SnAUbW","9322992YLqLjN","then","compile"];return(Dx=function(){return e})()}function Ux(e,t,r,n,i){const s=Fx;if(null===t)return null;r(s(450)+s(313)+e+(s(406)+"=")+t+". Fee = "+Nx(t,e)+s(452));const o=Nx(t,e);if(o>i)return"dizAa"===s(338)?(t=Lx(i,e),r(s(404)+s(301)+s(319)+s(428)+t+s(453)+Nx(t,e)+s(452)),t):null;if(o<n){if(s(312)==s(312))return t=Lx(n,e),r(s(404)+s(386)+s(300)+s(377)+t+s(453)+Nx(t,e)+s(452)),t;{const e=_0x2df0ef(_0x239fe5);if(null===e)throw _0x1fa6a7(_0x5b8932[s(420)+"eError"],s(350)+s(352)+"e current priority f"+s(438)+s(284)+s(369)+s(340)+s(347)+s(456));_0x1829ea=e}}return t}function zx(e,t,r){const n=Fx;let i=0,s=0;const o=e[n(311)][n(359)+n(395)];for(const a of e[n(311)][n(370)+n(314)])if(n(392)!=n(392))_0x42a5d9[n(446)].length>0&&_0x48a043.data.length<15&&_0x1d638b[_0x345f5b.programIdIndex].equals(_0x44f0e5[n(349)])&&(_0x1bbe00[n(446)][0]===_0x36e986?_0x1abbb2=_0xe3f5c3[n(405)](_0x1be645[n(446)])[n(371)+n(409)](1):_0xb5caa[n(446)][0]===_0x1ae3cd&&(_0x5c81d6=_0x37cd1f.from(_0x45e5d6[n(446)])[n(445)+"E"](1)));else if(o[a["programIdI"+n(426)]][n(398)](Gm.ComputeBudgetProgram.programId)&&a.data[n(408)]>0)if(3===a[n(446)][0]){if(n(303)!=n(303)){if(null===_0x540588)return null;_0x301b3f(n(450)+n(313)+_0x81e07e+(n(406)+"=")+_0x325413+n(453)+_0x528511(_0xa6b35,_0x1f536b)+n(452));const e=_0x45f258(_0x218a69,_0x381241);return e>_0x139f23?(_0x60b72a=_0x4963d3(_0x8c0431,_0x56c9c8),_0x55789c(n(404)+"oo hight, "+n(319)+n(428)+_0x28a7b1+n(453)+_0x3f5870(_0x12e2d8,_0x28be46)+n(452)),_0x299b89):e<_0x4975e5?(_0x36b0ab=_0x1cf9ff(_0x2cf384,_0x26342a),_0x477e00(n(404)+n(386)+n(300)+n(377)+_0x4dd661+n(453)+_0x5617e4(_0x5613e9,_0xc5535f)+n(452)),_0x43cdc1):_0x2c7a5d}{if(s+=1,s>1)throw new _x(hx[n(418)+n(320)],n(321)+n(389)+n(381)+n(425)+n(326)+" setComputeUnitsPric"+n(286),new Px({txDump:Rx(e)}));if(null===r)throw new _x(hx.PriorityFeeError,n(417)+n(328)+n(330)+"nitsPrice value whil"+n(356)+n(285)+n(334),new Px({txDump:Rx(e)}));if(r===n(387))continue;const t=Buffer[n(432)](9);t[0]=3,t[n(329)+n(287)](BigInt(r),1),a.data=t}}else if(2===a.data[0]){const r=Buffer.alloc(5);if(r[0]=2,r[n(365)+"LE"](t,1),i+=1,a[n(446)]=r,i>1)throw new _x(hx[n(418)+n(320)],n(321)+n(389)+n(381)+n(425)+n(326)+n(280)+n(372)+n(382),new Px({txDump:Rx(e)}))}if(0===i)throw new _x(hx["MalformedT"+n(320)],n(321)+n(389)+n(424)+"UnitsLimit"+n(383)+n(297),new Px({txDump:Rx(e)}));if("number"==typeof r&&0===s)throw new _x(hx[n(418)+"ransaction"],"Broken transaction, setComputeUnitsPrice"+n(383)+n(297),new Px({txDump:Rx(e)}));return e}function jx(e,t,r){const n=Fx,i=[];if(null!==t&&i[n(332)](Gm.ComputeBudgetProgram["setCompute"+n(394)]({units:t})),null!==r){if("CfFLy"===n(401)){if(!_0xbfdaca[n(423)][n(454)+n(448)])throw _0x4741f4(_0x561aea[n(420)+n(290)],n(323)+"estimate r"+n(304)+n(346)+n(327));const e=_0x1ce7af[n(410)](_0x5cf221[n(423)][n(454)+n(448)]*(100+(null!==(_0x494e07=_0x42c625.priorityFee[n(390)+n(376)])&&void 0!==_0x59bf14?_0x1d1d1f:10))/100);let t=null;if("autoHelius"===_0x92f4eb[n(378)+"e"][n(402)+"rityLamports"]||_0x440ee2[n(378)+"e"][n(402)+n(374)+"ts"]===n(336)){if(_0x50e7db[n(354)]===_0x3c570c)throw _0x1c4270(_0x32cfbb[n(420)+n(290)],n(323)+n(360)+n(391)+n(353));t="lamports"===_0x56b450.estimation[n(396)]?_0x15b31f.estimation[n(423)]:_0x5b49e9(_0x408a72[n(354)].value,e)}else if(_0x23f56a.priorityFee[n(402)+n(374)+"ts"]===n(387)){const e=_0x4bd65b(_0x1dc764);if(null===e)throw _0x5629ee(_0x1af624[n(420)+"eError"],"Requested "+n(352)+n(292)+n(373)+n(438)+n(284)+"t setComputeUnitsPri"+n(347)+n(456));t=e}else _0x50ae96[n(378)+"e"][n(402)+n(374)+"ts"]!==_0xb0657d&&(t=_0x1029cc.priorityFee["targetPrio"+n(374)+"ts"]);if(null===t)throw _0x27ad39(_0x166137[n(420)+n(290)],"Failed to get curren"+n(361)+n(283)+n(407));const r=_0x1d6f71(e,_0x17467d(t,e),_0x52392c,_0xb235cf,_0x43cbf4);return _0x372f8d(_0x2c2776)?_0xbf70c2(_0x5c6e28,e,r):_0x47ea0e(_0x33c525(_0xb408a4,e,r))}r===n(387)?i[n(332)](...e[n(429)+"ns"][n(436)]((e=>e[n(349)].equals(Gm.ComputeBudgetProgram.programId)&&3===e[n(446)][0]))):i[n(332)](Gm.ComputeBudgetProgram[n(424)+n(403)]({microLamports:r}))}return{...e,instructions:[...i,...e[n(429)+"ns"][n(436)]((e=>!e[n(349)].equals(Gm.ComputeBudgetProgram[n(349)])))]}}function Fx(e,t){const r=$x();return(Fx=function(e,t){return r[e-=280]})(e,t)}function $x(){const e=["vKrMO","equired co","Usnsupport","get triton","MEDIUM","LOW","encode","164479RccFjK","message","bDyNm","mit=","structions","drkus","keys","ionFees","veryHigh","setting ne","ransaction","Broken tra","eLevels","Failed to ","nqAKF","limit","ore than 1","s limit","ms, missin","writeBigIn","g computeU","toBase58","push","tion"," present","lamports","autoTriton","rity fee r","dizAa","map","teUnitsPri","pZyox","UNSAFE_MAX","jCiny","290969blkKRV","_rpcReques","mpute unit","ce ix miss","3435867MozdrU","programId","Requested ","fixed","to preserv","rity fees","estimation","oQOfx","e setCompu","sort","aBglJ","staticAcco","fetch esti","t target l","tyFeeEstim","bIjyT","unsafeMax","writeInt32","sting Trit","logs","culating","t setCompu","compiledIn","readBigInt","eUnitsLimi","priority f","rityLampor","nitsPrice ","lippage","price=","priorityFe","wDIZW","estimate r","there shou","t ix"," should be","slot","getRecentP","oo low, se","asIs","payer","nsaction, ","autoLimitS","mated prio","Uudxz","on prioirt","UnitLimit","untKeys","mode","getPriorit","equals","medium","blockhash","nLkVL","targetPrio","UnitPrice","Price is t","from"," and price","lue","length","64LE","ceil","ed estimat","21080OkzCoB","625250nHOqln","slice","fee","price","Wrong para","MalformedT","high","PriorityFe","88TlIJhu","NwXeV","value","setCompute","ldn't be m","ndex","340iaRCoj","w price=","instructio","HIGH","result","alloc","MIN","fee estima","elius prio","filter","[getPriori","ee lamport","lockedWrit","prioritiza","zAUoP","serialize","autoHelius","NdIWN","readInt32L","data","1011376Tcdbtx","med","18201GWhpTL","Setting li","rtPrice"," lamports",". Fee = ","unitsConsu","tionFee","ing"," setComput","yFeeEstima"," priority ","amports va","s value bu","teUnits ix","e ix","t64LE","ate] Reque","114eHJMOe","eError","error","e current ","VERYHIGH","ableAccoun","ULfmh","y fee info"," in the tx","ate] Got H","serialized","tting new ","oo hight, ","programIdI"];return($x=function(){return e})()}!function(e){const t=Fx,r=e();for(;;)try{if(356833==-parseInt(t(344))/1+parseInt(t(447))/2+-parseInt(t(449))/3*(parseInt(t(427))/4)+-parseInt(t(412))/5*(-parseInt(t(289))/6)+-parseInt(t(310))/7*(-parseInt(t(421))/8)+parseInt(t(348))/9+-parseInt(t(413))/10)break;r.push(r.shift())}catch(e){r.push(r.shift())}}($x);const qx=Wx;function Wx(e,t){const r=Hx();return(Wx=function(e,t){return r[e-=493]})(e,t)}function Hx(){const e=["1560TVFXTp","904932qqrxiv","recentBloc","priorityFe","6HYkTzB","join","autoTriton","solana-rpc"," send","now","Mode","logFn","priority","auto","EEN_SEND",".helius-rp","compile","signal",".debridge","get","sendUntilB","ult] ","RVExs","jkheF","getSignatu","[sendTxRes","serialize","SendError",".rpcpool.c","signAllTra","Sent tx ","additional","call",".pro","Tx simulat","call callb","XXgOc","n takes mo","push","lockhashEx","BlockHeigh","MAX_TX_SEN","includes"," times wit","none","failedToSe","hrowError","rityLampor","ansaction","4485848nDrNrh","SED_TIMEOU","aborted","autoHelius","OjmJN","back","yLamportsP","MTMJP","mportsEsti","erTransact","4296005xvFPsi","delay","nTooBig","NON_PROCES","351174qrbUav","WDgXp"," master rp","lockhashAn","3.debridge","expiration","ner","ack: ","finalized","instructio","delayBetwe","DELDH","signedCall","wWKXW","cess","blockhashC","rnal map","99IcyqJp","ngTimeout","9HlMyRg","TY_LAMPORT","32 bytes","4.debridge","all","Error","piresOrSuc","  ##  ","base64","getBlockHe","sendAllTra","length","stopTxProc","from","dTransacti","sendEncode","ssed in ","allSettled","send tx to","MIN_PRIORI","ommitment","BLOCKHASH_","Transactio","ight","30BqmUco"," failed to","e from tx ","pQQBz","commitment","enTxSend","65798fKXeKB","logs","controller","processed","delete","ack","rocessed i","payer","nsactions","amp","encode","10280jcZyMd","onSignatur","Signers"," was proce","khash","3849373kaNSLf","txProcessi","connection","value","dropped","c: ","skipPrefli","qfYuP","BpNtP","Connection","reStatus","c.com","catch","get ","ion","essingAndT","atureListe","oEngine","context","YGMoo","addTxInfoE","ount","set","stringify","toString"," was not p","COMMITMENT","unsubscrib","sendTransa","ght","ion Error:","blockhash","priorityLa","ntry","targetPrio","message","estimation","S_PER_TX","Failed to ","lastValidB","KAVyR","re than 12","sentTimest","map","reason","maxSendCou","HIGH","signatures","txInfoMap","Simulation","MAX_PRIORI","txCallback","failTimeou","s: ","Sending tx","repeat","tionId",".quicknode","err","abort","neFli","logger"];return(Hx=function(){return e})()}!function(e){const t=Wx,r=e();for(;;)try{if(543223==-parseInt(t(625))/1+-parseInt(t(674))/2*(parseInt(t(642))/3)+parseInt(t(495))/4*(parseInt(t(562))/5)+-parseInt(t(566))/6*(-parseInt(t(621))/7)+-parseInt(t(611))/8*(parseInt(t(644))/9)+parseInt(t(668))/10*(parseInt(t(500))/11)+parseInt(t(563))/12)break;r.push(r.shift())}catch(e){r.push(r.shift())}}(Hx);class Vx{constructor(e,t){const r=Wx;this[r(502)]=e,this.logger=t,this[r(548)]=new Map}static["mapRpcUrlT"+qx(517)](e){const t=qx;return e[t(604)](t(557)+t(595))||e[t(604)]("solana-rpc2.debridge")?"unknown":e.includes(t(590)+"om")||e.includes("solana-rpc"+t(629))||e[t(604)](t(569)+t(647))?"autoTriton":e[t(604)](t(577)+t(511))||e[t(604)](t(569)+t(580))?"autoHelius":"unknown"}[qx(520)+"ntry"](e,t,r=Ix["NON_PROCES"+qx(612)+"T"],n=Ix["DELAY_BETW"+qx(576)]){const i=qx;this[i(548)].set(e,{sentTimestamp:Date[i(571)](),controller:new AbortController,expirationBlockHeight:t,wsSubscriptionId:this.connection.onSignature(e,((t,r)=>this.txCallback(e,i(677),t)),i(677)),failTimeout:setTimeout((()=>this.txCallback(e,i(504))),r),delay:n})}async[qx(551)](e,t,r){const n=qx,i=Date[n(571)](),s=this[n(548)][n(581)](e);if(!s)throw new Error(n(538)+n(513)+e+" from inte"+n(641));let o=null;clearTimeout(s[n(552)+"t"]),s["wsSubscrip"+n(556)]&&t!==n(677)&&this.connection["removeSign"+n(516)+n(631)](s["wsSubscrip"+n(556)]).catch((t=>this[n(561)]("Failed to "+n(527)+n(670)+e+", error: "+t)));let a="";if(t===n(504)){if(n(585)===n(519))throw new _0x1b3215(_0x155d99[n(666)+"nTooBig"],n(666)+"n takes mo"+n(541)+n(646),new _0x1420ef({txDump:_0x4c0bdb?_0xe0f004[n(657)](_0x3d7284)[n(524)]("base64"):""}));{const i=await this[n(502)][n(586)+n(510)](e,{searchTransactionHistory:!1});null!==i[n(503)]&&(t=n(677),r=i[n(503)])}}switch(t){case n(504):if("MkhhS"===n(671))throw this[n(551)](_0x31c136,"failedToSend").catch((e=>this[n(561)](n(538)+n(597)+n(632)+e))),_0x3199ef instanceof _0x4f535c?new _0x5e4f53(_0x298dca[n(589)],n(538)+"send tx to"+n(627)+"c: "+_0x5df9cb[n(535)],new _0x4311bc({txDump:_0x3a5d00,logs:_0xfdf2c4[n(675)]})):new _0x1d6621(_0x3e54be.SendError,_0x2ca8bb[n(535)],new _0x2ab4c8({txDump:_0x1bbda9}));a="[sendTxRes"+n(583)+e+(n(525)+n(680))+"n "+Ix[n(624)+"SED_TIMEOUT"]+"ms",o={signature:e,mode:n(504),sentAt:s[n(542)+n(493)]};break;case n(677):if("kDgUg"!==n(540)){a=n(587)+"ult] "+e+(n(498)+n(660))+(i-s[n(542)+n(493)])+"ms",o={signature:e,sentAt:s["sentTimest"+n(493)],mode:"processed",processedAt:i,err:null==r?void 0:r.err};break}_0x353fda=_0x13d753[n(588)]();case n(607)+"nd":a=n(587)+"ult] "+e+(n(669)+n(570)),o=null}this.logger(a),s.controller[n(559)](o),await Ox(1e4),this[n(548)][n(678)](e)}[qx(656)+qx(515)+qx(608)](e,t,r){const n=qx;throw this[n(551)](r,n(607)+"nd")[n(512)]((e=>this[n(561)](n(538)+n(597)+n(632)+e))),e instanceof Gm.SendTransactionError?new _x(hx[n(589)],n(538)+n(662)+" master rp"+n(505)+e.message,new Px({txDump:t,logs:e[n(675)]})):n(626)===n(560)?new _0x55ea72(_0x490842[n(549)+n(649)],"Tx simulation Error: "+_0x1d7954[n(523)](_0xfa1bc8.value[n(558)]),new _0x5ae324({txDump:_0x4015b0.from(_0x9acab8)[n(524)](n(652)),logs:null!==(_0x33e3a0=_0x27ddaa[n(503)][n(675)])&&void 0!==_0x1395d8?_0xee885c:_0x138f22,err:_0x112bbf[n(503)].err})):new _x(hx.SendError,e.message,new Px({txDump:t}))}async[qx(582)+qx(601)+qx(650)+qx(639)](e,t,r,n){const i=qx;var s,o,a;const c=this[i(548)][i(581)](e),l=null!==(s=null==n?void 0:n[i(593)+i(509)+"s"])&&void 0!==s?s:[],u=null!==(o=null==n?void 0:n[i(545)+"nt"])&&void 0!==o?o:Ix[i(603)+"D_COUNT"],h=null!==(a=null==n?void 0:n[i(640)+i(664)])&&void 0!==a?a:i(633),d={maxRetries:0};c[i(542)+i(493)]=Date.now();let f=await this[i(502)][i(653)+i(667)]({commitment:h});if(null==r?void 0:r[i(506)+"ght"]){const r=[];for(const n of[this[i(502)],...l])if("WaOSz"!==i(507)){const s=async()=>{const r=i;let s=0;for(;s<u&&!c[r(676)].signal[r(613)]&&(await n[r(659)+"dTransaction"](t,{...d,skipPreflight:!0}),s+=1,!c[r(676)].signal[r(613)]);)await Cx(Ox(c.delay),c.controller[r(579)])[r(512)]((()=>{}));this[r(561)](r(592)+e+" "+s+r(605)+"h "+n.rpcEndpoint)};r.push(s())}else this["stopTxProc"+i(515)+i(608)](_0x1f3913,_0x3222ae,_0xddd764);await Promise.all(r)}else if(i(618)===i(638))this[i(548)][i(522)](_0xa8392a,{sentTimestamp:_0x514c18[i(571)](),controller:new _0x3de198,expirationBlockHeight:_0x22ed2e,wsSubscriptionId:this[i(502)][i(496)+"e"](_0x2a3f1e,((e,t)=>this[i(551)](_0x2392b9,i(677),e)),i(677)),failTimeout:_0x405d05((()=>this[i(551)](_0xfd0251,i(504))),_0xddcd40),delay:_0x3ee4a6});else{let n=0;for(;f<c[i(630)+i(602)+"t"]&&n<u&&!c[i(676)][i(579)][i(613)];){try{i(598)===i(615)?_0x574ecd[i(535)][i(564)+i(499)]=_0x2c11d0[i(503)].blockhash:(await this[i(502)][i(659)+i(658)+"on"](t,{...d,...r}),l[i(655)]>0&&await Promise[i(661)](l[i(543)]((e=>e[i(659)+"dTransaction"](t,d)))))}catch(r){this[i(656)+i(515)+i(608)](r,t,e)}n+=1,await Cx(Ox(c[i(622)]),c[i(676)][i(579)]).catch((()=>{})),f=await this[i(502)].getBlockHeight({commitment:h})}this[i(561)](i(592)+e+" "+n+" times")}for(;!c.controller[i(579)][i(613)];)await Cx(Ox(2e4),c[i(676)][i(579)])[i(512)]((()=>{}));return c[i(676)][i(579)][i(544)]}async[qx(528)+"ction"](e,t,r){const n=qx;return(await this[n(654)+n(682)](e,[t],{...r,additionalSigners:(null==r?void 0:r[n(593)+"Signers"])?[r[n(593)+n(497)]]:void 0}))[0]}async[qx(654)+qx(682)](e,t,r){const n=qx;var i,s,o,a,c,l,u,h,d,f,p,g;const m=null!==(i=null==r?void 0:r[n(672)])&&void 0!==i?i:Ix[n(526)],y=null!==(s=null==r?void 0:r[n(640)+"ommitment"])&&void 0!==s?s:Ix[n(665)+"COMMITMENT"],b=null!==(a=null===(o=null==r?void 0:r[n(574)])||void 0===o?void 0:o[n(532)+n(619)+"mationMode"])&&void 0!==a?a:px[n(546)],w=null!==(l=null===(c=null==r?void 0:r[n(574)])||void 0===c?void 0:c["minPriorit"+n(617)+"erTransaction"])&&void 0!==l?l:Ix[n(663)+"TY_LAMPORT"+n(537)],v=null!==(h=null===(u=null==r?void 0:r[n(574)])||void 0===u?void 0:u["maxPriorit"+n(617)+n(620)+n(514)])&&void 0!==h?h:Ix[n(550)+n(645)+n(537)],_=null!==(d=null==r?void 0:r[n(573)])&&void 0!==d?d:this[n(561)],E=await Promise[n(648)](t[n(543)]((async(e,t)=>async function(e,t,r,n,i,s=!1){const o=Wx;var a,c;const l=Mx(t)?t:new Gm.VersionedTransaction(Gm.MessageV0[o(578)]({instructions:t[o(634)+"ns"],recentBlockhash:null!==(a=t[o(531)])&&void 0!==a?a:"1"[o(555)](32),addressLookupTableAccounts:t.ALTs,payerKey:t[o(681)]}));let u=null;try{u=l[o(588)]()}catch{throw new _x(hx[o(666)+"nTooBig"],"Transactio"+o(599)+o(541)+o(646),new Px({txDump:""}))}if(u[o(655)]>1232)throw new _x(hx[o(666)+o(623)],o(666)+o(599)+o(541)+o(646),new Px({txDump:u?Buffer[o(657)](u)[o(524)](o(652)):""}));const[h,d]=await Promise[o(648)]([e["simulateTr"+o(610)](l,{commitment:r,replaceRecentBlockhash:!s,sigVerify:s}),new Promise(((r,s)=>{const a=o;var c;n[a(536)+a(572)]===a(606)||(null===(c=t[a(565)+"e"])||void 0===c?void 0:c.mode)!==a(575)||t[a(565)+"e"]["targetPrio"+a(609)+"ts"]!==a(614)&&t[a(565)+"e"].targetPriorityLamports!==a(568)?r(void 0):async function(e,t,r,n,i){const s=Fx;var o;const a=Mx(t)?t:new Gm.VersionedTransaction(Gm.MessageV0.compile({instructions:t[s(429)+"ns"],recentBlockhash:null!==(o=t[s(400)])&&void 0!==o?o:"1".repeat(32),addressLookupTableAccounts:t.ALTs,payerKey:t[s(388)]})),c=Mx(t)?t[s(311)][s(359)+s(395)]:Array[s(405)](new Set(t[s(429)+"ns"][s(339)]((e=>e[s(316)][s(436)]((e=>e.isWritable))[s(339)]((e=>e.pubkey)))).flat())),l=bx()[s(309)](a[s(442)]());switch(r){case s(443):return async function(e,t,r,n){const i=Fx,s=e[i(345)+"t"];n("[getPriori"+i(362)+"ate] Requesting Helius prioirt"+i(296));const o=await s(i(397)+i(281)+"te",[{transaction:t.serialized,options:{includeAllPriorityFeeLevels:!0}}]);if(o[i(291)]||!o[i(431)])throw new _x(hx[i(420)+"eError"],"Failed to get helius priority "+i(434)+i(333),new Px({txDump:t[i(299)]}));n(i(437)+i(362)+i(298)+i(435)+i(337)+"esult, cal"+i(368));const a={[px[i(433)]]:"min",[px[i(308)]]:"low",[px[i(307)]]:i(399),[px[i(430)]]:i(419),[px[i(293)]]:i(318),[px[i(342)]]:i(364)};return{value:o.result[i(378)+i(322)][a[r]],mode:i(416)}}(e,{serialized:l},n,i);case s(336):return async function(e,t,r,n,i=30){const s=Fx,o=e[s(345)+"t"];n("[getPriorityFeeEstim"+s(288)+s(366)+s(393)+s(296));const a=await o(s(385)+"rioritizat"+s(317),[[t[s(439)+s(294)+"ts"][s(339)]((e=>e[s(331)]()))],{percentile:r}]);if(!a[s(431)]||a.error)throw new _x(hx[s(420)+s(290)],s(323)+s(306)+s(282)+s(415),new Px({txDump:t[s(299)]}));n("[getPriori"+s(362)+"ate] Got Triton prio"+s(337)+"esult, cal"+s(368));let c=a[s(431)];c[s(357)](((e,t)=>e.slot-t[s(384)])),i>0&&(c=c[s(414)](0,i)),c[s(357)](((e,t)=>e[s(440)+s(455)]-t["prioritiza"+s(455)]));const l=Math.floor(c.length/2);return c[s(408)]%2?{mode:s(416),value:c[l]["prioritiza"+s(455)]}:{mode:s(416),value:Math[s(410)]((c[l-1][s(440)+s(455)]+c[l][s(440)+s(455)])/2)}}(e,{serialized:l,lockedWritableAccounts:c},n,i);default:throw new _x(hx[s(420)+s(290)],s(305)+s(411)+"ion mode: "+r,new Px({txDump:l}))}}(e,t,t.priorityFee[a(534)+"rityLamports"],n.estimationMode,i).then((e=>r(e)))[a(512)]((e=>{i(e),r(void 0)})).finally((()=>r(void 0)))}))]);if(null!==h[o(503)][o(558)]){if(o(508)==o(508))throw new _x(hx[o(549)+o(649)],o(596)+o(530)+" "+JSON[o(523)](h[o(503)][o(558)]),new Px({txDump:Buffer[o(657)](u).toString("base64"),logs:null!==(c=h[o(503)][o(675)])&&void 0!==c?c:void 0,err:h.value.err}));{const e=_0xa4e524[o(494)](_0x1d3443[o(547)][0]);this[o(520)+"ntry"](e,_0x3218e6[o(503)][o(539)+"lockHeight"],null===_0x428290||void 0===_0x438d2a?void 0:_0x15cf3a[o(501)+o(643)],null===_0x365afa||void 0===_0x2446bc?void 0:_0x52593c[o(635)+o(673)]),_0x2066f7[o(600)]([e,_0x4ad23f[o(657)](_0x3e3f21[o(588)]())[o(524)]("base64")])}}return{context:h[o(518)],value:h[o(503)],estimation:d}}(this.connection,e,m,{estimationMode:0===t?b:n(606)},_,!1)))),x=E[0][n(536)],S=t[n(543)](((e,t)=>function(e,t,r,n,i){const s=Fx;var o,a,c;const l=(r,n)=>{const i=Fx;var s;if("bIjyT"===i(363))return new _x(r,n,new Px({txDump:Rx(Mx(e)?e:Bx(e)),logs:null!==(s=t[i(423)][i(367)])&&void 0!==s?s:void 0}));_0x1f3300=_0x55e752[i(378)+"e"].targetPriorityLamports};switch(null===(o=e[s(378)+"e"])||void 0===o?void 0:o.mode){case"none":return Mx(e)?zx(e,2e5*e[s(311)][s(370)+"structions"][s(408)],null):Bx(jx(e,null,null));case s(351):{const t=Ux(e[s(378)+"e"][s(325)],null!==(a=e.priorityFee["microLampo"+s(451)])&&void 0!==a?a:null,i,r,n);return Mx(e)?zx(e,e[s(378)+"e"][s(325)],t):Bx(jx(e,e[s(378)+"e"].limit,t))}case"auto":{if(!t[s(423)][s(454)+s(448)])throw l(hx[s(420)+s(290)],s(323)+s(380)+s(304)+s(346)+s(327));const o=Math.ceil(t[s(423)][s(454)+s(448)]*(100+(null!==(c=e[s(378)+"e"]["autoLimitS"+s(376)])&&void 0!==c?c:10))/100);let a=null;if(e.priorityFee[s(402)+s(374)+"ts"]===s(443)||e[s(378)+"e"]["targetPrio"+s(374)+"ts"]===s(336)){if(void 0===t[s(354)])throw l(hx[s(420)+s(290)],"Failed to "+s(360)+"mated prio"+s(353));a=t[s(354)][s(396)]===s(335)?t[s(354)][s(423)]:Nx(t.estimation.value,o)}else if("asIs"===e[s(378)+"e"][s(402)+s(374)+"ts"]){const t=function(e){const t=Fx;let r,n,i=0;if(Mx(e)){if("aBglJ"!==t(358))throw new _0x2edc3e(_0x24e3a0["PriorityFe"+t(290)],"Wrong para"+t(328)+t(330)+t(375)+"value whil"+t(356)+"teUnits ix"+t(334),new _0x3a3de1({txDump:_0xfc00d8(_0x4d334a)}));{const s=e[t(311)].staticAccountKeys;i=e[t(311)][t(370)+t(314)][t(408)];for(const i of e[t(311)][t(370)+"structions"]){if(t(343)===t(441)){const e=[];return null!==_0x328c7d&&e.push(_0x1ce549["setCompute"+t(394)]({units:_0x2e7726})),null!==_0x173323&&("asIs"===_0x19d329?e.push(..._0x2c809d[t(429)+"ns"][t(436)]((e=>e[t(349)][t(398)](_0x13a83e[t(349)])&&e[t(446)][0]===_0x23f972))):e[t(332)](_0x1090f3["setCompute"+t(403)]({microLamports:_0x563e8b}))),{..._0x18b6ea,instructions:[...e,..._0x3c1377.instructions.filter((e=>!e[t(349)][t(398)](_0x339e9d[t(349)])))]}}i.data[t(408)]>0&&i.data[t(408)]<15&&s[i[t(302)+"ndex"]].equals(Gm.ComputeBudgetProgram[t(349)])&&("ULfmh"!==t(295)?_0x556cf1[t(332)](_0x332b2c["setCompute"+t(403)]({microLamports:_0x4aca78})):3===i[t(446)][0]?t(324)===t(355)?_0x415655===t(387)?_0x3e1824[t(332)](..._0x13827a[t(429)+"ns"][t(436)]((e=>e.programId[t(398)](_0x153392.programId)&&e[t(446)][0]===_0x27c91b))):_0x395638[t(332)](_0x15ebc8[t(424)+"UnitPrice"]({microLamports:_0x4321c7})):r=Buffer[t(405)](i[t(446)])[t(371)+"64LE"](1):2===i.data[0]&&(t(444)!=t(444)?_0x3a7359[t(332)](..._0x2adb41.instructions[t(436)]((e=>e.programId[t(398)](_0x26660e[t(349)])&&e[t(446)][0]===_0x41a942))):n=Buffer[t(405)](i[t(446)])[t(445)+"E"](1)))}}}else if(t(341)!=t(341))_0x188314=_0xb2d690[t(405)](_0x388fb6[t(446)])[t(445)+"E"](1);else{i=e[t(429)+"ns"][t(408)];for(const i of e[t(429)+"ns"].filter((e=>e.data[t(408)]>0&&e[t(446)][t(408)]<15&&e[t(349)][t(398)](Gm.ComputeBudgetProgram[t(349)])))){if(t(379)===t(422))return _0x4140e1(_0x2a0b27)?_0x128116(_0x23090a,2e5*_0x100734[t(311)][t(370)+t(314)][t(408)],null):_0xe598c7(_0x3cb05c(_0x45bdfd,null,null));3===i.data[0]?r=Buffer[t(405)](i[t(446)])[t(371)+t(409)](1):2===i.data[0]&&(n=Buffer[t(405)](i[t(446)])[t(445)+"E"](1))}}return void 0===n&&(n=i*Ix.LIMIT_PER_IX),void 0===r?null:t(315)==t(315)?Nx(Number(r),n):void(_0x230a1d[t(446)][0]===_0x1be2f1?_0x287907=_0x42aa40[t(405)](_0x5670a6[t(446)])["readBigInt"+t(409)](1):_0x3f3358.data[0]===_0x2c8fd8&&(_0x1ada09=_0x37ea35.from(_0x1f700c[t(446)])[t(445)+"E"](1)))}(e);if(null===t)throw l(hx[s(420)+s(290)],s(350)+"to preserv"+s(292)+s(373)+s(438)+s(284)+s(369)+s(340)+s(347)+s(456));a=t}else void 0!==e.priorityFee["targetPrio"+s(374)+"ts"]&&(a=e[s(378)+"e"][s(402)+s(374)+"ts"]);if(null===a)throw l(hx[s(420)+s(290)],"Failed to get curren"+s(361)+s(283)+"lue");const u=Ux(o,Lx(a,o),i,r,n);return Mx(e)?zx(e,o,u):Bx(jx(e,o,u))}}return Mx(e)?e:Bx(e)}(e,{...E[t],estimation:x},w,v,_))),A=await this[n(502)]["getLatestB"+n(628)+"dContext"]({commitment:y});for(const e of S)n(636)!=n(636)?_0x4f5935(_0x27a1eb,_0x12d8c9,_0x58f079[n(565)+"e"][n(534)+n(609)+"ts"],_0x30f974[n(536)+n(572)],_0x4f3e95).then((e=>_0x2c1579(e)))[n(512)]((e=>{_0x28336e(e),_0x3f3dd5(_0x12b6dd)})).finally((()=>_0x11de17(_0x9db446))):e.message[n(564)+n(499)]=A[n(503)][n(531)];const I=await e[n(591)+"nsactions"](S,null==r?void 0:r[n(593)+"Signers"]),k=[];I[n(543)]((e=>{const t=n;if("RVExs"===t(584)){const n=bx()[t(494)](e[t(547)][0]);this[t(520)+t(533)](n,A[t(503)][t(539)+"lockHeight"],null==r?void 0:r[t(501)+t(643)],null==r?void 0:r[t(635)+t(673)]),k[t(600)]([n,Buffer[t(657)](e[t(588)]())[t(524)]("base64")])}else null===(_0x2cebe2=null===_0x3dc848||void 0===_0x42dedc?void 0:_0xcf9efb[t(637)+t(616)])||void 0===_0x30ae6d||_0x7b94ac[t(594)](_0x301bb0,_0x183231[t(543)]((([e])=>e)))})),null===(f=null==r?void 0:r[n(573)])||void 0===f||f[n(594)](r,n(554)+n(553)+k[n(543)]((([e,t])=>t))[n(567)](n(651)));try{null===(p=null==r?void 0:r[n(637)+n(616)])||void 0===p||p[n(594)](r,k.map((([e])=>e)))}catch{null===(g=null==r?void 0:r[n(573)])||void 0===g||g[n(594)](r,"Failed to "+n(597)+n(679))}return await Promise[n(648)](k[n(543)]((([e,t])=>this[n(582)+n(601)+n(650)+n(639)](e,t,{skipPreflight:null==r?void 0:r["skipPrefli"+n(529)],preflightCommitment:m},{blockhashCommitment:y,additionalConnections:null==r?void 0:r["additional"+n(509)+"s"],maxSendCount:null==r?void 0:r["txMaxSendC"+n(521)]}))))}}function Kx(){var e=["18543613Eezlyx","507564LVZPlK","4kaiqOk","81697HvWXFf","456831xaPgTq","5166170dAzekJ","25719jfXrwt","7616510OvNezT","30dCiyjc","120aGhzFa","294wSpFtT"];return(Kx=function(){return e})()}function Gx(e,t){var r=Kx();return(Gx=function(e,t){return r[e-=288]})(e,t)}!function(e){for(var t=Gx,r=e();;)try{if(588003==-parseInt(t(296))/1+-parseInt(t(292))/2*(parseInt(t(290))/3)+parseInt(t(297))/4*(-parseInt(t(289))/5)+-parseInt(t(294))/6*(-parseInt(t(298))/7)+-parseInt(t(293))/8*(-parseInt(t(288))/9)+-parseInt(t(291))/10+parseInt(t(295))/11)break;r.push(r.shift())}catch(e){r.push(r.shift())}}(Kx);class Zx{get accountChanged(){return this.accountChanged$.asObservable()}get disconnected(){return this.disconnect$.asObservable()}get error(){return this.error$.asObservable()}getNetworkType(){return W.SOLANA}get chainChanged(){return this.chainChanged$.asObservable()}constructor(e){this.walletId=e,this.accountChanged$=new Le,this.chainChanged$=new Le,this.disconnect$=new Le,this.error$=new Le,this.publicKey=null,this.provider=null}async getPublicKey(){return this.publicKey}setPublicKey(e){this.publicKey=e}setProvider(e){this.provider=e,this.provider?e.on("accountChanged",(async e=>{this.setPublicKey(e),await this.provider.connect()})):this.setPublicKey(null)}async request(e,t){const r=new H,n=new Gm.Connection(r.getChain(w.Solana).networkParams.defaultRpcUrl);if(Ue()&&console.log("PhantomWalletService::request",e,t),await n.getLatestBlockhash({commitment:"finalized"}),"signAllTransactions"==e){const e=t.map((e=>{let t=null;return t="string"==typeof e.tx?Gm.VersionedTransaction.deserialize(Buffer.from(e.tx,"base64")):{blockhash:(r=e.tx).blockhash,instructions:r.instructions.map((e=>function(e){return new Gm.TransactionInstruction({keys:e.keys.map((e=>({isSigner:e.isSigner,isWritable:e.isWritable,pubkey:new Gm.PublicKey(e.pubkey)}))),programId:new Gm.PublicKey(e.programId),data:Buffer.from(e.data,"base64")})}(e))),ALTs:r.ALTs?.map((e=>{return t=e,new Gm.AddressLookupTableAccount({key:new Gm.PublicKey(t.key),state:{addresses:t.state.addresses.map((e=>new Gm.PublicKey(e))),deactivationSlot:t.state.deactivationSlot,lastExtendedSlot:t.state.lastExtendedSlot,lastExtendedSlotStartIndex:t.state.lastExtendedSlotStartIndex,authority:t.state.authority?new Gm.PublicKey(t.state.authority):void 0}});var t})),payer:new Gm.PublicKey(r.payer),priorityFee:r.priorityFee},t.priorityFee=e.priorityFee,t.rpcs=e.rpcs,t.params=e.params,t;var r}));return await this.sendAllNew(e)}if("signTransaction"==e){const e="string"==typeof t.tx?Gm.VersionedTransaction.deserialize(Buffer.from(RE.bytes.bs58.decode(t))):t.tx;return e.priorityFee=t.priorityFee,e.rpcs=t.rpcs,e.params=t.params,await this.sendAllNew([e])}return null}async sendAllNew(e,t=""){const r=new H;let n=e[0].rpcs||[];n?.length||(n=[r.getChain(w.Solana).networkParams.defaultRpcUrl]);const i=new Gm.Connection(n[0]);let s=null,o=e[0].params;if(e.forEach((e=>{delete e.rpcs,delete e.params})),e.some((e=>!e.priorityFee))){if(o.targetPriorityLamports>y.maxPriorityLamportsPerTransaction)throw new De(Me.MAX_TARGET_PRIORITY_LAMPORTS);console.log("SolanaWallet::sendAllNew::targetPriorityLamports",o.targetPriorityLamports)}for(let t of[i])try{let r=Vx.mapRpcUrlToEngine(t.rpcEndpoint);"unknown"==r&&(r=null);const i=new Vx(t,Ue()?console.log.bind(console):()=>{}),s=await i.sendAllTransactions(this.provider,e.map((e=>(e.priorityFee||(e.priorityFee={mode:"auto",autoLimitSlippage:12,targetPriorityLamports:r||o?.targetPriorityLamports||y.targetPriorityLamports}),e))),{logFn:Ue()?console.log:()=>{},skipPreflight:!0,txMaxSendCount:15,blockhashCommitment:"finalized",estimateOnlySingleTx:!0,commitment:"confirmed",txProcessingTimeout:4e4,additionalConnections:n.length>1?n.slice(1).map((e=>new Gm.Connection(e))):void 0,priority:o.priority&&r?{maxPriorityLamportsPerTransaction:o?.priority?.maxPriorityLamportsPerTransaction||y.maxPriorityLamportsPerTransaction,priorityLamportsEstimationMode:o?.priority?.priorityLamportsEstimationMode||px.HIGH,minPriorityLamportsPerTransaction:y.minPriorityLamportsPerTransaction}:null});return s}catch(e){if("Failed to fetch"!=e.message)throw e;s=e}throw s}}class Yx extends Zx{constructor(){super(Oe.Phantom)}async disconnect(){if(this.provider?.disconnect)try{await this.provider.disconnect()}catch(e){Ue()&&console.error("PhantomWalletService::disconnect",e)}this.setProvider(null)}setProvider(e){this.provider=e,this.provider?e.on("accountChanged",(async e=>{if(e)this.setPublicKey(e),this.accountChanged$.next([e.toString()]);else try{const e=await this.provider.connect();this.setPublicKey(e.publicKey),this.accountChanged$.next(e.publicKey.toString())}catch(e){await this.disconnect(),this.accountChanged$.next([""])}})):this.setPublicKey(null)}async connect(e){const t=await this.detectProvider(500,2);if(!t)throw new De(Me.WALLET_NOT_FOUND);try{const r=e?.quiet?await t.connect({onlyIfTrusted:!0}):await t.connect();return this.setPublicKey(r.publicKey),this.setProvider(t),{publicKey:r.publicKey.toString()}}catch(e){if(e.code==Yn)throw new De(Me.USER_REJECTED);throw e}}async detectProvider(e,t){if(t<=0)return null;do{const t=await Jx({timeout:e});if(t)return t}while(--t);return null}}function Jx({timeout:e=3e3,mustBePhantom:t=!1}={}){let r=!1;return new Promise((n=>{function i(){if(r)return;r=!0,window.removeEventListener("ethereum#initialized",i);const e=window.phantom?.solana;!e||t&&!e.isPhantom?n(null):n(e)}window.solana?i():(window.addEventListener("solana#initialized",i,{once:!0}),setTimeout((()=>{i()}),e))}))}class Xx extends Be{constructor(){super(Oe.PhantomEVM)}async disconnect(){if(this.provider?.disconnect)try{await this.provider.disconnect()}catch(e){Ue()&&console.error("PhantomEVMWalletService::disconnect",e)}this.setProvider(null)}async connect(e){const t=Qn(Xn.Phantom);t&&Ue()&&console.log("PhantomEVMWalletService::connect provider from eip6963");const r=window,n=t||r.phantom?.ethereum;if(!n)throw new De(Me.CONNECT_ERROR,{walletId:this.walletId});return this.setProvider(n),new Promise((async(t,r)=>{try{if(Ue()&&console.log("PhantomEVMWalletService::connect getAccount"),!await this.getAccount())try{Ue()&&console.log("PhantomEVMWalletService::connect requestAccounts"),!e&&await this.requestAccounts()}catch(e){e.code===Yn?r(new De(Me.USER_REJECTED)):-32002===e.code&&r(new De(Me.WALLET_ALREAY_PROCESSING))}Ue()&&console.log("PhantomEVMkWalletService::connect resolve"),t()}catch(e){-32002===e.code?r(new De(Me.WALLET_ALREAY_PROCESSING)):r(e)}}))}setProvider(e){this.provider=e,this.provider&&"function"==typeof e.on&&(e.on("accountsChanged",(async e=>{e?.length&&this.accountChanged$.next(e||[""])})),e.on("disconnect",(()=>{this.disconnect$.next()})),e.on("chainChanged",(e=>{this.chainChanged$.next(e)})))}}class Qx{async request(e,t,r){Ue()&&console.log("ProxyWalletListener::request",event,e.getOrigin(),e.getWidgetId());const n=t?.walletId,i=t?.method,s=t?.params;if(r&&i)switch(i){case"enable":if(n)return await this.connect(n,r,s,e);break;case"disconnect":if(n)return await this.disconnect(n,r,e);break;case"sendAsync":{const e=this.wallets[n];if(e)return await e.sendAsync(s)}break;default:if(n){const t=this.wallets[n];if(t)return await t.request(i,s);throw e.disconnect(),new De(Me.WALLET_NOT_FOUND)}}}constructor(){this.wallets={[Oe.Coinbase]:new Zn,[Oe.Metamask]:new ei,[Oe.WalletConnect]:new Km,[Oe.Phantom]:new Yx,[Oe.PhantomEVM]:new Xx,[Oe.ExternalEvmWallet]:null},this.activeWallet=null,this.destroyEvents={},this.event$=new Le}async disconnect(e,t,r){const n=this.wallets[e];if(!n)throw r.disconnect(),new De(Me.WALLET_NOT_FOUND);return await n.disconnect(),this.destroyEvents[e]?.next(),this.destroyEvents[e]=null,this.activeWallet=null,null}async connect(e,t,r,n){const i=this.wallets[e];if(i){const t=await i.connect(r);return this.activeWallet=i,this.destroyEvents[e]=new Le,i.accountChanged.pipe(We(this.destroyEvents[e])).subscribe((e=>i===this.activeWallet&&this.sendToWidgetEvent(this.activeWallet.getNetworkType()==W.SOLANA?"accountChanged":"accountsChanged",e,n))),i.disconnected.pipe(We(this.destroyEvents[e])).subscribe((t=>{this.destroyEvents[e]?.next(),this.destroyEvents[e]=null,this.sendToWidgetEvent("disconnect",t,n)})),i.chainChanged.pipe(We(this.destroyEvents[e])).subscribe((e=>{i===this.activeWallet&&this.sendToWidgetEvent("chainChanged",e,n)})),i.error.pipe(We(this.destroyEvents[e])).subscribe((e=>i===this.activeWallet&&this.sendToWidgetEvent("error",e,n))),t}throw n.disconnect(),new De(Me.WALLET_NOT_FOUND)}sendToWidgetEvent(e,t,r){this.event$.next({widgetId:r.getWidgetId(),parentURI:r.getParentURI(),event:e,networkType:this.activeWallet.getNetworkType(),data:t})}async setExternalEVMWallet(e){this.wallets[Oe.ExternalEvmWallet]&&await this.wallets[Oe.ExternalEvmWallet].disconnect(),this.activeWallet=this.wallets[Oe.ExternalEvmWallet]=e}async setExternalSolanaWallet(e){this.wallets[Oe.ExternalSolanaWallet]&&await this.wallets[Oe.ExternalSolanaWallet].disconnect(),this.activeWallet=this.wallets[Oe.ExternalSolanaWallet]=e}}var eS,tS;!function(e){e.Order="order",e.Bridge="bridge",e.SingleChainSwap="singleChainSwap",e.Ready="ready",e.NeedConnect="needConnect",e.CallData="callData",e.InputChainChanged="inputChainChanged",e.OutputChainChanged="outputChainChanged",e.InputTokenChanged="inputTokenChanged",e.OutputTokenChanged="outputTokenChanged",e.Wallet="Wallet",e.OrderValidation="orderValidation",e.ContentHeightChanged="contentHeightChanged"}(eS||(eS={})),function(e){e.ExternalEVMWallet="externalEVMWallet",e.ExternalSolanaWallet="externalSolanaWallet",e.Disconnect="disconnect",e.Response="response",e.Wallet="Wallet",e.ChangeInputChain="changeInputChain",e.ChangeOutputChain="changeOutputChain",e.ChangeInputToken="changeInputToken",e.ChangeOutputToken="changeOutputToken",e.SetReceiverAddress="setReceiverAddress",e.SetAffiliateFee="setAffiliateFee"}(tS||(tS={})),window.deBridge={wallets:{evm:{Metamask:"METAMASK",CoinbaseWallet:"COINBASEWALLET",WalletConnect:"WALLETCONNECT",BraveWallet:"Brave Wallet",UnstoppableDomains:"UNSTOPPABLEDOMAINS",Frontier:"Frontier",TrustWallet:"Trust Wallet",Fordefi:"Fordefi",Phantom:"PHANTOM EVM",Backpack:"Backpack EVM",Rabby:"RABBY",OneInchWallet:"ONEINCHWALLET"},solana:{Phantom:"PHANTOM",Solflare:"Solflare",Salmon:"Salmon",Glow:"Glow",SolflareMetamask:"SolflareMetamask",Fordefi:"Fordefi Solana",Backpack:"Backpack",BraveWallet:"Brave",TrustWallet:"Trust",CoinbaseWallet:"Coinbase Wallet"}},widget:e=>{window.deBridge.disableLogs=e.disableLogs,e.widgetMode=!0,e.width||(e.width="600"),e.height||(e.height="800");var t=document.querySelector("#"+e.element);if(!t)throw new Error(`There isn't element with id ${e.element}`);var r=document.createElement("iframe");r.width=e.width+"px",r.height=e.height+"px",r.style.border="none",r.className="debridge-widget-iframe",Array.isArray(e.disabledWallets)&&(e.disabledWallets=btoa(JSON.stringify(e.disabledWallets)));var n={widgetMode:!0,...e};try{const e=window.ethereum;e?.isMetaMask&&(n.isMetamask=!0),(e?.isCoinbaseWallet||e?.isCoinbaseBrowser)&&(n.isCoinbaseWallet=!0),window?.phantom?.ethereum?.isPhantom&&(n.isPhantom=!0),window?.solana&&(n.isPhantom=!0)}catch(e){}n.mode&&"deswap"!=n.mode||(n.mode="deswap-widget"),n.widgetId=Date.now();var i="https://app.debridge.finance";try{var s=document.querySelector('script[src*="/assets/scripts/widget.js"]');if(s){var o=new URL(s.src).origin;o&&(new URL(o),i=o)}}catch(e){}function a(e,t=null,s=null,o=!1){r.contentWindow.postMessage({widgetId:n.widgetId,parentURI:n.parentURI,event:e,params:t,requestId:s,isRejected:o},i)}n.parentURI=window.location.href;const c=new Qx;c.event$.subscribe((e=>{a(tS.Wallet,e)}));const l={getWidgetId:function(){return n.widgetId},getOrigin:function(){return i},getFrame:function(){return r},getParentURI:function(){return n.parentURI},on:function(e,t){u[e]&&!u[e].includes(t)&&(e==eS.CallData&&(u[e]=[t]),e==eS.OrderValidation?u[e]=[t]:u[e].push(t))},off:function(e,t){u[e].includes(t)||(u[e]=u[e].filter((e=>e!=t)))},setExternalEVMWallet:function(e){c.setExternalEVMWallet(new ze(e.provider)),a(tS.ExternalEVMWallet,{name:e.name,imageSrc:e.imageSrc})},disconnect:function(){a(tS.Disconnect)},changeInputChain:function(e){a(tS.ChangeInputChain,{chainId:e})},setAffiliateFee:function(e){a(tS.SetAffiliateFee,e)},changeOutputChain:function(e){a(tS.ChangeOutputChain,{chainId:e})},changeInputToken:function(e){a(tS.ChangeInputToken,{address:e})},changeOutputToken:function(e){a(tS.ChangeOutputToken,{address:e})},setReceiverAddress:function(e){a(tS.SetReceiverAddress,{address:e})}},u={[eS.NeedConnect]:[],[eS.Order]:[],[eS.Bridge]:[],[eS.SingleChainSwap]:[],[eS.Ready]:[],[eS.CallData]:[],[eS.InputChainChanged]:[],[eS.OutputChainChanged]:[],[eS.InputTokenChanged]:[],[eS.OutputTokenChanged]:[],[eS.Wallet]:[async function(e,t,r){try{const n=await c.request(e,t,r);a(tS.Response,n,r,!1)}catch(e){a(tS.Response,e,r,!0)}}],[eS.OrderValidation]:[],[eS.ContentHeightChanged]:[]},h=new Promise((e=>{u[eS.Ready].push(e)}));window.addEventListener("message",(e=>{if(l.getOrigin()==e.origin&&e.data?.widgetId==l.getWidgetId()){const t=e.data?.requestId,n=e.data?.event,i=e.data?.params;if(n==eS.ContentHeightChanged&&i?.newHeight&&(r.height=i.newHeight+"px"),t&&n)try{u[n]&&(n==eS.CallData||n==eS.OrderValidation?function(e,t,r){if(u[e].length)try{const n=u[e][0](l,r);n?.then?n.then((e=>{a(tS.Response,e,t)})).catch((e=>{a(tS.Response,e,t,!0)})):a(tS.Response,n,t)}catch(e){a(tS.Response,e,t,!0)}else a(tS.Response,null,t)}(n,t,i):u[n].forEach((e=>e(l,i,t))))}catch(e){!i.disableLogs&&console.error("Widget::addEventListene::catch",e)}}}),!1);const d=i+"/"+n.mode+"?"+new URLSearchParams(n).toString();return r.src=d,t.append(r),h.disconnect=l.disconnect,h.disconnect=l.getWidgetId,h.disconnect=l.getOrigin,h.disconnect=l.getFrame,h.disconnect=l.getParentURI,h}}})()})();